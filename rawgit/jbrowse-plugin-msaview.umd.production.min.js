!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@jbrowse/core/Plugin"),require("@jbrowse/core/util"),require("react"),require("@material-ui/core/SvgIcon")):"function"==typeof define&&define.amd?define(["exports","@jbrowse/core/Plugin","@jbrowse/core/util","react","@material-ui/core/SvgIcon"],t):t((e=e||self).JBrowsePluginMsaView={},e.JBrowseExports["@jbrowse/core/Plugin"],e.JBrowseExports["@jbrowse/core/util"],e.JBrowseExports.react,e.JBrowseExports["@material-ui/core/SvgIcon"])}(this,(function(e,t,n,r,i){"use strict";function a(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,u,"next",e)}function u(e){a(o,r,i,s,u,"throw",e)}s(void 0)}))}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;var y="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function x(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function b(e,t){return e(t={exports:{}},t.exports),t.exports}var w=b((function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}}}));x(w);var N=b((function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}e.exports=t})),S=b((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=a.default.memo(a.default.forwardRef((function(t,r){return a.default.createElement(o.default,(0,n.default)({ref:r},t),e)})));return r.muiName=o.default.muiName,r};var n=w(N),a=w(r),o=w(i)}));x(S);var _=x(b((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=w(r),i=(0,w(S).default)(n.default.createElement("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 20H4v-4h4v4zm0-6H4v-4h4v4zm0-6H4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4z"}),"GridOn");t.default=i})));function D(e){var t=e.lib["mobx-state-tree"].types,n=(0,e.jbrequire)("@jbrowse/core/util/types/mst");return t.compose(e.lib["@jbrowse/core/pluggableElementTypes/models"].BaseViewModel,t.model("MsaView",{id:n.ElementId,type:t.literal("MsaView"),height:600,treeWidth:100,scrollTop:0,alignScrollLeft:0}).volatile((function(){return{error:void 0,volatileWidth:0,drawn:!1,margin:{left:20,top:20},hoverColumn:null}})).actions((function(e){return{setScroll:function(t,n){e.alignScrollLeft=t,e.scrollTop=n},setHoverColumn:function(t){e.hoverColumn=t},setError:function(t){e.error=t},setWidth:function(t){e.volatileWidth=t},setDrawn:function(t){e.drawn=t}}})).views((function(e){return{get initialized(){return e.volatileWidth>0},get menuItems(){return[]}}})))}var A=b((function(e){var t=function(e){var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=Object.create((t&&t.prototype instanceof f?t:f).prototype),a=new S(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=b(o,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,a),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l={};function f(){}function p(){}function d(){}var h={};h[i]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(_([])));g&&g!==t&&n.call(g,i)&&(h=g);var v=d.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){var r;this._invoke=function(i,a){function o(){return new t((function(r,o){!function r(i,a,o,s){var u=c(e[i],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function _(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:D}}function D(){return{value:void 0,done:!0}}return p.prototype=v.constructor=d,d.constructor=p,p.displayName=s(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,o,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(x.prototype),x.prototype[a]=function(){return this},e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(v),s(v,o,"Generator"),v[i]=function(){return this},v.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}})),M=b((function(e){const t=function(){let e={gf:{},gc:{},gs:{},gr:{},seqname:[],seqdata:{}};return Object.keys(e).forEach(t=>this[t]=e[t]),this},n=/^# STOCKHOLM 1.0/,r=/^\/\/\s*$/,i=/^#=GF\s+(\S+)\s+(.*?)\s*$/,a=/^#=GC\s+(\S+)\s+(.*?)\s*$/,o=/^#=GS\s+(\S+)\s+(\S+)\s+(.*?)\s*$/,s=/^#=GR\s+(\S+)\s+(\S+)\s+(.*?)\s*$/,u=/^\s*(\S+)\s+(\S+)\s*$/,c=/\S/,l=e=>"(At line "+(e+1)+") ",f=e=>{throw new Error(e)},p=e=>console.warn(e),d=(e,d)=>{const h=(d=d||{}).strict?f:d.quiet?()=>null:p;let m=[],g=null;return e.split("\n").forEach((e,p)=>{const d=()=>{g||(h(l(p)+"No format header: # STOCKHOLM 1.0"),g=new t)};let v;n.test(e)?(g&&h(l(p)+"No format footer: //"),g=new t):r.test(e)?(g?m.push(g):h(l(p)+"No format header: # STOCKHOLM 1.0"),g=null):(v=i.exec(e))?(d(),g.gf[v[1]]=g.gf[v[1]]||[],g.gf[v[1]].push(v[2])):(v=a.exec(e))?(d(),g.gc[v[1]]=g.gc[v[1]]||"",g.gc[v[1]]+=v[2]):(v=o.exec(e))?(d(),g.gs[v[2]]=g.gs[v[2]]||{},g.gs[v[2]][v[1]]=g.gs[v[2]][v[1]]||[],g.gs[v[2]][v[1]].push(v[3])):(v=s.exec(e))?(d(),g.gr[v[2]]=g.gr[v[2]]||{},g.gr[v[2]][v[1]]=g.gr[v[2]][v[1]]||"",g.gr[v[2]][v[1]]+=v[3]):(v=u.exec(e))?(d(),g.seqdata[v[1]]||(g.seqdata[v[1]]="",g.seqname.push(v[1])),g.seqdata[v[1]]+=v[2]):c.test(e)&&f(l(p)+"Malformed line")}),g&&(h("Warning: no end line //"),m.push(g)),m};function h(e,t){for(;e.length<t;)e=" "+e;return e}function m(e,t){for(;e.length<t;)e+=" ";return e}t.prototype.rows=function(){return this.seqname.length},t.prototype.columns=function(){let e=0;return this.seqname.forEach(t=>{e=Math.max(e,this.seqdata[t].length)}),Object.keys(this.gr).forEach(t=>Object.keys(this.gr[t]).forEach(n=>{e=Math.max(e,this.gr[t][n].length)})),e},t.prototype.allNames=function(){let e={},t=[],n=n=>{e[n]||(e[n]=!0,t.push(n))},r=e=>e.forEach(n);return r(this.seqname),r(Object.keys(this.seqdata)),Object.keys(this.gr).forEach(e=>r(Object.keys(this.gr[e]))),Object.keys(this.gs).forEach(e=>r(Object.keys(this.gs[e]))),t},t.prototype.allTags=function(){let e={};const t=t=>Object.keys(t).forEach(t=>e[t]=!0);return t(this.gc),t(this.gf),t(this.gr),t(this.gs),Object.keys(e).sort()},t.prototype.addRow=function(e,t){return this.seqdata[e]&&f("Duplicate row name"),this.seqname.push(e),this.seqdata[e]=t||"",this},t.prototype.deleteRow=function(e){return this.seqdata[e]||f("Row not found"),this.seqname=this.seqname.filter(t=>t!==e),delete this.seqdata[e],this},t.prototype.toString=function(e){e=e||{width:80,indentNames:!1};const t=this.allNames(),n=this.columns(),r=Math.max.apply(null,t.map(e=>e.length).concat([0])),i=Math.max.apply(null,this.allTags().map(e=>e.length).concat([0])),a=i?i+6:0,o=e.width?Math.max(1,e.width-r-a-1):n,s=e.indentNames?h:m,u=e.indentNames?(e,t)=>h(e,i)+" "+h(t,r):(e,t)=>m(e+" "+t,i+r+1);let c=[0];for(let e=o;e<n;e+=o)c.push(e);return"# STOCKHOLM 1.0\n"+Object.keys(this.gf).sort().map(e=>this.gf[e].map(t=>"#=GF "+s(e,i)+" "+t+"\n").join("")).join("")+Object.keys(this.gs).sort().map(e=>Object.keys(this.gs[e]).map(t=>this.gs[e][t].map(n=>"#=GS "+u(e,t)+" "+n+"\n").join("")).join("")).join("")+c.map(e=>Object.keys(this.gc).sort().map(t=>"#=GC "+s(t,i)+function(e){return h("",e)}(r+2)+this.gc[t].substr(e,o)+"\n").join("")+t.map(t=>Object.keys(this.gr).filter(e=>this.gr[e][t]).sort().map(n=>"#=GR "+u(n,t)+" "+this.gr[n][t].substr(e,o)+"\n").join("")+(this.seqdata[t]?s(t,r+a)+" "+this.seqdata[t].substr(e,o)+"\n":"")).join("")).join("\n")+"//\n"},t.prototype.toFasta=function(e){e=e||{width:80};const t=this.columns(),n=e.width||t;let r=[0];for(let e=n;e<t;e+=n)r.push(e);return this.allNames().map(e=>this.seqdata[e]?">"+e+"\n"+r.map(t=>this.seqdata[e].substr(t,n)+"\n").join(""):"").join("")},t.prototype.toRowList=function(e){return this.allNames().filter(e=>this.seqdata[e]).map(e=>[e,this.seqdata[e]])},e.exports={sniff:e=>n.test(e),validate:e=>{try{d(e,{strict:!0})}catch(e){return!1}return!0},parse:(e,t)=>{const n=d(e,t);return 0===n.length&&f("No alignments found"),n.length>1&&f("More than one alignment found"),n[0]},parseAll:d,fromSeqIndex:(e,n)=>{let r=new t;return(n=n||Object.keys(e)).forEach(t=>r.addRow(t,e[t])),r},fromRowList:e=>{let n=new t;return e.forEach(e=>n.addRow(e[0],e[1])),n},Stockholm:t}})),E=b((function(e,t){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(3);n.d(t,"parse",(function(){return r.a}));var i=n(4);n.d(t,"cast",(function(){return i.a}));var a=n(5);n.d(t,"getRoot",(function(){return a.a}));var o=n(6);n.d(t,"serialize",(function(){return o.a}));var s=n(7);n.d(t,"dfs",(function(){return s.a}));var u=n(8);n.d(t,"map",(function(){return u.a}));var c=n(9);n.d(t,"normalize",(function(){return c.a}))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=n(0);n.d(t,"Newick",(function(){return r.a})),n.d(t,"NewickTools",(function(){return i}))},function(e,t,n){var r=n(0);class i{constructor(e){this.getRoot=()=>r.getRoot(this.tree),this.dfs=e=>r.dfs(this.tree,e),this.map=e=>{this.tree=r.map(this.tree,e)},this.normalize=()=>r.normalize(this.tree),this.serialize=()=>r.serialize(this.tree),this.toString=()=>this.serialize(),this.clone=()=>new i(this.tree),this.equal=e=>this.serialize().toLowerCase()===e.serialize().toLowerCase(),this.parse=e=>r.parse(e),this.tree=r.cast(e)}}t.a=i},function(e,t,n){t.a=e=>{let t,n=[],r={},i=e.split(/\s*([;(),:])\s*/);for(let e=0;e<i.length;e++){let a=i[e];switch(a){case"(":t={},r.branchset=[t],n.push(r),r=t;break;case",":t={},n[n.length-1].branchset.push(t),r=t;break;case")":r=n.pop();break;case":":break;default:let o=i[e-1];")"===o||"("===o||","===o?r.name=a:":"===o&&(r.length=parseFloat(a))}}return r}},function(e,t,n){var r=n(0);t.a=e=>{if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e=r.parse(e)}return e}},function(e,t,n){var r=n(0);t.a=e=>{e=r.cast(e);for(let t in e)if(e.hasOwnProperty(t)&&"name"===t)return e[t]}},function(e,t,n){const r=e=>{let t="";return e.branchset&&e.branchset.length&&(t+=`(${e.branchset.map(r).join(",")})`),e.name&&(t+=e.name),e.length&&(t+=":"+e.length),t};t.a=e=>r(e)+";"},function(e,t,n){var r=n(0);t.a=(e,t)=>{t=t||function(e){return e};let n={};return function e(r){let i=r.branchset||[];if(0!==i.length)for(let a=0;a<i.length;a++)n[i[a].name]=i[a].length,r.branchset[a]=t(r.branchset[a]),e(i[a])}(e=r.cast(e)),n}},function(e,t,n){var r=n(0);t.a=(e,t)=>(t=t||function(e){return e},e=r.cast(e),r.dfs(e,null,t),e)},function(e,t,n){var r=n(0);t.a=e=>function(e){let t=r.dfs(e),n=0;for(let e in t)t.hasOwnProperty(e)&&(n+=t[e]);return r.dfs(e,null,(function(e){return e.length=e.length/n,e})),e}(e=r.cast(e))}])}));x(E);var C=E,T=b((function(e){const{calcDistance:t,calcDistanceMatrix:n,calcFiniteDistanceMatrix:r}=(()=>{const e=(e,t)=>{let n=t.alphabetSize;if(!n)switch((t.alphabet||"DNA").toUpperCase()){case"PROTEIN":case"AMINO":n=20;break;case"AUTO":n=(e=>{let t={};return e.forEach(e=>e.split("").forEach(e=>{(e=>"-"==e||"."==e)(e)||(t[e]=!0)})),Object.keys(t).sort()})(e).length;break;case"DNA":case"RNA":default:n=4}return n},t=(e,t)=>t.preserveCase?e:e.map(e=>e.toUpperCase()),n=(n,r,i)=>{if(n.length!=r.length)return Infinity;const a=t([n,r],i=i||{}),o=e(a,i);let s=0,u=a[0].length;for(let e=0;e<a[0].length;++e)a[0][e]!=a[1][e]&&++s;const c=s/u,l=(o-1)/o;return c>=l?Infinity:Math.max(0,-l*Math.log(1-c/l))},r=(r,i)=>{r=t(r,i=i||{});const a=e(r,i);let o=new Array(r.length).fill(0).map(e=>new Array(r.length).fill(0));for(let e=0;e<r.length-1;++e)for(let t=e+1;t<r.length;++t)o[e][t]=o[t][e]=n(r[e],r[t],{alphabetSize:a});return o};return{calcDistance:n,calcDistanceMatrix:r,calcFiniteDistanceMatrix:(e,t)=>{const n=r(e,t),i=2*n.reduce((e,t)=>t.reduce((e,t)=>Infinity===t?e:Math.max(e,t),e),0)+1;return n.map(e=>e.map(e=>Infinity===e?i:e))}}})();e.exports={calcDistance:t,calcDistanceMatrix:n,calcFiniteDistanceMatrix:r}})),R=b((function(e,t){!function(e){function t(e,t){if(e===t)return 0;var n=String(e),r=String(t);return n===r?0:n<r?-1:1}function n(e,t,n,r){var i=t+1;if(i===n)return 1;if(r(e[i++],e[t])<0){for(;i<n&&r(e[i],e[i-1])<0;)i++;!function(e,t,n){for(n--;t<n;){var r=e[t];e[t++]=e[n],e[n--]=r}}(e,t,i)}else for(;i<n&&r(e[i],e[i-1])>=0;)i++;return i-t}function r(e,t,n,r,i){for(r===t&&r++;r<n;r++){for(var a=e[r],o=t,s=r;o<s;){var u=o+s>>>1;i(a,e[u])<0?s=u:o=u+1}var c=r-o;switch(c){case 3:e[o+3]=e[o+2];case 2:e[o+2]=e[o+1];case 1:e[o+1]=e[o];break;default:for(;c>0;)e[o+c]=e[o+c-1],c--}e[o]=a}}function i(e,t,n,r,i,a){var o=0,s=0,u=1;if(a(e,t[n+i])>0){for(s=r-i;u<s&&a(e,t[n+i+u])>0;)o=u,(u=1+(u<<1))<=0&&(u=s);u>s&&(u=s),o+=i,u+=i}else{for(s=i+1;u<s&&a(e,t[n+i-u])<=0;)o=u,(u=1+(u<<1))<=0&&(u=s);u>s&&(u=s);var c=o;o=i-u,u=i-c}for(o++;o<u;){var l=o+(u-o>>>1);a(e,t[n+l])>0?o=l+1:u=l}return u}function a(e,t,n,r,i,a){var o=0,s=0,u=1;if(a(e,t[n+i])<0){for(s=i+1;u<s&&a(e,t[n+i-u])<0;)o=u,(u=1+(u<<1))<=0&&(u=s);u>s&&(u=s);var c=o;o=i-u,u=i-c}else{for(s=r-i;u<s&&a(e,t[n+i+u])>=0;)o=u,(u=1+(u<<1))<=0&&(u=s);u>s&&(u=s),o+=i,u+=i}for(o++;o<u;){var l=o+(u-o>>>1);a(e,t[n+l])<0?u=l:o=l+1}return u}e.__esModule=!0,e.sort=function(e,i,a,s){if(!Array.isArray(e))throw new TypeError("Can only sort arrays");i?"function"!=typeof i&&(s=a,a=i,i=t):i=t,a||(a=0),s||(s=e.length);var u=s-a;if(!(u<2)){var c=0;if(u<32)return void r(e,a,s,a+(c=n(e,a,s,i)),i);var l=new o(e,i),f=function(e){for(var t=0;e>=32;)t|=1&e,e>>=1;return e+t}(u);do{if((c=n(e,a,s,i))<f){var p=u;p>f&&(p=f),r(e,a,a+p,a+c,i),c=p}l.pushRun(a,c),l.mergeRuns(),u-=c,a+=c}while(0!==u);l.forceMergeRuns()}};var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.array=null,this.compare=null,this.minGallop=7,this.length=0,this.tmpStorageLength=256,this.stackLength=0,this.runStart=null,this.runLength=null,this.stackSize=0,this.array=t,this.compare=n,this.length=t.length,this.length<512&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}return e.prototype.pushRun=function(e,t){this.runStart[this.stackSize]=e,this.runLength[this.stackSize]=t,this.stackSize+=1},e.prototype.mergeRuns=function(){for(;this.stackSize>1;){var e=this.stackSize-2;if(e>=1&&this.runLength[e-1]<=this.runLength[e]+this.runLength[e+1]||e>=2&&this.runLength[e-2]<=this.runLength[e]+this.runLength[e-1])this.runLength[e-1]<this.runLength[e+1]&&e--;else if(this.runLength[e]>this.runLength[e+1])break;this.mergeAt(e)}},e.prototype.forceMergeRuns=function(){for(;this.stackSize>1;){var e=this.stackSize-2;e>0&&this.runLength[e-1]<this.runLength[e+1]&&e--,this.mergeAt(e)}},e.prototype.mergeAt=function(e){var t=this.compare,n=this.array,r=this.runStart[e],o=this.runLength[e],s=this.runStart[e+1],u=this.runLength[e+1];this.runLength[e]=o+u,e===this.stackSize-3&&(this.runStart[e+1]=this.runStart[e+2],this.runLength[e+1]=this.runLength[e+2]),this.stackSize--;var c=a(n[s],n,r,o,0,t);r+=c,0!=(o-=c)&&0!==(u=i(n[r+o-1],n,s,u,u-1,t))&&(o<=u?this.mergeLow(r,o,s,u):this.mergeHigh(r,o,s,u))},e.prototype.mergeLow=function(e,t,n,r){var o=this.compare,s=this.array,u=this.tmp,c=0;for(c=0;c<t;c++)u[c]=s[e+c];var l=0,f=n,p=e;if(s[p++]=s[f++],0!=--r)if(1!==t){for(var d=this.minGallop;;){var h=0,m=0,g=!1;do{if(o(s[f],u[l])<0){if(s[p++]=s[f++],m++,h=0,0==--r){g=!0;break}}else if(s[p++]=u[l++],h++,m=0,1==--t){g=!0;break}}while((h|m)<d);if(g)break;do{if(0!==(h=a(s[f],u,l,t,0,o))){for(c=0;c<h;c++)s[p+c]=u[l+c];if(p+=h,l+=h,(t-=h)<=1){g=!0;break}}if(s[p++]=s[f++],0==--r){g=!0;break}if(0!==(m=i(u[l],s,f,r,0,o))){for(c=0;c<m;c++)s[p+c]=s[f+c];if(p+=m,f+=m,0==(r-=m)){g=!0;break}}if(s[p++]=u[l++],1==--t){g=!0;break}d--}while(h>=7||m>=7);if(g)break;d<0&&(d=0),d+=2}if(this.minGallop=d,d<1&&(this.minGallop=1),1===t){for(c=0;c<r;c++)s[p+c]=s[f+c];s[p+r]=u[l]}else{if(0===t)throw new Error("mergeLow preconditions were not respected");for(c=0;c<t;c++)s[p+c]=u[l+c]}}else{for(c=0;c<r;c++)s[p+c]=s[f+c];s[p+r]=u[l]}else for(c=0;c<t;c++)s[p+c]=u[l+c]},e.prototype.mergeHigh=function(e,t,n,r){var o=this.compare,s=this.array,u=this.tmp,c=0;for(c=0;c<r;c++)u[c]=s[n+c];var l=e+t-1,f=r-1,p=n+r-1,d=0,h=0;if(s[p--]=s[l--],0!=--t)if(1!==r){for(var m=this.minGallop;;){var g=0,v=0,y=!1;do{if(o(u[f],s[l])<0){if(s[p--]=s[l--],g++,v=0,0==--t){y=!0;break}}else if(s[p--]=u[f--],v++,g=0,1==--r){y=!0;break}}while((g|v)<m);if(y)break;do{if(0!=(g=t-a(u[f],s,e,t,t-1,o))){for(t-=g,h=1+(p-=g),d=1+(l-=g),c=g-1;c>=0;c--)s[h+c]=s[d+c];if(0===t){y=!0;break}}if(s[p--]=u[f--],1==--r){y=!0;break}if(0!=(v=r-i(s[l],u,0,r,r-1,o))){for(r-=v,h=1+(p-=v),d=1+(f-=v),c=0;c<v;c++)s[h+c]=u[d+c];if(r<=1){y=!0;break}}if(s[p--]=s[l--],0==--t){y=!0;break}m--}while(g>=7||v>=7);if(y)break;m<0&&(m=0),m+=2}if(this.minGallop=m,m<1&&(this.minGallop=1),1===r){for(h=1+(p-=t),d=1+(l-=t),c=t-1;c>=0;c--)s[h+c]=s[d+c];s[p]=u[f]}else{if(0===r)throw new Error("mergeHigh preconditions were not respected");for(d=p-(r-1),c=0;c<r;c++)s[d+c]=u[c]}}else{for(h=1+(p-=t),d=1+(l-=t),c=t-1;c>=0;c--)s[h+c]=s[d+c];s[p]=u[f]}else for(d=p-(r-1),c=0;c<r;c++)s[d+c]=u[c]},e}()}(t)}));x(R);var I=R,O=b((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.allocateSquareMatrix=function(e){for(var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=new Array(e),r=0;r<e;r++)n[r]=new Array(e),null!==t&&n[r].fill(t);return n},t.arrayCopy=function(e){for(var t=new Array(e.length),n=e.length;n--;)t[n]=e[n];return t},t.sumRows=function(e){for(var t=void 0,n=e.length,r=new Array(n),i=0;i<n;i++){t=0;for(var a=0;a<n;a++)void 0!==e[i][a]&&(t+=e[i][a]);r[i]=t}return r},t.sortWithIndices=function(e){for(var t=arguments.length<=1||void 0===arguments[1]?-1:arguments[1],r=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],i=e.length,a=new Array(i),o=new Array(i),s=0,u=0;u<i;u++)-1!==e[u]&&u!==t&&(a[s]=u,o[s++]=e[u]);a.length=s,o.length=s,r?n.sort(a,(function(t,n){return e[t]-e[n]})):a.sort((function(t,n){return e[t]-e[n]})),n.sort(a,(function(t,n){return e[t]-e[n]})),o.sortIndices=a;for(var c=0;c<s;c++)o[c]=e[a[c]];return o};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(I)}));x(O);var P=b((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.RapidNeighborJoining=void 0;var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.RapidNeighborJoining=function(){function e(t,n){var i=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],a=arguments.length<=3||void 0===arguments[3]?function(e){return e.name}:arguments[3];if(r(this,e),n.length==t.length){var o=this.N=n.length;if(this.cN=this.N,i){this.D=new Array(o);for(var s=0;s<o;s++)this.D[s]=(0,O.arrayCopy)(t[s])}else this.D=t;this.taxa=n,this.labelToTaxon={},this.currIndexToLabel=new Array(o),this.rowChange=new Array(o),this.newRow=new Array(o),this.labelToNode=new Array(2*o),this.nextIndex=o,this.initializeSI(),this.removedIndices=new Set,this.indicesLeft=new Set;for(var u=0;u<o;u++)this.currIndexToLabel[u]=u,this.indicesLeft.add(u);return this.rowSumMax=0,this.PNewick="",this.taxonIdAccessor=a,this}console.error("Row/column size of the distance matrix does not agree with the size of taxa matrix")}return n(e,[{key:"initializeSI",value:function(){var e=this.N;this.I=new Array(e),this.S=new Array(e);for(var t=0;t<e;t++){var n=(0,O.sortWithIndices)(this.D[t],t,!0);this.S[t]=n,this.I[t]=n.sortIndices}}},{key:"search",value:function(){for(var e=Infinity,t=this.D,n=this.cN-2,r=this.S,i=this.I,a=this.rowSums,o=this.removedIndices,s=this.rowSumMax,u=void 0,c=-1,l=-1,f=void 0,p=0;p<this.N;p++)o.has(p)||o.has(f=i[p][0])||(u=t[p][f]*n-a[p]-a[f])<e&&(e=u,c=p,l=f);for(var d=0;d<this.N;d++)if(!o.has(d))for(var h=0;h<r[d].length;h++)if(!o.has(f=i[d][h])){if(r[d][h]*n-a[d]-s>e)break;(u=t[d][f]*n-a[d]-a[f])<e&&(e=u,c=d,l=f)}return{minI:c,minJ:l}}},{key:"run",value:function(){var e=void 0,t=void 0,n=void 0,r=void 0,a=void 0,o=void 0,s=void 0,u=void 0,c=this;function l(e,t){var n=void 0;return e<c.N?(n=new i(c.taxa[e],t),c.labelToNode[e]=n):(n=c.labelToNode[e]).setLength(t),n}this.rowSums=(0,O.sumRows)(this.D);for(var f=0;f<this.cN;f++)this.rowSums[f]>this.rowSumMax&&(this.rowSumMax=this.rowSums[f]);for(;this.cN>2;){var p=this.search();r=this.D[e=p.minI][t=p.minJ]-(n=.5*this.D[e][t]+(this.rowSums[e]-this.rowSums[t])/(2*this.cN-4)),a=this.currIndexToLabel[t],o=l(this.currIndexToLabel[e],n),s=l(a,r),u=new i(null,null,o,s),this.recalculateDistanceMatrix(e,t);var d=(0,O.sortWithIndices)(this.D[t],t,!0);this.S[t]=d,this.I[t]=d.sortIndices,this.S[e]=this.I[e]=[],this.cN--,this.labelToNode[this.nextIndex]=u,this.currIndexToLabel[e]=-1,this.currIndexToLabel[t]=this.nextIndex++}var h=this.indicesLeft.values();e=h.next().value,t=h.next().value,a=this.currIndexToLabel[t],o=l(this.currIndexToLabel[e],n=r=this.D[e][t]/2),s=l(a,r),this.P=new i(null,null,o,s)}},{key:"recalculateDistanceMatrix",value:function(e,t){var n=this.D,r=n.length,i=0,a=void 0,o=void 0,s=this.removedIndices,u=this.rowSums,c=this.newRow,l=this.rowChange,f=0;s.add(e);for(var p=0;p<r;p++)s.has(p)||(c[p]=.5*((a=n[e][p]+n[t][p])-(o=n[e][t])),i+=c[p],l[p]=-.5*(a+o));for(var d=0;d<r;d++)n[e][d]=-1,n[d][e]=-1,s.has(d)||(n[t][d]=c[d],n[d][t]=c[d],u[d]+=l[d],u[d]>f&&(f=u[d]));u[e]=0,u[t]=i,i>f&&(f=i),this.rowSumMax=f,this.indicesLeft.delete(e)}},{key:"createNewickTree",value:function(e){if(e.taxon)this.PNewick+=this.taxonIdAccessor(e.taxon);else{this.PNewick+="(";for(var t=0;t<e.children.length;t++)this.createNewickTree(e.children[t]),t<e.children.length-1&&(this.PNewick+=",");this.PNewick+=")"}e.length&&(this.PNewick+=":"+e.length)}},{key:"getAsObject",value:function(){return this.P}},{key:"getAsNewick",value:function(){return this.PNewick="",this.createNewickTree(this.P),this.PNewick+=";",this.PNewick}}]),e}();var i=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?null:arguments[0],n=arguments.length<=1||void 0===arguments[1]?null:arguments[1],i=arguments.length<=2||void 0===arguments[2]?null:arguments[2],a=arguments.length<=3||void 0===arguments[3]?null:arguments[3];r(this,e),this.taxon=t,this.length=n,this.children=[],null!==i&&this.children.push(i),null!==a&&this.children.push(a)}return n(e,[{key:"setLength",value:function(e){this.length=e}}]),e}()}));x(P);var F={RapidNeighborJoining:P.RapidNeighborJoining,allocateSquareMatrix:O.allocateSquareMatrix},L={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e){return"number"==typeof e}function V(e){return e&&!0===e.constructor.prototype.isBigNumber||!1}function q(e){return e&&"object"===k(e)&&!0===Object.getPrototypeOf(e).isComplex||!1}function z(e){return e&&"object"===k(e)&&!0===Object.getPrototypeOf(e).isFraction||!1}function G(e){return e&&!0===e.constructor.prototype.isUnit||!1}function U(e){return"string"==typeof e}var j=Array.isArray;function Y(e){return e&&!0===e.constructor.prototype.isMatrix||!1}function H(e){return Array.isArray(e)||Y(e)}function K(e){return e&&e.isDenseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function Q(e){return e&&e.isSparseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function W(e){return e&&!0===e.constructor.prototype.isRange||!1}function $(e){return e&&!0===e.constructor.prototype.isIndex||!1}function X(e){return"boolean"==typeof e}function Z(e){return e&&!0===e.constructor.prototype.isResultSet||!1}function J(e){return e&&!0===e.constructor.prototype.isHelp||!1}function ee(e){return"function"==typeof e}function te(e){return e instanceof Date}function ne(e){return e instanceof RegExp}function re(e){return!(!e||"object"!==k(e)||e.constructor!==Object||q(e)||z(e))}function ie(e){return null===e}function ae(e){return void 0===e}function oe(e){return e&&!0===e.isAccessorNode&&!0===e.constructor.prototype.isNode||!1}function se(e){return e&&!0===e.isArrayNode&&!0===e.constructor.prototype.isNode||!1}function ue(e){return e&&!0===e.isAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function ce(e){return e&&!0===e.isBlockNode&&!0===e.constructor.prototype.isNode||!1}function le(e){return e&&!0===e.isConditionalNode&&!0===e.constructor.prototype.isNode||!1}function fe(e){return e&&!0===e.isConstantNode&&!0===e.constructor.prototype.isNode||!1}function pe(e){return e&&!0===e.isFunctionAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function de(e){return e&&!0===e.isFunctionNode&&!0===e.constructor.prototype.isNode||!1}function he(e){return e&&!0===e.isIndexNode&&!0===e.constructor.prototype.isNode||!1}function me(e){return e&&!0===e.isNode&&!0===e.constructor.prototype.isNode||!1}function ge(e){return e&&!0===e.isObjectNode&&!0===e.constructor.prototype.isNode||!1}function ve(e){return e&&!0===e.isOperatorNode&&!0===e.constructor.prototype.isNode||!1}function ye(e){return e&&!0===e.isParenthesisNode&&!0===e.constructor.prototype.isNode||!1}function xe(e){return e&&!0===e.isRangeNode&&!0===e.constructor.prototype.isNode||!1}function be(e){return e&&!0===e.isSymbolNode&&!0===e.constructor.prototype.isNode||!1}function we(e){return e&&!0===e.constructor.prototype.isChain||!1}function Ne(e){var t=k(e);return"object"===t?null===e?"null":Array.isArray(e)?"Array":e instanceof Date?"Date":e instanceof RegExp?"RegExp":V(e)?"BigNumber":q(e)?"Complex":z(e)?"Fraction":Y(e)?"Matrix":G(e)?"Unit":$(e)?"Index":W(e)?"Range":Z(e)?"ResultSet":me(e)?e.type:we(e)?"Chain":J(e)?"Help":"Object":"function"===t?"Function":t}function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e){var t=Se(e);if("number"===t||"string"===t||"boolean"===t||null==e)return e;if("function"==typeof e.clone)return e.clone();if(Array.isArray(e))return e.map((function(e){return _e(e)}));if(e instanceof Date)return new Date(e.valueOf());if(V(e))return e;if(e instanceof RegExp)throw new TypeError("Cannot clone "+e);return De(e,_e)}function De(e,t){var n={};for(var r in e)Te(e,r)&&(n[r]=t(e[r]));return n}function Ae(e,t){for(var n in t)Te(t,n)&&(e[n]=t[n]);return e}function Me(e,t){var n,r,i;if(Array.isArray(e)){if(!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(r=0,i=e.length;r<i;r++)if(!Me(e[r],t[r]))return!1;return!0}if("function"==typeof e)return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(n in e)if(!(n in t)||!Me(e[n],t[n]))return!1;for(n in t)if(!(n in e)||!Me(e[n],t[n]))return!1;return!0}return e===t}function Ee(e,t,n){var r,i=!0;Object.defineProperty(e,t,{get:function(){return i&&(r=n(),i=!1),r},set:function(e){r=e,i=!1},configurable:!0,enumerable:!0})}function Ce(e,t){if(t&&"string"==typeof t)return Ce(e,t.split("."));var n=e;if(t)for(var r=0;r<t.length;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}return n}function Te(e,t){return e&&Object.hasOwnProperty.call(e,t)}function Re(e){return e&&"function"==typeof e.factory}function Ie(e){return Object.keys(e).map((function(t){return e[t]}))}var Oe=["Matrix","Array"],Pe=["number","BigNumber","Fraction"];function Fe(e,t,n){if(void 0!==e[t]&&-1===n.indexOf(e[t])){var r=function(e,t){return e.map((function(e){return e.toLowerCase()})).indexOf(t.toLowerCase())}(n,e[t]);-1!==r?(console.warn('Warning: Wrong casing for configuration option "'+t+'", should be "'+n[r]+'" instead of "'+e[t]+'".'),e[t]=n[r]):console.warn('Warning: Unknown value "'+e[t]+'" for configuration option "'+t+'". Available options: '+n.map(JSON.stringify).join(", ")+".")}}function Le(){return(Le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ke=function(e){if(e)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(L)};Le(ke,L,{MATRIX_OPTIONS:Oe,NUMBER_OPTIONS:Pe});var Be=b((function(e,t){e.exports=function(){function e(){return!0}function t(){return!1}function n(){}return function r(){var i=[{name:"number",test:function(e){return"number"==typeof e}},{name:"string",test:function(e){return"string"==typeof e}},{name:"boolean",test:function(e){return"boolean"==typeof e}},{name:"Function",test:function(e){return"function"==typeof e}},{name:"Array",test:Array.isArray},{name:"Date",test:function(e){return e instanceof Date}},{name:"RegExp",test:function(e){return e instanceof RegExp}},{name:"Object",test:function(e){return"object"==typeof e&&null!==e&&e.constructor===Object}},{name:"null",test:function(e){return null===e}},{name:"undefined",test:function(e){return void 0===e}}],a={name:"any",test:e},o=[],s=[],u={types:i,conversions:s,ignore:o};function c(e){var t=k(u.types,(function(t){return t.name===e}));if(t)return t;if("any"===e)return a;var n=k(u.types,(function(t){return t.name.toLowerCase()===e.toLowerCase()}));throw new TypeError('Unknown type "'+e+'"'+(n?'. Did you mean "'+n.name+'"?':""))}function l(e){return e===a?999:u.types.indexOf(e)}function f(e){var t=k(u.types,(function(t){return t.test(e)}));if(t)return t.name;throw new TypeError("Value has unknown type. Value: "+e)}function p(e){return e.map((function(e){var t=e.types.map(y);return(e.restParam?"...":"")+t.join("|")})).join(",")}function d(e){var t=P(e);return!!t&&t.restParam}function h(e){return e.types.some((function(e){return null!=e.conversion}))}function m(t){if(t&&0!==t.types.length){if(1===t.types.length)return c(t.types[0].name).test;if(2===t.types.length){var n=c(t.types[0].name).test,r=c(t.types[1].name).test;return function(e){return n(e)||r(e)}}var i=t.types.map((function(e){return c(e.name).test}));return function(e){for(var t=0;t<i.length;t++)if(i[t](e))return!0;return!1}}return e}function g(e,t){return t<e.params.length?e.params[t]:d(e.params)?P(e.params):null}function v(e,t,n){var r=g(e,t);return(r?n?r.types.filter(x):r.types:[]).map(y)}function y(e){return e.name}function x(e){return null==e.conversion}function b(e,t){var n=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return Object.keys(t)}(B(e,(function(e){return v(e,t,!1)})));return-1!==n.indexOf("any")?["any"]:n}function w(e,t,n){var r,i,a,o=e||"unnamed",s=n;for(a=0;a<t.length;a++){var u=s.filter((function(e){var n=m(g(e,a));return(a<e.params.length||d(e.params))&&n(t[a])}));if(0===u.length){if((i=b(s,a)).length>0){var c=f(t[a]);return(r=new TypeError("Unexpected type of argument in function "+o+" (expected: "+i.join(" or ")+", actual: "+c+", index: "+a+")")).data={category:"wrongType",fn:o,index:a,actual:c,expected:i},r}}else s=u}var l=s.map((function(e){return d(e.params)?Infinity:e.params.length}));if(t.length<Math.min.apply(null,l))return i=b(s,a),(r=new TypeError("Too few arguments in function "+o+" (expected: "+i.join(" or ")+", index: "+t.length+")")).data={category:"tooFewArgs",fn:o,index:t.length,expected:i},r;var p=Math.max.apply(null,l);return t.length>p?((r=new TypeError("Too many arguments in function "+o+" (expected: "+p+", actual: "+t.length+")")).data={category:"tooManyArgs",fn:o,index:t.length,expectedLength:p},r):((r=new TypeError('Arguments of type "'+t.join(", ")+'" do not match any of the defined signatures of function '+o+".")).data={category:"mismatch",actual:t.map(f)},r)}function N(e){for(var t=999,n=0;n<e.types.length;n++)x(e.types[n])&&(t=Math.min(t,e.types[n].typeIndex));return t}function S(e){for(var t=999,n=0;n<e.types.length;n++)x(e.types[n])||(t=Math.min(t,e.types[n].conversionIndex));return t}function _(e,t){var n;return 0!=(n=e.restParam-t.restParam)||0!=(n=h(e)-h(t))||0!=(n=N(e)-N(t))?n:S(e)-S(t)}function D(e,t){var n,r,i=Math.min(e.params.length,t.params.length);if(0!=(r=e.params.some(h)-t.params.some(h)))return r;for(n=0;n<i;n++)if(0!=(r=h(e.params[n])-h(t.params[n])))return r;for(n=0;n<i;n++)if(0!==(r=_(e.params[n],t.params[n])))return r;return e.params.length-t.params.length}function A(e){var t,n,r,i,a=[],o=[];switch(e.types.forEach((function(e){e.conversion&&(a.push(c(e.conversion.from).test),o.push(e.conversion.convert))})),o.length){case 0:return function(e){return e};case 1:return t=a[0],r=o[0],function(e){return t(e)?r(e):e};case 2:return t=a[0],n=a[1],r=o[0],i=o[1],function(e){return t(e)?r(e):n(e)?i(e):e};default:return function(e){for(var t=0;t<o.length;t++)if(a[t](e))return o[t](e);return e}}}function M(e,t){return function e(n,r,i){if(r<n.length){var a,o=n[r],s=t?o.types.filter(x):o.types;if(o.restParam){var u=s.filter(x);a=u.length<s.length?[u,s]:[s]}else a=s.map((function(e){return[e]}));return B(a,(function(t){return e(n,r+1,i.concat([t]))}))}return[i.map((function(e,t){return{types:e,restParam:t===n.length-1&&d(n)}}))]}(e,0,[])}function E(e,r){if(0===Object.keys(r).length)throw new SyntaxError("No signatures provided");var i=[];Object.keys(r).map((function(e){return function(e,t,n){var r=[];return""!==e.trim()&&(r=e.split(",").map(T).map((function(e,t,r){var i=function(e,t){var n=0===e.indexOf("..."),r=(n?e.length>3?e.slice(3):"any":e).split("|").map(T).filter(R).filter(C),i=function(e,t){var n={};return e.forEach((function(e){-1!==t.indexOf(e.from)||-1===t.indexOf(e.to)||n[e.from]||(n[e.from]=e)})),Object.keys(n).map((function(e){return n[e]}))}(t,r),a=r.map((function(e){var t=c(e);return{name:e,typeIndex:l(t),test:t.test,conversion:null,conversionIndex:-1}})),o=i.map((function(e){var n=c(e.from);return{name:e.from,typeIndex:l(n),test:n.test,conversion:e,conversionIndex:t.indexOf(e)}}));return{types:a.concat(o),restParam:n}}(e,n);if(i.restParam&&t!==r.length-1)throw new SyntaxError('Unexpected rest parameter "'+e+'": only allowed for the last parameter');return i}))),r.some(O)?null:{params:r,fn:t}}(e,r[e],u.conversions)})).filter(I).forEach((function(e){var t=k(i,(function(t){return function(e,t){for(var n=Math.max(e.params.length,t.params.length),r=0;r<n;r++)if(!L(v(e,r,!0),v(t,r,!0)))return!1;var i=e.params.length,a=t.params.length,o=d(e.params),s=d(t.params);return o?s?i===a:a>=i:s?i>=a:i===a}(t,e)}));if(t)throw new TypeError('Conflicting signatures "'+p(t.params)+'" and "'+p(e.params)+'".');i.push(e)}));var a=B(i,(function(e){return(e?M(e.params,!1):[]).map((function(t){return{params:t,fn:e.fn}}))})).filter(I);a.sort(D);var o=a[0]&&a[0].params.length<=2&&!d(a[0].params),s=a[1]&&a[1].params.length<=2&&!d(a[1].params),f=a[2]&&a[2].params.length<=2&&!d(a[2].params),g=a[3]&&a[3].params.length<=2&&!d(a[3].params),y=a[4]&&a[4].params.length<=2&&!d(a[4].params),x=a[5]&&a[5].params.length<=2&&!d(a[5].params),b=o&&s&&f&&g&&y&&x,N=a.map((function(e){return function(e){var t,n,r,i;if(d(e)){var a=(t=(i=e,i.slice(0,i.length-1)).map(m)).length,o=m(P(e));return function(e){for(var n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return function(e){for(var t=a;t<e.length;t++)if(!o(e[t]))return!1;return!0}(e)&&e.length>=a+1}}return 0===e.length?function(e){return 0===e.length}:1===e.length?(n=m(e[0]),function(e){return n(e[0])&&1===e.length}):2===e.length?(n=m(e[0]),r=m(e[1]),function(e){return n(e[0])&&r(e[1])&&2===e.length}):(t=e.map(m),function(e){for(var n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return e.length===t.length})}(e.params)})),S=o?m(a[0].params[0]):t,_=s?m(a[1].params[0]):t,E=f?m(a[2].params[0]):t,V=g?m(a[3].params[0]):t,q=y?m(a[4].params[0]):t,z=x?m(a[5].params[0]):t,G=o?m(a[0].params[1]):t,U=s?m(a[1].params[1]):t,j=f?m(a[2].params[1]):t,Y=g?m(a[3].params[1]):t,H=y?m(a[4].params[1]):t,K=x?m(a[5].params[1]):t,Q=a.map((function(e){return function(e,t){var n=t;if(e.some(h)){var r=d(e),i=e.map(A);n=function(){for(var e=[],n=r?arguments.length-1:arguments.length,a=0;a<n;a++)e[a]=i[a](arguments[a]);return r&&(e[n]=arguments[n].map(i[n])),t.apply(null,e)}}var a=n;if(d(e)){var o=e.length-1;a=function(){return n.apply(null,F(arguments,0,o).concat([F(arguments,o)]))}}return a}(e.params,e.fn)})),W=o?Q[0]:n,$=s?Q[1]:n,X=f?Q[2]:n,Z=g?Q[3]:n,J=y?Q[4]:n,ee=x?Q[5]:n,te=o?a[0].params.length:-1,ne=s?a[1].params.length:-1,re=f?a[2].params.length:-1,ie=g?a[3].params.length:-1,ae=y?a[4].params.length:-1,oe=x?a[5].params.length:-1,se=b?6:0,ue=a.length,ce=function(){for(var t=se;t<ue;t++)if(N[t](arguments))return Q[t].apply(null,arguments);throw w(e,arguments,a)},le=function(e,t){return arguments.length===te&&S(e)&&G(t)?W.apply(null,arguments):arguments.length===ne&&_(e)&&U(t)?$.apply(null,arguments):arguments.length===re&&E(e)&&j(t)?X.apply(null,arguments):arguments.length===ie&&V(e)&&Y(t)?Z.apply(null,arguments):arguments.length===ae&&q(e)&&H(t)?J.apply(null,arguments):arguments.length===oe&&z(e)&&K(t)?ee.apply(null,arguments):ce.apply(null,arguments)};try{Object.defineProperty(le,"name",{value:e})}catch(e){}return le.signatures=function(e){var t={};return e.forEach((function(e){e.params.some(h)||M(e.params,!0).forEach((function(n){t[p(n)]=e.fn}))})),t}(a),le}function C(e){return-1===u.ignore.indexOf(e)}function T(e){return e.trim()}function R(e){return!!e}function I(e){return null!==e}function O(e){return 0===e.types.length}function P(e){return e[e.length-1]}function F(e,t,n){return Array.prototype.slice.call(e,t,n)}function L(e,t){for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n]))return!0;return!1}function k(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}function B(e,t){return Array.prototype.concat.apply([],e.map(t))}function V(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(("object"==typeof r.signatures||"string"==typeof r.signature)&&""!==r.name)if(""===t)t=r.name;else if(t!==r.name){var i=new Error("Function names do not match (expected: "+t+", actual: "+r.name+")");throw i.data={actual:r.name,expected:t},i}}return t}function q(e){var t,n={};function r(e,r){if(n.hasOwnProperty(e)&&r!==n[e])throw(t=new Error('Signature "'+e+'" is defined twice')).data={signature:e},t}for(var i=0;i<e.length;i++){var a=e[i];if("object"==typeof a.signatures)for(var o in a.signatures)a.signatures.hasOwnProperty(o)&&(r(o,a.signatures[o]),n[o]=a.signatures[o]);else{if("string"!=typeof a.signature)throw(t=new TypeError("Function is no typed-function (index: "+i+")")).data={index:i},t;r(a.signature,a),n[a.signature]=a}}return n}return(u=E("typed",{"string, Object":E,Object:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return E(V(t),e)},"...Function":function(e){return E(V(e),q(e))},"string, ...Function":function(e,t){return E(e,q(t))}})).create=r,u.types=i,u.conversions=s,u.ignore=o,u.convert=function(e,t){var n=f(e);if(t===n)return e;for(var r=0;r<u.conversions.length;r++){var i=u.conversions[r];if(i.from===n&&i.to===t)return i.convert(e)}throw new Error("Cannot convert from "+n+" to "+t)},u.find=function(e,t){if(!e.signatures)throw new TypeError("Function is no typed-function");var n;if("string"==typeof t){n=t.split(",");for(var r=0;r<n.length;r++)n[r]=n[r].trim()}else{if(!Array.isArray(t))throw new TypeError("String array or a comma separated string expected");n=t}var i=n.join(","),a=e.signatures[i];if(a)return a;throw new TypeError("Signature not found (signature: "+(e.name||"unnamed")+"("+n.join(", ")+"))")},u.addType=function(e,t){if(!e||"string"!=typeof e.name||"function"!=typeof e.test)throw new TypeError("Object with properties {name: string, test: function} expected");if(!1!==t)for(var n=0;n<u.types.length;n++)if("Object"===u.types[n].name)return void u.types.splice(n,0,e);u.types.push(e)},u.addConversion=function(e){if(!e||"string"!=typeof e.from||"string"!=typeof e.to||"function"!=typeof e.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");u.conversions.push(e)},u}()}()}));function Ve(e){return"boolean"==typeof e||!!isFinite(e)&&e===Math.round(e)}var qe=Math.sign||function(e){return e>0?1:e<0?-1:0},ze=Math.log2||function(e){return Math.log(e)/Math.LN2},Ge=Math.log10||function(e){return Math.log(e)/Math.LN10},Ue=Math.log1p||function(e){return Math.log(e+1)},je=Math.cbrt||function(e){if(0===e)return e;var t,n=e<0;return n&&(e=-e),t=isFinite(e)?(e/((t=Math.exp(Math.log(e)/3))*t)+2*t)/3:e,n?-t:t},Ye=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function He(e,t){if("function"==typeof t)return t(e);if(Infinity===e)return"Infinity";if(-Infinity===e)return"-Infinity";if(isNaN(e))return"NaN";var n,r="auto";switch(t&&(t.notation&&(r=t.notation),B(t)?n=t:B(t.precision)&&(n=t.precision)),r){case"fixed":return Qe(e,n);case"exponential":return We(e,n);case"engineering":return function(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=Xe(Ke(e),t),r=n.exponent,i=n.coefficients,a=r%3==0?r:r<0?r-3-r%3:r-r%3;if(B(t))for(;t>i.length||r-a+1>i.length;)i.push(0);else for(var o=Math.abs(r-a)-(i.length-1),s=0;s<o;s++)i.push(0);for(var u=Math.abs(r-a),c=1;u>0;)c++,u--;var l=i.slice(c).join(""),f=B(t)&&l.length||l.match(/[1-9]/)?"."+l:"",p=i.slice(0,c).join("")+f+"e"+(r>=0?"+":"")+a.toString();return n.sign+p}(e,n);case"auto":if(t&&t.exponential&&(void 0!==t.exponential.lower||void 0!==t.exponential.upper)){var i=De(t,(function(e){return e}));return i.exponential=void 0,void 0!==t.exponential.lower&&(i.lowerExp=Math.round(Math.log(t.exponential.lower)/Math.LN10)),void 0!==t.exponential.upper&&(i.upperExp=Math.round(Math.log(t.exponential.upper)/Math.LN10)),console.warn("Deprecation warning: Formatting options exponential.lower and exponential.upper (minimum and maximum value) are replaced with exponential.lowerExp and exponential.upperExp (minimum and maximum exponent) since version 4.0.0. Replace "+JSON.stringify(t)+" with "+JSON.stringify(i)),$e(e,n,i)}return $e(e,n,t&&t).replace(/((\.\d*?)(0+))($|e)/,(function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t}));default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", or "fixed".')}}function Ke(e){var t=String(e).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var n=t[1],r=t[2],i=parseFloat(t[4]||"0"),a=r.indexOf(".");i+=-1!==a?a-1:r.length-1;var o=r.replace(".","").replace(/^0*/,(function(e){return i-=e.length,""})).replace(/0*$/,"").split("").map((function(e){return parseInt(e)}));return 0===o.length&&(o.push(0),i++),{sign:n,coefficients:o,exponent:i}}function Qe(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=Ke(e),r="number"==typeof t?Xe(n,n.exponent+1+t):n,i=r.coefficients,a=r.exponent+1,o=a+(t||0);return i.length<o&&(i=i.concat(Ze(o-i.length))),a<0&&(i=Ze(1-a).concat(i),a=1),a<i.length&&i.splice(a,0,0===a?"0.":"."),r.sign+i.join("")}function We(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=Ke(e),r=t?Xe(n,t):n,i=r.coefficients,a=r.exponent;i.length<t&&(i=i.concat(Ze(t-i.length)));var o=i.shift();return r.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function $e(e,t,n){if(isNaN(e)||!isFinite(e))return String(e);var r=n&&void 0!==n.lowerExp?n.lowerExp:-3,i=n&&void 0!==n.upperExp?n.upperExp:5,a=Ke(e),o=t?Xe(a,t):a;if(o.exponent<r||o.exponent>=i)return We(e,t);var s=o.coefficients,u=o.exponent;s.length<t&&(s=s.concat(Ze(t-s.length))),s=s.concat(Ze(u-s.length+1+(s.length<t?t-s.length:0)));var c=u>0?u:0;return c<(s=Ze(-u).concat(s)).length-1&&s.splice(c+1,0,"."),o.sign+s.join("")}function Xe(e,t){for(var n={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},r=n.coefficients;t<=0;)r.unshift(0),n.exponent++,t++;if(r.length>t&&r.splice(t,r.length-t)[0]>=5){var i=t-1;for(r[i]++;10===r[i];)r.pop(),0===i&&(r.unshift(0),n.exponent++,i++),r[--i]++}return n}function Ze(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}var Je=Number.EPSILON||2220446049250313e-31;function et(e,t,n){if(null==n)return e===t;if(e===t)return!0;if(isNaN(e)||isNaN(t))return!1;if(isFinite(e)&&isFinite(t)){var r=Math.abs(e-t);return r<Je||r<=Math.max(Math.abs(e),Math.abs(t))*n}return!1}var tt=Math.acosh||function(e){return Math.log(Math.sqrt(e*e-1)+e)},nt=Math.asinh||function(e){return Math.log(Math.sqrt(e*e+1)+e)},rt=Math.atanh||function(e){return Math.log((1+e)/(1-e))/2},it=Math.cosh||function(e){return(Math.exp(e)+Math.exp(-e))/2},at=Math.sinh||function(e){return(Math.exp(e)-Math.exp(-e))/2},ot=Math.tanh||function(e){var t=Math.exp(2*e);return(t-1)/(t+1)};function st(e,t){return void 0!==t?e.toExponential(t-1):e.toExponential()}function ut(e){return(ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e,t){return e.substring(e.length-t.length,e.length)===t}function lt(e,t){return"number"==typeof e?He(e,t):V(e)?function e(t,n){if("function"==typeof n)return n(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var r,i="auto";switch(void 0!==n&&(n.notation&&(i=n.notation),"number"==typeof n?r=n:n.precision&&(r=n.precision)),i){case"fixed":return function(e,t){return e.toFixed(t)}(t,r);case"exponential":return st(t,r);case"engineering":return function(e,t){var n=e.e,r=n%3==0?n:n<0?n-3-n%3:n-n%3,i=e.mul(Math.pow(10,-r)),a=i.toPrecision(t);return-1!==a.indexOf("e")&&(a=i.toString()),a+"e"+(n>=0?"+":"")+r.toString()}(t,r);case"auto":if(n&&n.exponential&&(void 0!==n.exponential.lower||void 0!==n.exponential.upper)){var a=De(n,(function(e){return e}));return a.exponential=void 0,void 0!==n.exponential.lower&&(a.lowerExp=Math.round(Math.log(n.exponential.lower)/Math.LN10)),void 0!==n.exponential.upper&&(a.upperExp=Math.round(Math.log(n.exponential.upper)/Math.LN10)),console.warn("Deprecation warning: Formatting options exponential.lower and exponential.upper (minimum and maximum value) are replaced with exponential.lowerExp and exponential.upperExp (minimum and maximum exponent) since version 4.0.0. Replace "+JSON.stringify(n)+" with "+JSON.stringify(a)),e(t,a)}var o=n&&void 0!==n.lowerExp?n.lowerExp:-3,s=n&&void 0!==n.upperExp?n.upperExp:5;if(t.isZero())return"0";var u=t.toSignificantDigits(r),c=u.e;return(c>=o&&c<s?u.toFixed():st(t,r)).replace(/((\.\d*?)(0+))($|e)/,(function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t}));default:throw new Error('Unknown notation "'+i+'". Choose "auto", "exponential", or "fixed".')}}(e,t):function(e){return e&&"object"===ut(e)&&"number"==typeof e.s&&"number"==typeof e.n&&"number"==typeof e.d||!1}(e)?t&&"decimal"===t.fraction?e.toString():e.s*e.n+"/"+e.d:Array.isArray(e)?function e(t,n){if(Array.isArray(t)){for(var r="[",i=t.length,a=0;a<i;a++)0!==a&&(r+=", "),r+=e(t[a],n);return r+"]"}return lt(t,n)}(e,t):U(e)?'"'+e+'"':"function"==typeof e?e.syntax?String(e.syntax):"function":e&&"object"===ut(e)?"function"==typeof e.format?e.format(t):e&&e.toString(t)!=={}.toString()?e.toString(t):"{"+Object.keys(e).map((function(n){return'"'+n+'": '+lt(e[n],t)})).join(", ")+"}":String(e)}function ft(e){for(var t=String(e),n="",r=0;r<t.length;){var i=t.charAt(r);"\\"===i?(n+=i,r++,""!==(i=t.charAt(r))&&-1!=='"\\/bfnrtu'.indexOf(i)||(n+="\\"),n+=i):n+='"'===i?'\\"':i,r++}return'"'+n+'"'}function pt(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function dt(e,t){if(!U(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Ne(e)+", index: 0)");if(!U(t))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Ne(t)+", index: 1)");return e===t?0:e>t?1:-1}function ht(e,t,n){if(!(this instanceof ht))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=(new Error).stack}function mt(e,t,n){if(!(this instanceof mt))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=n),this.message=void 0!==this.min&&this.index<this.min?"Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?"Index out of range ("+this.index+" > "+(this.max-1)+")":"Index out of range ("+this.index+")",this.stack=(new Error).stack}function gt(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function vt(e,t){if(0===t.length){if(Array.isArray(e))throw new ht(e.length,0)}else!function e(t,n,r){var i,a=t.length;if(a!==n[r])throw new ht(a,n[r]);if(r<n.length-1){var o=r+1;for(i=0;i<a;i++){if(!Array.isArray(t[i]))throw new ht(n.length-1,n.length,"<");e(t[i],n,o)}}else for(i=0;i<a;i++)if(Array.isArray(t[i]))throw new ht(n.length+1,n.length,">")}(e,t,0)}function yt(e,t){if(!B(e)||!Ve(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||"number"==typeof t&&e>=t)throw new mt(e,t)}function xt(e,t,n){if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new Error("Resizing to scalar is not supported");return t.forEach((function(e){if(!B(e)||!Ve(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+lt(t)+")")})),function e(t,n,r,i){var a,o,s=n[r],u=Math.min(t.length,s);if(t.length=s,r<n.length-1){var c=r+1;for(a=0;a<u;a++)o=t[a],Array.isArray(o)||(t[a]=o=[o]),e(o,n,c,i);for(a=u;a<s;a++)t[a]=o=[],e(o,n,c,i)}else{for(a=0;a<u;a++)for(;Array.isArray(t[a]);)t[a]=t[a][0];for(a=u;a<s;a++)t[a]=i}}(e,t,0,void 0!==n?n:0),e}function bt(e,t){var n,r=St(e);function i(e){return e.reduce((function(e,t){return e*t}))}if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new ht(0,i(gt(e)),"!=");for(var a=1,o=0;o<t.length;o++)a*=t[o];if(r.length!==a)throw new ht(i(t),i(gt(e)),"!=");try{n=function(e,t){for(var n,r=e,i=t.length-1;i>0;i--){var a=t[i];n=[];for(var o=r.length/a,s=0;s<o;s++)n.push(r.slice(s*a,(s+1)*a));r=n}return r}(r,t)}catch(n){if(n instanceof ht)throw new ht(i(t),i(gt(e)),"!=");throw n}return n}function wt(e,t){for(var n=t||gt(e);Array.isArray(e)&&1===e.length;)e=e[0],n.shift();for(var r=n.length;1===n[r-1];)r--;return r<n.length&&(e=function e(t,n,r){var i,a;if(r<n){var o=r+1;for(i=0,a=t.length;i<a;i++)t[i]=e(t[i],n,o)}else for(;Array.isArray(t);)t=t[0];return t}(e,r,0),n.length=r),e}function Nt(e,t,n,r){var i=r||gt(e);if(n)for(var a=0;a<n;a++)e=[e],i.unshift(1);for(e=function e(t,n,r){var i,a;if(Array.isArray(t)){var o=r+1;for(i=0,a=t.length;i<a;i++)t[i]=e(t[i],n,o)}else for(var s=r;s<n;s++)t=[t];return t}(e,t,0);i.length<t;)i.push(1);return e}function St(e){if(!Array.isArray(e))return e;var t=[];return e.forEach((function e(n){Array.isArray(n)?n.forEach(e):t.push(n)})),t}function _t(e,t){return Array.prototype.map.call(e,t)}function Dt(e,t){Array.prototype.forEach.call(e,t)}function At(e,t){if(1!==gt(e).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(e,t)}function Mt(e,t){if(1!==gt(e).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(e,(function(e){return t.test(e)}))}function Et(e,t){return Array.prototype.join.call(e,t)}function Ct(e){if(!Array.isArray(e))throw new TypeError("Array input expected");if(0===e.length)return e;var t=[],n=0;t[0]={value:e[0],identifier:0};for(var r=1;r<e.length;r++)e[r]===e[r-1]?n++:n=0,t.push({value:e[r],identifier:n});return t}function Tt(e){if(!Array.isArray(e))throw new TypeError("Array input expected");if(0===e.length)return e;for(var t=[],n=0;n<e.length;n++)t.push(e[n].value);return t}function Rt(e,t){for(var n,r=0,i=0;i<e.length;i++){var a=e[i],o=Array.isArray(a);if(0===i&&o&&(r=a.length),o&&a.length!==r)return;var s=o?Rt(a,t):t(a);if(void 0===n)n=s;else if(n!==s)return"mixed"}return n}function It(e,t){return-1!==e.indexOf(t)}function Ot(e,t,n,r){function i(r){var i=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r],a=e[i];void 0!==a&&(n[i]=a)}return n}(r,t.map(Ft));return function(e,t,n){if(!t.filter((function(e){return!function(e){return e&&"?"===e[0]}(e)})).every((function(e){return void 0!==n[e]}))){var r=t.filter((function(e){return void 0===n[e]}));throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(r.map((function(e){return'"'.concat(e,'"')})).join(", "),"."))}}(e,t,r),n(i)}return i.isFactory=!0,i.fn=e,i.dependencies=t.slice().sort(),r&&(i.meta=r),i}function Pt(e){return"function"==typeof e&&"string"==typeof e.fn&&Array.isArray(e.dependencies)}function Ft(e){return e&&"?"===e[0]?e.slice(1):e}(ht.prototype=new RangeError).constructor=RangeError,ht.prototype.name="DimensionError",ht.prototype.isDimensionError=!0,(mt.prototype=new RangeError).constructor=RangeError,mt.prototype.name="IndexError",mt.prototype.isIndexError=!0;var Lt=function(){return Lt=Be.create,Be},kt=Ot("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],(function(e){var t=e.BigNumber,n=e.Complex,r=e.DenseMatrix,i=e.Fraction,a=Lt();return a.types=[{name:"number",test:B},{name:"Complex",test:q},{name:"BigNumber",test:V},{name:"Fraction",test:z},{name:"Unit",test:G},{name:"string",test:U},{name:"Chain",test:we},{name:"Array",test:j},{name:"Matrix",test:Y},{name:"DenseMatrix",test:K},{name:"SparseMatrix",test:Q},{name:"Range",test:W},{name:"Index",test:$},{name:"boolean",test:X},{name:"ResultSet",test:Z},{name:"Help",test:J},{name:"function",test:ee},{name:"Date",test:te},{name:"RegExp",test:ne},{name:"null",test:ie},{name:"undefined",test:ae},{name:"AccessorNode",test:oe},{name:"ArrayNode",test:se},{name:"AssignmentNode",test:ue},{name:"BlockNode",test:ce},{name:"ConditionalNode",test:le},{name:"ConstantNode",test:fe},{name:"FunctionNode",test:de},{name:"FunctionAssignmentNode",test:pe},{name:"IndexNode",test:he},{name:"Node",test:me},{name:"ObjectNode",test:ge},{name:"OperatorNode",test:ve},{name:"ParenthesisNode",test:ye},{name:"RangeNode",test:xe},{name:"SymbolNode",test:be},{name:"Object",test:re}],a.conversions=[{from:"number",to:"BigNumber",convert:function(e){if(t||Bt(e),e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+e+"). Use function bignumber(x) to convert to BigNumber.");return new t(e)}},{from:"number",to:"Complex",convert:function(e){return n||Vt(e),new n(e,0)}},{from:"number",to:"string",convert:function(e){return e+""}},{from:"BigNumber",to:"Complex",convert:function(e){return n||Vt(e),new n(e.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(e){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(e){return n||Vt(e),new n(e.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(e){i||qt(e);var t=new i(e);if(t.valueOf()!==e)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+e+"). Use function fraction(x) to convert to Fraction.");return t}},{from:"string",to:"number",convert:function(e){var t=Number(e);if(isNaN(t))throw new Error('Cannot convert "'+e+'" to a number');return t}},{from:"string",to:"BigNumber",convert:function(e){t||Bt(e);try{return new t(e)}catch(t){throw new Error('Cannot convert "'+e+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(e){i||qt(e);try{return new i(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(e){n||Vt(e);try{return new n(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Complex')}}},{from:"boolean",to:"number",convert:function(e){return+e}},{from:"boolean",to:"BigNumber",convert:function(e){return t||Bt(e),new t(+e)}},{from:"boolean",to:"Fraction",convert:function(e){return i||qt(e),new i(+e)}},{from:"boolean",to:"string",convert:function(e){return String(e)}},{from:"Array",to:"Matrix",convert:function(e){return r||function(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new r(e)}},{from:"Matrix",to:"Array",convert:function(e){return e.valueOf()}}],a}));function Bt(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function Vt(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function qt(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}var zt,Gt,Ut=Ot("ResultSet",[],(function(){function e(t){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");this.entries=t||[]}return e.prototype.type="ResultSet",e.prototype.isResultSet=!0,e.prototype.valueOf=function(){return this.entries},e.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},e.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},e.fromJSON=function(t){return new e(t.entries)},e}),{isClass:!0}),jt=9e15,Yt="0123456789abcdef",Ht="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Kt="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Qt={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-jt,maxE:jt,crypto:!1},Wt=!0,$t="[DecimalError] Invalid argument: ",Xt=Math.floor,Zt=Math.pow,Jt=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,en=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,tn=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,nn=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,rn=1e7,an=Ht.length-1,on=Kt.length-1,sn={name:"[object Decimal]"};function un(e){var t,n,r,i=e.length-1,a="",o=e[0];if(i>0){for(a+=o,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(a+=xn(n)),a+=r;(n=7-(r=(o=e[t])+"").length)&&(a+=xn(n))}else if(0===o)return"0";for(;o%10==0;)o/=10;return a+o}function cn(e,t,n){if(e!==~~e||e<t||e>n)throw Error($t+e)}function ln(e,t,n,r){var i,a,o,s;for(a=e[0];a>=10;a/=10)--t;return--t<0?(t+=7,i=0):(i=Math.ceil((t+1)/7),t%=7),a=Zt(10,7-t),s=e[i]%a|0,null==r?t<3?(0==t?s=s/100|0:1==t&&(s=s/10|0),o=n<4&&99999==s||n>3&&49999==s||5e4==s||0==s):o=(n<4&&s+1==a||n>3&&s+1==a/2)&&(e[i+1]/a/100|0)==Zt(10,t-2)-1||(s==a/2||0==s)&&0==(e[i+1]/a/100|0):t<4?(0==t?s=s/1e3|0:1==t?s=s/100|0:2==t&&(s=s/10|0),o=(r||n<4)&&9999==s||!r&&n>3&&4999==s):o=((r||n<4)&&s+1==a||!r&&n>3&&s+1==a/2)&&(e[i+1]/a/1e3|0)==Zt(10,t-3)-1,o}function fn(e,t,n){for(var r,i,a=[0],o=0,s=e.length;o<s;){for(i=a.length;i--;)a[i]*=t;for(a[0]+=Yt.indexOf(e.charAt(o++)),r=0;r<a.length;r++)a[r]>n-1&&(void 0===a[r+1]&&(a[r+1]=0),a[r+1]+=a[r]/n|0,a[r]%=n)}return a.reverse()}sn.absoluteValue=sn.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),dn(e)},sn.ceil=function(){return dn(new this.constructor(this),this.e+1,2)},sn.comparedTo=sn.cmp=function(e){var t,n,r,i,a=this,o=a.d,s=(e=new a.constructor(e)).d,u=a.s,c=e.s;if(!o||!s)return u&&c?u!==c?u:o===s?0:!o^u<0?1:-1:NaN;if(!o[0]||!s[0])return o[0]?u:s[0]?-c:0;if(u!==c)return u;if(a.e!==e.e)return a.e>e.e^u<0?1:-1;for(t=0,n=(r=o.length)<(i=s.length)?r:i;t<n;++t)if(o[t]!==s[t])return o[t]>s[t]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1},sn.cosine=sn.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.rounding,r.precision=(e=r.precision)+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r,i=t.d.length;i<32?r=(1/Cn(4,n=Math.ceil(i/3))).toString():(n=16,r="2.3283064365386962890625e-10"),e.precision+=n,t=En(e,1,t.times(r),new e(1));for(var a=n;a--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=n,t}(r,Tn(r,n)),r.precision=e,r.rounding=t,dn(2==Gt||3==Gt?n.neg():n,e,t,!0)):new r(1):new r(NaN)},sn.cubeRoot=sn.cbrt=function(){var e,t,n,r,i,a,o,s,u,c,l=this,f=l.constructor;if(!l.isFinite()||l.isZero())return new f(l);for(Wt=!1,(a=l.s*Zt(l.s*l,1/3))&&Math.abs(a)!=1/0?r=new f(a.toString()):(n=un(l.d),(a=((e=l.e)-n.length+1)%3)&&(n+=1==a||-2==a?"0":"00"),a=Zt(n,1/3),e=Xt((e+1)/3)-(e%3==(e<0?-1:2)),(r=new f(n=a==1/0?"5e"+e:(n=a.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=l.s),o=(e=f.precision)+3;;)if(c=(u=(s=r).times(s).times(s)).plus(l),r=pn(c.plus(l).times(s),c.plus(u),o+2,1),un(s.d).slice(0,o)===(n=un(r.d)).slice(0,o)){if("9999"!=(n=n.slice(o-3,o+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(dn(r,e+1,1),t=!r.times(r).times(r).eq(l));break}if(!i&&(dn(s,e+1,0),s.times(s).times(s).eq(l))){r=s;break}o+=4,i=1}return Wt=!0,dn(r,e,f.rounding,t)},sn.decimalPlaces=sn.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=7*((e=t.length-1)-Xt(this.e/7)),e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},sn.dividedBy=sn.div=function(e){return pn(this,new this.constructor(e))},sn.dividedToIntegerBy=sn.divToInt=function(e){var t=this.constructor;return dn(pn(this,new t(e),0,1,1),t.precision,t.rounding)},sn.equals=sn.eq=function(e){return 0===this.cmp(e)},sn.floor=function(){return dn(new this.constructor(this),this.e+1,3)},sn.greaterThan=sn.gt=function(e){return this.cmp(e)>0},sn.greaterThanOrEqualTo=sn.gte=function(e){var t=this.cmp(e);return 1==t||0===t},sn.hyperbolicCosine=sn.cosh=function(){var e,t,n,r,i,a=this,o=a.constructor,s=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return s;r=o.rounding,o.precision=(n=o.precision)+Math.max(a.e,a.sd())+4,o.rounding=1,(i=a.d.length)<32?t=(1/Cn(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),a=En(o,1,a.times(t),new o(1),!0);for(var u,c=e,l=new o(8);c--;)u=a.times(a),a=s.minus(u.times(l.minus(u.times(l))));return dn(a,o.precision=n,o.rounding=r,!0)},sn.hyperbolicSine=sn.sinh=function(){var e,t,n,r,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(n=a.rounding,a.precision=(t=a.precision)+Math.max(i.e,i.sd())+4,a.rounding=1,(r=i.d.length)<3)i=En(a,2,i,i,!0);else{e=1.4*Math.sqrt(r),i=En(a,2,i=i.times(1/Cn(5,e=e>16?16:0|e)),i,!0);for(var o,s=new a(5),u=new a(16),c=new a(20);e--;)o=i.times(i),i=i.times(s.plus(o.times(u.times(o).plus(c))))}return a.precision=t,a.rounding=n,dn(i,t,n,!0)},sn.hyperbolicTangent=sn.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.rounding,r.precision=(e=r.precision)+7,r.rounding=1,pn(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},sn.inverseCosine=sn.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,a=n.rounding;return-1!==r?0===r?t.isNeg()?vn(n,i,a):new n(0):new n(NaN):t.isZero()?vn(n,i+4,a).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=vn(n,i+4,a).times(.5),n.precision=i,n.rounding=a,e.minus(t))},sn.inverseHyperbolicCosine=sn.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.rounding,r.precision=(e=r.precision)+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,Wt=!1,n=n.times(n).minus(1).sqrt().plus(n),Wt=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},sn.inverseHyperbolicSine=sn.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.rounding,r.precision=(e=r.precision)+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,Wt=!1,n=n.times(n).plus(1).sqrt().plus(n),Wt=!0,r.precision=e,r.rounding=t,n.ln())},sn.inverseHyperbolicTangent=sn.atanh=function(){var e,t,n,r,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=a.precision,t=a.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?dn(new a(i),e,t,!0):(a.precision=n=r-i.e,i=pn(i.plus(1),new a(1).minus(i),n+e,1),a.precision=e+4,a.rounding=1,i=i.ln(),a.precision=e,a.rounding=t,i.times(.5))):new a(NaN)},sn.inverseSine=sn.asin=function(){var e,t,n,r,i=this,a=i.constructor;return i.isZero()?new a(i):(t=i.abs().cmp(1),n=a.precision,r=a.rounding,-1!==t?0===t?((e=vn(a,n+4,r).times(.5)).s=i.s,e):new a(NaN):(a.precision=n+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=n,a.rounding=r,i.times(2)))},sn.inverseTangent=sn.atan=function(){var e,t,n,r,i,a,o,s,u,c=this,l=c.constructor,f=l.precision,p=l.rounding;if(c.isFinite()){if(c.isZero())return new l(c);if(c.abs().eq(1)&&f+4<=on)return(o=vn(l,f+4,p).times(.25)).s=c.s,o}else{if(!c.s)return new l(NaN);if(f+4<=on)return(o=vn(l,f+4,p).times(.5)).s=c.s,o}for(l.precision=s=f+10,l.rounding=1,e=n=Math.min(28,s/7+2|0);e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(Wt=!1,t=Math.ceil(s/7),r=1,u=c.times(c),o=new l(c),i=c;-1!==e;)if(i=i.times(u),a=o.minus(i.div(r+=2)),i=i.times(u),void 0!==(o=a.plus(i.div(r+=2))).d[t])for(e=t;o.d[e]===a.d[e]&&e--;);return n&&(o=o.times(2<<n-1)),Wt=!0,dn(o,l.precision=f,l.rounding=p,!0)},sn.isFinite=function(){return!!this.d},sn.isInteger=sn.isInt=function(){return!!this.d&&Xt(this.e/7)>this.d.length-2},sn.isNaN=function(){return!this.s},sn.isNegative=sn.isNeg=function(){return this.s<0},sn.isPositive=sn.isPos=function(){return this.s>0},sn.isZero=function(){return!!this.d&&0===this.d[0]},sn.lessThan=sn.lt=function(e){return this.cmp(e)<0},sn.lessThanOrEqualTo=sn.lte=function(e){return this.cmp(e)<1},sn.logarithm=sn.log=function(e){var t,n,r,i,a,o,s,u,c=this.constructor,l=c.precision,f=c.rounding;if(null==e)e=new c(10),t=!0;else{if(n=(e=new c(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(n=this.d,this.s<0||!n||!n[0]||this.eq(1))return new c(n&&!n[0]?-1/0:1!=this.s?NaN:n?0:1/0);if(t)if(n.length>1)a=!0;else{for(i=n[0];i%10==0;)i/=10;a=1!==i}if(Wt=!1,o=_n(this,s=l+5),r=t?gn(c,s+10):_n(e,s),ln((u=pn(o,r,s,1)).d,i=l,f))do{if(o=_n(this,s+=10),r=t?gn(c,s+10):_n(e,s),u=pn(o,r,s,1),!a){+un(u.d).slice(i+1,i+15)+1==1e14&&(u=dn(u,l+1,0));break}}while(ln(u.d,i+=10,f));return Wt=!0,dn(u,l,f)},sn.minus=sn.sub=function(e){var t,n,r,i,a,o,s,u,c,l,f,p,d=this,h=d.constructor;if(e=new h(e),!d.d||!e.d)return d.s&&e.s?d.d?e.s=-e.s:e=new h(e.d||d.s!==e.s?d:NaN):e=new h(NaN),e;if(d.s!=e.s)return e.s=-e.s,d.plus(e);if(p=e.d,s=h.precision,u=h.rounding,!(c=d.d)[0]||!p[0]){if(p[0])e.s=-e.s;else{if(!c[0])return new h(3===u?-0:0);e=new h(d)}return Wt?dn(e,s,u):e}if(n=Xt(e.e/7),l=Xt(d.e/7),c=c.slice(),a=l-n){for((f=a<0)?(t=c,a=-a,o=p.length):(t=p,n=l,o=c.length),a>(r=Math.max(Math.ceil(s/7),o)+2)&&(a=r,t.length=1),t.reverse(),r=a;r--;)t.push(0);t.reverse()}else{for((f=(r=c.length)<(o=p.length))&&(o=r),r=0;r<o;r++)if(c[r]!=p[r]){f=c[r]<p[r];break}a=0}for(f&&(t=c,c=p,p=t,e.s=-e.s),r=p.length-(o=c.length);r>0;--r)c[o++]=0;for(r=p.length;r>a;){if(c[--r]<p[r]){for(i=r;i&&0===c[--i];)c[i]=rn-1;--c[i],c[r]+=rn}c[r]-=p[r]}for(;0===c[--o];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(e.d=c,e.e=mn(c,n),Wt?dn(e,s,u):e):new h(3===u?-0:0)},sn.modulo=sn.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?dn(new r(n),r.precision,r.rounding):(Wt=!1,9==r.modulo?(t=pn(n,e.abs(),0,3,1)).s*=e.s:t=pn(n,e,0,r.modulo,1),t=t.times(e),Wt=!0,n.minus(t))},sn.naturalExponential=sn.exp=function(){return Sn(this)},sn.naturalLogarithm=sn.ln=function(){return _n(this)},sn.negated=sn.neg=function(){var e=new this.constructor(this);return e.s=-e.s,dn(e)},sn.plus=sn.add=function(e){var t,n,r,i,a,o,s,u,c,l,f=this,p=f.constructor;if(e=new p(e),!f.d||!e.d)return f.s&&e.s?f.d||(e=new p(e.d||f.s===e.s?f:NaN)):e=new p(NaN),e;if(f.s!=e.s)return e.s=-e.s,f.minus(e);if(l=e.d,s=p.precision,u=p.rounding,!(c=f.d)[0]||!l[0])return l[0]||(e=new p(f)),Wt?dn(e,s,u):e;if(a=Xt(f.e/7),r=Xt(e.e/7),c=c.slice(),i=a-r){for(i<0?(n=c,i=-i,o=l.length):(n=l,r=a,o=c.length),i>(o=(a=Math.ceil(s/7))>o?a+1:o+1)&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((o=c.length)-(i=l.length)<0&&(i=o,n=l,l=c,c=n),t=0;i;)t=(c[--i]=c[i]+l[i]+t)/rn|0,c[i]%=rn;for(t&&(c.unshift(t),++r),o=c.length;0==c[--o];)c.pop();return e.d=c,e.e=mn(c,r),Wt?dn(e,s,u):e},sn.precision=sn.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error($t+e);return n.d?(t=yn(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},sn.round=function(){var e=this,t=e.constructor;return dn(new t(e),e.e+1,t.rounding)},sn.sine=sn.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.rounding,r.precision=(e=r.precision)+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return En(e,2,t,t);n=1.4*Math.sqrt(r),t=En(e,2,t=t.times(1/Cn(5,n=n>16?16:0|n)),t);for(var i,a=new e(5),o=new e(16),s=new e(20);n--;)i=t.times(t),t=t.times(a.plus(i.times(o.times(i).minus(s))));return t}(r,Tn(r,n)),r.precision=e,r.rounding=t,dn(Gt>2?n.neg():n,e,t,!0)):new r(NaN)},sn.squareRoot=sn.sqrt=function(){var e,t,n,r,i,a,o=this,s=o.d,u=o.e,c=o.s,l=o.constructor;if(1!==c||!s||!s[0])return new l(!c||c<0&&(!s||s[0])?NaN:s?o:1/0);for(Wt=!1,0==(c=Math.sqrt(+o))||c==1/0?(((t=un(s)).length+u)%2==0&&(t+="0"),c=Math.sqrt(t),u=Xt((u+1)/2)-(u<0||u%2),r=new l(t=c==1/0?"5e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):r=new l(c.toString()),n=(u=l.precision)+3;;)if(r=(a=r).plus(pn(o,a,n+2,1)).times(.5),un(a.d).slice(0,n)===(t=un(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(dn(r,u+1,1),e=!r.times(r).eq(o));break}if(!i&&(dn(a,u+1,0),a.times(a).eq(o))){r=a;break}n+=4,i=1}return Wt=!0,dn(r,u,l.rounding,e)},sn.tangent=sn.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.rounding,r.precision=(e=r.precision)+10,r.rounding=1,(n=n.sin()).s=1,n=pn(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,dn(2==Gt||4==Gt?n.neg():n,e,t,!0)):new r(NaN)},sn.times=sn.mul=function(e){var t,n,r,i,a,o,s,u,c,l=this,f=l.constructor,p=l.d,d=(e=new f(e)).d;if(e.s*=l.s,!(p&&p[0]&&d&&d[0]))return new f(!e.s||p&&!p[0]&&!d||d&&!d[0]&&!p?NaN:p&&d?0*e.s:e.s/0);for(n=Xt(l.e/7)+Xt(e.e/7),(u=p.length)<(c=d.length)&&(a=p,p=d,d=a,o=u,u=c,c=o),a=[],r=o=u+c;r--;)a.push(0);for(r=c;--r>=0;){for(t=0,i=u+r;i>r;)s=a[i]+d[r]*p[i-r-1]+t,a[i--]=s%rn|0,t=s/rn|0;a[i]=(a[i]+t)%rn|0}for(;!a[--o];)a.pop();return t?++n:a.shift(),e.d=a,e.e=mn(a,n),Wt?dn(e,f.precision,f.rounding):e},sn.toBinary=function(e,t){return Rn(this,2,e,t)},sn.toDecimalPlaces=sn.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(cn(e,0,1e9),void 0===t?t=r.rounding:cn(t,0,8),dn(n,e+n.e+1,t))},sn.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=hn(r,!0):(cn(e,0,1e9),void 0===t?t=i.rounding:cn(t,0,8),n=hn(r=dn(new i(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},sn.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return void 0===e?n=hn(i):(cn(e,0,1e9),void 0===t?t=a.rounding:cn(t,0,8),n=hn(r=dn(new a(i),e+i.e+1,t),!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},sn.toFraction=function(e){var t,n,r,i,a,o,s,u,c,l,f,p,d=this,h=d.d,m=d.constructor;if(!h)return new m(d);if(c=n=new m(1),r=u=new m(0),a=(t=new m(r)).e=yn(h)-d.e-1,t.d[0]=Zt(10,(o=a%7)<0?7+o:o),null==e)e=a>0?t:c;else{if(!(s=new m(e)).isInt()||s.lt(c))throw Error($t+s);e=s.gt(t)?a>0?t:c:s}for(Wt=!1,s=new m(un(h)),l=m.precision,m.precision=a=7*h.length*2;f=pn(s,t,0,1,1),1!=(i=n.plus(f.times(r))).cmp(e);)n=r,r=i,c=u.plus(f.times(i=c)),u=i,t=s.minus(f.times(i=t)),s=i;return i=pn(e.minus(n),r,0,1,1),u=u.plus(i.times(c)),n=n.plus(i.times(r)),u.s=c.s=d.s,p=pn(c,r,a,1).minus(d).abs().cmp(pn(u,n,a,1).minus(d).abs())<1?[c,r]:[u,n],m.precision=l,Wt=!0,p},sn.toHexadecimal=sn.toHex=function(e,t){return Rn(this,16,e,t)},sn.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:cn(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(Wt=!1,n=pn(n,e,0,t,1).times(e),Wt=!0,dn(n)):(e.s=n.s,n=e),n},sn.toNumber=function(){return+this},sn.toOctal=function(e,t){return Rn(this,8,e,t)},sn.toPower=sn.pow=function(e){var t,n,r,i,a,o,s=this,u=s.constructor,c=+(e=new u(e));if(!(s.d&&e.d&&s.d[0]&&e.d[0]))return new u(Zt(+s,c));if((s=new u(s)).eq(1))return s;if(r=u.precision,a=u.rounding,e.eq(1))return dn(s,r,a);if((t=Xt(e.e/7))>=e.d.length-1&&(n=c<0?-c:c)<=9007199254740991)return i=bn(u,s,n,r),e.s<0?new u(1).div(i):dn(i,r,a);if((o=s.s)<0){if(t<e.d.length-1)return new u(NaN);if(0==(1&e.d[t])&&(o=1),0==s.e&&1==s.d[0]&&1==s.d.length)return s.s=o,s}return(t=0!=(n=Zt(+s,c))&&isFinite(n)?new u(n+"").e:Xt(c*(Math.log("0."+un(s.d))/Math.LN10+s.e+1)))>u.maxE+1||t<u.minE-1?new u(t>0?o/0:0):(Wt=!1,u.rounding=s.s=1,n=Math.min(12,(t+"").length),(i=Sn(e.times(_n(s,r+n)),r)).d&&ln((i=dn(i,r+5,1)).d,r,a)&&+un((i=dn(Sn(e.times(_n(s,(t=r+10)+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=dn(i,r+1,0)),i.s=o,Wt=!0,u.rounding=a,dn(i,r,a))},sn.toPrecision=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=hn(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(cn(e,1,1e9),void 0===t?t=i.rounding:cn(t,0,8),n=hn(r=dn(new i(r),e,t),e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},sn.toSignificantDigits=sn.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(cn(e,1,1e9),void 0===t?t=n.rounding:cn(t,0,8)),dn(new n(this),e,t)},sn.toString=function(){var e=this,t=e.constructor,n=hn(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},sn.truncated=sn.trunc=function(){return dn(new this.constructor(this),this.e+1,1)},sn.valueOf=sn.toJSON=function(){var e=this,t=e.constructor,n=hn(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var pn=function(){function e(e,t,n){var r,i=0,a=e.length;for(e=e.slice();a--;)e[a]=(r=e[a]*t+i)%n|0,i=r/n|0;return i&&e.unshift(i),e}function t(e,t,n,r){var i,a;if(n!=r)a=n>r?1:-1;else for(i=a=0;i<n;i++)if(e[i]!=t[i]){a=e[i]>t[i]?1:-1;break}return a}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,e[n]=(i=e[n]<t[n]?1:0)*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,a,o,s,u){var c,l,f,p,d,h,m,g,v,y,x,b,w,N,S,_,D,A,M,E,C=r.constructor,T=r.s==i.s?1:-1,R=r.d,I=i.d;if(!(R&&R[0]&&I&&I[0]))return new C(r.s&&i.s&&(R?!I||R[0]!=I[0]:I)?R&&0==R[0]||!I?0*T:T/0:NaN);for(u?(d=1,l=r.e-i.e):(u=rn,l=Xt(r.e/(d=7))-Xt(i.e/d)),M=I.length,D=R.length,y=(v=new C(T)).d=[],f=0;I[f]==(R[f]||0);f++);if(I[f]>(R[f]||0)&&l--,null==a?(N=a=C.precision,o=C.rounding):N=s?a+(r.e-i.e)+1:a,N<0)y.push(1),h=!0;else{if(N=N/d+2|0,f=0,1==M){for(p=0,I=I[0],N++;(f<D||p)&&N--;f++)y[f]=(S=p*u+(R[f]||0))/I|0,p=S%I|0;h=p||f<D}else{for((p=u/(I[0]+1)|0)>1&&(I=e(I,p,u),R=e(R,p,u),M=I.length,D=R.length),_=M,b=(x=R.slice(0,M)).length;b<M;)x[b++]=0;(E=I.slice()).unshift(0),A=I[0],I[1]>=u/2&&++A;do{p=0,(c=t(I,x,M,b))<0?(w=x[0],M!=b&&(w=w*u+(x[1]||0)),(p=w/A|0)>1?(p>=u&&(p=u-1),1==(c=t(m=e(I,p,u),x,g=m.length,b=x.length))&&(p--,n(m,M<g?E:I,g,u))):(0==p&&(c=p=1),m=I.slice()),(g=m.length)<b&&m.unshift(0),n(x,m,b,u),-1==c&&(c=t(I,x,M,b=x.length))<1&&(p++,n(x,M<b?E:I,b,u)),b=x.length):0===c&&(p++,x=[0]),y[f++]=p,c&&x[0]?x[b++]=R[_]||0:(x=[R[_]],b=1)}while((_++<D||void 0!==x[0])&&N--);h=void 0!==x[0]}y[0]||y.shift()}if(1==d)v.e=l,zt=h;else{for(f=1,p=y[0];p>=10;p/=10)f++;v.e=f+l*d-1,dn(v,s?a+v.e+1:a,o,h)}return v}}();function dn(e,t,n,r){var i,a,o,s,u,c,l,f,p,d=e.constructor;e:if(null!=t){if(!(f=e.d))return e;for(i=1,s=f[0];s>=10;s/=10)i++;if((a=t-i)<0)a+=7,u=(l=f[p=0])/Zt(10,i-(o=t)-1)%10|0;else if((p=Math.ceil((a+1)/7))>=(s=f.length)){if(!r)break e;for(;s++<=p;)f.push(0);l=u=0,i=1,o=(a%=7)-7+1}else{for(l=s=f[p],i=1;s>=10;s/=10)i++;u=(o=(a%=7)-7+i)<0?0:l/Zt(10,i-o-1)%10|0}if(r=r||t<0||void 0!==f[p+1]||(o<0?l:l%Zt(10,i-o-1)),c=n<4?(u||r)&&(0==n||n==(e.s<0?3:2)):u>5||5==u&&(4==n||r||6==n&&(a>0?o>0?l/Zt(10,i-o):0:f[p-1])%10&1||n==(e.s<0?8:7)),t<1||!f[0])return f.length=0,c?(f[0]=Zt(10,(7-(t-=e.e+1)%7)%7),e.e=-t||0):f[0]=e.e=0,e;if(0==a?(f.length=p,s=1,p--):(f.length=p+1,s=Zt(10,7-a),f[p]=o>0?(l/Zt(10,i-o)%Zt(10,o)|0)*s:0),c)for(;;){if(0==p){for(a=1,o=f[0];o>=10;o/=10)a++;for(o=f[0]+=s,s=1;o>=10;o/=10)s++;a!=s&&(e.e++,f[0]==rn&&(f[0]=1));break}if(f[p]+=s,f[p]!=rn)break;f[p--]=0,s=1}for(a=f.length;0===f[--a];)f.pop()}return Wt&&(e.e>d.maxE?(e.d=null,e.e=NaN):e.e<d.minE&&(e.e=0,e.d=[0])),e}function hn(e,t,n){if(!e.isFinite())return Dn(e);var r,i=e.e,a=un(e.d),o=a.length;return t?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+xn(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(e.e<0?"e":"e+")+e.e):i<0?(a="0."+xn(-i-1)+a,n&&(r=n-o)>0&&(a+=xn(r))):i>=o?(a+=xn(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+xn(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=xn(r))),a}function mn(e,t){var n=e[0];for(t*=7;n>=10;n/=10)t++;return t}function gn(e,t,n){if(t>an)throw Wt=!0,n&&(e.precision=n),Error("[DecimalError] Precision limit exceeded");return dn(new e(Ht),t,1,!0)}function vn(e,t,n){if(t>on)throw Error("[DecimalError] Precision limit exceeded");return dn(new e(Kt),t,n,!0)}function yn(e){var t=e.length-1,n=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function xn(e){for(var t="";e--;)t+="0";return t}function bn(e,t,n,r){var i,a=new e(1),o=Math.ceil(r/7+4);for(Wt=!1;;){if(n%2&&In((a=a.times(t)).d,o)&&(i=!0),0===(n=Xt(n/2))){n=a.d.length-1,i&&0===a.d[n]&&++a.d[n];break}In((t=t.times(t)).d,o)}return Wt=!0,a}function wn(e){return 1&e.d[e.d.length-1]}function Nn(e,t,n){for(var r,i=new e(t[0]),a=0;++a<t.length;){if(!(r=new e(t[a])).s){i=r;break}i[n](r)&&(i=r)}return i}function Sn(e,t){var n,r,i,a,o,s,u,c=0,l=0,f=0,p=e.constructor,d=p.rounding,h=p.precision;if(!e.d||!e.d[0]||e.e>17)return new p(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(Wt=!1,u=h):u=t,s=new p(.03125);e.e>-2;)e=e.times(s),f+=5;for(u+=r=Math.log(Zt(2,f))/Math.LN10*2+5|0,n=a=o=new p(1),p.precision=u;;){if(a=dn(a.times(e),u,1),n=n.times(++l),un((s=o.plus(pn(a,n,u,1))).d).slice(0,u)===un(o.d).slice(0,u)){for(i=f;i--;)o=dn(o.times(o),u,1);if(null!=t)return p.precision=h,o;if(!(c<3&&ln(o.d,u-r,d,c)))return dn(o,p.precision=h,d,Wt=!0);p.precision=u+=10,n=a=s=new p(1),l=0,c++}o=s}}function _n(e,t){var n,r,i,a,o,s,u,c,l,f,p,d=1,h=e,m=h.d,g=h.constructor,v=g.rounding,y=g.precision;if(h.s<0||!m||!m[0]||!h.e&&1==m[0]&&1==m.length)return new g(m&&!m[0]?-1/0:1!=h.s?NaN:m?0:h);if(null==t?(Wt=!1,l=y):l=t,g.precision=l+=10,r=(n=un(m)).charAt(0),!(Math.abs(a=h.e)<15e14))return c=gn(g,l+2,y).times(a+""),h=_n(new g(r+"."+n.slice(1)),l-10).plus(c),g.precision=y,null==t?dn(h,y,v,Wt=!0):h;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=un((h=h.times(e)).d)).charAt(0),d++;for(a=h.e,r>1?(h=new g("0."+n),a++):h=new g(r+"."+n.slice(1)),f=h,u=o=h=pn(h.minus(1),h.plus(1),l,1),p=dn(h.times(h),l,1),i=3;;){if(o=dn(o.times(p),l,1),un((c=u.plus(pn(o,new g(i),l,1))).d).slice(0,l)===un(u.d).slice(0,l)){if(u=u.times(2),0!==a&&(u=u.plus(gn(g,l+2,y).times(a+""))),u=pn(u,new g(d),l,1),null!=t)return g.precision=y,u;if(!ln(u.d,l-10,v,s))return dn(u,g.precision=y,v,Wt=!0);g.precision=l+=10,c=o=h=pn(f.minus(1),f.plus(1),l,1),p=dn(h.times(h),l,1),i=s=1}u=c,i+=2}}function Dn(e){return String(e.s*e.s/0)}function An(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";e.d.push(+t),Wt&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Mn(e,t){var n,r,i,a,o,s,u,c,l;if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(en.test(t))n=16,t=t.toLowerCase();else if(Jt.test(t))n=2;else{if(!tn.test(t))throw Error($t+t);n=8}for((a=t.search(/p/i))>0?(u=+t.slice(a+1),t=t.substring(2,a)):t=t.slice(2),a=t.indexOf("."),r=e.constructor,(o=a>=0)&&(a=(s=(t=t.replace(".","")).length)-a,i=bn(r,new r(n),a,2*a)),a=l=(c=fn(t,n,rn)).length-1;0===c[a];--a)c.pop();return a<0?new r(0*e.s):(e.e=mn(c,l),e.d=c,Wt=!1,o&&(e=pn(e,i,4*s)),u&&(e=e.times(Math.abs(u)<54?Zt(2,u):vr.pow(2,u))),Wt=!0,e)}function En(e,t,n,r,i){var a,o,s,u,c=e.precision,l=Math.ceil(c/7);for(Wt=!1,u=n.times(n),s=new e(r);;){if(o=pn(s.times(u),new e(t++*t++),c,1),s=i?r.plus(o):r.minus(o),r=pn(o.times(u),new e(t++*t++),c,1),void 0!==(o=s.plus(r)).d[l]){for(a=l;o.d[a]===s.d[a]&&a--;);if(-1==a)break}a=s,s=r,r=o,o=a}return Wt=!0,o.d.length=l+1,o}function Cn(e,t){for(var n=e;--t;)n*=e;return n}function Tn(e,t){var n,r=t.s<0,i=vn(e,e.precision,1),a=i.times(.5);if((t=t.abs()).lte(a))return Gt=r?4:1,t;if((n=t.divToInt(i)).isZero())Gt=r?3:2;else{if((t=t.minus(n.times(i))).lte(a))return Gt=wn(n)?r?2:3:r?4:1,t;Gt=wn(n)?r?1:4:r?3:2}return t.minus(i).abs()}function Rn(e,t,n,r){var i,a,o,s,u,c,l,f,p,d=e.constructor,h=void 0!==n;if(h?(cn(n,1,1e9),void 0===r?r=d.rounding:cn(r,0,8)):(n=d.precision,r=d.rounding),e.isFinite()){for(h?(i=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):i=t,(o=(l=hn(e)).indexOf("."))>=0&&(l=l.replace(".",""),(p=new d(1)).e=l.length-o,p.d=fn(hn(p),10,i),p.e=p.d.length),a=u=(f=fn(l,10,i)).length;0==f[--u];)f.pop();if(f[0]){if(o<0?a--:((e=new d(e)).d=f,e.e=a,f=(e=pn(e,p,n,r,0,i)).d,a=e.e,c=zt),o=f[n],s=i/2,c=c||void 0!==f[n+1],c=r<4?(void 0!==o||c)&&(0===r||r===(e.s<0?3:2)):o>s||o===s&&(4===r||c||6===r&&1&f[n-1]||r===(e.s<0?8:7)),f.length=n,c)for(;++f[--n]>i-1;)f[n]=0,n||(++a,f.unshift(1));for(u=f.length;!f[u-1];--u);for(o=0,l="";o<u;o++)l+=Yt.charAt(f[o]);if(h){if(u>1)if(16==t||8==t){for(o=16==t?4:3,--u;u%o;u++)l+="0";for(u=(f=fn(l,i,t)).length;!f[u-1];--u);for(o=1,l="1.";o<u;o++)l+=Yt.charAt(f[o])}else l=l.charAt(0)+"."+l.slice(1);l=l+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)l="0"+l;l="0."+l}else if(++a>u)for(a-=u;a--;)l+="0";else a<u&&(l=l.slice(0,a)+"."+l.slice(a))}else l=h?"0p+0":"0";l=(16==t?"0x":2==t?"0b":8==t?"0o":"")+l}else l=Dn(e);return e.s<0?"-"+l:l}function In(e,t){if(e.length>t)return e.length=t,!0}function On(e){return new this(e).abs()}function Pn(e){return new this(e).acos()}function Fn(e){return new this(e).acosh()}function Ln(e,t){return new this(e).plus(t)}function kn(e){return new this(e).asin()}function Bn(e){return new this(e).asinh()}function Vn(e){return new this(e).atan()}function qn(e){return new this(e).atanh()}function zn(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,a=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?vn(this,r,i):new this(0)).s=e.s:!e.d||t.isZero()?(n=vn(this,a,1).times(.5)).s=e.s:t.s<0?(this.precision=a,this.rounding=1,n=this.atan(pn(e,t,a,1)),t=vn(this,a,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(pn(e,t,a,1)):(n=vn(this,a,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function Gn(e){return new this(e).cbrt()}function Un(e){return dn(e=new this(e),e.e+1,2)}function jn(e){if(!e||"object"!=typeof e)throw Error("[DecimalError] Object expected");var t,n,r,i=!0===e.defaults,a=["precision",1,1e9,"rounding",0,8,"toExpNeg",-jt,0,"toExpPos",0,jt,"maxE",0,jt,"minE",-jt,0,"modulo",0,9];for(t=0;t<a.length;t+=3)if(n=a[t],i&&(this[n]=Qt[n]),void 0!==(r=e[n])){if(!(Xt(r)===r&&r>=a[t+1]&&r<=a[t+2]))throw Error($t+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=Qt[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error($t+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error("[DecimalError] crypto unavailable");this[n]=!0}else this[n]=!1}return this}function Yn(e){return new this(e).cos()}function Hn(e){return new this(e).cosh()}function Kn(e,t){return new this(e).div(t)}function Qn(e){return new this(e).exp()}function Wn(e){return dn(e=new this(e),e.e+1,3)}function $n(){var e,t,n=new this(0);for(Wt=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return Wt=!0,new this(1/0);n=t}return Wt=!0,n.sqrt()}function Xn(e){return e instanceof vr||e&&"[object Decimal]"===e.name||!1}function Zn(e){return new this(e).ln()}function Jn(e,t){return new this(e).log(t)}function er(e){return new this(e).log(2)}function tr(e){return new this(e).log(10)}function nr(){return Nn(this,arguments,"lt")}function rr(){return Nn(this,arguments,"gt")}function ir(e,t){return new this(e).mod(t)}function ar(e,t){return new this(e).mul(t)}function or(e,t){return new this(e).pow(t)}function sr(e){var t,n,r,i,a=0,o=new this(1),s=[];if(void 0===e?e=this.precision:cn(e,1,1e9),r=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));a<r;)(i=t[a])>=429e7?t[a]=crypto.getRandomValues(new Uint32Array(1))[0]:s[a++]=i%1e7;else{if(!crypto.randomBytes)throw Error("[DecimalError] crypto unavailable");for(t=crypto.randomBytes(r*=4);a<r;)(i=t[a]+(t[a+1]<<8)+(t[a+2]<<16)+((127&t[a+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,a):(s.push(i%1e7),a+=4);a=r/4}else for(;a<r;)s[a++]=1e7*Math.random()|0;for(e%=7,(r=s[--a])&&e&&(i=Zt(10,7-e),s[a]=(r/i|0)*i);0===s[a];a--)s.pop();if(a<0)n=0,s=[0];else{for(n=-1;0===s[0];n-=7)s.shift();for(r=1,i=s[0];i>=10;i/=10)r++;r<7&&(n-=7-r)}return o.e=n,o.d=s,o}function ur(e){return dn(e=new this(e),e.e+1,this.rounding)}function cr(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function lr(e){return new this(e).sin()}function fr(e){return new this(e).sinh()}function pr(e){return new this(e).sqrt()}function dr(e,t){return new this(e).sub(t)}function hr(e){return new this(e).tan()}function mr(e){return new this(e).tanh()}function gr(e){return dn(e=new this(e),e.e+1,1)}sn[Symbol.for("nodejs.util.inspect.custom")]=sn.toString,sn[Symbol.toStringTag]="Decimal";var vr=function e(t){var n,r,i;function a(e){var t,n,r,i=this;if(!(i instanceof a))return new a(e);if(i.constructor=a,e instanceof a)return i.s=e.s,void(Wt?!e.d||e.e>a.maxE?(i.e=NaN,i.d=null):e.e<a.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"==(r=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(Wt?t>a.maxE?(i.e=NaN,i.d=null):t<a.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!=0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):An(i,e.toString())}if("string"!==r)throw Error($t+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===n&&(e=e.slice(1)),i.s=1),nn.test(e)?An(i,e):Mn(i,e)}if(a.prototype=sn,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=jn,a.clone=e,a.isDecimal=Xn,a.abs=On,a.acos=Pn,a.acosh=Fn,a.add=Ln,a.asin=kn,a.asinh=Bn,a.atan=Vn,a.atanh=qn,a.atan2=zn,a.cbrt=Gn,a.ceil=Un,a.cos=Yn,a.cosh=Hn,a.div=Kn,a.exp=Qn,a.floor=Wn,a.hypot=$n,a.ln=Zn,a.log=Jn,a.log10=tr,a.log2=er,a.max=nr,a.min=rr,a.mod=ir,a.mul=ar,a.pow=or,a.random=sr,a.round=ur,a.sign=cr,a.sin=lr,a.sinh=fr,a.sqrt=pr,a.sub=dr,a.tan=hr,a.tanh=mr,a.trunc=gr,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return a.config(t),a}(Qt);Ht=new vr(Ht),Kt=new vr(Kt);var yr=Ot("BigNumber",["?on","config"],(function(e){var t=e.on,n=vr.clone({precision:e.config.precision});return n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(e){return new n(e.value)},t&&t("config",(function(e,t){e.precision!==t.precision&&n.config({precision:e.precision})})),n}),{isClass:!0}),xr=x(b((function(e,t){!function(n){var r=function(e){return.5*(Math.exp(e)+Math.exp(-e))},i=function(e){return.5*(Math.exp(e)-Math.exp(-e))},a=function(){throw SyntaxError("Invalid Param")};function o(e,t){var n=Math.abs(e),r=Math.abs(t);return 0===e?Math.log(r):0===t?Math.log(n):n<3e3&&r<3e3?.5*Math.log(e*e+t*t):Math.log(e/Math.cos(Math.atan2(t,e)))}function s(e,t){if(!(this instanceof s))return new s(e,t);var n=function(e,t){var n={re:0,im:0};if(null==e)n.re=n.im=0;else if(void 0!==t)n.re=e,n.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)n.re=e.re,n.im=e.im;else if("abs"in e&&"arg"in e){if(!Number.isFinite(e.abs)&&Number.isFinite(e.arg))return s.INFINITY;n.re=e.abs*Math.cos(e.arg),n.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!Number.isFinite(e.r)&&Number.isFinite(e.phi))return s.INFINITY;n.re=e.r*Math.cos(e.phi),n.im=e.r*Math.sin(e.phi)}else 2===e.length?(n.re=e[0],n.im=e[1]):a();break;case"string":n.im=n.re=0;var r=e.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),i=1,o=0;null===r&&a();for(var u=0;u<r.length;u++){var c=r[u];" "===c||"\t"===c||"\n"===c||("+"===c?i++:"-"===c?o++:"i"===c||"I"===c?(i+o===0&&a()," "===r[u+1]||isNaN(r[u+1])?n.im+=parseFloat((o%2?"-":"")+"1"):(n.im+=parseFloat((o%2?"-":"")+r[u+1]),u++),i=o=0):((i+o===0||isNaN(c))&&a(),"i"===r[u+1]||"I"===r[u+1]?(n.im+=parseFloat((o%2?"-":"")+c),u++):n.re+=parseFloat((o%2?"-":"")+c),i=o=0))}i+o>0&&a();break;case"number":n.im=0,n.re=e;break;default:a()}return n}(e,t);this.re=n.re,this.im=n.im}s.prototype={re:0,im:0,sign:function(){var e=this.abs();return new s(this.re/e,this.im/e)},add:function(e,t){var n=new s(e,t);return this.isInfinite()&&n.isInfinite()?s.NAN:this.isInfinite()||n.isInfinite()?s.INFINITY:new s(this.re+n.re,this.im+n.im)},sub:function(e,t){var n=new s(e,t);return this.isInfinite()&&n.isInfinite()?s.NAN:this.isInfinite()||n.isInfinite()?s.INFINITY:new s(this.re-n.re,this.im-n.im)},mul:function(e,t){var n=new s(e,t);return this.isInfinite()&&n.isZero()||this.isZero()&&n.isInfinite()?s.NAN:this.isInfinite()||n.isInfinite()?s.INFINITY:0===n.im&&0===this.im?new s(this.re*n.re,0):new s(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(e,t){var n=new s(e,t);if(this.isZero()&&n.isZero()||this.isInfinite()&&n.isInfinite())return s.NAN;if(this.isInfinite()||n.isZero())return s.INFINITY;if(this.isZero()||n.isInfinite())return s.ZERO;e=this.re,t=this.im;var r,i,a=n.re,o=n.im;return 0===o?new s(e/a,t/a):Math.abs(a)<Math.abs(o)?new s((e*(i=a/o)+t)/(r=a*i+o),(t*i-e)/r):new s((e+t*(i=o/a))/(r=o*i+a),(t-e*i)/r)},pow:function(e,t){var n=new s(e,t);if(e=this.re,t=this.im,n.isZero())return s.ONE;if(0===n.im){if(0===t&&e>=0)return new s(Math.pow(e,n.re),0);if(0===e)switch((n.re%4+4)%4){case 0:return new s(Math.pow(t,n.re),0);case 1:return new s(0,Math.pow(t,n.re));case 2:return new s(-Math.pow(t,n.re),0);case 3:return new s(0,-Math.pow(t,n.re))}}if(0===e&&0===t&&n.re>0&&n.im>=0)return s.ZERO;var r=Math.atan2(t,e),i=o(e,t);return e=Math.exp(n.re*i-n.im*r),t=n.im*i+n.re*r,new s(e*Math.cos(t),e*Math.sin(t))},sqrt:function(){var e,t,n=this.re,r=this.im,i=this.abs();if(n>=0){if(0===r)return new s(Math.sqrt(n),0);e=.5*Math.sqrt(2*(i+n))}else e=Math.abs(r)/Math.sqrt(2*(i-n));return t=n<=0?.5*Math.sqrt(2*(i-n)):Math.abs(r)/Math.sqrt(2*(i+n)),new s(e,r<0?-t:t)},exp:function(){var e=Math.exp(this.re);return new s(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){var e=this.re,t=this.im;return new s(Math.expm1(e)*Math.cos(t)+function(e){var t=Math.PI/4;if(e<-t||e>t)return Math.cos(e)-1;var n=e*e;return n*(n*(1/24+n*(-1/720+n*(1/40320+n*(-1/3628800+n*(1/4790014600+n*(-1/87178291200+n*(1/20922789888e3)))))))-.5)}(t),Math.exp(e)*Math.sin(t))},log:function(){var e=this.re,t=this.im;return new s(o(e,t),Math.atan2(t,e))},abs:function(){return e=this.re,t=this.im,n=Math.abs(e),r=Math.abs(t),n<3e3&&r<3e3?Math.sqrt(n*n+r*r):(n<r?(n=r,r=e/t):r=t/e,n*Math.sqrt(1+r*r));var e,t,n,r},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var e=this.re,t=this.im;return new s(Math.sin(e)*r(t),Math.cos(e)*i(t))},cos:function(){var e=this.re,t=this.im;return new s(Math.cos(e)*r(t),-Math.sin(e)*i(t))},tan:function(){var e=2*this.re,t=2*this.im,n=Math.cos(e)+r(t);return new s(Math.sin(e)/n,i(t)/n)},cot:function(){var e=2*this.re,t=2*this.im,n=Math.cos(e)-r(t);return new s(-Math.sin(e)/n,i(t)/n)},sec:function(){var e=this.re,t=this.im,n=.5*r(2*t)+.5*Math.cos(2*e);return new s(Math.cos(e)*r(t)/n,Math.sin(e)*i(t)/n)},csc:function(){var e=this.re,t=this.im,n=.5*r(2*t)-.5*Math.cos(2*e);return new s(Math.sin(e)*r(t)/n,-Math.cos(e)*i(t)/n)},asin:function(){var e=this.re,t=this.im,n=new s(t*t-e*e+1,-2*e*t).sqrt(),r=new s(n.re-t,n.im+e).log();return new s(r.im,-r.re)},acos:function(){var e=this.re,t=this.im,n=new s(t*t-e*e+1,-2*e*t).sqrt(),r=new s(n.re-t,n.im+e).log();return new s(Math.PI/2-r.im,r.re)},atan:function(){var e=this.re,t=this.im;if(0===e){if(1===t)return new s(0,Infinity);if(-1===t)return new s(0,-Infinity)}var n=e*e+(1-t)*(1-t),r=new s((1-t*t-e*e)/n,-2*e/n).log();return new s(-.5*r.im,.5*r.re)},acot:function(){var e=this.re,t=this.im;if(0===t)return new s(Math.atan2(1,e),0);var n=e*e+t*t;return 0!==n?new s(e/n,-t/n).atan():new s(0!==e?e/0:0,0!==t?-t/0:0).atan()},asec:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new s(0,Infinity);var n=e*e+t*t;return 0!==n?new s(e/n,-t/n).acos():new s(0!==e?e/0:0,0!==t?-t/0:0).acos()},acsc:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new s(Math.PI/2,Infinity);var n=e*e+t*t;return 0!==n?new s(e/n,-t/n).asin():new s(0!==e?e/0:0,0!==t?-t/0:0).asin()},sinh:function(){var e=this.re,t=this.im;return new s(i(e)*Math.cos(t),r(e)*Math.sin(t))},cosh:function(){var e=this.re,t=this.im;return new s(r(e)*Math.cos(t),i(e)*Math.sin(t))},tanh:function(){var e=2*this.re,t=2*this.im,n=r(e)+Math.cos(t);return new s(i(e)/n,Math.sin(t)/n)},coth:function(){var e=2*this.re,t=2*this.im,n=r(e)-Math.cos(t);return new s(i(e)/n,-Math.sin(t)/n)},csch:function(){var e=this.re,t=this.im,n=Math.cos(2*t)-r(2*e);return new s(-2*i(e)*Math.cos(t)/n,2*r(e)*Math.sin(t)/n)},sech:function(){var e=this.re,t=this.im,n=Math.cos(2*t)+r(2*e);return new s(2*r(e)*Math.cos(t)/n,-2*i(e)*Math.sin(t)/n)},asinh:function(){var e=this.im;this.im=-this.re,this.re=e;var t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){var e=this.acos();if(e.im<=0){var t=e.re;e.re=-e.im,e.im=t}else t=e.im,e.im=-e.re,e.re=t;return e},atanh:function(){var e=this.re,t=this.im,n=e>1&&0===t,r=1-e,i=1+e,a=r*r+t*t,u=0!==a?new s((i*r-t*t)/a,(t*r+i*t)/a):new s(-1!==e?e/0:0,0!==t?t/0:0),c=u.re;return u.re=o(u.re,u.im)/2,u.im=Math.atan2(u.im,c)/2,n&&(u.im=-u.im),u},acoth:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new s(0,Math.PI/2);var n=e*e+t*t;return 0!==n?new s(e/n,-t/n).atanh():new s(0!==e?e/0:0,0!==t?-t/0:0).atanh()},acsch:function(){var e=this.re,t=this.im;if(0===t)return new s(0!==e?Math.log(e+Math.sqrt(e*e+1)):Infinity,0);var n=e*e+t*t;return 0!==n?new s(e/n,-t/n).asinh():new s(0!==e?e/0:0,0!==t?-t/0:0).asinh()},asech:function(){var e=this.re,t=this.im;if(this.isZero())return s.INFINITY;var n=e*e+t*t;return 0!==n?new s(e/n,-t/n).acosh():new s(0!==e?e/0:0,0!==t?-t/0:0).acosh()},inverse:function(){if(this.isZero())return s.INFINITY;if(this.isInfinite())return s.ZERO;var e=this.re,t=this.im,n=e*e+t*t;return new s(e/n,-t/n)},conjugate:function(){return new s(this.re,-this.im)},neg:function(){return new s(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new s(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new s(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new s(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){var n=new s(e,t);return Math.abs(n.re-this.re)<=s.EPSILON&&Math.abs(n.im-this.im)<=s.EPSILON},clone:function(){return new s(this.re,this.im)},toString:function(){var e=this.re,t=this.im,n="";return this.isNaN()?"NaN":this.isZero()?"0":this.isInfinite()?"Infinity":(0!==e&&(n+=e),0!==t&&(0!==e?n+=t<0?" - ":" + ":t<0&&(n+="-"),1!==(t=Math.abs(t))&&(n+=t),n+="i"),n||"0")},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return!(0!==this.re&&-0!==this.re||0!==this.im&&-0!==this.im)},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},s.ZERO=new s(0,0),s.ONE=new s(1,0),s.I=new s(0,1),s.PI=new s(Math.PI,0),s.E=new s(Math.E,0),s.INFINITY=new s(Infinity,Infinity),s.NAN=new s(NaN,NaN),s.EPSILON=1e-16,Object.defineProperty(t,"__esModule",{value:!0}),s.default=s,s.Complex=s,e.exports=s}()})));function br(e){return(br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var wr=Ot("Complex",[],(function(){return xr.prototype.type="Complex",xr.prototype.isComplex=!0,xr.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},xr.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},xr.prototype.format=function(e){var t=this.im,n=this.re,r=He(this.re,e),i=He(this.im,e),a=B(e)?e:e?e.precision:null;if(null!==a){var o=Math.pow(10,-a);Math.abs(n/t)<o&&(n=0),Math.abs(t/n)<o&&(t=0)}return 0===t?r:0===n?1===t?"i":-1===t?"-i":i+"i":t<0?-1===t?r+" - i":r+" - "+i.substring(1)+"i":1===t?r+" + i":r+" + "+i+"i"},xr.fromPolar=function(e){switch(arguments.length){case 1:var t=arguments[0];if("object"===br(t))return xr(t);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var n=arguments[0],r=arguments[1];if(B(n)){if(G(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),B(r))return new xr({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},xr.prototype.valueOf=xr.prototype.toString,xr.fromJSON=function(e){return new xr(e)},xr.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},xr}),{isClass:!0}),Nr=x(b((function(e,t){!function(t){var n={s:1,n:0,d:1};function r(e){function t(){var t=Error.apply(this,arguments);t.name=this.name=e,this.stack=t.stack,this.message=t.message}function n(){}return n.prototype=Error.prototype,t.prototype=new n,t}var i=l.DivisionByZero=r("DivisionByZero"),a=l.InvalidParameter=r("InvalidParameter");function o(e,t){return isNaN(e=parseInt(e,10))&&s(),e*t}function s(){throw new a}var u=function(e,t){var r,a=0,u=1,c=1,l=0,f=0,p=0,d=1,h=1,m=0,g=1,v=1,y=1,x=1e7;if(null==e);else if(void 0!==t)c=(a=e)*(u=t);else switch(typeof e){case"object":"d"in e&&"n"in e?(a=e.n,u=e.d,"s"in e&&(a*=e.s)):0 in e?(a=e[0],1 in e&&(u=e[1])):s(),c=a*u;break;case"number":if(e<0&&(c=e,e=-e),e%1==0)a=e;else if(e>0){for(e>=1&&(e/=h=Math.pow(10,Math.floor(1+Math.log(e)/Math.LN10)));g<=x&&y<=x;){if(e===(r=(m+v)/(g+y))){g+y<=x?(a=m+v,u=g+y):y>g?(a=v,u=y):(a=m,u=g);break}e>r?(m+=v,g+=y):(v+=m,y+=g),g>x?(a=v,u=y):(a=m,u=g)}a*=h}else(isNaN(e)||isNaN(t))&&(u=a=NaN);break;case"string":if(null===(g=e.match(/\d+|./g))&&s(),"-"===g[m]?(c=-1,m++):"+"===g[m]&&m++,g.length===m+1?f=o(g[m++],c):"."===g[m+1]||"."===g[m]?("."!==g[m]&&(l=o(g[m++],c)),(1+ ++m===g.length||"("===g[m+1]&&")"===g[m+3]||"'"===g[m+1]&&"'"===g[m+3])&&(f=o(g[m],c),d=Math.pow(10,g[m].length),m++),("("===g[m]&&")"===g[m+2]||"'"===g[m]&&"'"===g[m+2])&&(p=o(g[m+1],c),h=Math.pow(10,g[m+1].length)-1,m+=3)):"/"===g[m+1]||":"===g[m+1]?(f=o(g[m],c),d=o(g[m+2],1),m+=3):"/"===g[m+3]&&" "===g[m+1]&&(l=o(g[m],c),f=o(g[m+2],c),d=o(g[m+4],1),m+=5),g.length<=m){c=a=p+(u=d*h)*l+h*f;break}default:s()}if(0===u)throw new i;n.s=c<0?-1:1,n.n=Math.abs(a),n.d=Math.abs(u)};function c(e,t){if(!e)return t;if(!t)return e;for(;;){if(!(e%=t))return t;if(!(t%=e))return e}}function l(e,t){if(!(this instanceof l))return new l(e,t);u(e,t),e=l.REDUCE?c(n.d,n.n):1,this.s=n.s,this.n=n.n/e,this.d=n.d/e}l.REDUCE=1,l.prototype={s:1,n:0,d:1,abs:function(){return new l(this.n,this.d)},neg:function(){return new l(-this.s*this.n,this.d)},add:function(e,t){return u(e,t),new l(this.s*this.n*n.d+n.s*this.d*n.n,this.d*n.d)},sub:function(e,t){return u(e,t),new l(this.s*this.n*n.d-n.s*this.d*n.n,this.d*n.d)},mul:function(e,t){return u(e,t),new l(this.s*n.s*this.n*n.n,this.d*n.d)},div:function(e,t){return u(e,t),new l(this.s*n.s*this.n*n.d,this.d*n.n)},clone:function(){return new l(this)},mod:function(e,t){return isNaN(this.n)||isNaN(this.d)?new l(NaN):void 0===e?new l(this.s*this.n%this.d,1):(u(e,t),0===n.n&&0===this.d&&l(0,0),new l(this.s*(n.d*this.n)%(n.n*this.d),n.d*this.d))},gcd:function(e,t){return u(e,t),new l(c(n.n,this.n)*c(n.d,this.d),n.d*this.d)},lcm:function(e,t){return u(e,t),0===n.n&&0===this.n?new l:new l(n.n*this.n,c(n.n,this.n)*c(n.d,this.d))},ceil:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new l(NaN):new l(Math.ceil(e*this.s*this.n/this.d),e)},floor:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new l(NaN):new l(Math.floor(e*this.s*this.n/this.d),e)},round:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new l(NaN):new l(Math.round(e*this.s*this.n/this.d),e)},inverse:function(){return new l(this.s*this.d,this.n)},pow:function(e){return e<0?new l(Math.pow(this.s*this.d,-e),Math.pow(this.n,-e)):new l(Math.pow(this.s*this.n,e),Math.pow(this.d,e))},equals:function(e,t){return u(e,t),this.s*this.n*n.d==n.s*n.n*this.d},compare:function(e,t){u(e,t);var r=this.s*this.n*n.d-n.s*n.n*this.d;return(0<r)-(r<0)},simplify:function(e){if(isNaN(this.n)||isNaN(this.d))return this;var t=this.abs().toContinued();function n(e){return 1===e.length?new l(e[0]):n(e.slice(1)).inverse().add(e[0])}e=e||.001;for(var r=0;r<t.length;r++){var i=n(t.slice(0,r+1));if(i.sub(this.abs()).abs().valueOf()<e)return i.mul(this.s)}return this},divisible:function(e,t){return u(e,t),!(!(n.n*this.d)||this.n*n.d%(n.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(e){var t,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=r:(e&&(t=Math.floor(r/i))>0&&(n+=t,n+=" ",r%=i),n+=r,n+="/",n+=i),n},toLatex:function(e){var t,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=r:(e&&(t=Math.floor(r/i))>0&&(n+=t,r%=i),n+="\\frac{",n+=r,n+="}{",n+=i,n+="}"),n},toContinued:function(){var e,t=this.n,n=this.d,r=[];if(isNaN(t)||isNaN(n))return r;do{r.push(Math.floor(t/n)),e=t%n,t=n,n=e}while(1!==t);return r},toString:function(e){var t,n=this.n,r=this.d;if(isNaN(n)||isNaN(r))return"NaN";l.REDUCE||(n/=t=c(n,r),r/=t),e=e||15;var i=function(e,t){for(;t%2==0;t/=2);for(;t%5==0;t/=5);if(1===t)return 0;for(var n=10%t,r=1;1!==n;r++)if(n=10*n%t,r>2e3)return 0;return r}(0,r),a=function(e,t,n){for(var r=1,i=function(e,t,n){for(var r=1;t>0;e=e*e%n,t>>=1)1&t&&(r=r*e%n);return r}(10,n,t),a=0;a<300;a++){if(r===i)return a;r=10*r%t,i=10*i%t}return 0}(0,r,i),o=-1===this.s?"-":"";if(o+=n/r|0,n%=r,(n*=10)&&(o+="."),i){for(var s=a;s--;)o+=n/r|0,n%=r,n*=10;for(o+="(",s=i;s--;)o+=n/r|0,n%=r,n*=10;o+=")"}else for(s=e;n&&s--;)o+=n/r|0,n%=r,n*=10;return o}},Object.defineProperty(l,"__esModule",{value:!0}),l.default=l,l.Fraction=l,e.exports=l}()}))),Sr=Ot("Fraction",[],(function(){return Nr.prototype.type="Fraction",Nr.prototype.isFraction=!0,Nr.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Nr.fromJSON=function(e){return new Nr(e)},Nr}),{isClass:!0}),_r=Ot("Range",[],(function(){function e(t,n,r){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");var i=null!=t,a=null!=n,o=null!=r;if(i)if(V(t))t=t.toNumber();else if("number"!=typeof t)throw new TypeError("Parameter start must be a number");if(a)if(V(n))n=n.toNumber();else if("number"!=typeof n)throw new TypeError("Parameter end must be a number");if(o)if(V(r))r=r.toNumber();else if("number"!=typeof r)throw new TypeError("Parameter step must be a number");this.start=i?parseFloat(t):0,this.end=a?parseFloat(n):0,this.step=o?parseFloat(r):1}return e.prototype.type="Range",e.prototype.isRange=!0,e.parse=function(t){if("string"!=typeof t)return null;var n=t.split(":").map((function(e){return parseFloat(e)}));if(n.some((function(e){return isNaN(e)})))return null;switch(n.length){case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[2],n[1]);default:return null}},e.prototype.clone=function(){return new e(this.start,this.end,this.step)},e.prototype.size=function(){var e=0,t=this.step,n=this.end-this.start;return qe(t)===qe(n)?e=Math.ceil(n/t):0===n&&(e=0),isNaN(e)&&(e=0),[e]},e.prototype.min=function(){var e=this.size()[0];return e>0?this.step>0?this.start:this.start+(e-1)*this.step:void 0},e.prototype.max=function(){var e=this.size()[0];return e>0?this.step>0?this.start+(e-1)*this.step:this.start:void 0},e.prototype.forEach=function(e){var t=this.start,n=this.step,r=this.end,i=0;if(n>0)for(;t<r;)e(t,[i],this),t+=n,i++;else if(n<0)for(;t>r;)e(t,[i],this),t+=n,i++},e.prototype.map=function(e){var t=[];return this.forEach((function(n,r,i){t[r[0]]=e(n,r,i)})),t},e.prototype.toArray=function(){var e=[];return this.forEach((function(t,n){e[n[0]]=t})),e},e.prototype.valueOf=function(){return this.toArray()},e.prototype.format=function(e){var t=He(this.start,e);return 1!==this.step&&(t+=":"+He(this.step,e)),t+":"+He(this.end,e)},e.prototype.toString=function(){return this.format()},e.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},e.fromJSON=function(t){return new e(t.start,t.end,t.step)},e}),{isClass:!0}),Dr=Ot("Matrix",[],(function(){function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.storage=function(e){throw new Error("Matrix.storage is deprecated since v6.0.0. Use the factory function math.matrix instead.")},e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(e,t,n){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(e,t,n){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e}),{isClass:!0}),Ar=Ot("DenseMatrix",["Matrix"],(function(e){function t(e,n){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(n&&!U(n))throw new Error("Invalid datatype: "+n);if(Y(e))"DenseMatrix"===e.type?(this._data=_e(e._data),this._size=_e(e._size),this._datatype=n||e._datatype):(this._data=e.toArray(),this._size=e.size(),this._datatype=n||e._datatype);else if(e&&j(e.data)&&j(e.size))this._data=e.data,this._size=e.size,vt(this._data,this._size),this._datatype=n||e.datatype;else if(j(e))this._data=function e(t){for(var n=0,r=t.length;n<r;n++){var i=t[n];j(i)?t[n]=e(i):i&&!0===i.isMatrix&&(t[n]=e(i.valueOf()))}return t}(e),this._size=gt(this._data),vt(this._data,this._size),this._datatype=n;else{if(e)throw new TypeError("Unsupported type of data ("+Ne(e)+")");this._data=[],this._size=[0],this._datatype=n}}function n(e,n){if(!$(n))throw new TypeError("Invalid index");if(n.isScalar())return e.get(n.min());var r=n.size();if(r.length!==e._size.length)throw new ht(r.length,e._size.length);for(var i=n.min(),a=n.max(),o=0,s=e._size.length;o<s;o++)yt(i[o],e._size[o]),yt(a[o],e._size[o]);return new t(function e(t,n,r,i){var a=i===r-1,o=n.dimension(i);return a?o.map((function(e){return yt(e,t.length),t[e]})).valueOf():o.map((function(a){return yt(a,t.length),e(t[a],n,r,i+1)})).valueOf()}(e._data,n,r.length,0),e._datatype)}function r(e,t,n,r){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var i,o=t.size(),s=t.isScalar();if(Y(n)?(i=n.size(),n=n.valueOf()):i=gt(n),s){if(0!==i.length)throw new TypeError("Scalar expected");e.set(t.min(),n,r)}else{if(o.length<e._size.length)throw new ht(o.length,e._size.length,"<");if(i.length<o.length){for(var u=0,c=0;1===o[u]&&1===i[u];)u++;for(;1===o[u];)c++,u++;n=Nt(n,o.length,c,i)}if(!Me(o,i))throw new ht(o,i,">");a(e,t.max().map((function(e){return e+1})),r),function e(t,n,r,i,a){var o=a===i-1;n.dimension(a).forEach(o?function(e,n){yt(e),t[e]=r[n[0]]}:function(o,s){yt(o),e(t[o],n,r[s[0]],i,a+1)})}(e._data,t,n,o.length,0)}return e}function i(e,t,n){if(0===t.length){for(var r=e._data;j(r);)r=r[0];return r}return e._size=t.slice(0),e._data=xt(e._data,e._size,n),e}function a(e,t,n){for(var r=e._size.slice(0),a=!1;r.length<t.length;)r.push(0),a=!0;for(var o=0,s=t.length;o<s;o++)t[o]>r[o]&&(r[o]=t[o],a=!0);a&&i(e,r,n)}return(t.prototype=new(0,e.Matrix)).createDenseMatrix=function(e,n){return new t(e,n)},t.prototype.type="DenseMatrix",t.prototype.isDenseMatrix=!0,t.prototype.getDataType=function(){return Rt(this._data,Ne)},t.prototype.storage=function(){return"dense"},t.prototype.datatype=function(){return this._datatype},t.prototype.create=function(e,n){return new t(e,n)},t.prototype.subset=function(e,t,i){switch(arguments.length){case 1:return n(this,e);case 2:case 3:return r(this,e,t,i);default:throw new SyntaxError("Wrong number of arguments")}},t.prototype.get=function(e){if(!j(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new ht(e.length,this._size.length);for(var t=0;t<e.length;t++)yt(e[t],this._size[t]);for(var n=this._data,r=0,i=e.length;r<i;r++){var a=e[r];yt(a,n.length),n=n[a]}return n},t.prototype.set=function(e,t,n){if(!j(e))throw new TypeError("Array expected");if(e.length<this._size.length)throw new ht(e.length,this._size.length,"<");var r,i,o;a(this,e.map((function(e){return e+1})),n);var s=this._data;for(r=0,i=e.length-1;r<i;r++)yt(o=e[r],s.length),s=s[o];return yt(o=e[e.length-1],s.length),s[o]=t,this},t.prototype.resize=function(e,t,n){if(!j(e))throw new TypeError("Array expected");return i(n?this.clone():this,e,t)},t.prototype.reshape=function(e,t){var n=t?this.clone():this;return n._data=bt(n._data,e),n._size=e.slice(0),n},t.prototype.clone=function(){return new t({data:_e(this._data),size:_e(this._size),datatype:this._datatype})},t.prototype.size=function(){return this._size.slice(0)},t.prototype.map=function(e){var n=this,r=function t(r,i){return j(r)?r.map((function(e,n){return t(e,i.concat(n))})):e(r,i,n)}(this._data,[]);return new t(r,void 0!==this._datatype?Rt(r,Ne):void 0)},t.prototype.forEach=function(e){var t=this;!function n(r,i){j(r)?r.forEach((function(e,t){n(e,i.concat(t))})):e(r,i,t)}(this._data,[])},t.prototype.toArray=function(){return _e(this._data)},t.prototype.valueOf=function(){return this._data},t.prototype.format=function(e){return lt(this._data,e)},t.prototype.toString=function(){return lt(this._data)},t.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},t.prototype.diagonal=function(e){if(e){if(V(e)&&(e=e.toNumber()),!B(e)||!Ve(e))throw new TypeError("The parameter k must be an integer number")}else e=0;for(var n=e>0?e:0,r=e<0?-e:0,i=Math.min(this._size[0]-r,this._size[1]-n),a=[],o=0;o<i;o++)a[o]=this._data[o+r][o+n];return new t({data:a,size:[i],datatype:this._datatype})},t.diagonal=function(e,n,r,i){if(!j(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map((function(e){if(V(e)&&(e=e.toNumber()),!B(e)||!Ve(e)||e<1)throw new Error("Size values must be positive integers");return e})),r){if(V(r)&&(r=r.toNumber()),!B(r)||!Ve(r))throw new TypeError("The parameter k must be an integer number")}else r=0;var a,o=r>0?r:0,s=r<0?-r:0,u=e[0],c=e[1],l=Math.min(u-s,c-o);if(j(n)){if(n.length!==l)throw new Error("Invalid value array length");a=function(e){return n[e]}}else if(Y(n)){var f=n.size();if(1!==f.length||f[0]!==l)throw new Error("Invalid matrix length");a=function(e){return n.get([e])}}else a=function(){return n};i||(i=V(a(0))?a(0).mul(0):0);var p=[];if(e.length>0){p=xt(p,e,i);for(var d=0;d<l;d++)p[d+s][d+o]=a(d)}return new t({data:p,size:[u,c]})},t.fromJSON=function(e){return new t(e)},t.prototype.swapRows=function(e,n){if(!(B(e)&&Ve(e)&&B(n)&&Ve(n)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return yt(e,this._size[0]),yt(n,this._size[0]),t._swapRows(e,n,this._data),this},t._swapRows=function(e,t,n){var r=n[e];n[e]=n[t],n[t]=r},t}),{isClass:!0}),Mr=Ot("clone",["typed"],(function(e){return(0,e.typed)("clone",{any:_e})}));function Er(e){for(var t=0;t<e.length;t++)if(H(e[t]))return!0;return!1}function Cr(e,t){Y(e)&&(e=e.valueOf());for(var n=0,r=e.length;n<r;n++){var i=e[n];Array.isArray(i)?Cr(i,t):t(i)}}function Tr(e,t,n){return e&&"function"==typeof e.map?e.map((function(e){return Tr(e,t)})):t(e)}function Rr(e,t,n){var r=Array.isArray(e)?gt(e):e.size();if(t<0||t>=r.length)throw new mt(t,r.length);return Y(e)?e.create(Ir(e.valueOf(),t,n)):Ir(e,t,n)}function Ir(e,t,n){var r,i,a,o;if(t<=0){if(Array.isArray(e[0])){for(o=function(e){var t,n,r=e.length,i=e[0].length,a=[];for(n=0;n<i;n++){var o=[];for(t=0;t<r;t++)o.push(e[t][n]);a.push(o)}return a}(e),i=[],r=0;r<o.length;r++)i[r]=Ir(o[r],t-1,n);return i}for(a=e[0],r=1;r<e.length;r++)a=n(a,e[r]);return a}for(i=[],r=0;r<e.length;r++)i[r]=Ir(e[r],t-1,n);return i}function Or(e,t,n,r,i,a,o,s,u,c,l){var f,p,d,h=e._values,m=e._index,g=e._ptr;if(r)for(p=g[t+1],f=g[t];f<p;f++)n[d=m[f]]!==a?(n[d]=a,o.push(d),c?(r[d]=u?s(h[f],l):s(l,h[f]),i[d]=a):r[d]=h[f]):(r[d]=u?s(h[f],r[d]):s(r[d],h[f]),i[d]=a);else for(p=g[t+1],f=g[t];f<p;f++)n[d=m[f]]!==a?(n[d]=a,o.push(d)):i[d]=a}var Pr=Ot("isInteger",["typed"],(function(e){var t=(0,e.typed)("isInteger",{number:Ve,BigNumber:function(e){return e.isInt()},Fraction:function(e){return 1===e.d&&isFinite(e.n)},"Array | Matrix":function(e){return Tr(e,t)}});return t})),Fr="number",Lr="number, number";function kr(e){return Math.abs(e)}function Br(e,t){return e+t}function Vr(e,t){return e*t}function qr(e){return-e}function zr(e){return e}function Gr(e){return je(e)}function Ur(e){return Math.ceil(e)}function jr(e){return e*e*e}function Yr(e){return Math.exp(e)}function Hr(e){return Ye(e)}function Kr(e,t){if(!Ve(e)||!Ve(t))throw new Error("Parameters in function gcd must be integer numbers");for(var n;0!==t;)n=e%t,e=t,t=n;return e<0?-e:e}function Qr(e,t){if(!Ve(e)||!Ve(t))throw new Error("Parameters in function lcm must be integer numbers");if(0===e||0===t)return 0;for(var n,r=e*t;0!==t;)t=e%(n=t),e=n;return Math.abs(r/e)}function Wr(e){return Math.log(e)}function $r(e){return Ge(e)}function Xr(e){return ze(e)}function Zr(e,t){if(t>0)return e-t*Math.floor(e/t);if(0===t)return e;throw new Error("Cannot calculate mod for a negative divisor")}function Jr(e,t){var n=t<0;if(n&&(t=-t),0===t)throw new Error("Root must be non-zero");if(e<0&&Math.abs(t)%2!=1)throw new Error("Root must be odd when a is negative.");if(0===e)return n?Infinity:0;if(!isFinite(e))return n?0:e;var r=Math.pow(Math.abs(e),1/t);return r=e<0?-r:r,n?1/r:r}function ei(e){return qe(e)}function ti(e){return e*e}function ni(e,t){var n,r,i,a=0,o=1,s=1,u=0;if(!Ve(e)||!Ve(t))throw new Error("Parameters in function xgcd must be integer numbers");for(;t;)i=e-(r=Math.floor(e/t))*t,n=a,a=o-r*a,o=n,n=s,s=u-r*s,u=n,e=t,t=i;return e<0?[-e,-o,-u]:[e,e?o:0,u]}function ri(e,t){return e*e<1&&Infinity===t||e*e>1&&-Infinity===t?0:Math.pow(e,t)}function ii(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return parseFloat(Qe(e,t))}kr.signature=Fr,Br.signature=Lr,Vr.signature=Lr,qr.signature=Fr,zr.signature=Fr,Gr.signature=Fr,Ur.signature=Fr,jr.signature=Fr,Yr.signature=Fr,Hr.signature=Fr,Kr.signature=Lr,Qr.signature=Lr,Wr.signature=Fr,$r.signature=Fr,Xr.signature=Fr,Zr.signature=Lr,Jr.signature=Lr,ei.signature=Fr,ti.signature=Fr,ni.signature=Lr,ri.signature=Lr,ii.signature=Lr;var ai="number, number";function oi(e,t){if(!Ve(e)||!Ve(t))throw new Error("Integers expected in function bitAnd");return e&t}function si(e){if(!Ve(e))throw new Error("Integer expected in function bitNot");return~e}function ui(e,t){if(!Ve(e)||!Ve(t))throw new Error("Integers expected in function bitOr");return e|t}function ci(e,t){if(!Ve(e)||!Ve(t))throw new Error("Integers expected in function bitXor");return e^t}function li(e,t){if(!Ve(e)||!Ve(t))throw new Error("Integers expected in function leftShift");return e<<t}function fi(e,t){if(!Ve(e)||!Ve(t))throw new Error("Integers expected in function rightArithShift");return e>>t}function pi(e,t){if(!Ve(e)||!Ve(t))throw new Error("Integers expected in function rightLogShift");return e>>>t}function di(e,t){if(t<e)return 1;if(t===e)return t;var n=t+e>>1;return di(e,n)*di(n+1,t)}function hi(e,t){if(!Ve(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(!Ve(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(t>e)throw new TypeError("k must be less than or equal to n");var n=e-t;return t<n?di(n+1,e)/di(1,t):di(t+1,e)/di(1,n)}oi.signature=ai,si.signature="number",ui.signature=ai,ci.signature=ai,li.signature=ai,fi.signature=ai,pi.signature=ai,hi.signature="number, number";var mi=Math.PI,gi=2*Math.PI,vi=Math.E,yi="number, number";function xi(e){return!e}function bi(e,t){return!(!e&&!t)}function wi(e,t){return!!e!=!!t}function Ni(e,t){return!(!e||!t)}function Si(e){var t;if(Ve(e))return e<=0?isFinite(e)?Infinity:NaN:e>171?Infinity:di(1,e-1);if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*Si(1-e));if(e>=171.35)return Infinity;if(e>85){var n=e*e,r=n*e,i=r*e,a=i*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*n)-139/(51840*r)-571/(2488320*i)+163879/(209018880*a)+5246819/(75246796800*a*e))}--e,t=Di[0];for(var o=1;o<Di.length;++o)t+=Di[o]/(e+o);var s=e+_i+.5;return Math.sqrt(2*Math.PI)*Math.pow(s,e+.5)*Math.exp(-s)*t}xi.signature="number",bi.signature=yi,wi.signature=yi,Ni.signature=yi,Si.signature="number";var _i=4.7421875,Di=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],Ai="number";function Mi(e){return tt(e)}function Ei(e){return Math.atan(1/e)}function Ci(e){return isFinite(e)?(Math.log((e+1)/e)+Math.log(e/(e-1)))/2:0}function Ti(e){return Math.asin(1/e)}function Ri(e){var t=1/e;return Math.log(t+Math.sqrt(t*t+1))}function Ii(e){return Math.acos(1/e)}function Oi(e){var t=1/e,n=Math.sqrt(t*t-1);return Math.log(n+t)}function Pi(e){return nt(e)}function Fi(e){return rt(e)}function Li(e){return 1/Math.tan(e)}function ki(e){var t=Math.exp(2*e);return(t+1)/(t-1)}function Bi(e){return 1/Math.sin(e)}function Vi(e){return 0===e?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(e)-Math.exp(-e)))*qe(e)}function qi(e){return 1/Math.cos(e)}function zi(e){return 2/(Math.exp(e)+Math.exp(-e))}function Gi(e){return at(e)}Mi.signature=Ai,Ei.signature=Ai,Ci.signature=Ai,Ti.signature=Ai,Ri.signature=Ai,Ii.signature=Ai,Oi.signature=Ai,Pi.signature=Ai,Fi.signature=Ai,Li.signature=Ai,ki.signature=Ai,Bi.signature=Ai,Vi.signature=Ai,qi.signature=Ai,zi.signature=Ai,Gi.signature=Ai;var Ui="number";function ji(e){return e<0}function Yi(e){return e>0}function Hi(e){return 0===e}function Ki(e){return Number.isNaN(e)}ji.signature=Ui,Yi.signature=Ui,Hi.signature=Ui,Ki.signature=Ui;var Qi,Wi=Ot("isNegative",["typed"],(function(e){var t=(0,e.typed)("isNegative",{number:ji,BigNumber:function(e){return e.isNeg()&&!e.isZero()&&!e.isNaN()},Fraction:function(e){return e.s<0},Unit:function(e){return t(e.value)},"Array | Matrix":function(e){return Tr(e,t)}});return t})),$i=Ot("isNumeric",["typed"],(function(e){var t=(0,e.typed)("isNumeric",{"number | BigNumber | Fraction | boolean":function(){return!0},"Complex | Unit | string | null | undefined | Node":function(){return!1},"Array | Matrix":function(e){return Tr(e,t)}});return t})),Xi=Ot("hasNumericValue",["typed","isNumeric"],(function(e){var t=e.isNumeric;return(0,e.typed)("hasNumericValue",{string:function(e){return e.trim().length>0&&!isNaN(Number(e))},any:function(e){return t(e)}})})),Zi=Ot("isPositive",["typed"],(function(e){var t=(0,e.typed)("isPositive",{number:Yi,BigNumber:function(e){return!e.isNeg()&&!e.isZero()&&!e.isNaN()},Fraction:function(e){return e.s>0&&e.n>0},Unit:function(e){return t(e.value)},"Array | Matrix":function(e){return Tr(e,t)}});return t})),Ji=Ot("isZero",["typed"],(function(e){var t=(0,e.typed)("isZero",{number:Hi,BigNumber:function(e){return e.isZero()},Complex:function(e){return 0===e.re&&0===e.im},Fraction:function(e){return 1===e.d&&0===e.n},Unit:function(e){return t(e.value)},"Array | Matrix":function(e){return Tr(e,t)}});return t})),ea=Ot("isNaN",["typed"],(function(e){return(0,e.typed)("isNaN",{number:Ki,BigNumber:function(e){return e.isNaN()},Fraction:function(e){return!1},Complex:function(e){return e.isNaN()},Unit:function(e){return Number.isNaN(e.value)},"Array | Matrix":function(e){return Tr(e,Number.isNaN)}})})),ta=(Qi={},function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t.join(", ");Qi[i]||(Qi[i]=!0,(r=console).warn.apply(r,["Warning:"].concat(t)))}),na=Ot("typeOf",["typed"],(function(e){return(0,e.typed)("typeOf",{any:Ne})})),ra=Ot("typeof",[],(function(){return function(){ta('Function "typeof" has been renamed to "typeOf" in v6.0.0, please use the new function instead.');for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ne.apply(Ne,t)}}));function ia(e,t,n){if(null==n)return e.eq(t);if(e.eq(t))return!0;if(e.isNaN()||t.isNaN())return!1;if(e.isFinite()&&t.isFinite()){var r=e.minus(t).abs();if(r.isZero())return!0;var i=e.constructor.max(e.abs(),t.abs());return r.lte(i.times(n))}return!1}var aa="equalScalar",oa=Ot(aa,["typed","config"],(function(e){var t=e.config,n=(0,e.typed)(aa,{"boolean, boolean":function(e,t){return e===t},"number, number":function(e,n){return et(e,n,t.epsilon)},"BigNumber, BigNumber":function(e,n){return e.eq(n)||ia(e,n,t.epsilon)},"Fraction, Fraction":function(e,t){return e.equals(t)},"Complex, Complex":function(e,n){return function(e,t,n){return et(e.re,t.re,n)&&et(e.im,t.im,n)}(e,n,t.epsilon)},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return n(e.value,t.value)}});return n})),sa=(Ot(aa,["typed","config"],(function(e){var t=e.config;return(0,e.typed)(aa,{"number, number":function(e,n){return et(e,n,t.epsilon)}})})),Ot("SparseMatrix",["typed","equalScalar","Matrix"],(function(e){var t=e.typed,n=e.equalScalar;function r(e,t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!U(t))throw new Error("Invalid datatype: "+t);if(Y(e))!function(e,t,n){"SparseMatrix"===t.type?(e._values=t._values?_e(t._values):void 0,e._index=_e(t._index),e._ptr=_e(t._ptr),e._size=_e(t._size),e._datatype=n||t._datatype):i(e,t.valueOf(),n||t._datatype)}(this,e,t);else if(e&&j(e.index)&&j(e.ptr)&&j(e.size))this._values=e.values,this._index=e.index,this._ptr=e.ptr,this._size=e.size,this._datatype=t||e.datatype;else if(j(e))i(this,e,t);else{if(e)throw new TypeError("Unsupported type of data ("+Ne(e)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=t}}function i(e,r,i){e._values=[],e._index=[],e._ptr=[],e._datatype=i;var a=r.length,o=0,s=n,u=0;if(U(i)&&(s=t.find(n,[i,i])||n,u=t.convert(0,i)),a>0){var c=0;do{e._ptr.push(e._index.length);for(var l=0;l<a;l++){var f=r[l];if(j(f)){if(0===c&&o<f.length&&(o=f.length),c<f.length){var p=f[c];s(p,u)||(e._values.push(p),e._index.push(l))}}else 0===c&&o<1&&(o=1),s(f,u)||(e._values.push(f),e._index.push(l))}c++}while(c<o)}e._ptr.push(e._index.length),e._size=[a,o]}function a(e,t){if(!$(t))throw new TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var n,i,a,o,s=t.size();if(s.length!==e._size.length)throw new ht(s.length,e._size.length);var u=t.min(),c=t.max();for(n=0,i=e._size.length;n<i;n++)yt(u[n],e._size[n]),yt(c[n],e._size[n]);var l=e._values,f=e._index,p=e._ptr,d=t.dimension(0),h=t.dimension(1),m=[],g=[];d.forEach((function(e,t){g[e]=t[0],m[e]=!0}));var v=l?[]:void 0,y=[],x=[];return h.forEach((function(e){for(x.push(y.length),a=p[e],o=p[e+1];a<o;a++)!0===m[n=f[a]]&&(y.push(g[n]),v&&v.push(l[a]))})),x.push(y.length),new r({values:v,index:y,ptr:x,size:s,datatype:e._datatype})}function o(e,t,n,r){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var i,a=t.size(),o=t.isScalar();if(Y(n)?(i=n.size(),n=n.toArray()):i=gt(n),o){if(0!==i.length)throw new TypeError("Scalar expected");e.set(t.min(),n,r)}else{if(1!==a.length&&2!==a.length)throw new ht(a.length,e._size.length,"<");if(i.length<a.length){for(var s=0,u=0;1===a[s]&&1===i[s];)s++;for(;1===a[s];)u++,s++;n=Nt(n,a.length,u,i)}if(!Me(a,i))throw new ht(a,i,">");for(var c=t.min()[0],l=t.min()[1],f=i[0],p=i[1],d=0;d<f;d++)for(var h=0;h<p;h++)e.set([d+c,h+l],n[d][h],r)}return e}function s(e,t,n,r){if(n-t==0)return n;for(var i=t;i<n;i++)if(r[i]===e)return i;return t}function u(e,t,n,r,i,a,o){i.splice(e,0,r),a.splice(e,0,t);for(var s=n+1;s<o.length;s++)o[s]++}function c(e,r,i,a){var o=a||0,s=n,u=0;U(e._datatype)&&(s=t.find(n,[e._datatype,e._datatype])||n,u=t.convert(0,e._datatype),o=t.convert(o,e._datatype));var c,l,f,p=!s(o,u),d=e._size[0],h=e._size[1];if(i>h){for(l=h;l<i;l++)if(e._ptr[l]=e._values.length,p)for(c=0;c<d;c++)e._values.push(o),e._index.push(c);e._ptr[i]=e._values.length}else i<h&&(e._ptr.splice(i+1,h-i),e._values.splice(e._ptr[i],e._values.length),e._index.splice(e._ptr[i],e._index.length));if(h=i,r>d){if(p){var m=0;for(l=0;l<h;l++){e._ptr[l]=e._ptr[l]+m,f=e._ptr[l+1]+m;var g=0;for(c=d;c<r;c++,g++)e._values.splice(f+g,0,o),e._index.splice(f+g,0,c),m++}e._ptr[h]=e._values.length}}else if(r<d){var v=0;for(l=0;l<h;l++){e._ptr[l]=e._ptr[l]-v;var y=e._ptr[l+1]-v;for(f=e._ptr[l];f<y;f++)(c=e._index[f])>r-1&&(e._values.splice(f,1),e._index.splice(f,1),v++)}e._ptr[l]=e._values.length}return e._size[0]=r,e._size[1]=i,e}function l(e,t,n,r,i){var a,o,s=r[0],u=r[1],c=[];for(a=0;a<s;a++)for(c[a]=[],o=0;o<u;o++)c[a][o]=0;for(o=0;o<u;o++)for(var l=n[o+1],f=n[o];f<l;f++)c[a=t[f]][o]=e?i?_e(e[f]):e[f]:1;return c}return(r.prototype=new(0,e.Matrix)).createSparseMatrix=function(e,t){return new r(e,t)},r.prototype.type="SparseMatrix",r.prototype.isSparseMatrix=!0,r.prototype.getDataType=function(){return Rt(this._values,Ne)},r.prototype.storage=function(){return"sparse"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(e,t){return new r(e,t)},r.prototype.density=function(){var e=this._size[0],t=this._size[1];return 0!==e&&0!==t?this._index.length/(e*t):0},r.prototype.subset=function(e,t,n){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return a(this,e);case 2:case 3:return o(this,e,t,n);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(e){if(!j(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new ht(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var t=e[0],n=e[1];yt(t,this._size[0]),yt(n,this._size[1]);var r=s(t,this._ptr[n],this._ptr[n+1],this._index);return r<this._ptr[n+1]&&this._index[r]===t?this._values[r]:0},r.prototype.set=function(e,r,i){if(!j(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new ht(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var a=e[0],o=e[1],l=this._size[0],f=this._size[1],p=n,d=0;U(this._datatype)&&(p=t.find(n,[this._datatype,this._datatype])||n,d=t.convert(0,this._datatype)),(a>l-1||o>f-1)&&(c(this,Math.max(a+1,l),Math.max(o+1,f),i),l=this._size[0],f=this._size[1]),yt(a,l),yt(o,f);var h=s(a,this._ptr[o],this._ptr[o+1],this._index);return h<this._ptr[o+1]&&this._index[h]===a?p(r,d)?function(e,t,n,r,i){n.splice(e,1),r.splice(e,1);for(var a=t+1;a<i.length;a++)i[a]--}(h,o,this._values,this._index,this._ptr):this._values[h]=r:u(h,a,o,r,this._values,this._index,this._ptr),this},r.prototype.resize=function(e,t,n){if(!j(e))throw new TypeError("Array expected");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");return e.forEach((function(t){if(!B(t)||!Ve(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+lt(e)+")")})),c(n?this.clone():this,e[0],e[1],t)},r.prototype.reshape=function(e,t){if(!j(e))throw new TypeError("Array expected");if(2!==e.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");if(e.forEach((function(t){if(!B(t)||!Ve(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+lt(e)+")")})),this._size[0]*this._size[1]!=e[0]*e[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var n=t?this.clone():this;if(this._size[0]===e[0]&&this._size[1]===e[1])return n;for(var r=[],i=0;i<n._ptr.length;i++)for(var a=0;a<n._ptr[i+1]-n._ptr[i];a++)r.push(i);for(var o=n._values.slice(),c=n._index.slice(),l=0;l<n._index.length;l++){var f=c[l]*n._size[1]+r[l];r[l]=f%e[1],c[l]=Math.floor(f/e[1])}n._values.length=0,n._index.length=0,n._ptr.length=e[1]+1,n._size=e.slice();for(var p=0;p<n._ptr.length;p++)n._ptr[p]=0;for(var d=0;d<o.length;d++){var h=c[d],m=r[d],g=o[d];u(s(h,n._ptr[m],n._ptr[m+1],n._index),h,m,g,n._values,n._index,n._ptr)}return n},r.prototype.clone=function(){return new r({values:this._values?_e(this._values):void 0,index:_e(this._index),ptr:_e(this._ptr),size:_e(this._size),datatype:this._datatype})},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(e,i){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var a=this;return function(e,i,a,o,s,u,c){var l=[],f=[],p=[],d=n,h=0;U(e._datatype)&&(d=t.find(n,[e._datatype,e._datatype])||n,h=t.convert(0,e._datatype));for(var m=function(e,t,n){e=u(e,t,n),d(e,h)||(l.push(e),f.push(t))},g=0;g<=s;g++){p.push(l.length);var v=e._ptr[g],y=e._ptr[g+1];if(c)for(var x=v;x<y;x++){var b=e._index[x];b>=0&&b<=a&&m(e._values[x],b-0,g-0)}else{for(var w={},N=v;N<y;N++)w[e._index[N]]=e._values[N];for(var S=0;S<=a;S++)m(S in w?w[S]:0,S-0,g-0)}}return p.push(l.length),new r({values:l,index:f,ptr:p,size:[a-0+1,s-0+1]})}(this,0,this._size[0]-1,0,this._size[1]-1,(function(t,n,r){return e(t,[n,r],a)}),i)},r.prototype.forEach=function(e,t){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var n=this._size[0],r=this._size[1],i=0;i<r;i++){var a=this._ptr[i],o=this._ptr[i+1];if(t)for(var s=a;s<o;s++)e(this._values[s],[this._index[s],i],this);else{for(var u={},c=a;c<o;c++)u[this._index[c]]=this._values[c];for(var l=0;l<n;l++)e(l in u?u[l]:0,[l,i],this)}}},r.prototype.toArray=function(){return l(this._values,this._index,this._ptr,this._size,!0)},r.prototype.valueOf=function(){return l(this._values,this._index,this._ptr,this._size,!1)},r.prototype.format=function(e){for(var t=this._size[0],n=this._size[1],r=this.density(),i="Sparse Matrix ["+lt(t,e)+" x "+lt(n,e)+"] density: "+lt(r,e)+"\n",a=0;a<n;a++)for(var o=this._ptr[a+1],s=this._ptr[a];s<o;s++)i+="\n    ("+lt(this._index[s],e)+", "+lt(a,e)+") ==> "+(this._values?lt(this._values[s],e):"X");return i},r.prototype.toString=function(){return lt(this.toArray())},r.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(e){if(e){if(V(e)&&(e=e.toNumber()),!B(e)||!Ve(e))throw new TypeError("The parameter k must be an integer number")}else e=0;var t=e>0?e:0,n=e<0?-e:0,i=this._size[1],a=Math.min(this._size[0]-n,i-t),o=[],s=[],u=[];u[0]=0;for(var c=t;c<i&&o.length<a;c++)for(var l=this._ptr[c+1],f=this._ptr[c];f<l;f++){var p=this._index[f];if(p===c-t+n){o.push(this._values[f]),s[o.length-1]=p-n;break}}return u.push(o.length),new r({values:o,index:s,ptr:u,size:[a,1]})},r.fromJSON=function(e){return new r(e)},r.diagonal=function(e,i,a,o,s){if(!j(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map((function(e){if(V(e)&&(e=e.toNumber()),!B(e)||!Ve(e)||e<1)throw new Error("Size values must be positive integers");return e})),a){if(V(a)&&(a=a.toNumber()),!B(a)||!Ve(a))throw new TypeError("The parameter k must be an integer number")}else a=0;var u=n,c=0;U(s)&&(u=t.find(n,[s,s])||n,c=t.convert(0,s));var l,f=a>0?a:0,p=a<0?-a:0,d=e[0],h=e[1],m=Math.min(d-p,h-f);if(j(i)){if(i.length!==m)throw new Error("Invalid value array length");l=function(e){return i[e]}}else if(Y(i)){var g=i.size();if(1!==g.length||g[0]!==m)throw new Error("Invalid matrix length");l=function(e){return i.get([e])}}else l=function(){return i};for(var v=[],y=[],x=[],b=0;b<h;b++){x.push(v.length);var w=b-f;if(w>=0&&w<m){var N=l(w);u(N,c)||(y.push(w+p),v.push(N))}}return x.push(v.length),new r({values:v,index:y,ptr:x,size:[d,h]})},r.prototype.swapRows=function(e,t){if(!(B(e)&&Ve(e)&&B(t)&&Ve(t)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return yt(e,this._size[0]),yt(t,this._size[0]),r._swapRows(e,t,this._size[1],this._values,this._index,this._ptr),this},r._forEachRow=function(e,t,n,r,i){for(var a=r[e+1],o=r[e];o<a;o++)i(n[o],t[o])},r._swapRows=function(e,t,n,r,i,a){for(var o=0;o<n;o++){var u=a[o],c=a[o+1],l=s(e,u,c,i),f=s(t,u,c,i);if(l<c&&f<c&&i[l]===e&&i[f]===t){if(r){var p=r[l];r[l]=r[f],r[f]=p}}else if(l<c&&i[l]===e&&(f>=c||i[f]!==t)){var d=r?r[l]:void 0;i.splice(f,0,t),r&&r.splice(f,0,d),i.splice(f<=l?l+1:l,1),r&&r.splice(f<=l?l+1:l,1)}else if(f<c&&i[f]===t&&(l>=c||i[l]!==e)){var h=r?r[f]:void 0;i.splice(l,0,e),r&&r.splice(l,0,h),i.splice(l<=f?f+1:f,1),r&&r.splice(l<=f?f+1:f,1)}}},r}),{isClass:!0})),ua=Ot("number",["typed"],(function(e){var t=(0,e.typed)("number",{"":function(){return 0},number:function(e){return e},string:function(e){if("NaN"===e)return NaN;var t=Number(e);if(isNaN(t))throw new SyntaxError('String "'+e+'" is no valid number');return t},BigNumber:function(e){return e.toNumber()},Fraction:function(e){return e.valueOf()},Unit:function(e){throw new Error("Second argument with valueless unit expected")},null:function(e){return 0},"Unit, string | Unit":function(e,t){return e.toNumber(t)},"Array | Matrix":function(e){return Tr(e,t)}});return t.fromJSON=function(e){return parseFloat(e.value)},t})),ca=Ot("string",["typed"],(function(e){var t=(0,e.typed)("string",{"":function(){return""},number:He,null:function(e){return"null"},boolean:function(e){return e+""},string:function(e){return e},"Array | Matrix":function(e){return Tr(e,t)},any:function(e){return String(e)}});return t})),la=Ot("boolean",["typed"],(function(e){var t=(0,e.typed)("boolean",{"":function(){return!1},boolean:function(e){return e},number:function(e){return!!e},null:function(e){return!1},BigNumber:function(e){return!e.isZero()},string:function(e){var t=e.toLowerCase();if("true"===t)return!0;if("false"===t)return!1;var n=Number(e);if(""!==e&&!isNaN(n))return!!n;throw new Error('Cannot convert "'+e+'" to a boolean')},"Array | Matrix":function(e){return Tr(e,t)}});return t})),fa=Ot("bignumber",["typed","BigNumber"],(function(e){var t=e.BigNumber,n=(0,e.typed)("bignumber",{"":function(){return new t(0)},number:function(e){return new t(e+"")},string:function(e){return new t(e)},BigNumber:function(e){return e},Fraction:function(e){return new t(e.n).div(e.d).times(e.s)},null:function(e){return new t(0)},"Array | Matrix":function(e){return Tr(e,n)}});return n})),pa=Ot("complex",["typed","Complex"],(function(e){var t=e.Complex,n=(0,e.typed)("complex",{"":function(){return t.ZERO},number:function(e){return new t(e,0)},"number, number":function(e,n){return new t(e,n)},"BigNumber, BigNumber":function(e,n){return new t(e.toNumber(),n.toNumber())},Fraction:function(e){return new t(e.valueOf(),0)},Complex:function(e){return e.clone()},string:function(e){return t(e)},null:function(e){return t(0)},Object:function(e){if("re"in e&&"im"in e)return new t(e.re,e.im);if("r"in e&&"phi"in e||"abs"in e&&"arg"in e)return new t(e);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":function(e){return Tr(e,n)}});return n})),da=Ot("fraction",["typed","Fraction"],(function(e){var t=e.Fraction,n=(0,e.typed)("fraction",{number:function(e){if(!isFinite(e)||isNaN(e))throw new Error(e+" cannot be represented as a fraction");return new t(e)},string:function(e){return new t(e)},"number, number":function(e,n){return new t(e,n)},null:function(e){return new t(0)},BigNumber:function(e){return new t(e.toString())},Fraction:function(e){return e},Object:function(e){return new t(e)},"Array | Matrix":function(e){return Tr(e,n)}});return n})),ha=Ot("matrix",["typed","Matrix","DenseMatrix","SparseMatrix"],(function(e){var t=e.DenseMatrix,n=e.SparseMatrix;return(0,e.typed)("matrix",{"":function(){return r([])},string:function(e){return r([],e)},"string, string":function(e,t){return r([],e,t)},Array:function(e){return r(e)},Matrix:function(e){return r(e,e.storage())},"Array | Matrix, string":r,"Array | Matrix, string, string":r});function r(e,r,i){if("dense"===r||"default"===r||void 0===r)return new t(e,i);if("sparse"===r)return new n(e,i);throw new TypeError("Unknown matrix type "+JSON.stringify(r)+".")}})),ma=Ot("splitUnit",["typed"],(function(e){return(0,e.typed)("splitUnit",{"Unit, Array":function(e,t){return e.splitUnit(t)}})})),ga=Ot("unaryMinus",["typed"],(function(e){var t=(0,e.typed)("unaryMinus",{number:qr,Complex:function(e){return e.neg()},BigNumber:function(e){return e.neg()},Fraction:function(e){return e.neg()},Unit:function(e){var n=e.clone();return n.value=t(e.value),n},"Array | Matrix":function(e){return Tr(e,t)}});return t})),va=Ot("unaryPlus",["typed","config","BigNumber"],(function(e){var t=e.config,n=e.BigNumber,r=(0,e.typed)("unaryPlus",{number:zr,Complex:function(e){return e},BigNumber:function(e){return e},Fraction:function(e){return e},Unit:function(e){return e.clone()},"Array | Matrix":function(e){return Tr(e,r)},"boolean | string":function(e){return"BigNumber"===t.number?new n(+e):+e}});return r})),ya=Ot("abs",["typed"],(function(e){var t=(0,e.typed)("abs",{number:kr,Complex:function(e){return e.abs()},BigNumber:function(e){return e.abs()},Fraction:function(e){return e.abs()},"Array | Matrix":function(e){return Tr(e,t)},Unit:function(e){return e.abs()}});return t})),xa=Ot("apply",["typed","isInteger"],(function(e){var t=e.isInteger;return(0,e.typed)("apply",{"Array | Matrix, number | BigNumber, function":function(e,n,r){if(!t(n))throw new TypeError("Integer number expected for dimension");var i=Array.isArray(e)?gt(e):e.size();if(n<0||n>=i.length)throw new mt(n,i.length);return Y(e)?e.create(ba(e.valueOf(),n,r)):ba(e,n,r)}})}));function ba(e,t,n){var r,i,a;if(t<=0){if(Array.isArray(e[0])){for(a=function(e){var t,n,r=e.length,i=e[0].length,a=[];for(n=0;n<i;n++){var o=[];for(t=0;t<r;t++)o.push(e[t][n]);a.push(o)}return a}(e),i=[],r=0;r<a.length;r++)i[r]=ba(a[r],t-1,n);return i}return n(e)}for(i=[],r=0;r<e.length;r++)i[r]=ba(e[r],t-1,n);return i}var wa=Ot("addScalar",["typed"],(function(e){var t=(0,e.typed)("addScalar",{"number, number":Br,"Complex, Complex":function(e,t){return e.add(t)},"BigNumber, BigNumber":function(e,t){return e.plus(t)},"Fraction, Fraction":function(e,t){return e.add(t)},"Unit, Unit":function(e,n){if(null==e.value)throw new Error("Parameter x contains a unit with undefined value");if(null==n.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(n))throw new Error("Units do not match");var r=e.clone();return r.value=t(r.value,n.value),r.fixPrefix=!1,r}});return t})),Na=Ot("cbrt",["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],(function(e){var t=e.config,n=e.isNegative,r=e.unaryMinus,i=e.matrix,a=e.Complex,o=e.BigNumber,s=e.Fraction,u=(0,e.typed)("cbrt",{number:Gr,Complex:c,"Complex, boolean":c,BigNumber:function(e){return e.cbrt()},Unit:function(e){if(e.value&&q(e.value)){var t=e.clone();return t.value=1,(t=t.pow(1/3)).value=c(e.value),t}var i,a=n(e.value);a&&(e.value=r(e.value)),i=V(e.value)?new o(1).div(3):z(e.value)?new s(1,3):1/3;var u=e.pow(i);return a&&(u.value=r(u.value)),u},"Array | Matrix":function(e){return Tr(e,u)}});function c(e,n){var r=e.arg()/3,o=e.abs(),s=new a(Gr(o),0).mul(new a(0,r).exp());if(n){var u=[s,new a(Gr(o),0).mul(new a(0,r+2*Math.PI/3).exp()),new a(Gr(o),0).mul(new a(0,r-2*Math.PI/3).exp())];return"Array"===t.matrix?u:i(u)}return s}return u})),Sa=Ot("ceil",["typed","config","round"],(function(e){var t=e.config,n=e.round,r=(0,e.typed)("ceil",{number:function(e){return et(e,n(e),t.epsilon)?n(e):Ur(e)},Complex:function(e){return e.ceil()},BigNumber:function(e){return ia(e,n(e),t.epsilon)?n(e):e.ceil()},Fraction:function(e){return e.ceil()},"Array | Matrix":function(e){return Tr(e,r)}});return r})),_a=Ot("cube",["typed"],(function(e){var t=(0,e.typed)("cube",{number:jr,Complex:function(e){return e.mul(e).mul(e)},BigNumber:function(e){return e.times(e).times(e)},Fraction:function(e){return e.pow(3)},"Array | Matrix":function(e){return Tr(e,t)},Unit:function(e){return e.pow(3)}});return t})),Da=Ot("exp",["typed"],(function(e){var t=(0,e.typed)("exp",{number:Yr,Complex:function(e){return e.exp()},BigNumber:function(e){return e.exp()},"Array | Matrix":function(e){return Tr(e,t)}});return t})),Aa=Ot("expm1",["typed","Complex"],(function(e){var t=e.Complex,n=(0,e.typed)("expm1",{number:Hr,Complex:function(e){var n=Math.exp(e.re);return new t(n*Math.cos(e.im)-1,n*Math.sin(e.im))},BigNumber:function(e){return e.exp().minus(1)},"Array | Matrix":function(e){return Tr(e,n)}});return n})),Ma=Ot("fix",["typed","Complex","ceil","floor"],(function(e){var t=e.Complex,n=e.ceil,r=e.floor,i=(0,e.typed)("fix",{number:function(e){return e>0?r(e):n(e)},Complex:function(e){return new t(e.re>0?Math.floor(e.re):Math.ceil(e.re),e.im>0?Math.floor(e.im):Math.ceil(e.im))},BigNumber:function(e){return e.isNegative()?n(e):r(e)},Fraction:function(e){return e.s<0?e.ceil():e.floor()},"Array | Matrix":function(e){return Tr(e,i)}});return i})),Ea=Ot("floor",["typed","config","round"],(function(e){var t=e.config,n=e.round,r=(0,e.typed)("floor",{number:function(e){return et(e,n(e),t.epsilon)?n(e):Math.floor(e)},Complex:function(e){return e.floor()},BigNumber:function(e){return ia(e,n(e),t.epsilon)?n(e):e.floor()},Fraction:function(e){return e.floor()},"Array | Matrix":function(e){return Tr(e,r)}});return r})),Ca=Ot("algorithm01",["typed"],(function(e){var t=e.typed;return function(e,n,r,i){var a=e._data,o=e._size,s=e._datatype,u=n._values,c=n._index,l=n._ptr,f=n._size,p=n._datatype;if(o.length!==f.length)throw new ht(o.length,f.length);if(o[0]!==f[0]||o[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+f+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var d,h,m=o[0],g=o[1],v="string"==typeof s&&s===p?s:void 0,y=v?t.find(r,[v,v]):r,x=[];for(d=0;d<m;d++)x[d]=[];var b=[],w=[];for(h=0;h<g;h++){for(var N=h+1,S=l[h+1],_=l[h];_<S;_++)b[d=c[_]]=i?y(u[_],a[d][h]):y(a[d][h],u[_]),w[d]=N;for(d=0;d<m;d++)x[d][h]=w[d]===N?b[d]:a[d][h]}return e.createDenseMatrix({data:x,size:[m,g],datatype:v})}})),Ta=Ot("algorithm04",["typed","equalScalar"],(function(e){var t=e.typed,n=e.equalScalar;return function(e,r,i){var a=e._values,o=e._index,s=e._ptr,u=e._size,c=e._datatype,l=r._values,f=r._index,p=r._ptr,d=r._size,h=r._datatype;if(u.length!==d.length)throw new ht(u.length,d.length);if(u[0]!==d[0]||u[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+d+")");var m,g=u[0],v=u[1],y=n,x=0,b=i;"string"==typeof c&&c===h&&(y=t.find(n,[m=c,m]),x=t.convert(0,m),b=t.find(i,[m,m]));var w,N,S,_,D=a&&l?[]:void 0,A=[],M=[],E=a&&l?[]:void 0,C=a&&l?[]:void 0,T=[],R=[];for(N=0;N<v;N++){M[N]=A.length;var I=N+1;for(_=s[N+1],S=s[N];S<_;S++)A.push(w=o[S]),T[w]=I,E&&(E[w]=a[S]);for(_=p[N+1],S=p[N];S<_;S++)if(T[w=f[S]]===I){if(E){var O=b(E[w],l[S]);y(O,x)?T[w]=null:E[w]=O}}else A.push(w),R[w]=I,C&&(C[w]=l[S]);if(E&&C)for(S=M[N];S<A.length;)T[w=A[S]]===I?(D[S]=E[w],S++):R[w]===I?(D[S]=C[w],S++):A.splice(S,1)}return M[v]=A.length,e.createSparseMatrix({values:D,index:A,ptr:M,size:[g,v],datatype:m})}})),Ra=Ot("algorithm10",["typed","DenseMatrix"],(function(e){var t=e.typed,n=e.DenseMatrix;return function(e,r,i,a){var o=e._values,s=e._index,u=e._ptr,c=e._size,l=e._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f,p=c[0],d=c[1],h=i;"string"==typeof l&&(r=t.convert(r,f=l),h=t.find(i,[f,f]));for(var m=[],g=[],v=[],y=0;y<d;y++){for(var x=y+1,b=u[y+1],w=u[y];w<b;w++){var N=s[w];g[N]=o[w],v[N]=x}for(var S=0;S<p;S++)0===y&&(m[S]=[]),m[S][y]=v[S]===x?a?h(r,g[S]):h(g[S],r):r}return new n({data:m,size:[p,d],datatype:f})}})),Ia=Ot("algorithm13",["typed"],(function(e){var t=e.typed;return function(e,n,r){var i,a=e._data,o=e._size,s=e._datatype,u=n._data,c=n._size,l=n._datatype,f=[];if(o.length!==c.length)throw new ht(o.length,c.length);for(var p=0;p<o.length;p++){if(o[p]!==c[p])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+c+")");f[p]=o[p]}var d=r;"string"==typeof s&&s===l&&(d=t.find(r,[i=s,i]));var h=f.length>0?function e(t,n,r,i,a,o){var s=[];if(n===r.length-1)for(var u=0;u<i;u++)s[u]=t(a[u],o[u]);else for(var c=0;c<i;c++)s[c]=e(t,n+1,r,r[n+1],a[c],o[c]);return s}(d,0,f,f[0],a,u):[];return e.createDenseMatrix({data:h,size:f,datatype:i})}})),Oa=Ot("algorithm14",["typed"],(function(e){var t=e.typed;return function(e,n,r,i){var a,o=e._data,s=e._size,u=e._datatype,c=r;"string"==typeof u&&(n=t.convert(n,a=u),c=t.find(r,[a,a]));var l=s.length>0?function e(t,n,r,i,a,o,s){var u=[];if(n===r.length-1)for(var c=0;c<i;c++)u[c]=s?t(o,a[c]):t(a[c],o);else for(var l=0;l<i;l++)u[l]=e(t,n+1,r,r[n+1],a[l],o,s);return u}(c,0,s,s[0],o,n,i):[];return e.createDenseMatrix({data:l,size:_e(s),datatype:a})}})),Pa=Ot("gcd",["typed","matrix","equalScalar","BigNumber","DenseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.BigNumber,a=e.DenseMatrix,o=Ca({typed:t}),s=Ta({typed:t,equalScalar:r}),u=Ra({typed:t,DenseMatrix:a}),c=Ia({typed:t}),l=Oa({typed:t}),f=t("gcd",{"number, number":Kr,"BigNumber, BigNumber":function(e,t){if(!e.isInt()||!t.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var n=new i(0);!t.isZero();){var r=e.mod(t);e=t,t=r}return e.lt(n)?e.neg():e},"Fraction, Fraction":function(e,t){return e.gcd(t)},"SparseMatrix, SparseMatrix":function(e,t){return s(e,t,f)},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,f,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,f,!1)},"DenseMatrix, DenseMatrix":function(e,t){return c(e,t,f)},"Array, Array":function(e,t){return f(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return f(n(e),t)},"Matrix, Array":function(e,t){return f(e,n(t))},"SparseMatrix, number | BigNumber":function(e,t){return u(e,t,f,!1)},"DenseMatrix, number | BigNumber":function(e,t){return l(e,t,f,!1)},"number | BigNumber, SparseMatrix":function(e,t){return u(t,e,f,!0)},"number | BigNumber, DenseMatrix":function(e,t){return l(t,e,f,!0)},"Array, number | BigNumber":function(e,t){return l(n(e),t,f,!1).valueOf()},"number | BigNumber, Array":function(e,t){return l(n(t),e,f,!0).valueOf()},"Array | Matrix | number | BigNumber, Array | Matrix | number | BigNumber, ...Array | Matrix | number | BigNumber":function(e,t,n){for(var r=f(e,t),i=0;i<n.length;i++)r=f(r,n[i]);return r}});return f})),Fa=Ot("algorithm02",["typed","equalScalar"],(function(e){var t=e.typed,n=e.equalScalar;return function(e,r,i,a){var o=e._data,s=e._size,u=e._datatype,c=r._values,l=r._index,f=r._ptr,p=r._size,d=r._datatype;if(s.length!==p.length)throw new ht(s.length,p.length);if(s[0]!==p[0]||s[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+p+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var h,m=s[0],g=s[1],v=n,y=0,x=i;"string"==typeof u&&u===d&&(v=t.find(n,[h=u,h]),y=t.convert(0,h),x=t.find(i,[h,h]));for(var b=[],w=[],N=[],S=0;S<g;S++){N[S]=w.length;for(var _=f[S+1],D=f[S];D<_;D++){var A=l[D],M=a?x(c[D],o[A][S]):x(o[A][S],c[D]);v(M,y)||(w.push(A),b.push(M))}}return N[g]=w.length,r.createSparseMatrix({values:b,index:w,ptr:N,size:[m,g],datatype:h})}})),La=Ot("algorithm06",["typed","equalScalar"],(function(e){var t=e.typed,n=e.equalScalar;return function(e,r,i){var a=e._values,o=e._size,s=e._datatype,u=r._values,c=r._size,l=r._datatype;if(o.length!==c.length)throw new ht(o.length,c.length);if(o[0]!==c[0]||o[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+c+")");var f,p=o[0],d=o[1],h=n,m=0,g=i;"string"==typeof s&&s===l&&(h=t.find(n,[f=s,f]),m=t.convert(0,f),g=t.find(i,[f,f]));for(var v=a&&u?[]:void 0,y=[],x=[],b=v?[]:void 0,w=[],N=[],S=0;S<d;S++){x[S]=y.length;var _=S+1;if(Or(e,S,w,b,N,_,y,g),Or(r,S,w,b,N,_,y,g),b)for(var D=x[S];D<y.length;){var A=y[D];if(N[A]===_){var M=b[A];h(M,m)?y.splice(D,1):(v.push(M),D++)}else y.splice(D,1)}else for(var E=x[S];E<y.length;)N[y[E]]!==_?y.splice(E,1):E++}return x[d]=y.length,e.createSparseMatrix({values:v,index:y,ptr:x,size:[p,d],datatype:f})}})),ka=Ot("algorithm11",["typed","equalScalar"],(function(e){var t=e.typed,n=e.equalScalar;return function(e,r,i,a){var o=e._values,s=e._index,u=e._ptr,c=e._size,l=e._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f,p=c[0],d=c[1],h=n,m=0,g=i;"string"==typeof l&&(h=t.find(n,[f=l,f]),m=t.convert(0,f),r=t.convert(r,f),g=t.find(i,[f,f]));for(var v=[],y=[],x=[],b=0;b<d;b++){x[b]=y.length;for(var w=u[b+1],N=u[b];N<w;N++){var S=s[N],_=a?g(r,o[N]):g(o[N],r);h(_,m)||(y.push(S),v.push(_))}}return x[d]=y.length,e.createSparseMatrix({values:v,index:y,ptr:x,size:[p,d],datatype:f})}})),Ba=Ot("lcm",["typed","matrix","equalScalar"],(function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=Fa({typed:t,equalScalar:r}),a=La({typed:t,equalScalar:r}),o=ka({typed:t,equalScalar:r}),s=Ia({typed:t}),u=Oa({typed:t}),c=t("lcm",{"number, number":Qr,"BigNumber, BigNumber":function(e,t){if(!e.isInt()||!t.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(e.isZero())return e;if(t.isZero())return t;for(var n=e.times(t);!t.isZero();){var r=t;t=e.mod(r),e=r}return n.div(e).abs()},"Fraction, Fraction":function(e,t){return e.lcm(t)},"SparseMatrix, SparseMatrix":function(e,t){return a(e,t,c)},"SparseMatrix, DenseMatrix":function(e,t){return i(t,e,c,!0)},"DenseMatrix, SparseMatrix":function(e,t){return i(e,t,c,!1)},"DenseMatrix, DenseMatrix":function(e,t){return s(e,t,c)},"Array, Array":function(e,t){return c(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return c(n(e),t)},"Matrix, Array":function(e,t){return c(e,n(t))},"SparseMatrix, number | BigNumber":function(e,t){return o(e,t,c,!1)},"DenseMatrix, number | BigNumber":function(e,t){return u(e,t,c,!1)},"number | BigNumber, SparseMatrix":function(e,t){return o(t,e,c,!0)},"number | BigNumber, DenseMatrix":function(e,t){return u(t,e,c,!0)},"Array, number | BigNumber":function(e,t){return u(n(e),t,c,!1).valueOf()},"number | BigNumber, Array":function(e,t){return u(n(t),e,c,!0).valueOf()},"Array | Matrix | number | BigNumber, Array | Matrix | number | BigNumber, ...Array | Matrix | number | BigNumber":function(e,t,n){for(var r=c(e,t),i=0;i<n.length;i++)r=c(r,n[i]);return r}});return c})),Va=Ot("log10",["typed","config","Complex"],(function(e){var t=e.config,n=e.Complex,r=(0,e.typed)("log10",{number:function(e){return e>=0||t.predictable?$r(e):new n(e,0).log().div(Math.LN10)},Complex:function(e){return new n(e).log().div(Math.LN10)},BigNumber:function(e){return!e.isNegative()||t.predictable?e.log():new n(e.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":function(e){return Tr(e,r)}});return r})),qa=Ot("log2",["typed","config","Complex"],(function(e){var t=e.config,n=e.Complex,r=(0,e.typed)("log2",{number:function(e){return e>=0||t.predictable?Xr(e):i(new n(e,0))},Complex:i,BigNumber:function(e){return!e.isNegative()||t.predictable?e.log(2):i(new n(e.toNumber(),0))},"Array | Matrix":function(e){return Tr(e,r)}});function i(e){var t=Math.sqrt(e.re*e.re+e.im*e.im);return new n(Math.log2?Math.log2(t):Math.log(t)/Math.LN2,Math.atan2(e.im,e.re)/Math.LN2)}return r})),za=Ot("algorithm03",["typed"],(function(e){var t=e.typed;return function(e,n,r,i){var a=e._data,o=e._size,s=e._datatype,u=n._values,c=n._index,l=n._ptr,f=n._size,p=n._datatype;if(o.length!==f.length)throw new ht(o.length,f.length);if(o[0]!==f[0]||o[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+f+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var d,h=o[0],m=o[1],g=0,v=r;"string"==typeof s&&s===p&&(g=t.convert(0,d=s),v=t.find(r,[d,d]));for(var y=[],x=0;x<h;x++)y[x]=[];for(var b=[],w=[],N=0;N<m;N++){for(var S=N+1,_=l[N+1],D=l[N];D<_;D++){var A=c[D];b[A]=i?v(u[D],a[A][N]):v(a[A][N],u[D]),w[A]=S}for(var M=0;M<h;M++)y[M][N]=w[M]===S?b[M]:i?v(g,a[M][N]):v(a[M][N],g)}return e.createDenseMatrix({data:y,size:[h,m],datatype:d})}})),Ga=Ot("algorithm05",["typed","equalScalar"],(function(e){var t=e.typed,n=e.equalScalar;return function(e,r,i){var a=e._values,o=e._index,s=e._ptr,u=e._size,c=e._datatype,l=r._values,f=r._index,p=r._ptr,d=r._size,h=r._datatype;if(u.length!==d.length)throw new ht(u.length,d.length);if(u[0]!==d[0]||u[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+d+")");var m,g=u[0],v=u[1],y=n,x=0,b=i;"string"==typeof c&&c===h&&(y=t.find(n,[m=c,m]),x=t.convert(0,m),b=t.find(i,[m,m]));var w,N,S,_,D=a&&l?[]:void 0,A=[],M=[],E=D?[]:void 0,C=D?[]:void 0,T=[],R=[];for(N=0;N<v;N++){M[N]=A.length;var I=N+1;for(S=s[N],_=s[N+1];S<_;S++)A.push(w=o[S]),T[w]=I,E&&(E[w]=a[S]);for(S=p[N],_=p[N+1];S<_;S++)T[w=f[S]]!==I&&A.push(w),R[w]=I,C&&(C[w]=l[S]);if(D)for(S=M[N];S<A.length;){var O=T[w=A[S]],P=R[w];if(O===I||P===I){var F=b(O===I?E[w]:x,P===I?C[w]:x);y(F,x)?A.splice(S,1):(D.push(F),S++)}}}return M[v]=A.length,e.createSparseMatrix({values:D,index:A,ptr:M,size:[g,v],datatype:m})}})),Ua=Ot("algorithm12",["typed","DenseMatrix"],(function(e){var t=e.typed,n=e.DenseMatrix;return function(e,r,i,a){var o=e._values,s=e._index,u=e._ptr,c=e._size,l=e._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f,p=c[0],d=c[1],h=i;"string"==typeof l&&(r=t.convert(r,f=l),h=t.find(i,[f,f]));for(var m=[],g=[],v=[],y=0;y<d;y++){for(var x=y+1,b=u[y+1],w=u[y];w<b;w++){var N=s[w];g[N]=o[w],v[N]=x}for(var S=0;S<p;S++)0===y&&(m[S]=[]),m[S][y]=v[S]===x?a?h(r,g[S]):h(g[S],r):a?h(r,0):h(0,r)}return new n({data:m,size:[p,d],datatype:f})}})),ja=Ot("mod",["typed","matrix","equalScalar","DenseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.DenseMatrix,a=Fa({typed:t,equalScalar:r}),o=za({typed:t}),s=Ga({typed:t,equalScalar:r}),u=ka({typed:t,equalScalar:r}),c=Ua({typed:t,DenseMatrix:i}),l=Ia({typed:t}),f=Oa({typed:t}),p=t("mod",{"number, number":Zr,"BigNumber, BigNumber":function(e,t){return t.isZero()?e:e.mod(t)},"Fraction, Fraction":function(e,t){return e.mod(t)},"SparseMatrix, SparseMatrix":function(e,t){return s(e,t,p,!1)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,p,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,p,!1)},"DenseMatrix, DenseMatrix":function(e,t){return l(e,t,p)},"Array, Array":function(e,t){return p(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return p(n(e),t)},"Matrix, Array":function(e,t){return p(e,n(t))},"SparseMatrix, any":function(e,t){return u(e,t,p,!1)},"DenseMatrix, any":function(e,t){return f(e,t,p,!1)},"any, SparseMatrix":function(e,t){return c(t,e,p,!0)},"any, DenseMatrix":function(e,t){return f(t,e,p,!0)},"Array, any":function(e,t){return f(n(e),t,p,!1).valueOf()},"any, Array":function(e,t){return f(n(t),e,p,!0).valueOf()}});return p})),Ya=Ot("multiplyScalar",["typed"],(function(e){var t=(0,e.typed)("multiplyScalar",{"number, number":Vr,"Complex, Complex":function(e,t){return e.mul(t)},"BigNumber, BigNumber":function(e,t){return e.times(t)},"Fraction, Fraction":function(e,t){return e.mul(t)},"number | Fraction | BigNumber | Complex, Unit":function(e,n){var r=n.clone();return r.value=null===r.value?r._normalize(e):t(r.value,e),r},"Unit, number | Fraction | BigNumber | Complex":function(e,n){var r=e.clone();return r.value=null===r.value?r._normalize(n):t(r.value,n),r},"Unit, Unit":function(e,t){return e.multiply(t)}});return t})),Ha=Ot("multiply",["typed","matrix","addScalar","multiplyScalar","equalScalar"],(function(e){var t=e.typed,n=e.matrix,r=e.addScalar,i=e.multiplyScalar,a=e.equalScalar,o=ka({typed:t,equalScalar:a}),s=Oa({typed:t}),u=t("multiply",Ae({"Array, Array":function(e,t){c(gt(e),gt(t));var r=u(n(e),n(t));return Y(r)?r.valueOf():r},"Matrix, Matrix":function(e,n){var a=e.size(),o=n.size();return c(a,o),1===a.length?1===o.length?function(e,n,a){if(0===a)throw new Error("Cannot multiply two empty vectors");var o,s=e._data,u=e._datatype,c=n._data,l=n._datatype,f=r,p=i;u&&l&&u===l&&"string"==typeof u&&(f=t.find(r,[o=u,o]),p=t.find(i,[o,o]));for(var d=p(s[0],c[0]),h=1;h<a;h++)d=f(d,p(s[h],c[h]));return d}(e,n,a[0]):function(e,n){if("dense"!==n.storage())throw new Error("Support for SparseMatrix not implemented");return function(e,n){var a,o=e._data,s=e._datatype,u=n._data,c=n._datatype,l=e._size[0],f=n._size[1],p=r,d=i;s&&c&&s===c&&"string"==typeof s&&(p=t.find(r,[a=s,a]),d=t.find(i,[a,a]));for(var h=[],m=0;m<f;m++){for(var g=d(o[0],u[0][m]),v=1;v<l;v++)g=p(g,d(o[v],u[v][m]));h[m]=g}return e.createDenseMatrix({data:h,size:[f],datatype:a})}(e,n)}(e,n):1===o.length?l(e,n):f(e,n)},"Matrix, Array":function(e,t){return u(e,n(t))},"Array, Matrix":function(e,t){return u(n(e,t.storage()),t)},"SparseMatrix, any":function(e,t){return o(e,t,i,!1)},"DenseMatrix, any":function(e,t){return s(e,t,i,!1)},"any, SparseMatrix":function(e,t){return o(t,e,i,!0)},"any, DenseMatrix":function(e,t){return s(t,e,i,!0)},"Array, any":function(e,t){return s(n(e),t,i,!1).valueOf()},"any, Array":function(e,t){return s(n(t),e,i,!0).valueOf()},"any, any":i,"any, any, ...any":function(e,t,n){for(var r=u(e,t),i=0;i<n.length;i++)r=u(r,n[i]);return r}},i.signatures));function c(e,t){switch(e.length){case 1:switch(t.length){case 1:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+e[0]+") must match Matrix rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;case 2:switch(t.length){case 1:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+e[1]+") must match Vector length ("+t[0]+")");break;case 2:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+e[1]+") must match Matrix B rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+e.length+" dimensions)")}}var l=t("_multiplyMatrixVector",{"DenseMatrix, any":function(e,n){var a,o=e._data,s=e._size,u=e._datatype,c=n._data,l=n._datatype,f=s[0],p=s[1],d=r,h=i;u&&l&&u===l&&"string"==typeof u&&(d=t.find(r,[a=u,a]),h=t.find(i,[a,a]));for(var m=[],g=0;g<f;g++){for(var v=o[g],y=h(v[0],c[0]),x=1;x<p;x++)y=d(y,h(v[x],c[x]));m[g]=y}return e.createDenseMatrix({data:m,size:[f],datatype:a})},"SparseMatrix, any":function(e,n){var o=e._values,s=e._index,u=e._ptr,c=e._datatype;if(!o)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var l,f=n._data,p=n._datatype,d=e._size[0],h=n._size[0],m=[],g=[],v=[],y=r,x=i,b=a,w=0;c&&p&&c===p&&"string"==typeof c&&(y=t.find(r,[l=c,l]),x=t.find(i,[l,l]),b=t.find(a,[l,l]),w=t.convert(0,l));var N=[],S=[];v[0]=0;for(var _=0;_<h;_++){var D=f[_];if(!b(D,w))for(var A=u[_+1],M=u[_];M<A;M++){var E=s[M];S[E]?N[E]=y(N[E],x(D,o[M])):(S[E]=!0,g.push(E),N[E]=x(D,o[M]))}}for(var C=g.length,T=0;T<C;T++)m[T]=N[g[T]];return v[1]=g.length,e.createSparseMatrix({values:m,index:g,ptr:v,size:[d,1],datatype:l})}}),f=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function(e,n){var a,o=e._data,s=e._size,u=e._datatype,c=n._data,l=n._datatype,f=s[0],p=s[1],d=n._size[1],h=r,m=i;u&&l&&u===l&&"string"==typeof u&&(h=t.find(r,[a=u,a]),m=t.find(i,[a,a]));for(var g=[],v=0;v<f;v++){var y=o[v];g[v]=[];for(var x=0;x<d;x++){for(var b=m(y[0],c[0][x]),w=1;w<p;w++)b=h(b,m(y[w],c[w][x]));g[v][x]=b}}return e.createDenseMatrix({data:g,size:[f,d],datatype:a})},"DenseMatrix, SparseMatrix":function(e,n){var o=e._data,s=e._size,u=e._datatype,c=n._values,l=n._index,f=n._ptr,p=n._size,d=n._datatype;if(!c)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var h,m=s[0],g=p[1],v=r,y=i,x=a,b=0;u&&d&&u===d&&"string"==typeof u&&(v=t.find(r,[h=u,h]),y=t.find(i,[h,h]),x=t.find(a,[h,h]),b=t.convert(0,h));for(var w=[],N=[],S=[],_=n.createSparseMatrix({values:w,index:N,ptr:S,size:[m,g],datatype:h}),D=0;D<g;D++){S[D]=N.length;var A=f[D],M=f[D+1];if(M>A)for(var E=0,C=0;C<m;C++){for(var T=C+1,R=void 0,I=A;I<M;I++){var O=l[I];E!==T?(R=y(o[C][O],c[I]),E=T):R=v(R,y(o[C][O],c[I]))}E!==T||x(R,b)||(N.push(C),w.push(R))}}return S[g]=N.length,_},"SparseMatrix, DenseMatrix":function(e,n){var o=e._values,s=e._index,u=e._ptr,c=e._datatype;if(!o)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var l,f=n._data,p=n._datatype,d=e._size[0],h=n._size[0],m=n._size[1],g=r,v=i,y=a,x=0;c&&p&&c===p&&"string"==typeof c&&(g=t.find(r,[l=c,l]),v=t.find(i,[l,l]),y=t.find(a,[l,l]),x=t.convert(0,l));for(var b=[],w=[],N=[],S=e.createSparseMatrix({values:b,index:w,ptr:N,size:[d,m],datatype:l}),_=[],D=[],A=0;A<m;A++){N[A]=w.length;for(var M=A+1,E=0;E<h;E++){var C=f[E][A];if(!y(C,x))for(var T=u[E+1],R=u[E];R<T;R++){var I=s[R];D[I]!==M?(D[I]=M,w.push(I),_[I]=v(C,o[R])):_[I]=g(_[I],v(C,o[R]))}}for(var O=w.length,P=N[A];P<O;P++)b[P]=_[w[P]]}return N[m]=w.length,S},"SparseMatrix, SparseMatrix":function(e,n){var a,o=e._values,s=e._index,u=e._ptr,c=e._datatype,l=n._values,f=n._index,p=n._ptr,d=n._datatype,h=e._size[0],m=n._size[1],g=o&&l,v=r,y=i;c&&d&&c===d&&"string"==typeof c&&(v=t.find(r,[a=c,a]),y=t.find(i,[a,a]));for(var x,b,w,N,S,_,D=g?[]:void 0,A=[],M=[],E=e.createSparseMatrix({values:D,index:A,ptr:M,size:[h,m],datatype:a}),C=g?[]:void 0,T=[],R=0;R<m;R++){M[R]=A.length;var I=R+1;for(N=p[R+1],w=p[R];w<N;w++)if(_=f[w],g)for(b=u[_+1],x=u[_];x<b;x++)T[S=s[x]]!==I?(T[S]=I,A.push(S),C[S]=y(l[w],o[x])):C[S]=v(C[S],y(l[w],o[x]));else for(b=u[_+1],x=u[_];x<b;x++)T[S=s[x]]!==I&&(T[S]=I,A.push(S));if(g)for(var O=A.length,P=M[R];P<O;P++)D[P]=C[A[P]]}return M[m]=A.length,E}});return u})),Ka=Ot("nthRoot",["typed","matrix","equalScalar","BigNumber"],(function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.BigNumber,a=Ca({typed:t}),o=Fa({typed:t,equalScalar:r}),s=La({typed:t,equalScalar:r}),u=ka({typed:t,equalScalar:r}),c=Ia({typed:t}),l=Oa({typed:t}),f="Complex number not supported in function nthRoot. Use nthRoots instead.",p=t("nthRoot",{number:function(e){return Jr(e,2)},"number, number":Jr,BigNumber:function(e){return d(e,new i(2))},Complex:function(e){throw new Error(f)},"Complex, number":function(e,t){throw new Error(f)},"BigNumber, BigNumber":d,"Array | Matrix":function(e){return p(e,2)},"SparseMatrix, SparseMatrix":function(e,t){if(1===t.density())return s(e,t,p);throw new Error("Root must be non-zero")},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,p,!0)},"DenseMatrix, SparseMatrix":function(e,t){if(1===t.density())return a(e,t,p,!1);throw new Error("Root must be non-zero")},"DenseMatrix, DenseMatrix":function(e,t){return c(e,t,p)},"Array, Array":function(e,t){return p(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return p(n(e),t)},"Matrix, Array":function(e,t){return p(e,n(t))},"SparseMatrix, number | BigNumber":function(e,t){return u(e,t,p,!1)},"DenseMatrix, number | BigNumber":function(e,t){return l(e,t,p,!1)},"number | BigNumber, SparseMatrix":function(e,t){if(1===t.density())return u(t,e,p,!0);throw new Error("Root must be non-zero")},"number | BigNumber, DenseMatrix":function(e,t){return l(t,e,p,!0)},"Array, number | BigNumber":function(e,t){return p(n(e),t).valueOf()},"number | BigNumber, Array":function(e,t){return p(e,n(t)).valueOf()}});return p;function d(e,t){var n=i.precision,r=i.clone({precision:n+2}),a=new i(0),o=new r(1),s=t.isNegative();if(s&&(t=t.neg()),t.isZero())throw new Error("Root must be non-zero");if(e.isNegative()&&!t.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(e.isZero())return s?new r(Infinity):0;if(!e.isFinite())return s?a:e;var u=e.abs().pow(o.div(t));return u=e.isNeg()?u.neg():u,new i((s?o.div(u):u).toPrecision(n))}})),Qa=Ot("sign",["typed","BigNumber","Fraction","complex"],(function(e){var t=e.BigNumber,n=e.complex,r=e.Fraction,i=(0,e.typed)("sign",{number:ei,Complex:function(e){return 0===e.im?n(ei(e.re)):e.sign()},BigNumber:function(e){return new t(e.cmp(0))},Fraction:function(e){return new r(e.s,1)},"Array | Matrix":function(e){return Tr(e,i)},Unit:function(e){return i(e.value)}});return i})),Wa=Ot("sqrt",["config","typed","Complex"],(function(e){var t=e.config,n=e.Complex,r=(0,e.typed)("sqrt",{number:i,Complex:function(e){return e.sqrt()},BigNumber:function(e){return!e.isNegative()||t.predictable?e.sqrt():i(e.toNumber())},"Array | Matrix":function(e){return Tr(e,r)},Unit:function(e){return e.pow(.5)}});function i(e){return isNaN(e)?NaN:e>=0||t.predictable?Math.sqrt(e):new n(e,0).sqrt()}return r})),$a=Ot("square",["typed"],(function(e){var t=(0,e.typed)("square",{number:ti,Complex:function(e){return e.mul(e)},BigNumber:function(e){return e.times(e)},Fraction:function(e){return e.mul(e)},"Array | Matrix":function(e){return Tr(e,t)},Unit:function(e){return e.pow(2)}});return t})),Xa=Ot("subtract",["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.addScalar,a=e.unaryMinus,o=e.DenseMatrix,s=Ca({typed:t}),u=za({typed:t}),c=Ga({typed:t,equalScalar:r}),l=Ra({typed:t,DenseMatrix:o}),f=Ia({typed:t}),p=Oa({typed:t}),d=t("subtract",{"number, number":function(e,t){return e-t},"Complex, Complex":function(e,t){return e.sub(t)},"BigNumber, BigNumber":function(e,t){return e.minus(t)},"Fraction, Fraction":function(e,t){return e.sub(t)},"Unit, Unit":function(e,t){if(null===e.value)throw new Error("Parameter x contains a unit with undefined value");if(null===t.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(t))throw new Error("Units do not match");var n=e.clone();return n.value=d(n.value,t.value),n.fixPrefix=!1,n},"SparseMatrix, SparseMatrix":function(e,t){return Za(e,t),c(e,t,d)},"SparseMatrix, DenseMatrix":function(e,t){return Za(e,t),u(t,e,d,!0)},"DenseMatrix, SparseMatrix":function(e,t){return Za(e,t),s(e,t,d,!1)},"DenseMatrix, DenseMatrix":function(e,t){return Za(e,t),f(e,t,d)},"Array, Array":function(e,t){return d(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return d(n(e),t)},"Matrix, Array":function(e,t){return d(e,n(t))},"SparseMatrix, any":function(e,t){return l(e,a(t),i)},"DenseMatrix, any":function(e,t){return p(e,t,d)},"any, SparseMatrix":function(e,t){return l(t,e,d,!0)},"any, DenseMatrix":function(e,t){return p(t,e,d,!0)},"Array, any":function(e,t){return p(n(e),t,d,!1).valueOf()},"any, Array":function(e,t){return p(n(t),e,d,!0).valueOf()}});return d}));function Za(e,t){var n=e.size(),r=t.size();if(n.length!==r.length)throw new ht(n.length,r.length)}var Ja=Ot("xgcd",["typed","config","matrix","BigNumber"],(function(e){var t=e.config,n=e.matrix,r=e.BigNumber;return(0,e.typed)("xgcd",{"number, number":function(e,r){var i=ni(e,r);return"Array"===t.matrix?i:n(i)},"BigNumber, BigNumber":function(e,i){var a,o,s,u,c=new r(0),l=new r(1),f=c,p=l,d=l,h=c;if(!e.isInt()||!i.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!i.isZero();)o=e.div(i).floor(),s=e.mod(i),a=f,f=p.minus(o.times(f)),p=a,a=d,d=h.minus(o.times(d)),h=a,e=i,i=s;return u=e.lt(c)?[e.neg(),p.neg(),h.neg()]:[e,e.isZero()?0:p,h],"Array"===t.matrix?u:n(u)}})})),eo=Ot("algorithm09",["typed","equalScalar"],(function(e){var t=e.typed,n=e.equalScalar;return function(e,r,i){var a=e._values,o=e._index,s=e._ptr,u=e._size,c=e._datatype,l=r._values,f=r._index,p=r._ptr,d=r._size,h=r._datatype;if(u.length!==d.length)throw new ht(u.length,d.length);if(u[0]!==d[0]||u[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+d+")");var m,g=u[0],v=u[1],y=n,x=0,b=i;"string"==typeof c&&c===h&&(y=t.find(n,[m=c,m]),x=t.convert(0,m),b=t.find(i,[m,m]));var w,N,S,_,D=a&&l?[]:void 0,A=[],M=[],E=D?[]:void 0,C=[];for(N=0;N<v;N++){M[N]=A.length;var T=N+1;if(E)for(_=p[N+1],S=p[N];S<_;S++)C[w=f[S]]=T,E[w]=l[S];for(_=s[N+1],S=s[N];S<_;S++)if(w=o[S],E){var R=b(a[S],C[w]===T?E[w]:x);y(R,x)||(A.push(w),D.push(R))}else A.push(w)}return M[v]=A.length,e.createSparseMatrix({values:D,index:A,ptr:M,size:[g,v],datatype:m})}})),to=Ot("dotMultiply",["typed","matrix","equalScalar","multiplyScalar"],(function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.multiplyScalar,a=Fa({typed:t,equalScalar:r}),o=eo({typed:t,equalScalar:r}),s=ka({typed:t,equalScalar:r}),u=Ia({typed:t}),c=Oa({typed:t}),l=t("dotMultiply",{"any, any":i,"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,i,!1)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,i,!0)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,i,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,i)},"Array, Array":function(e,t){return l(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return l(n(e),t)},"Matrix, Array":function(e,t){return l(e,n(t))},"SparseMatrix, any":function(e,t){return s(e,t,i,!1)},"DenseMatrix, any":function(e,t){return c(e,t,i,!1)},"any, SparseMatrix":function(e,t){return s(t,e,i,!0)},"any, DenseMatrix":function(e,t){return c(t,e,i,!0)},"Array, any":function(e,t){return c(n(e),t,i,!1).valueOf()},"any, Array":function(e,t){return c(n(t),e,i,!0).valueOf()}});return l}));function no(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function bitAnd");var n=e.constructor;if(e.isNaN()||t.isNaN())return new n(NaN);if(e.isZero()||t.eq(-1)||e.eq(t))return e;if(t.isZero()||e.eq(-1))return t;if(!e.isFinite()||!t.isFinite()){if(!e.isFinite()&&!t.isFinite())return e.isNegative()===t.isNegative()?e:new n(0);if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new n(0):t;if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new n(0):e}return ao(e,t,(function(e,t){return e&t}))}function ro(e){if(e.isFinite()&&!e.isInteger())throw new Error("Integer expected in function bitNot");var t=e.constructor,n=t.precision;t.config({precision:1e9});var r=e.plus(new t(1));return r.s=-r.s||null,t.config({precision:n}),r}function io(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function bitOr");var n=e.constructor;if(e.isNaN()||t.isNaN())return new n(NaN);var r=new n(-1);return e.isZero()||t.eq(r)||e.eq(t)?t:t.isZero()||e.eq(r)?e:e.isFinite()&&t.isFinite()?ao(e,t,(function(e,t){return e|t})):!e.isFinite()&&!e.isNegative()&&t.isNegative()||e.isNegative()&&!t.isNegative()&&!t.isFinite()?r:e.isNegative()&&t.isNegative()?e.isFinite()?e:t:e.isFinite()?t:e}function ao(e,t,n){var r,i,a,o,s,u=e.constructor,c=+(e.s<0),l=+(t.s<0);if(c){r=oo(ro(e));for(var f=0;f<r.length;++f)r[f]^=1}else r=oo(e);if(l){i=oo(ro(t));for(var p=0;p<i.length;++p)i[p]^=1}else i=oo(t);r.length<=i.length?(a=r,o=i,s=c):(a=i,o=r,s=l);var d=a.length,h=o.length,m=1^n(c,l),g=new u(1^m),v=new u(1),y=new u(2),x=u.precision;for(u.config({precision:1e9});d>0;)n(a[--d],o[--h])===m&&(g=g.plus(v)),v=v.times(y);for(;h>0;)n(s,o[--h])===m&&(g=g.plus(v)),v=v.times(y);return u.config({precision:x}),0===m&&(g.s=-g.s),g}function oo(e){for(var t=e.d,n=t[0]+"",r=1;r<t.length;++r){for(var i=t[r]+"",a=7-i.length;a--;)i="0"+i;n+=i}for(var o=n.length;"0"===n.charAt(o);)o--;var s=e.e,u=n.slice(0,o+1||1),c=u.length;if(s>0)if(++s>c)for(s-=c;s--;)u+="0";else s<c&&(u=u.slice(0,s)+"."+u.slice(s));for(var l=[0],f=0;f<u.length;){for(var p=l.length;p--;)l[p]*=10;l[0]+=parseInt(u.charAt(f++));for(var d=0;d<l.length;++d)l[d]>1&&(null==l[d+1]&&(l[d+1]=0),l[d+1]+=l[d]>>1,l[d]&=1)}return l.reverse()}function so(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function bitXor");var n=e.constructor;if(e.isNaN()||t.isNaN())return new n(NaN);if(e.isZero())return t;if(t.isZero())return e;if(e.eq(t))return new n(0);var r=new n(-1);return e.eq(r)?ro(t):t.eq(r)?ro(e):e.isFinite()&&t.isFinite()?ao(e,t,(function(e,t){return e^t})):e.isFinite()||t.isFinite()?new n(e.isNegative()===t.isNegative()?Infinity:-Infinity):r}function uo(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function leftShift");var n=e.constructor;return e.isNaN()||t.isNaN()||t.isNegative()&&!t.isZero()?new n(NaN):e.isZero()||t.isZero()?e:e.isFinite()||t.isFinite()?t.lt(55)?e.times(Math.pow(2,t.toNumber())+""):e.times(new n(2).pow(t)):new n(NaN)}function co(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function rightArithShift");var n=e.constructor;return e.isNaN()||t.isNaN()||t.isNegative()&&!t.isZero()?new n(NaN):e.isZero()||t.isZero()?e:t.isFinite()?t.lt(55)?e.div(Math.pow(2,t.toNumber())+"").floor():e.div(new n(2).pow(t)).floor():e.isNegative()?new n(-1):e.isFinite()?new n(0):new n(NaN)}var lo=Ot("bitAnd",["typed","matrix","equalScalar"],(function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=Fa({typed:t,equalScalar:r}),a=La({typed:t,equalScalar:r}),o=ka({typed:t,equalScalar:r}),s=Ia({typed:t}),u=Oa({typed:t}),c=t("bitAnd",{"number, number":oi,"BigNumber, BigNumber":no,"SparseMatrix, SparseMatrix":function(e,t){return a(e,t,c,!1)},"SparseMatrix, DenseMatrix":function(e,t){return i(t,e,c,!0)},"DenseMatrix, SparseMatrix":function(e,t){return i(e,t,c,!1)},"DenseMatrix, DenseMatrix":function(e,t){return s(e,t,c)},"Array, Array":function(e,t){return c(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return c(n(e),t)},"Matrix, Array":function(e,t){return c(e,n(t))},"SparseMatrix, any":function(e,t){return o(e,t,c,!1)},"DenseMatrix, any":function(e,t){return u(e,t,c,!1)},"any, SparseMatrix":function(e,t){return o(t,e,c,!0)},"any, DenseMatrix":function(e,t){return u(t,e,c,!0)},"Array, any":function(e,t){return u(n(e),t,c,!1).valueOf()},"any, Array":function(e,t){return u(n(t),e,c,!0).valueOf()}});return c})),fo=Ot("bitNot",["typed"],(function(e){var t=(0,e.typed)("bitNot",{number:si,BigNumber:ro,"Array | Matrix":function(e){return Tr(e,t)}});return t})),po=Ot("bitOr",["typed","matrix","equalScalar","DenseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.DenseMatrix,a=Ca({typed:t}),o=Ta({typed:t,equalScalar:r}),s=Ra({typed:t,DenseMatrix:i}),u=Ia({typed:t}),c=Oa({typed:t}),l=t("bitOr",{"number, number":ui,"BigNumber, BigNumber":io,"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,l)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,l,!0)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,l,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,l)},"Array, Array":function(e,t){return l(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return l(n(e),t)},"Matrix, Array":function(e,t){return l(e,n(t))},"SparseMatrix, any":function(e,t){return s(e,t,l,!1)},"DenseMatrix, any":function(e,t){return c(e,t,l,!1)},"any, SparseMatrix":function(e,t){return s(t,e,l,!0)},"any, DenseMatrix":function(e,t){return c(t,e,l,!0)},"Array, any":function(e,t){return c(n(e),t,l,!1).valueOf()},"any, Array":function(e,t){return c(n(t),e,l,!0).valueOf()}});return l})),ho=Ot("algorithm07",["typed","DenseMatrix"],(function(e){var t=e.typed,n=e.DenseMatrix;return function(e,i,a){var o=e._size,s=e._datatype,u=i._size,c=i._datatype;if(o.length!==u.length)throw new ht(o.length,u.length);if(o[0]!==u[0]||o[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+u+")");var l,f,p,d=o[0],h=o[1],m=0,g=a;"string"==typeof s&&s===c&&(m=t.convert(0,l=s),g=t.find(a,[l,l]));var v=[];for(f=0;f<d;f++)v[f]=[];var y=[],x=[],b=[],w=[];for(p=0;p<h;p++){var N=p+1;for(r(e,p,b,y,N),r(i,p,w,x,N),f=0;f<d;f++)v[f][p]=g(b[f]===N?y[f]:m,w[f]===N?x[f]:m)}return new n({data:v,size:[d,h],datatype:l})};function r(e,t,n,r,i){for(var a=e._values,o=e._index,s=e._ptr,u=s[t],c=s[t+1];u<c;u++){var l=o[u];n[l]=i,r[l]=a[u]}}})),mo=Ot("bitXor",["typed","matrix","DenseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.DenseMatrix,i=za({typed:t}),a=ho({typed:t,DenseMatrix:r}),o=Ua({typed:t,DenseMatrix:r}),s=Ia({typed:t}),u=Oa({typed:t}),c=t("bitXor",{"number, number":ci,"BigNumber, BigNumber":so,"SparseMatrix, SparseMatrix":function(e,t){return a(e,t,c)},"SparseMatrix, DenseMatrix":function(e,t){return i(t,e,c,!0)},"DenseMatrix, SparseMatrix":function(e,t){return i(e,t,c,!1)},"DenseMatrix, DenseMatrix":function(e,t){return s(e,t,c)},"Array, Array":function(e,t){return c(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return c(n(e),t)},"Matrix, Array":function(e,t){return c(e,n(t))},"SparseMatrix, any":function(e,t){return o(e,t,c,!1)},"DenseMatrix, any":function(e,t){return u(e,t,c,!1)},"any, SparseMatrix":function(e,t){return o(t,e,c,!0)},"any, DenseMatrix":function(e,t){return u(t,e,c,!0)},"Array, any":function(e,t){return u(n(e),t,c,!1).valueOf()},"any, Array":function(e,t){return u(n(t),e,c,!0).valueOf()}});return c})),go=Ot("arg",["typed"],(function(e){var t=(0,e.typed)("arg",{number:function(e){return Math.atan2(0,e)},BigNumber:function(e){return e.constructor.atan2(0,e)},Complex:function(e){return e.arg()},"Array | Matrix":function(e){return Tr(e,t)}});return t})),vo=Ot("conj",["typed"],(function(e){var t=(0,e.typed)("conj",{number:function(e){return e},BigNumber:function(e){return e},Complex:function(e){return e.conjugate()},"Array | Matrix":function(e){return Tr(e,t)}});return t})),yo=Ot("im",["typed"],(function(e){var t=(0,e.typed)("im",{number:function(e){return 0},BigNumber:function(e){return e.mul(0)},Complex:function(e){return e.im},"Array | Matrix":function(e){return Tr(e,t)}});return t})),xo=Ot("re",["typed"],(function(e){var t=(0,e.typed)("re",{number:function(e){return e},BigNumber:function(e){return e},Complex:function(e){return e.re},"Array | Matrix":function(e){return Tr(e,t)}});return t})),bo=Ot("not",["typed"],(function(e){var t=(0,e.typed)("not",{number:xi,Complex:function(e){return 0===e.re&&0===e.im},BigNumber:function(e){return e.isZero()||e.isNaN()},Unit:function(e){return null===e.value||t(e.value)},"Array | Matrix":function(e){return Tr(e,t)}});return t})),wo=Ot("or",["typed","matrix","equalScalar","DenseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.DenseMatrix,a=za({typed:t}),o=Ga({typed:t,equalScalar:r}),s=Ua({typed:t,DenseMatrix:i}),u=Ia({typed:t}),c=Oa({typed:t}),l=t("or",{"number, number":bi,"Complex, Complex":function(e,t){return 0!==e.re||0!==e.im||0!==t.re||0!==t.im},"BigNumber, BigNumber":function(e,t){return!e.isZero()&&!e.isNaN()||!t.isZero()&&!t.isNaN()},"Unit, Unit":function(e,t){return l(e.value||0,t.value||0)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,l)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,l,!0)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,l,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,l)},"Array, Array":function(e,t){return l(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return l(n(e),t)},"Matrix, Array":function(e,t){return l(e,n(t))},"SparseMatrix, any":function(e,t){return s(e,t,l,!1)},"DenseMatrix, any":function(e,t){return c(e,t,l,!1)},"any, SparseMatrix":function(e,t){return s(t,e,l,!0)},"any, DenseMatrix":function(e,t){return c(t,e,l,!0)},"Array, any":function(e,t){return c(n(e),t,l,!1).valueOf()},"any, Array":function(e,t){return c(n(t),e,l,!0).valueOf()}});return l})),No=Ot("xor",["typed","matrix","DenseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.DenseMatrix,i=za({typed:t}),a=ho({typed:t,DenseMatrix:r}),o=Ua({typed:t,DenseMatrix:r}),s=Ia({typed:t}),u=Oa({typed:t}),c=t("xor",{"number, number":wi,"Complex, Complex":function(e,t){return(0!==e.re||0!==e.im)!=(0!==t.re||0!==t.im)},"BigNumber, BigNumber":function(e,t){return(!e.isZero()&&!e.isNaN())!=(!t.isZero()&&!t.isNaN())},"Unit, Unit":function(e,t){return c(e.value||0,t.value||0)},"SparseMatrix, SparseMatrix":function(e,t){return a(e,t,c)},"SparseMatrix, DenseMatrix":function(e,t){return i(t,e,c,!0)},"DenseMatrix, SparseMatrix":function(e,t){return i(e,t,c,!1)},"DenseMatrix, DenseMatrix":function(e,t){return s(e,t,c)},"Array, Array":function(e,t){return c(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return c(n(e),t)},"Matrix, Array":function(e,t){return c(e,n(t))},"SparseMatrix, any":function(e,t){return o(e,t,c,!1)},"DenseMatrix, any":function(e,t){return u(e,t,c,!1)},"any, SparseMatrix":function(e,t){return o(t,e,c,!0)},"any, DenseMatrix":function(e,t){return u(t,e,c,!0)},"Array, any":function(e,t){return u(n(e),t,c,!1).valueOf()},"any, Array":function(e,t){return u(n(t),e,c,!0).valueOf()}});return c})),So=Ot("concat",["typed","matrix","isInteger"],(function(e){var t=e.matrix,n=e.isInteger;return(0,e.typed)("concat",{"...Array | Matrix | number | BigNumber":function(e){var r,i,a=e.length,o=-1,s=!1,u=[];for(r=0;r<a;r++){var c=e[r];if(Y(c)&&(s=!0),B(c)||V(c)){if(r!==a-1)throw new Error("Dimension must be specified as last argument");if(i=o,o=c.valueOf(),!n(o))throw new TypeError("Integer number expected for dimension");if(o<0||r>0&&o>i)throw new mt(o,i+1)}else{var l=_e(c).valueOf(),f=gt(l);if(u[r]=l,i=o,o=f.length-1,r>0&&o!==i)throw new ht(i+1,o+1)}}if(0===u.length)throw new SyntaxError("At least one matrix expected");for(var p=u.shift();u.length;)p=_o(p,u.shift(),o,0);return s?t(p):p},"...string":function(e){return e.join("")}})}));function _o(e,t,n,r){if(r<n){if(e.length!==t.length)throw new ht(e.length,t.length);for(var i=[],a=0;a<e.length;a++)i[a]=_o(e[a],t[a],n,r+1);return i}return e.concat(t)}var Do=Ot("column",["typed","Index","matrix","range"],(function(e){var t=e.Index,n=e.matrix,r=e.range;return(0,e.typed)("column",{"Matrix, number":i,"Array, number":function(e,t){return i(n(_e(e)),t).valueOf()}});function i(e,n){if(2!==e.size().length)throw new Error("Only two dimensional matrix is supported");yt(n,e.size()[1]);var i=r(0,e.size()[0]),a=new t(i,n);return e.subset(a)}})),Ao=Ot("cross",["typed","matrix","subtract","multiply"],(function(e){var t=e.matrix,n=e.subtract,r=e.multiply;return(0,e.typed)("cross",{"Matrix, Matrix":function(e,n){return t(i(e.toArray(),n.toArray()))},"Matrix, Array":function(e,n){return t(i(e.toArray(),n))},"Array, Matrix":function(e,n){return t(i(e,n.toArray()))},"Array, Array":i});function i(e,t){var i=Math.max(gt(e).length,gt(t).length);e=wt(e),t=wt(t);var a=gt(e),o=gt(t);if(1!==a.length||1!==o.length||3!==a[0]||3!==o[0])throw new RangeError("Vectors with length 3 expected (Size A = ["+a.join(", ")+"], B = ["+o.join(", ")+"])");var s=[n(r(e[1],t[2]),r(e[2],t[1])),n(r(e[2],t[0]),r(e[0],t[2])),n(r(e[0],t[1]),r(e[1],t[0]))];return i>1?[s]:s}})),Mo=Ot("diag",["typed","matrix","DenseMatrix","SparseMatrix"],(function(e){var t=e.matrix,n=e.DenseMatrix,r=e.SparseMatrix;return(0,e.typed)("diag",{Array:function(e){return i(e,0,gt(e),null)},"Array, number":function(e,t){return i(e,t,gt(e),null)},"Array, BigNumber":function(e,t){return i(e,t.toNumber(),gt(e),null)},"Array, string":function(e,t){return i(e,0,gt(e),t)},"Array, number, string":function(e,t,n){return i(e,t,gt(e),n)},"Array, BigNumber, string":function(e,t,n){return i(e,t.toNumber(),gt(e),n)},Matrix:function(e){return i(e,0,e.size(),e.storage())},"Matrix, number":function(e,t){return i(e,t,e.size(),e.storage())},"Matrix, BigNumber":function(e,t){return i(e,t.toNumber(),e.size(),e.storage())},"Matrix, string":function(e,t){return i(e,0,e.size(),t)},"Matrix, number, string":function(e,t,n){return i(e,t,e.size(),n)},"Matrix, BigNumber, string":function(e,t,n){return i(e,t.toNumber(),e.size(),n)}});function i(e,i,a,o){if(!Ve(i))throw new TypeError("Second parameter in function diag must be an integer");var s=i>0?i:0,u=i<0?-i:0;switch(a.length){case 1:return function(e,t,i,a,o,s){var u=[a+o,a+s];if(i&&"sparse"!==i&&"dense"!==i)throw new TypeError("Unknown matrix type ".concat(i,'"'));var c="sparse"===i?r.diagonal(u,e,t):n.diagonal(u,e,t);return null!==i?c:c.valueOf()}(e,i,o,a[0],u,s);case 2:return function(e,n,r,i,a,o){if(Y(e)){var s=e.diagonal(n);return null!==r?r!==s.storage()?t(s,r):s:s.valueOf()}for(var u=Math.min(i[0]-a,i[1]-o),c=[],l=0;l<u;l++)c[l]=e[l+a][l+o];return null!==r?t(c):c}(e,i,o,a,u,s)}throw new RangeError("Matrix for function diag must be 2 dimensional")}})),Eo=Ot("eye",[],(function(){return function(){throw new Error('Function "eye" is renamed to "identity" since mathjs version 5.0.0. To keep eye working, create an alias for it using "math.import({eye: math.identity}, {override: true})"')}}));function Co(e){return(Co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function To(e,t){return function n(){"object"!==Co(n.cache)&&(n.cache={});for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=t?t(r):JSON.stringify(r);return a in n.cache||(n.cache[a]=e.apply(e,r)),n.cache[a]}}function Ro(e){return Object.keys(e.signatures||{}).reduce((function(e,t){var n=(t.match(/,/g)||[]).length+1;return Math.max(e,n)}),-1)}var Io=Ot("filter",["typed"],(function(e){return(0,e.typed)("filter",{"Array, function":Oo,"Matrix, function":function(e,t){return e.create(Oo(e.toArray(),t))},"Array, RegExp":Mt,"Matrix, RegExp":function(e,t){return e.create(Mt(e.toArray(),t))}})}));function Oo(e,t){var n=Ro(t);return At(e,(function(e,r,i){return 1===n?t(e):2===n?t(e,[r]):t(e,[r],i)}))}var Po=Ot("flatten",["typed","matrix"],(function(e){var t=e.matrix;return(0,e.typed)("flatten",{Array:function(e){return St(_e(e))},Matrix:function(e){var n=St(_e(e.toArray()));return t(n)}})})),Fo=Ot("forEach",["typed"],(function(e){return(0,e.typed)("forEach",{"Array, function":Lo,"Matrix, function":function(e,t){return e.forEach(t)}})}));function Lo(e,t){var n=Ro(t);!function r(i,a){Array.isArray(i)?Dt(i,(function(e,t){r(e,a.concat(t))})):1===n?t(i):2===n?t(i,a):t(i,a,e)}(e,[])}var ko=Ot("getMatrixDataType",["typed"],(function(e){return(0,e.typed)("getMatrixDataType",{Array:function(e){return Rt(e,Ne)},Matrix:function(e){return e.getDataType()}})})),Bo=Ot("identity",["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],(function(e){var t=e.config,n=e.matrix,r=e.BigNumber,i=e.DenseMatrix,a=e.SparseMatrix;return(0,e.typed)("identity",{"":function(){return"Matrix"===t.matrix?n([]):[]},string:function(e){return n(e)},"number | BigNumber":function(e){return s(e,e,"Matrix"===t.matrix?"dense":void 0)},"number | BigNumber, string":function(e,t){return s(e,e,t)},"number | BigNumber, number | BigNumber":function(e,n){return s(e,n,"Matrix"===t.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(e,t,n){return s(e,t,n)},Array:function(e){return o(e)},"Array, string":function(e,t){return o(e,t)},Matrix:function(e){return o(e.valueOf(),e.storage())},"Matrix, string":function(e,t){return o(e.valueOf(),t)}});function o(e,t){switch(e.length){case 0:return t?n(t):[];case 1:return s(e[0],e[0],t);case 2:return s(e[0],e[1],t);default:throw new Error("Vector containing two values expected")}}function s(e,t,n){var o=V(e)||V(t)?r:null;if(V(e)&&(e=e.toNumber()),V(t)&&(t=t.toNumber()),!Ve(e)||e<1)throw new Error("Parameters in function identity must be positive integers");if(!Ve(t)||t<1)throw new Error("Parameters in function identity must be positive integers");var s=o?new r(1):1,u=o?new o(0):0,c=[e,t];if(n){if("sparse"===n)return a.diagonal(c,s,0,u);if("dense"===n)return i.diagonal(c,s,0,u);throw new TypeError('Unknown matrix type "'.concat(n,'"'))}for(var l=xt([],c,u),f=e<t?e:t,p=0;p<f;p++)l[p][p]=s;return l}})),Vo=Ot("kron",["typed","matrix","multiplyScalar"],(function(e){var t=e.matrix,n=e.multiplyScalar;return(0,e.typed)("kron",{"Matrix, Matrix":function(e,n){return t(r(e.toArray(),n.toArray()))},"Matrix, Array":function(e,n){return t(r(e.toArray(),n))},"Array, Matrix":function(e,n){return t(r(e,n.toArray()))},"Array, Array":r});function r(e,t){if(1===gt(e).length&&(e=[e]),1===gt(t).length&&(t=[t]),gt(e).length>2||gt(t).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(e.length)+", y = "+JSON.stringify(t.length)+")");var r=[],i=[];return e.map((function(e){return t.map((function(t){return r.push(i=[]),e.map((function(e){return t.map((function(t){return i.push(n(e,t))}))}))}))}))&&r}})),qo=Ot("map",["typed"],(function(e){return(0,e.typed)("map",{"Array, function":zo,"Matrix, function":function(e,t){return e.map(t)}})}));function zo(e,t){var n=Ro(t);return function r(i,a){return Array.isArray(i)?i.map((function(e,t){return r(e,a.concat(t))})):1===n?t(i):2===n?t(i,a):t(i,a,e)}(e,[])}var Go=Ot("ones",["typed","config","matrix","BigNumber"],(function(e){var t=e.config,n=e.matrix,r=e.BigNumber;return(0,e.typed)("ones",{"":function(){return"Array"===t.matrix?i([]):i([],"default")},"...number | BigNumber | string":function(e){if("string"==typeof e[e.length-1]){var n=e.pop();return i(e,n)}return"Array"===t.matrix?i(e):i(e,"default")},Array:i,Matrix:function(e){var t=e.storage();return i(e.valueOf(),t)},"Array | Matrix, string":function(e,t){return i(e.valueOf(),t)}});function i(e,t){var i=function(e){var t=!1;return e.forEach((function(e,n,r){V(e)&&(t=!0,r[n]=e.toNumber())})),t}(e)?new r(1):1;if(function(e){e.forEach((function(e){if("number"!=typeof e||!Ve(e)||e<0)throw new Error("Parameters in function ones must be positive integers")}))}(e),t){var a=n(t);return e.length>0?a.resize(e,i):a}var o=[];return e.length>0?xt(o,e,i):o}}));function Uo(){throw new Error('No "bignumber" implementation available')}function jo(){throw new Error('No "fraction" implementation available')}function Yo(){throw new Error('No "matrix" implementation available')}var Ho=Ot("range",["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq"],(function(e){var t=e.config,n=e.matrix,r=e.bignumber,i=e.smaller,a=e.smallerEq,o=e.larger,s=e.largerEq;return(0,e.typed)("range",{string:c,"string, boolean":c,"number, number":function(e,t){return u(l(e,t,1))},"number, number, number":function(e,t,n){return u(l(e,t,n))},"number, number, boolean":function(e,t,n){return u(n?f(e,t,1):l(e,t,1))},"number, number, number, boolean":function(e,t,n,r){return u(r?f(e,t,n):l(e,t,n))},"BigNumber, BigNumber":function(e,t){return u(p(e,t,new(0,e.constructor)(1)))},"BigNumber, BigNumber, BigNumber":function(e,t,n){return u(p(e,t,n))},"BigNumber, BigNumber, boolean":function(e,t,n){var r=e.constructor;return u(n?d(e,t,new r(1)):p(e,t,new r(1)))},"BigNumber, BigNumber, BigNumber, boolean":function(e,t,n,r){return u(r?d(e,t,n):p(e,t,n))}});function u(e){return"Matrix"===t.matrix?n?n(e):Yo():e}function c(e,n){var i=function(e){var t=e.split(":").map((function(e){return Number(e)}));if(t.some((function(e){return isNaN(e)})))return null;switch(t.length){case 2:return{start:t[0],end:t[1],step:1};case 3:return{start:t[0],end:t[2],step:t[1]};default:return null}}(e);if(!i)throw new SyntaxError('String "'+e+'" is no valid range');return"BigNumber"===t.number?(void 0===r&&Uo(),u((n?d:p)(r(i.start),r(i.end),r(i.step)))):u((n?f:l)(i.start,i.end,i.step))}function l(e,t,n){var r=[],a=e;if(n>0)for(;i(a,t);)r.push(a),a+=n;else if(n<0)for(;o(a,t);)r.push(a),a+=n;return r}function f(e,t,n){var r=[],i=e;if(n>0)for(;a(i,t);)r.push(i),i+=n;else if(n<0)for(;s(i,t);)r.push(i),i+=n;return r}function p(e,t,n){var a=r(0),s=[],u=e;if(n.gt(a))for(;i(u,t);)s.push(u),u=u.plus(n);else if(n.lt(a))for(;o(u,t);)s.push(u),u=u.plus(n);return s}function d(e,t,n){var i=r(0),o=[],u=e;if(n.gt(i))for(;a(u,t);)o.push(u),u=u.plus(n);else if(n.lt(i))for(;s(u,t);)o.push(u),u=u.plus(n);return o}})),Ko=Ot("reshape",["typed","isInteger","matrix"],(function(e){var t=e.isInteger,n=e.matrix;return(0,e.typed)("reshape",{"Matrix, Array":function(e,t){return e.reshape?e.reshape(t):n(bt(e.valueOf(),t))},"Array, Array":function(e,n){return n.forEach((function(e){if(!t(e))throw new TypeError("Invalid size for dimension: "+e)})),bt(e,n)}})}));function Qo(e,t,n,r){if(!(this instanceof Qo))throw new SyntaxError("Constructor must be called with the new operator");this.fn=e,this.count=t,this.min=n,this.max=r,this.message="Wrong number of arguments in function "+e+" ("+t+" provided, "+n+(null!=r?"-"+r:"")+" expected)",this.stack=(new Error).stack}(Qo.prototype=new Error).constructor=Error,Qo.prototype.name="ArgumentsError",Qo.prototype.isArgumentsError=!0;var Wo=Ot("resize",["config","matrix"],(function(e){var t=e.config,n=e.matrix;return function(e,i,a){if(2!==arguments.length&&3!==arguments.length)throw new Qo("resize",arguments.length,2,3);if(Y(i)&&(i=i.valueOf()),V(i[0])&&(i=i.map((function(e){return V(e)?e.toNumber():e}))),Y(e))return e.resize(i,a,!0);if("string"==typeof e)return r(e,i,a);var o=!Array.isArray(e)&&"Array"!==t.matrix;if(0===i.length){for(;Array.isArray(e);)e=e[0];return _e(e)}Array.isArray(e)||(e=[e]);var s=xt(e=_e(e),i,a);return o?n(s):s};function r(e,t,n){if(void 0!==n){if("string"!=typeof n||1!==n.length)throw new TypeError("Single character expected as defaultValue")}else n=" ";if(1!==t.length)throw new ht(t.length,1);var r=t[0];if("number"!=typeof r||!Ve(r))throw new TypeError("Invalid size, must contain positive integers (size: "+lt(t)+")");if(e.length>r)return e.substring(0,r);if(e.length<r){for(var i=e,a=0,o=r-e.length;a<o;a++)i+=n;return i}return e}})),$o=Ot("row",["typed","Index","matrix","range"],(function(e){var t=e.Index,n=e.matrix,r=e.range;return(0,e.typed)("row",{"Matrix, number":i,"Array, number":function(e,t){return i(n(_e(e)),t).valueOf()}});function i(e,n){if(2!==e.size().length)throw new Error("Only two dimensional matrix is supported");yt(n,e.size()[0]);var i=r(0,e.size()[1]),a=new t(n,i);return e.subset(a)}})),Xo=Ot("size",["typed","config","?matrix"],(function(e){var t=e.config,n=e.matrix;return(0,e.typed)("size",{Matrix:function(e){return e.create(e.size())},Array:gt,string:function(e){return"Array"===t.matrix?[e.length]:n([e.length])},"number | Complex | BigNumber | Unit | boolean | null":function(e){return"Array"===t.matrix?[]:n?n([]):Yo()}})})),Zo=Ot("squeeze",["typed","matrix"],(function(e){var t=e.matrix;return(0,e.typed)("squeeze",{Array:function(e){return wt(_e(e))},Matrix:function(e){var n=wt(e.toArray());return Array.isArray(n)?t(n):n},any:function(e){return _e(e)}})}));function Jo(e){return(Jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function es(e,t){if(is(e)&&ns(e,t))return e[t];if("function"==typeof e[t]&&rs(e,t))throw new Error('Cannot access method "'+t+'" as a property');throw new Error('No access to property "'+t+'"')}function ts(e,t,n){if(is(e)&&ns(e,t))return e[t]=n,n;throw new Error('No access to property "'+t+'"')}function ns(e,t){return!(!e||"object"!==Jo(e)||!Te(as,t)&&(t in Object.prototype||t in Function.prototype))}function rs(e,t){return!(null==e||"function"!=typeof e[t]||Te(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)||!Te(os,t)&&(t in Object.prototype||t in Function.prototype))}function is(e){return"object"===Jo(e)&&e&&e.constructor===Object}var as={length:!0,name:!0},os={toString:!0,valueOf:!0,toLocaleString:!0},ss=Ot("subset",["typed","matrix"],(function(e){var t=e.matrix;return(0,e.typed)("subset",{"Array, Index":function(e,n){var r=t(e).subset(n);return n.isScalar()?r:r.valueOf()},"Matrix, Index":function(e,t){return e.subset(t)},"Object, Index":ls,"string, Index":us,"Array, Index, any":function(e,n,r){return t(_e(e)).subset(n,r,void 0).valueOf()},"Array, Index, any, any":function(e,n,r,i){return t(_e(e)).subset(n,r,i).valueOf()},"Matrix, Index, any":function(e,t,n){return e.clone().subset(t,n)},"Matrix, Index, any, any":function(e,t,n,r){return e.clone().subset(t,n,r)},"string, Index, string":cs,"string, Index, string, string":cs,"Object, Index, any":fs})}));function us(e,t){if(!$(t))throw new TypeError("Index expected");if(1!==t.size().length)throw new ht(t.size().length,1);var n=e.length;yt(t.min()[0],n),yt(t.max()[0],n);var r=t.dimension(0),i="";return r.forEach((function(t){i+=e.charAt(t)})),i}function cs(e,t,n,r){if(!t||!0!==t.isIndex)throw new TypeError("Index expected");if(1!==t.size().length)throw new ht(t.size().length,1);if(void 0!==r){if("string"!=typeof r||1!==r.length)throw new TypeError("Single character expected as defaultValue")}else r=" ";var i=t.dimension(0);if(i.size()[0]!==n.length)throw new ht(i.size()[0],n.length);var a=e.length;yt(t.min()[0]),yt(t.max()[0]);for(var o=[],s=0;s<a;s++)o[s]=e.charAt(s);if(i.forEach((function(e,t){o[e]=n.charAt(t[0])})),o.length>a)for(var u=a-1,c=o.length;u<c;u++)o[u]||(o[u]=r);return o.join("")}function ls(e,t){if(1!==t.size().length)throw new ht(t.size(),1);var n=t.dimension(0);if("string"!=typeof n)throw new TypeError("String expected as index to retrieve an object property");return es(e,n)}function fs(e,t,n){if(1!==t.size().length)throw new ht(t.size(),1);var r=t.dimension(0);if("string"!=typeof r)throw new TypeError("String expected as index to retrieve an object property");var i=_e(e);return ts(i,r,n),i}var ps=Ot("transpose",["typed","matrix"],(function(e){var t=e.matrix,n=(0,e.typed)("transpose",{Array:function(e){return n(t(e)).valueOf()},Matrix:function(e){var t,n=e.size();switch(n.length){case 1:t=e.clone();break;case 2:var r=n[0],i=n[1];if(0===i)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+lt(n)+")");switch(e.storage()){case"dense":t=function(e,t,n){for(var r,i=e._data,a=[],o=0;o<n;o++){r=a[o]=[];for(var s=0;s<t;s++)r[s]=_e(i[s][o])}return e.createDenseMatrix({data:a,size:[n,t],datatype:e._datatype})}(e,r,i);break;case"sparse":t=function(e,t,n){for(var r,i,a,o=e._values,s=e._index,u=e._ptr,c=o?[]:void 0,l=[],f=[],p=[],d=0;d<t;d++)p[d]=0;for(r=0,i=s.length;r<i;r++)p[s[r]]++;for(var h=0,m=0;m<t;m++)f.push(h),h+=p[m],p[m]=f[m];for(f.push(h),a=0;a<n;a++)for(var g=u[a+1],v=u[a];v<g;v++){var y=p[s[v]]++;l[y]=a,o&&(c[y]=_e(o[v]))}return e.createSparseMatrix({values:c,index:l,ptr:f,size:[n,t],datatype:e._datatype})}(e,r,i)}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+lt(this._size)+")")}return t},any:function(e){return _e(e)}});return n})),ds=Ot("ctranspose",["typed","transpose","conj"],(function(e){var t=e.transpose,n=e.conj;return(0,e.typed)("ctranspose",{any:function(e){return n(t(e))}})})),hs=Ot("zeros",["typed","config","matrix","BigNumber"],(function(e){var t=e.config,n=e.matrix,r=e.BigNumber;return(0,e.typed)("zeros",{"":function(){return"Array"===t.matrix?i([]):i([],"default")},"...number | BigNumber | string":function(e){if("string"==typeof e[e.length-1]){var n=e.pop();return i(e,n)}return"Array"===t.matrix?i(e):i(e,"default")},Array:i,Matrix:function(e){var t=e.storage();return i(e.valueOf(),t)},"Array | Matrix, string":function(e,t){return i(e.valueOf(),t)}});function i(e,t){var i=function(e){var t=!1;return e.forEach((function(e,n,r){V(e)&&(t=!0,r[n]=e.toNumber())})),t}(e)?new r(0):0;if(function(e){e.forEach((function(e){if("number"!=typeof e||!Ve(e)||e<0)throw new Error("Parameters in function zeros must be positive integers")}))}(e),t){var a=n(t);return e.length>0?a.resize(e,i):a}var o=[];return e.length>0?xt(o,e,i):o}})),ms=Ot("erf",["typed"],(function(e){var t=(0,e.typed)("name",{number:function(e){var t=Math.abs(e);return t>=bs?qe(e):t<=gs?qe(e)*function(e){var t,n=e*e,r=ys[0][4]*n,i=n;for(t=0;t<3;t+=1)r=(r+ys[0][t])*n,i=(i+xs[0][t])*n;return e*(r+ys[0][3])/(i+xs[0][3])}(t):t<=4?qe(e)*(1-function(e){var t,n=ys[1][8]*e,r=e;for(t=0;t<7;t+=1)n=(n+ys[1][t])*e,r=(r+xs[1][t])*e;var i=(n+ys[1][7])/(r+xs[1][7]),a=parseInt(16*e)/16,o=(e-a)*(e+a);return Math.exp(-a*a)*Math.exp(-o)*i}(t)):qe(e)*(1-function(e){var t,n=1/(e*e),r=ys[2][5]*n,i=n;for(t=0;t<4;t+=1)r=(r+ys[2][t])*n,i=(i+xs[2][t])*n;var a=n*(r+ys[2][4])/(i+xs[2][4]);a=(vs-a)/e;var o=(e-(n=parseInt(16*e)/16))*(e+n);return Math.exp(-n*n)*Math.exp(-o)*a}(t))},"Array | Matrix":function(e){return Tr(e,t)}});return t})),gs=.46875,vs=.5641895835477563,ys=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,2.1531153547440383e-8],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],xs=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],bs=Math.pow(2,53),ws=Ot("mode",["typed","isNaN","isNumeric"],(function(e){var t=e.isNaN,n=e.isNumeric;return(0,e.typed)("mode",{"Array | Matrix":r,"...":function(e){return r(e)}});function r(e){if(0===(e=St(e.valueOf())).length)throw new Error("Cannot calculate mode of an empty array");for(var r={},i=[],a=0,o=0;o<e.length;o++){var s=e[o];if(n(s)&&t(s))throw new Error("Cannot calculate mode of an array containing NaN values");s in r||(r[s]=0),r[s]++,r[s]===a?i.push(s):r[s]>a&&(a=r[s],i=[s])}return i}}));function Ns(e,t,n){var r;return-1!==String(e).indexOf("Unexpected type")?(r=arguments.length>2?" (type: "+Ne(n)+", value: "+JSON.stringify(n)+")":" (type: "+e.data.actual+")",new TypeError("Cannot calculate "+t+", unexpected type of argument"+r)):-1!==String(e).indexOf("complex numbers")?(r=arguments.length>2?" (type: "+Ne(n)+", value: "+JSON.stringify(n)+")":"",new TypeError("Cannot calculate "+t+", no ordering relation is defined for complex numbers"+r)):e}var Ss=Ot("prod",["typed","multiply"],(function(e){var t=e.multiply;return(0,e.typed)("prod",{"Array | Matrix":n,"Array | Matrix, number | BigNumber":function(e,t){throw new Error("prod(A, dim) is not yet supported")},"...":function(e){return n(e)}});function n(e){var n;if(Cr(e,(function(e){try{n=void 0===n?e:t(n,e)}catch(t){throw Ns(t,"prod",e)}})),void 0===n)throw new Error("Cannot calculate prod of an empty array");return n}})),_s=Ot("format",["typed"],(function(e){return(0,e.typed)("format",{any:lt,"any, Object | function | number":lt})})),Ds=Ot("print",["typed"],(function(e){return(0,e.typed)("print",{"string, Object | Array":As,"string, Object | Array, number | Object":As})}));function As(e,t,n){return e.replace(/\$([\w.]+)/g,(function(e,r){for(var i=r.split("."),a=t[i.shift()];i.length&&void 0!==a;){var o=i.shift();a=o?a[o]:a+"."}return void 0!==a?U(a)?a:lt(a,n):e}))}var Ms=Ot("to",["typed","matrix"],(function(e){var t=e.typed,n=e.matrix,r=Ia({typed:t}),i=Oa({typed:t}),a=t("to",{"Unit, Unit | string":function(e,t){return e.to(t)},"Matrix, Matrix":function(e,t){return r(e,t,a)},"Array, Array":function(e,t){return a(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return a(n(e),t)},"Matrix, Array":function(e,t){return a(e,n(t))},"Matrix, any":function(e,t){return i(e,t,a,!1)},"any, Matrix":function(e,t){return i(t,e,a,!0)},"Array, any":function(e,t){return i(n(e),t,a,!1).valueOf()},"any, Array":function(e,t){return i(n(t),e,a,!0).valueOf()}});return a})),Es=Ot("isPrime",["typed"],(function(e){var t=(0,e.typed)("isPrime",{number:function(e){if(0*e!=0)return!1;if(e<=3)return e>1;if(e%2==0||e%3==0)return!1;for(var t=5;t*t<=e;t+=6)if(e%t==0||e%(t+2)==0)return!1;return!0},BigNumber:function(e){if(0*e.toNumber()!=0)return!1;if(e.lte(3))return e.gt(1);if(e.mod(2).eq(0)||e.mod(3).eq(0))return!1;for(var t=5;e.gte(t*t);t+=6)if(e.mod(t).eq(0)||e.mod(t+2).eq(0))return!1;return!0},"Array | Matrix":function(e){return Tr(e,t)}});return t})),Cs=Ot("numeric",["number","?bignumber","?fraction"],(function(e){var t=e.number,n=e.bignumber,r=e.fraction,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:function(e){return t(e)},BigNumber:n?function(e){return n(e)}:Uo,Fraction:r?function(e){return r(e)}:jo};return function(e,t){var n=Ne(e);if(!(n in i))throw new TypeError("Cannot convert "+e+' of type "'+n+'"; valid input types are '+Object.keys(i).join(", "));if(!(t in a))throw new TypeError("Cannot convert "+e+' to type "'+t+'"; valid output types are '+Object.keys(a).join(", "));return t===n?e:a[t](e)}})),Ts=Ot("divideScalar",["typed","numeric"],(function(e){var t=e.numeric,n=(0,e.typed)("divideScalar",{"number, number":function(e,t){return e/t},"Complex, Complex":function(e,t){return e.div(t)},"BigNumber, BigNumber":function(e,t){return e.div(t)},"Fraction, Fraction":function(e,t){return e.div(t)},"Unit, number | Fraction | BigNumber":function(e,r){var i=e.clone(),a=t(1,Ne(r));return i.value=n(null===i.value?i._normalize(a):i.value,r),i},"number | Fraction | BigNumber, Unit":function(e,r){var i=r.clone();i=i.pow(-1);var a=t(1,Ne(e));return i.value=n(e,null===r.value?r._normalize(a):r.value),i},"Unit, Unit":function(e,t){return e.divide(t)}});return n})),Rs=Ot("pow",["typed","config","identity","multiply","matrix","fraction","number","Complex"],(function(e){var t=e.config,n=e.identity,r=e.multiply,i=e.matrix,a=e.number,o=e.fraction,s=e.Complex;return(0,e.typed)("pow",{"number, number":u,"Complex, Complex":function(e,t){return e.pow(t)},"BigNumber, BigNumber":function(e,n){return n.isInteger()||e>=0||t.predictable?e.pow(n):new s(e.toNumber(),0).pow(n.toNumber(),0)},"Fraction, Fraction":function(e,n){if(1!==n.d){if(t.predictable)throw new Error("Function pow does not support non-integer exponents for fractions.");return u(e.valueOf(),n.valueOf())}return e.pow(n)},"Array, number":c,"Array, BigNumber":function(e,t){return c(e,t.toNumber())},"Matrix, number":l,"Matrix, BigNumber":function(e,t){return l(e,t.toNumber())},"Unit, number | BigNumber":function(e,t){return e.pow(t)}});function u(e,n){if(t.predictable&&!Ve(n)&&e<0)try{var r=o(n),i=a(r);if((n===i||Math.abs((n-i)/n)<1e-14)&&r.d%2==1)return(r.n%2==0?1:-1)*Math.pow(-e,n)}catch(e){}return t.predictable&&(e<-1&&Infinity===n||e>-1&&e<0&&-Infinity===n)?NaN:Ve(n)||e>=0||t.predictable?ri(e,n):e*e<1&&Infinity===n||e*e>1&&-Infinity===n?0:new s(e,0).pow(n,0)}function c(e,t){if(!Ve(t)||t<0)throw new TypeError("For A^b, b must be a positive integer (value is "+t+")");var i=gt(e);if(2!==i.length)throw new Error("For A^b, A must be 2 dimensional (A has "+i.length+" dimensions)");if(i[0]!==i[1])throw new Error("For A^b, A must be square (size is "+i[0]+"x"+i[1]+")");for(var a=n(i[0]).valueOf(),o=e;t>=1;)1==(1&t)&&(a=r(o,a)),t>>=1,o=r(o,o);return a}function l(e,t){return i(c(e.valueOf(),t))}}));function Is(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Os(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Is(Object(n),!0).forEach((function(t){Ps(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Is(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ps(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fs="Number of decimals in function round must be an integer",Ls=Ot("round",["typed","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.zeros,a=e.BigNumber,o=e.DenseMatrix,s=ka({typed:t,equalScalar:r}),u=Ua({typed:t,DenseMatrix:o}),c=Oa({typed:t}),l=t("round",Os(Os({},ks),{},{Complex:function(e){return e.round()},"Complex, number":function(e,t){if(t%1)throw new TypeError(Fs);return e.round(t)},"Complex, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(Fs);var n=t.toNumber();return e.round(n)},"number, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(Fs);return new a(e).toDecimalPlaces(t.toNumber())},BigNumber:function(e){return e.toDecimalPlaces(0)},"BigNumber, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(Fs);return e.toDecimalPlaces(t.toNumber())},Fraction:function(e){return e.round()},"Fraction, number":function(e,t){if(t%1)throw new TypeError(Fs);return e.round(t)},"Array | Matrix":function(e){return Tr(e,l)},"SparseMatrix, number | BigNumber":function(e,t){return s(e,t,l,!1)},"DenseMatrix, number | BigNumber":function(e,t){return c(e,t,l,!1)},"number | Complex | BigNumber, SparseMatrix":function(e,t){return r(e,0)?i(t.size(),t.storage()):u(t,e,l,!0)},"number | Complex | BigNumber, DenseMatrix":function(e,t){return r(e,0)?i(t.size(),t.storage()):c(t,e,l,!0)},"Array, number | BigNumber":function(e,t){return c(n(e),t,l,!1).valueOf()},"number | Complex | BigNumber, Array":function(e,t){return c(n(t),e,l,!0).valueOf()}}));return l})),ks={number:ii,"number, number":function(e,t){if(!Ve(t))throw new TypeError(Fs);if(t<0||t>15)throw new Error("Number of decimals in function round must be in te range of 0-15");return ii(e,t)}},Bs=Ot("log",["config","typed","divideScalar","Complex"],(function(e){var t=e.config,n=e.divideScalar,r=e.Complex,i=(0,e.typed)("log",{number:function(e){return e>=0||t.predictable?Wr(e):new r(e,0).log()},Complex:function(e){return e.log()},BigNumber:function(e){return!e.isNegative()||t.predictable?e.ln():new r(e.toNumber(),0).log()},"Array | Matrix":function(e){return Tr(e,i)},"any, any":function(e,t){return n(i(e),i(t))}});return i})),Vs=Ot("log1p",["typed","config","divideScalar","log","Complex"],(function(e){var t=e.config,n=e.divideScalar,r=e.log,i=e.Complex,a=(0,e.typed)("log1p",{number:function(e){return e>=-1||t.predictable?Ue(e):o(new i(e,0))},Complex:o,BigNumber:function(e){var n=e.plus(1);return!n.isNegative()||t.predictable?n.ln():o(new i(e.toNumber(),0))},"Array | Matrix":function(e){return Tr(e,a)},"any, any":function(e,t){return n(a(e),r(t))}});function o(e){var t=e.re+1;return new i(Math.log(Math.sqrt(t*t+e.im*e.im)),Math.atan2(e.im,t))}return a})),qs=Ot("nthRoots",["config","typed","divideScalar","Complex"],(function(e){var t=e.Complex,n=(0,e.typed)("nthRoots",{Complex:function(e){return i(e,2)},"Complex, number":i}),r=[function(e){return new t(e,0)},function(e){return new t(0,e)},function(e){return new t(-e,0)},function(e){return new t(0,-e)}];function i(e,n){if(n<0)throw new Error("Root must be greater than zero");if(0===n)throw new Error("Root must be non-zero");if(n%1!=0)throw new Error("Root must be an integer");if(0===e||0===e.abs())return[new t(0,0)];var i,a="number"==typeof e;(a||0===e.re||0===e.im)&&(i=a?2*+(e<0):0===e.im?2*+(e.re<0):2*+(e.im<0)+1);for(var o=e.arg(),s=e.abs(),u=[],c=Math.pow(s,1/n),l=0;l<n;l++){var f=(i+4*l)/n;f!==Math.round(f)?u.push(new t({r:c,phi:(o+2*Math.PI*l)/n})):u.push(r[f%4](c))}return u}return n})),zs=Ot("dotPow",["typed","equalScalar","matrix","pow","DenseMatrix"],(function(e){var t=e.typed,n=e.equalScalar,r=e.matrix,i=e.pow,a=e.DenseMatrix,o=za({typed:t}),s=ho({typed:t,DenseMatrix:a}),u=ka({typed:t,equalScalar:n}),c=Ua({typed:t,DenseMatrix:a}),l=Ia({typed:t}),f=Oa({typed:t}),p=t("dotPow",{"any, any":i,"SparseMatrix, SparseMatrix":function(e,t){return s(e,t,i,!1)},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,i,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,i,!1)},"DenseMatrix, DenseMatrix":function(e,t){return l(e,t,i)},"Array, Array":function(e,t){return p(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return p(r(e),t)},"Matrix, Array":function(e,t){return p(e,r(t))},"SparseMatrix, any":function(e,t){return u(e,t,p,!1)},"DenseMatrix, any":function(e,t){return f(e,t,p,!1)},"any, SparseMatrix":function(e,t){return c(t,e,p,!0)},"any, DenseMatrix":function(e,t){return f(t,e,p,!0)},"Array, any":function(e,t){return f(r(e),t,p,!1).valueOf()},"any, Array":function(e,t){return f(r(t),e,p,!0).valueOf()}});return p})),Gs=Ot("dotDivide",["typed","matrix","equalScalar","divideScalar","DenseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.divideScalar,a=e.DenseMatrix,o=Fa({typed:t,equalScalar:r}),s=za({typed:t}),u=ho({typed:t,DenseMatrix:a}),c=ka({typed:t,equalScalar:r}),l=Ua({typed:t,DenseMatrix:a}),f=Ia({typed:t}),p=Oa({typed:t}),d=t("dotDivide",{"any, any":i,"SparseMatrix, SparseMatrix":function(e,t){return u(e,t,i,!1)},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,i,!0)},"DenseMatrix, SparseMatrix":function(e,t){return s(e,t,i,!1)},"DenseMatrix, DenseMatrix":function(e,t){return f(e,t,i)},"Array, Array":function(e,t){return d(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return d(n(e),t)},"Matrix, Array":function(e,t){return d(e,n(t))},"SparseMatrix, any":function(e,t){return c(e,t,i,!1)},"DenseMatrix, any":function(e,t){return p(e,t,i,!1)},"any, SparseMatrix":function(e,t){return l(t,e,i,!0)},"any, DenseMatrix":function(e,t){return p(t,e,i,!0)},"Array, any":function(e,t){return p(n(e),t,i,!1).valueOf()},"any, Array":function(e,t){return p(n(t),e,i,!0).valueOf()}});return d}));function Us(e){var t=e.DenseMatrix;return function(e,n,r){var i=e.size();if(2!==i.length)throw new RangeError("Matrix must be two dimensional (size: "+lt(i)+")");var a,o,s,u=i[0];if(u!==i[1])throw new RangeError("Matrix must be square (size: "+lt(i)+")");if(Y(n)){var c=n.size();if(1===c.length){if(c[0]!==u)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(a=[],s=n._data,o=0;o<u;o++)a[o]=[s[o]];return new t({data:a,size:[u,1],datatype:n._datatype})}if(2===c.length){if(c[0]!==u||1!==c[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(K(n)){if(r){for(a=[],s=n._data,o=0;o<u;o++)a[o]=[s[o][0]];return new t({data:a,size:[u,1],datatype:n._datatype})}return n}for(a=[],o=0;o<u;o++)a[o]=[0];for(var l=n._values,f=n._index,p=n._ptr,d=p[1],h=p[0];h<d;h++)a[o=f[h]][0]=l[h];return new t({data:a,size:[u,1],datatype:n._datatype})}throw new RangeError("Dimension mismatch. Matrix columns must match vector length.")}if(j(n)){var m=gt(n);if(1===m.length){if(m[0]!==u)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(a=[],o=0;o<u;o++)a[o]=[n[o]];return new t({data:a,size:[u,1]})}if(2===m.length){if(m[0]!==u||1!==m[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(a=[],o=0;o<u;o++)a[o]=[n[o][0]];return new t({data:a,size:[u,1]})}throw new RangeError("Dimension mismatch. Matrix columns must match vector length.")}}}var js=Ot("lsolve",["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.divideScalar,i=e.multiplyScalar,a=e.subtract,o=e.equalScalar,s=e.DenseMatrix,u=Us({DenseMatrix:s});return t("lsolve",{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var n,c,l=(t=u(e,t,!0))._data,f=e._size[0],p=e._size[1],d=e._values,h=e._index,m=e._ptr,g=[],v=0;v<p;v++){var y=l[v][0]||0;if(o(y,0))g[v]=[0];else{var x=0,b=[],w=[],N=m[v+1];for(c=m[v];c<N;c++)(n=h[c])===v?x=d[c]:n>v&&(b.push(d[c]),w.push(n));if(o(x,0))throw new Error("Linear system cannot be solved since matrix is singular");var S=r(y,x);for(c=0,N=w.length;c<N;c++)l[n=w[c]]=[a(l[n][0]||0,i(S,b[c]))];g[v]=[S]}}return new s({data:g,size:[f,1]})}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return c(e,t)},"Array, Array | Matrix":function(e,t){return c(n(e),t).valueOf()}});function c(e,t){for(var n=(t=u(e,t,!0))._data,c=e._size[0],l=e._size[1],f=[],p=e._data,d=0;d<l;d++){var h=n[d][0]||0,m=void 0;if(o(h,0))m=0;else{var g=p[d][d];if(o(g,0))throw new Error("Linear system cannot be solved since matrix is singular");m=r(h,g);for(var v=d+1;v<c;v++)n[v]=[a(n[v][0]||0,i(m,p[v][d]))]}f[d]=[m]}return new s({data:f,size:[c,1]})}})),Ys=Ot("usolve",["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.divideScalar,i=e.multiplyScalar,a=e.subtract,o=e.equalScalar,s=e.DenseMatrix,u=Us({DenseMatrix:s});return t("usolve",{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var n,c,l=(t=u(e,t,!0))._data,f=e._size[0],p=e._values,d=e._index,h=e._ptr,m=[],g=e._size[1]-1;g>=0;g--){var v=l[g][0]||0;if(o(v,0))m[g]=[0];else{var y=0,x=[],b=[],w=h[g],N=h[g+1];for(c=N-1;c>=w;c--)(n=d[c])===g?y=p[c]:n<g&&(x.push(p[c]),b.push(n));if(o(y,0))throw new Error("Linear system cannot be solved since matrix is singular");var S=r(v,y);for(c=0,N=b.length;c<N;c++)l[n=b[c]]=[a(l[n][0],i(S,x[c]))];m[g]=[S]}}return new s({data:m,size:[f,1]})}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return c(e,t)},"Array, Array | Matrix":function(e,t){return c(n(e),t).valueOf()}});function c(e,t){for(var n=(t=u(e,t,!0))._data,c=e._size[0],l=[],f=e._data,p=e._size[1]-1;p>=0;p--){var d=n[p][0]||0,h=void 0;if(o(d,0))h=0;else{var m=f[p][p];if(o(m,0))throw new Error("Linear system cannot be solved since matrix is singular");h=r(d,m);for(var g=p-1;g>=0;g--)n[g]=[a(n[g][0]||0,i(h,f[g][p]))]}l[p]=[h]}return new s({data:l,size:[c,1]})}})),Hs=Ot("algorithm08",["typed","equalScalar"],(function(e){var t=e.typed,n=e.equalScalar;return function(e,r,i){var a=e._values,o=e._index,s=e._ptr,u=e._size,c=e._datatype,l=r._values,f=r._index,p=r._ptr,d=r._size,h=r._datatype;if(u.length!==d.length)throw new ht(u.length,d.length);if(u[0]!==d[0]||u[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+d+")");if(!a||!l)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var m,g=u[0],v=u[1],y=n,x=0,b=i;"string"==typeof c&&c===h&&(y=t.find(n,[m=c,m]),x=t.convert(0,m),b=t.find(i,[m,m]));for(var w,N,S,_=[],D=[],A=[],M=[],E=[],C=0;C<v;C++){A[C]=D.length;var T=C+1;for(N=s[C+1],w=s[C];w<N;w++)E[S=o[w]]=T,M[S]=a[w],D.push(S);for(N=p[C+1],w=p[C];w<N;w++)E[S=f[w]]===T&&(M[S]=b(M[S],l[w]));for(w=A[C];w<D.length;){var R=M[S=D[w]];y(R,x)?D.splice(w,1):(_.push(R),w++)}}return A[v]=D.length,e.createSparseMatrix({values:_,index:D,ptr:A,size:[g,v],datatype:m})}})),Ks=Ot("leftShift",["typed","matrix","equalScalar","zeros","DenseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.zeros,a=e.DenseMatrix,o=Ca({typed:t}),s=Fa({typed:t,equalScalar:r}),u=Hs({typed:t,equalScalar:r}),c=Ra({typed:t,DenseMatrix:a}),l=ka({typed:t,equalScalar:r}),f=Ia({typed:t}),p=Oa({typed:t}),d=t("leftShift",{"number, number":li,"BigNumber, BigNumber":uo,"SparseMatrix, SparseMatrix":function(e,t){return u(e,t,d,!1)},"SparseMatrix, DenseMatrix":function(e,t){return s(t,e,d,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,d,!1)},"DenseMatrix, DenseMatrix":function(e,t){return f(e,t,d)},"Array, Array":function(e,t){return d(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return d(n(e),t)},"Matrix, Array":function(e,t){return d(e,n(t))},"SparseMatrix, number | BigNumber":function(e,t){return r(t,0)?e.clone():l(e,t,d,!1)},"DenseMatrix, number | BigNumber":function(e,t){return r(t,0)?e.clone():p(e,t,d,!1)},"number | BigNumber, SparseMatrix":function(e,t){return r(e,0)?i(t.size(),t.storage()):c(t,e,d,!0)},"number | BigNumber, DenseMatrix":function(e,t){return r(e,0)?i(t.size(),t.storage()):p(t,e,d,!0)},"Array, number | BigNumber":function(e,t){return d(n(e),t).valueOf()},"number | BigNumber, Array":function(e,t){return d(e,n(t)).valueOf()}});return d})),Qs=Ot("rightArithShift",["typed","matrix","equalScalar","zeros","DenseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.zeros,a=e.DenseMatrix,o=Ca({typed:t}),s=Fa({typed:t,equalScalar:r}),u=Hs({typed:t,equalScalar:r}),c=Ra({typed:t,DenseMatrix:a}),l=ka({typed:t,equalScalar:r}),f=Ia({typed:t}),p=Oa({typed:t}),d=t("rightArithShift",{"number, number":fi,"BigNumber, BigNumber":co,"SparseMatrix, SparseMatrix":function(e,t){return u(e,t,d,!1)},"SparseMatrix, DenseMatrix":function(e,t){return s(t,e,d,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,d,!1)},"DenseMatrix, DenseMatrix":function(e,t){return f(e,t,d)},"Array, Array":function(e,t){return d(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return d(n(e),t)},"Matrix, Array":function(e,t){return d(e,n(t))},"SparseMatrix, number | BigNumber":function(e,t){return r(t,0)?e.clone():l(e,t,d,!1)},"DenseMatrix, number | BigNumber":function(e,t){return r(t,0)?e.clone():p(e,t,d,!1)},"number | BigNumber, SparseMatrix":function(e,t){return r(e,0)?i(t.size(),t.storage()):c(t,e,d,!0)},"number | BigNumber, DenseMatrix":function(e,t){return r(e,0)?i(t.size(),t.storage()):p(t,e,d,!0)},"Array, number | BigNumber":function(e,t){return d(n(e),t).valueOf()},"number | BigNumber, Array":function(e,t){return d(e,n(t)).valueOf()}});return d})),Ws=Ot("rightLogShift",["typed","matrix","equalScalar","zeros","DenseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.zeros,a=e.DenseMatrix,o=Ca({typed:t}),s=Fa({typed:t,equalScalar:r}),u=Hs({typed:t,equalScalar:r}),c=Ra({typed:t,DenseMatrix:a}),l=ka({typed:t,equalScalar:r}),f=Ia({typed:t}),p=Oa({typed:t}),d=t("rightLogShift",{"number, number":pi,"SparseMatrix, SparseMatrix":function(e,t){return u(e,t,d,!1)},"SparseMatrix, DenseMatrix":function(e,t){return s(t,e,d,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,d,!1)},"DenseMatrix, DenseMatrix":function(e,t){return f(e,t,d)},"Array, Array":function(e,t){return d(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return d(n(e),t)},"Matrix, Array":function(e,t){return d(e,n(t))},"SparseMatrix, number | BigNumber":function(e,t){return r(t,0)?e.clone():l(e,t,d,!1)},"DenseMatrix, number | BigNumber":function(e,t){return r(t,0)?e.clone():p(e,t,d,!1)},"number | BigNumber, SparseMatrix":function(e,t){return r(e,0)?i(t.size(),t.storage()):c(t,e,d,!0)},"number | BigNumber, DenseMatrix":function(e,t){return r(e,0)?i(t.size(),t.storage()):p(t,e,d,!0)},"Array, number | BigNumber":function(e,t){return d(n(e),t).valueOf()},"number | BigNumber, Array":function(e,t){return d(e,n(t)).valueOf()}});return d})),$s=Ot("and",["typed","matrix","equalScalar","zeros","not"],(function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.zeros,a=e.not,o=Fa({typed:t,equalScalar:r}),s=La({typed:t,equalScalar:r}),u=ka({typed:t,equalScalar:r}),c=Ia({typed:t}),l=Oa({typed:t}),f=t("and",{"number, number":Ni,"Complex, Complex":function(e,t){return!(0===e.re&&0===e.im||0===t.re&&0===t.im)},"BigNumber, BigNumber":function(e,t){return!(e.isZero()||t.isZero()||e.isNaN()||t.isNaN())},"Unit, Unit":function(e,t){return f(e.value||0,t.value||0)},"SparseMatrix, SparseMatrix":function(e,t){return s(e,t,f,!1)},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,f,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,f,!1)},"DenseMatrix, DenseMatrix":function(e,t){return c(e,t,f)},"Array, Array":function(e,t){return f(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return f(n(e),t)},"Matrix, Array":function(e,t){return f(e,n(t))},"SparseMatrix, any":function(e,t){return a(t)?i(e.size(),e.storage()):u(e,t,f,!1)},"DenseMatrix, any":function(e,t){return a(t)?i(e.size(),e.storage()):l(e,t,f,!1)},"any, SparseMatrix":function(e,t){return a(e)?i(e.size(),e.storage()):u(t,e,f,!0)},"any, DenseMatrix":function(e,t){return a(e)?i(e.size(),e.storage()):l(t,e,f,!0)},"Array, any":function(e,t){return f(n(e),t).valueOf()},"any, Array":function(e,t){return f(e,n(t)).valueOf()}});return f})),Xs=Ot("compare",["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix"],(function(e){var t=e.typed,n=e.config,r=e.equalScalar,i=e.matrix,a=e.BigNumber,o=e.Fraction,s=e.DenseMatrix,u=za({typed:t}),c=Ga({typed:t,equalScalar:r}),l=Ua({typed:t,DenseMatrix:s}),f=Ia({typed:t}),p=Oa({typed:t}),d=t("compare",{"boolean, boolean":function(e,t){return e===t?0:e>t?1:-1},"number, number":function(e,t){return et(e,t,n.epsilon)?0:e>t?1:-1},"BigNumber, BigNumber":function(e,t){return ia(e,t,n.epsilon)?new a(0):new a(e.cmp(t))},"Fraction, Fraction":function(e,t){return new o(e.compare(t))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return d(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return c(e,t,d)},"SparseMatrix, DenseMatrix":function(e,t){return u(t,e,d,!0)},"DenseMatrix, SparseMatrix":function(e,t){return u(e,t,d,!1)},"DenseMatrix, DenseMatrix":function(e,t){return f(e,t,d)},"Array, Array":function(e,t){return d(i(e),i(t)).valueOf()},"Array, Matrix":function(e,t){return d(i(e),t)},"Matrix, Array":function(e,t){return d(e,i(t))},"SparseMatrix, any":function(e,t){return l(e,t,d,!1)},"DenseMatrix, any":function(e,t){return p(e,t,d,!1)},"any, SparseMatrix":function(e,t){return l(t,e,d,!0)},"any, DenseMatrix":function(e,t){return p(t,e,d,!0)},"Array, any":function(e,t){return p(i(e),t,d,!1).valueOf()},"any, Array":function(e,t){return p(i(t),e,d,!0).valueOf()}});return d})),Zs=function e(t,n){var r,i,a=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,o=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,u=/^0x[0-9a-f]+$/i,c=/^0/,l=function(t){return e.insensitive&&(""+t).toLowerCase()||""+t},f=l(t).replace(o,"")||"",p=l(n).replace(o,"")||"",d=f.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=p.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(f.match(u),16)||1!==d.length&&f.match(s)&&Date.parse(f),g=parseInt(p.match(u),16)||m&&p.match(s)&&Date.parse(p)||null;if(g){if(m<g)return-1;if(m>g)return 1}for(var v=0,y=Math.max(d.length,h.length);v<y;v++){if(r=!(d[v]||"").match(c)&&parseFloat(d[v])||d[v]||0,i=!(h[v]||"").match(c)&&parseFloat(h[v])||h[v]||0,isNaN(r)!==isNaN(i))return isNaN(r)?1:-1;if(typeof r!=typeof i&&(r+="",i+=""),r<i)return-1;if(r>i)return 1}return 0},Js=Ot("compareNatural",["typed","compare"],(function(e){var t=e.compare,n=t.signatures["boolean,boolean"],r=(0,e.typed)("compareNatural",{"any, any":function(e,a){var o,s=Ne(e),u=Ne(a);if(!("number"!==s&&"BigNumber"!==s&&"Fraction"!==s||"number"!==u&&"BigNumber"!==u&&"Fraction"!==u))return"0"!==(o=t(e,a)).toString()?o>0?1:-1:Zs(s,u);if("Array"===s||"Matrix"===s||"Array"===u||"Matrix"===u)return 0!==(o=function e(t,n){return Q(t)&&Q(n)?i(t.toJSON().values,n.toJSON().values):Q(t)?e(t.toArray(),n):Q(n)?e(t,n.toArray()):K(t)?e(t.toJSON().data,n):K(n)?e(t,n.toJSON().data):Array.isArray(t)?Array.isArray(n)?i(t,n):e(t,[n]):e([t],n)}(e,a))?o:Zs(s,u);if(s!==u)return Zs(s,u);if("Complex"===s)return function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0}(e,a);if("Unit"===s)return e.equalBase(a)?r(e.value,a.value):i(e.formatUnits(),a.formatUnits());if("boolean"===s)return n(e,a);if("string"===s)return Zs(e,a);if("Object"===s)return function(e,t){var n=Object.keys(e),a=Object.keys(t);n.sort(Zs),a.sort(Zs);var o=i(n,a);if(0!==o)return o;for(var s=0;s<n.length;s++){var u=r(e[n[s]],t[a[s]]);if(0!==u)return u}return 0}(e,a);if("null"===s)return 0;if("undefined"===s)return 0;throw new TypeError('Unsupported type of value "'+s+'"')}});function i(e,t){for(var n=0,i=Math.min(e.length,t.length);n<i;n++){var a=r(e[n],t[n]);if(0!==a)return a}return e.length>t.length?1:e.length<t.length?-1:0}return r})),eu=Ot("compareText",["typed","matrix"],(function(e){var t=e.typed,n=e.matrix,r=Ia({typed:t}),i=Oa({typed:t}),a=t("compareText",{"any, any":dt,"DenseMatrix, DenseMatrix":function(e,t){return r(e,t,dt)},"Array, Array":function(e,t){return a(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return a(n(e),t)},"Matrix, Array":function(e,t){return a(e,n(t))},"DenseMatrix, any":function(e,t){return i(e,t,dt,!1)},"any, DenseMatrix":function(e,t){return i(t,e,dt,!0)},"Array, any":function(e,t){return i(n(e),t,dt,!1).valueOf()},"any, Array":function(e,t){return i(n(t),e,dt,!0).valueOf()}});return a})),tu=Ot("equal",["typed","matrix","equalScalar","DenseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.DenseMatrix,a=za({typed:t}),o=ho({typed:t,DenseMatrix:i}),s=Ua({typed:t,DenseMatrix:i}),u=Ia({typed:t}),c=Oa({typed:t}),l=t("equal",{"any, any":function(e,t){return null===e?null===t:null===t?null===e:void 0===e?void 0===t:void 0===t?void 0===e:r(e,t)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,r)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,r,!0)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,r,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,r)},"Array, Array":function(e,t){return l(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return l(n(e),t)},"Matrix, Array":function(e,t){return l(e,n(t))},"SparseMatrix, any":function(e,t){return s(e,t,r,!1)},"DenseMatrix, any":function(e,t){return c(e,t,r,!1)},"any, SparseMatrix":function(e,t){return s(t,e,r,!0)},"any, DenseMatrix":function(e,t){return c(t,e,r,!0)},"Array, any":function(e,t){return c(n(e),t,r,!1).valueOf()},"any, Array":function(e,t){return c(n(t),e,r,!0).valueOf()}});return l})),nu=(Ot("equal",["typed","equalScalar"],(function(e){var t=e.equalScalar;return(0,e.typed)("equal",{"any, any":function(e,n){return null===e?null===n:null===n?null===e:void 0===e?void 0===n:void 0===n?void 0===e:t(e,n)}})})),Ot("equalText",["typed","compareText","isZero"],(function(e){var t=e.compareText,n=e.isZero;return(0,e.typed)("equalText",{"any, any":function(e,r){return n(t(e,r))}})}))),ru=Ot("smaller",["typed","config","matrix","DenseMatrix"],(function(e){var t=e.typed,n=e.config,r=e.matrix,i=e.DenseMatrix,a=za({typed:t}),o=ho({typed:t,DenseMatrix:i}),s=Ua({typed:t,DenseMatrix:i}),u=Ia({typed:t}),c=Oa({typed:t}),l=t("smaller",{"boolean, boolean":function(e,t){return e<t},"number, number":function(e,t){return e<t&&!et(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.lt(t)&&!ia(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return-1===e.compare(t)},"Complex, Complex":function(e,t){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return l(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,l)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,l,!0)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,l,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,l)},"Array, Array":function(e,t){return l(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return l(r(e),t)},"Matrix, Array":function(e,t){return l(e,r(t))},"SparseMatrix, any":function(e,t){return s(e,t,l,!1)},"DenseMatrix, any":function(e,t){return c(e,t,l,!1)},"any, SparseMatrix":function(e,t){return s(t,e,l,!0)},"any, DenseMatrix":function(e,t){return c(t,e,l,!0)},"Array, any":function(e,t){return c(r(e),t,l,!1).valueOf()},"any, Array":function(e,t){return c(r(t),e,l,!0).valueOf()}});return l})),iu=Ot("smallerEq",["typed","config","matrix","DenseMatrix"],(function(e){var t=e.typed,n=e.config,r=e.matrix,i=e.DenseMatrix,a=za({typed:t}),o=ho({typed:t,DenseMatrix:i}),s=Ua({typed:t,DenseMatrix:i}),u=Ia({typed:t}),c=Oa({typed:t}),l=t("smallerEq",{"boolean, boolean":function(e,t){return e<=t},"number, number":function(e,t){return e<=t||et(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.lte(t)||ia(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return 1!==e.compare(t)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return l(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,l)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,l,!0)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,l,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,l)},"Array, Array":function(e,t){return l(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return l(r(e),t)},"Matrix, Array":function(e,t){return l(e,r(t))},"SparseMatrix, any":function(e,t){return s(e,t,l,!1)},"DenseMatrix, any":function(e,t){return c(e,t,l,!1)},"any, SparseMatrix":function(e,t){return s(t,e,l,!0)},"any, DenseMatrix":function(e,t){return c(t,e,l,!0)},"Array, any":function(e,t){return c(r(e),t,l,!1).valueOf()},"any, Array":function(e,t){return c(r(t),e,l,!0).valueOf()}});return l})),au=Ot("larger",["typed","config","matrix","DenseMatrix"],(function(e){var t=e.typed,n=e.config,r=e.matrix,i=e.DenseMatrix,a=za({typed:t}),o=ho({typed:t,DenseMatrix:i}),s=Ua({typed:t,DenseMatrix:i}),u=Ia({typed:t}),c=Oa({typed:t}),l=t("larger",{"boolean, boolean":function(e,t){return e>t},"number, number":function(e,t){return e>t&&!et(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.gt(t)&&!ia(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return 1===e.compare(t)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return l(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,l)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,l,!0)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,l,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,l)},"Array, Array":function(e,t){return l(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return l(r(e),t)},"Matrix, Array":function(e,t){return l(e,r(t))},"SparseMatrix, any":function(e,t){return s(e,t,l,!1)},"DenseMatrix, any":function(e,t){return c(e,t,l,!1)},"any, SparseMatrix":function(e,t){return s(t,e,l,!0)},"any, DenseMatrix":function(e,t){return c(t,e,l,!0)},"Array, any":function(e,t){return c(r(e),t,l,!1).valueOf()},"any, Array":function(e,t){return c(r(t),e,l,!0).valueOf()}});return l})),ou=Ot("largerEq",["typed","config","matrix","DenseMatrix"],(function(e){var t=e.typed,n=e.config,r=e.matrix,i=e.DenseMatrix,a=za({typed:t}),o=ho({typed:t,DenseMatrix:i}),s=Ua({typed:t,DenseMatrix:i}),u=Ia({typed:t}),c=Oa({typed:t}),l=t("largerEq",{"boolean, boolean":function(e,t){return e>=t},"number, number":function(e,t){return e>=t||et(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.gte(t)||ia(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return-1!==e.compare(t)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return l(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,l)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,l,!0)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,l,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,l)},"Array, Array":function(e,t){return l(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return l(r(e),t)},"Matrix, Array":function(e,t){return l(e,r(t))},"SparseMatrix, any":function(e,t){return s(e,t,l,!1)},"DenseMatrix, any":function(e,t){return c(e,t,l,!1)},"any, SparseMatrix":function(e,t){return s(t,e,l,!0)},"any, DenseMatrix":function(e,t){return c(t,e,l,!0)},"Array, any":function(e,t){return c(r(e),t,l,!1).valueOf()},"any, Array":function(e,t){return c(r(t),e,l,!0).valueOf()}});return l})),su=Ot("deepEqual",["typed","equal"],(function(e){var t=e.equal;return(0,e.typed)("deepEqual",{"any, any":function(e,n){return function e(n,r){if(Array.isArray(n)){if(Array.isArray(r)){var i=n.length;if(i!==r.length)return!1;for(var a=0;a<i;a++)if(!e(n[a],r[a]))return!1;return!0}return!1}return!Array.isArray(r)&&t(n,r)}(e.valueOf(),n.valueOf())}})})),uu=Ot("unequal",["typed","config","equalScalar","matrix","DenseMatrix"],(function(e){var t=e.typed,n=e.equalScalar,r=e.matrix,i=e.DenseMatrix,a=za({typed:t}),o=ho({typed:t,DenseMatrix:i}),s=Ua({typed:t,DenseMatrix:i}),u=Ia({typed:t}),c=Oa({typed:t}),l=t("unequal",{"any, any":function(e,t){return null===e?null!==t:null===t?null!==e:void 0===e?void 0!==t:void 0===t?void 0!==e:f(e,t)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,f)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,f,!0)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,f,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,f)},"Array, Array":function(e,t){return l(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return l(r(e),t)},"Matrix, Array":function(e,t){return l(e,r(t))},"SparseMatrix, any":function(e,t){return s(e,t,f,!1)},"DenseMatrix, any":function(e,t){return c(e,t,f,!1)},"any, SparseMatrix":function(e,t){return s(t,e,f,!0)},"any, DenseMatrix":function(e,t){return c(t,e,f,!0)},"Array, any":function(e,t){return c(r(e),t,f,!1).valueOf()},"any, Array":function(e,t){return c(r(t),e,f,!0).valueOf()}});function f(e,t){return!n(e,t)}return l})),cu=(Ot("unequal",["typed","equalScalar"],(function(e){var t=e.equalScalar;return(0,e.typed)("unequal",{"any, any":function(e,n){return null===e?null!==n:null===n?null!==e:void 0===e?void 0!==n:void 0===n?void 0!==e:!t(e,n)}})})),Ot("partitionSelect",["typed","isNumeric","isNaN","compare"],(function(e){var t=e.isNumeric,n=e.isNaN,r=e.compare,i=r,a=function(e,t){return-r(e,t)};return(0,e.typed)("partitionSelect",{"Array | Matrix, number":function(e,t){return o(e,t,i)},"Array | Matrix, number, string":function(e,t,n){if("asc"===n)return o(e,t,i);if("desc"===n)return o(e,t,a);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":o});function o(e,t,n){if(!Ve(t)||t<0)throw new Error("k must be a non-negative integer");if(Y(e)){if(e.size().length>1)throw new Error("Only one dimensional matrices supported");return s(e.valueOf(),t,n)}if(Array.isArray(e))return s(e,t,n)}function s(e,r,i){if(r>=e.length)throw new Error("k out of bounds");for(var a=0;a<e.length;a++)if(t(e[a])&&n(e[a]))return e[a];for(var o=0,s=e.length-1;o<s;){for(var u=o,c=s,l=e[Math.floor(Math.random()*(s-o+1))+o];u<c;)if(i(e[u],l)>=0){var f=e[c];e[c]=e[u],e[u]=f,--c}else++u;i(e[u],l)>0&&--u,r<=u?s=u:o=u+1}return e[r]}}))),lu=Ot("sort",["typed","matrix","compare","compareNatural"],(function(e){var t=e.matrix,n=e.compare,r=e.compareNatural,i=n,a=function(e,t){return-n(e,t)};return(0,e.typed)("sort",{Array:function(e){return s(e),e.sort(i)},Matrix:function(e){return u(e),t(e.toArray().sort(i),e.storage())},"Array, function":function(e,t){return s(e),e.sort(t)},"Matrix, function":function(e,n){return u(e),t(e.toArray().sort(n),e.storage())},"Array, string":function(e,t){return s(e),e.sort(o(t))},"Matrix, string":function(e,n){return u(e),t(e.toArray().sort(o(n)),e.storage())}});function o(e){if("asc"===e)return i;if("desc"===e)return a;if("natural"===e)return r;throw new Error('String "asc", "desc", or "natural" expected')}function s(e){if(1!==gt(e).length)throw new Error("One dimensional array expected")}function u(e){if(1!==e.size().length)throw new Error("One dimensional matrix expected")}})),fu=Ot("max",["typed","larger"],(function(e){var t=e.larger;return(0,e.typed)("max",{"Array | Matrix":r,"Array | Matrix, number | BigNumber":function(e,t){return Rr(e,t.valueOf(),n)},"...":function(e){if(Er(e))throw new TypeError("Scalar values expected in function max");return r(e)}});function n(e,n){try{return t(e,n)?e:n}catch(e){throw Ns(e,"max",n)}}function r(e){var n;if(Cr(e,(function(e){try{isNaN(e)&&"number"==typeof e?n=NaN:(void 0===n||t(e,n))&&(n=e)}catch(t){throw Ns(t,"max",e)}})),void 0===n)throw new Error("Cannot calculate max of an empty array");return n}})),pu=Ot("min",["typed","smaller"],(function(e){var t=e.smaller;return(0,e.typed)("min",{"Array | Matrix":r,"Array | Matrix, number | BigNumber":function(e,t){return Rr(e,t.valueOf(),n)},"...":function(e){if(Er(e))throw new TypeError("Scalar values expected in function min");return r(e)}});function n(e,n){try{return t(e,n)?e:n}catch(e){throw Ns(e,"min",n)}}function r(e){var n;if(Cr(e,(function(e){try{isNaN(e)&&"number"==typeof e?n=NaN:(void 0===n||t(e,n))&&(n=e)}catch(t){throw Ns(t,"min",e)}})),void 0===n)throw new Error("Cannot calculate min of an empty array");return n}})),du=Ot("ImmutableDenseMatrix",["smaller","DenseMatrix"],(function(e){var t=e.smaller,n=e.DenseMatrix;function r(e,t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!U(t))throw new Error("Invalid datatype: "+t);if(Y(e)||j(e)){var i=new n(e,t);this._data=i._data,this._size=i._size,this._datatype=i._datatype,this._min=null,this._max=null}else if(e&&j(e.data)&&j(e.size))this._data=e.data,this._size=e.size,this._datatype=e.datatype,this._min=void 0!==e.min?e.min:null,this._max=void 0!==e.max?e.max:null;else{if(e)throw new TypeError("Unsupported type of data ("+Ne(e)+")");this._data=[],this._size=[0],this._datatype=t,this._min=null,this._max=null}}return(r.prototype=new n).type="ImmutableDenseMatrix",r.prototype.isImmutableDenseMatrix=!0,r.prototype.subset=function(e){switch(arguments.length){case 1:var t=n.prototype.subset.call(this,e);return Y(t)?new r({data:t._data,size:t._size,datatype:t._datatype}):t;case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},r.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},r.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},r.prototype.clone=function(){return new r({data:_e(this._data),size:_e(this._size),datatype:this._datatype})},r.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.fromJSON=function(e){return new r(e)},r.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},r.prototype.min=function(){if(null===this._min){var e=null;this.forEach((function(n){(null===e||t(n,e))&&(e=n)})),this._min=null!==e?e:void 0}return this._min},r.prototype.max=function(){if(null===this._max){var e=null;this.forEach((function(n){(null===e||t(e,n))&&(e=n)})),this._max=null!==e?e:void 0}return this._max},r}),{isClass:!0}),hu=Ot("Index",["ImmutableDenseMatrix"],(function(e){var t=e.ImmutableDenseMatrix;function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._isScalar=!0;for(var t=0,i=arguments.length;t<i;t++){var a=arguments[t];if(W(a))this._dimensions.push(a),this._isScalar=!1;else if(Array.isArray(a)||Y(a)){var o=r(a.valueOf());this._dimensions.push(o);var s=o.size();1===s.length&&1===s[0]||(this._isScalar=!1)}else if("number"==typeof a)this._dimensions.push(r([a]));else{if("string"!=typeof a)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._dimensions.push(a)}}}function r(e){for(var n=0,r=e.length;n<r;n++)if("number"!=typeof e[n]||!Ve(e[n]))throw new TypeError("Index parameters must be positive integer numbers");return new t(e)}return n.prototype.type="Index",n.prototype.isIndex=!0,n.prototype.clone=function(){var e=new n;return e._dimensions=_e(this._dimensions),e._isScalar=this._isScalar,e},n.create=function(e){var t=new n;return n.apply(t,e),t},n.prototype.size=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e[t]="string"==typeof r?1:r.size()[0]}return e},n.prototype.max=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e[t]="string"==typeof r?r:r.max()}return e},n.prototype.min=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e[t]="string"==typeof r?r:r.min()}return e},n.prototype.forEach=function(e){for(var t=0,n=this._dimensions.length;t<n;t++)e(this._dimensions[t],t,this)},n.prototype.dimension=function(e){return this._dimensions[e]||null},n.prototype.isObjectProperty=function(){return 1===this._dimensions.length&&"string"==typeof this._dimensions[0]},n.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},n.prototype.isScalar=function(){return this._isScalar},n.prototype.valueOf=n.prototype.toArray=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e.push("string"==typeof r?r:r.toArray())}return e},n.prototype.toString=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e.push("string"==typeof r?JSON.stringify(r):r.toString())}return"["+e.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},n.fromJSON=function(e){return n.create(e.dimensions)},n}),{isClass:!0}),mu=Ot("FibonacciHeap",["smaller","larger"],(function(e){var t=e.smaller,n=e.larger,r=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}function a(e,t,n){t.left.right=t.right,t.right.left=t.left,n.degree--,n.child===t&&(n.child=t.right),0===n.degree&&(n.child=null),t.left=e,t.right=e.right,e.right=t,t.right.left=t,t.parent=null,t.mark=!1}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(e,n){var r={key:e,value:n,degree:0};if(this._minimum){var i=this._minimum;r.left=i,r.right=i.right,i.right=r,r.right.left=r,t(e,i.key)&&(this._minimum=r)}else r.left=r,r.right=r,this._minimum=r;return this._size++,r},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return 0===this._size},i.prototype.extractMinimum=function(){var e=this._minimum;if(null===e)return e;for(var i=this._minimum,a=e.degree,s=e.child;a>0;){var u=s.right;s.left.right=s.right,s.right.left=s.left,s.left=i,s.right=i.right,i.right=s,s.right.left=s,s.parent=null,s=u,a--}return e.left.right=e.right,e.right.left=e.left,i=e===e.right?null:function(e,i){var a,s=Math.floor(Math.log(i)*r)+1,u=new Array(s),c=0,l=e;if(l)for(c++,l=l.right;l!==e;)c++,l=l.right;for(;c>0;){for(var f=l.degree,p=l.right;a=u[f];){if(n(l.key,a.key)){var d=a;a=l,l=d}o(a,l),u[f]=null,f++}u[f]=l,l=p,c--}e=null;for(var h=0;h<s;h++)(a=u[h])&&(e?(a.left.right=a.right,a.right.left=a.left,a.left=e,a.right=e.right,e.right=a,a.right.left=a,t(a.key,e.key)&&(e=a)):e=a);return e}(i=e.right,this._size),this._size--,this._minimum=i,e},i.prototype.remove=function(e){this._minimum=function(e,n,r){n.key=-1;var i=n.parent;return i&&t(n.key,i.key)&&(a(e,n,i),function e(t,n){var r=n.parent;r&&(n.mark?(a(t,n,r),e(r)):n.mark=!0)}(e,i)),t(n.key,e.key)&&(e=n),e}(this._minimum,e),this.extractMinimum()};var o=function(e,t){e.left.right=e.right,e.right.left=e.left,e.parent=t,t.child?(e.left=t.child,e.right=t.child.right,t.child.right=e,e.right.left=e):(t.child=e,e.right=e,e.left=e),t.degree++,e.mark=!1};return i}),{isClass:!0}),gu=Ot("Spa",["addScalar","equalScalar","FibonacciHeap"],(function(e){var t=e.addScalar,n=e.equalScalar,r=e.FibonacciHeap;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new r}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(e,t){if(this._values[e])this._values[e].value=t;else{var n=this._heap.insert(e,t);this._values[e]=n}},i.prototype.get=function(e){var t=this._values[e];return t?t.value:0},i.prototype.accumulate=function(e,n){var r=this._values[e];r?r.value=t(r.value,n):(r=this._heap.insert(e,n),this._values[e]=r)},i.prototype.forEach=function(e,t,r){var i=this._heap,a=this._values,o=[],s=i.extractMinimum();for(s&&o.push(s);s&&s.key<=t;)s.key>=e&&(n(s.value,0)||r(s.key,s.value,this)),(s=i.extractMinimum())&&o.push(s);for(var u=0;u<o.length;u++){var c=o[u];a[(s=i.insert(c.key,c.value)).key]=s}},i.prototype.swap=function(e,t){var n=this._values[e],r=this._values[t];if(!n&&r)n=this._heap.insert(e,r.value),this._heap.remove(r),this._values[e]=n,this._values[t]=void 0;else if(n&&!r)r=this._heap.insert(t,n.value),this._heap.remove(n),this._values[t]=r,this._values[e]=void 0;else if(n&&r){var i=n.value;n.value=r.value,r.value=i}},i}),{isClass:!0}),vu=To((function(e){return new e(1).exp()}),wu),yu=To((function(e){return new e(1).plus(new e(5).sqrt()).div(2)}),wu),xu=To((function(e){return e.acos(-1)}),wu),bu=To((function(e){return xu(e).times(2)}),wu);function wu(e){return e[0].precision}function Nu(e){return(Nu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Su(){return(Su=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var _u=Ot("Unit",["?on","config","addScalar","subtract","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],(function(e){var t,n,r,i=e.on,a=e.config,o=e.addScalar,s=e.subtract,u=e.multiplyScalar,c=e.divideScalar,l=e.pow,f=e.abs,p=e.fix,d=e.round,h=e.equal,m=e.isNumeric,g=e.format,v=e.Complex,y=e.BigNumber,x=e.Fraction,b=e.number;function w(e,t){if(!(this instanceof w))throw new Error("Constructor must be called with the new operator");if(null!=e&&!m(e)&&!q(e))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(void 0!==t&&("string"!=typeof t||""===t))throw new TypeError("Second parameter in Unit constructor must be a string");if(void 0!==t){var n=w.parse(t);this.units=n.units,this.dimensions=n.dimensions}else{this.units=[{unit:F,prefix:R.NONE,power:0}],this.dimensions=[];for(var r=0;r<I.length;r++)this.dimensions[r]=0}this.value=null!=e?this._normalize(e):null,this.fixPrefix=!1,this.skipAutomaticSimplification=!0}function N(){for(;" "===r||"\t"===r;)_()}function S(e){return e>="0"&&e<="9"}function _(){n++,r=t.charAt(n)}function D(e){r=t.charAt(n=e)}function A(){var e="",t=n;if("+"===r?_():"-"===r&&(e+=r,_()),!function(e){return e>="0"&&e<="9"||"."===e}(r))return D(t),null;if("."===r){if(e+=r,_(),!S(r))return D(t),null}else{for(;S(r);)e+=r,_();"."===r&&(e+=r,_())}for(;S(r);)e+=r,_();if("E"===r||"e"===r){var i="",a=n;if(i+=r,_(),"+"!==r&&"-"!==r||(i+=r,_()),!S(r))return D(a),e;for(e+=i;S(r);)e+=r,_()}return e}function M(){for(var e="",i=t.charCodeAt(n);i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122;)e+=r,_(),i=t.charCodeAt(n);return((i=e.charCodeAt(0))>=65&&i<=90||i>=97&&i<=122)&&e||null}function E(e){return r===e?(_(),e):null}function C(e){if(Te(L,e)){var t=L[e];return{unit:t,prefix:t.prefixes[""]}}for(var n in L)if(Te(L,n)&&ct(e,n)){var r=L[n],i=e.substring(0,e.length-n.length),a=Te(r.prefixes,i)?r.prefixes[i]:void 0;if(void 0!==a)return{unit:r,prefix:a}}return null}function T(e){return e.equalBase(O.NONE)&&null!==e.value&&!a.predictable?e.value:e}w.prototype.type="Unit",w.prototype.isUnit=!0,w.parse=function(e,i){if(i=i||{},n=-1,r="","string"!=typeof(t=e))throw new TypeError("Invalid argument in Unit.parse, string expected");var o=new w;o.units=[];var s=1,u=!1;_(),N();var c=A(),l=null;if(c){if("BigNumber"===a.number)l=new y(c);else if("Fraction"===a.number)try{l=new x(c)}catch(e){l=parseFloat(c)}else l=parseFloat(c);N(),E("*")?(s=1,u=!0):E("/")&&(s=-1,u=!0)}for(var f=[],p=1;;){for(N();"("===r;)f.push(s),p*=s,s=1,_(),N();var d;if(!r)break;var h=r;if(null===(d=M()))throw new SyntaxError('Unexpected "'+h+'" in "'+t+'" at index '+n.toString());var m=C(d);if(null===m)throw new SyntaxError('Unit "'+d+'" not found.');var g=s*p;if(N(),E("^")){N();var v=A();if(null===v)throw new SyntaxError('In "'+e+'", "^" must be followed by a floating-point number');g*=v}o.units.push({unit:m.unit,prefix:m.prefix,power:g});for(var b=0;b<I.length;b++)o.dimensions[b]+=(m.unit.dimensions[b]||0)*g;for(N();")"===r;){if(0===f.length)throw new SyntaxError('Unmatched ")" in "'+t+'" at index '+n.toString());p/=f.pop(),_(),N()}u=!1,E("*")?(s=1,u=!0):E("/")?(s=-1,u=!0):s=1,m.unit.base&&(V.auto[m.unit.base.key]={unit:m.unit,prefix:m.prefix})}if(N(),r)throw new SyntaxError('Could not parse: "'+e+'"');if(u)throw new SyntaxError('Trailing characters: "'+e+'"');if(0!==f.length)throw new SyntaxError('Unmatched "(" in "'+t+'"');if(0===o.units.length&&!i.allowNoUnits)throw new SyntaxError('"'+e+'" contains no units');return o.value=void 0!==l?o._normalize(l):null,o},w.prototype.clone=function(){var e=new w;e.fixPrefix=this.fixPrefix,e.skipAutomaticSimplification=this.skipAutomaticSimplification,e.value=_e(this.value),e.dimensions=this.dimensions.slice(0),e.units=[];for(var t=0;t<this.units.length;t++)for(var n in e.units[t]={},this.units[t])Te(this.units[t],n)&&(e.units[t][n]=this.units[t][n]);return e},w.prototype._isDerived=function(){return 0!==this.units.length&&(this.units.length>1||Math.abs(this.units[0].power-1)>1e-15)},w.prototype._normalize=function(e){var t,n,r,i,a;if(null==e||0===this.units.length)return e;if(this._isDerived()){var s=e;a=w._getNumberConverter(Ne(e));for(var c=0;c<this.units.length;c++)t=a(this.units[c].unit.value),i=a(this.units[c].prefix.value),r=a(this.units[c].power),s=u(s,l(u(t,i),r));return s}return t=(a=w._getNumberConverter(Ne(e)))(this.units[0].unit.value),n=a(this.units[0].unit.offset),i=a(this.units[0].prefix.value),u(o(e,n),u(t,i))},w.prototype._denormalize=function(e,t){var n,r,i,a,o;if(null==e||0===this.units.length)return e;if(this._isDerived()){var f=e;o=w._getNumberConverter(Ne(e));for(var p=0;p<this.units.length;p++)n=o(this.units[p].unit.value),a=o(this.units[p].prefix.value),i=o(this.units[p].power),f=c(f,l(u(n,a),i));return f}return n=(o=w._getNumberConverter(Ne(e)))(this.units[0].unit.value),a=o(this.units[0].prefix.value),r=o(this.units[0].unit.offset),s(c(c(e,n),null==t?a:t),r)},w.isValuelessUnit=function(e){return null!==C(e)},w.prototype.hasBase=function(e){if("string"==typeof e&&(e=O[e]),!e)return!1;for(var t=0;t<I.length;t++)if(Math.abs((this.dimensions[t]||0)-(e.dimensions[t]||0))>1e-12)return!1;return!0},w.prototype.equalBase=function(e){for(var t=0;t<I.length;t++)if(Math.abs((this.dimensions[t]||0)-(e.dimensions[t]||0))>1e-12)return!1;return!0},w.prototype.equals=function(e){return this.equalBase(e)&&h(this.value,e.value)},w.prototype.multiply=function(e){for(var t=this.clone(),n=0;n<I.length;n++)t.dimensions[n]=(this.dimensions[n]||0)+(e.dimensions[n]||0);for(var r=0;r<e.units.length;r++){var i={};for(var a in e.units[r])i[a]=e.units[r][a];t.units.push(i)}if(null!==this.value||null!==e.value){var o=null===this.value?this._normalize(1):this.value,s=null===e.value?e._normalize(1):e.value;t.value=u(o,s)}else t.value=null;return t.skipAutomaticSimplification=!1,T(t)},w.prototype.divide=function(e){for(var t=this.clone(),n=0;n<I.length;n++)t.dimensions[n]=(this.dimensions[n]||0)-(e.dimensions[n]||0);for(var r=0;r<e.units.length;r++){var i={};for(var a in e.units[r])i[a]=e.units[r][a];i.power=-i.power,t.units.push(i)}if(null!==this.value||null!==e.value){var o=null===this.value?this._normalize(1):this.value,s=null===e.value?e._normalize(1):e.value;t.value=c(o,s)}else t.value=null;return t.skipAutomaticSimplification=!1,T(t)},w.prototype.pow=function(e){for(var t=this.clone(),n=0;n<I.length;n++)t.dimensions[n]=(this.dimensions[n]||0)*e;for(var r=0;r<t.units.length;r++)t.units[r].power*=e;return t.value=null!==t.value?l(t.value,e):null,t.skipAutomaticSimplification=!1,T(t)},w.prototype.abs=function(){var e=this.clone();for(var t in e.value=null!==e.value?f(e.value):null,e.units)"VA"!==e.units[t].unit.name&&"VAR"!==e.units[t].unit.name||(e.units[t].unit=L.W);return e},w.prototype.to=function(e){var t,n=null===this.value?this._normalize(1):this.value;if("string"==typeof e){if(t=w.parse(e),!this.equalBase(t))throw new Error("Units do not match ('".concat(t.toString(),"' != '").concat(this.toString(),"')"));if(null!==t.value)throw new Error("Cannot convert to a unit with a value");return t.value=_e(n),t.fixPrefix=!0,t.skipAutomaticSimplification=!0,t}if(G(e)){if(!this.equalBase(e))throw new Error("Units do not match ('".concat(e.toString(),"' != '").concat(this.toString(),"')"));if(null!==e.value)throw new Error("Cannot convert to a unit with a value");return(t=e.clone()).value=_e(n),t.fixPrefix=!0,t.skipAutomaticSimplification=!0,t}throw new Error("String or Unit expected as parameter")},w.prototype.toNumber=function(e){return b(this.toNumeric(e))},w.prototype.toNumeric=function(e){var t;return(t=e?this.to(e):this.clone())._isDerived()||0===t.units.length?t._denormalize(t.value):t._denormalize(t.value,t.units[0].prefix.value)},w.prototype.toString=function(){return this.format()},w.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.formatUnits(),fixPrefix:this.fixPrefix}},w.fromJSON=function(e){var t=new w(e.value,e.unit);return t.fixPrefix=e.fixPrefix||!1,t},w.prototype.valueOf=w.prototype.toString,w.prototype.simplify=function(){var e,t,n=this.clone(),r=[];for(var i in z)if(n.hasBase(O[i])){e=i;break}if("NONE"===e)n.units=[];else if(e&&Te(z,e)&&(t=z[e]),t)n.units=[{unit:t.unit,prefix:t.prefix,power:1}];else{for(var a=!1,o=0;o<I.length;o++){var s=I[o];Math.abs(n.dimensions[o]||0)>1e-12&&(Te(z,s)?r.push({unit:z[s].unit,prefix:z[s].prefix,power:n.dimensions[o]||0}):a=!0)}r.length<n.units.length&&!a&&(n.units=r)}return n},w.prototype.toSI=function(){for(var e=this.clone(),t=[],n=0;n<I.length;n++){var r=I[n];if(Math.abs(e.dimensions[n]||0)>1e-12){if(!Te(V.si,r))throw new Error("Cannot express custom unit "+r+" in SI units");t.push({unit:V.si[r].unit,prefix:V.si[r].prefix,power:e.dimensions[n]||0})}}return e.units=t,e.fixPrefix=!0,e.skipAutomaticSimplification=!0,e},w.prototype.formatUnits=function(){for(var e="",t="",n=0,r=0,i=0;i<this.units.length;i++)this.units[i].power>0?(n++,e+=" "+this.units[i].prefix.name+this.units[i].unit.name,Math.abs(this.units[i].power-1)>1e-15&&(e+="^"+this.units[i].power)):this.units[i].power<0&&r++;if(r>0)for(var a=0;a<this.units.length;a++)this.units[a].power<0&&(n>0?(t+=" "+this.units[a].prefix.name+this.units[a].unit.name,Math.abs(this.units[a].power+1)>1e-15&&(t+="^"+-this.units[a].power)):(t+=" "+this.units[a].prefix.name+this.units[a].unit.name,t+="^"+this.units[a].power));e=e.substr(1),t=t.substr(1),n>1&&r>0&&(e="("+e+")"),r>1&&n>0&&(t="("+t+")");var o=e;return n>0&&r>0&&(o+=" / "),o+t},w.prototype.format=function(e){var t=this.skipAutomaticSimplification||null===this.value?this.clone():this.simplify(),n=!1;for(var r in null!=t.value&&q(t.value)&&(n=Math.abs(t.value.re)<1e-14),t.units)t.units[r].unit&&("VA"===t.units[r].unit.name&&n?t.units[r].unit=L.VAR:"VAR"!==t.units[r].unit.name||n||(t.units[r].unit=L.VA));1!==t.units.length||t.fixPrefix||Math.abs(t.units[0].power-Math.round(t.units[0].power))<1e-14&&(t.units[0].prefix=t._bestPrefix());var i=t._denormalize(t.value),a=null!==t.value?g(i,e||{}):"",o=t.formatUnits();return t.value&&q(t.value)&&(a="("+a+")"),o.length>0&&a.length>0&&(a+=" "),a+o},w.prototype._bestPrefix=function(){if(1!==this.units.length)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var e=null!==this.value?f(this.value):0,t=f(this.units[0].unit.value),n=this.units[0].prefix;if(0===e)return n;var r=this.units[0].power,i=Math.log(e/Math.pow(n.value*t,r))/Math.LN10-1.2;if(i>-2.200001&&i<1.800001)return n;i=Math.abs(i);var a=this.units[0].unit.prefixes;for(var o in a)if(Te(a,o)){var s=a[o];if(s.scientific){var u=Math.abs(Math.log(e/Math.pow(s.value*t,r))/Math.LN10-1.2);(u<i||u===i&&s.name.length<n.name.length)&&(n=s,i=u)}}return n},w.prototype.splitUnit=function(e){for(var t=this.clone(),n=[],r=0;r<e.length&&(t=t.to(e[r]),r!==e.length-1);r++){var i=t.toNumeric(),a=d(i),u=new w(h(a,i)?a:p(t.toNumeric()),e[r].toString());n.push(u),t=s(t,u)}for(var c=0,l=0;l<n.length;l++)c=o(c,n[l].value);return h(c,this.value)&&(t.value=0),n.push(t),n};var R={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};R.SHORTLONG=Su({},R.SHORT,R.LONG),R.BINARY_SHORT=Su({},R.BINARY_SHORT_SI,R.BINARY_SHORT_IEC),R.BINARY_LONG=Su({},R.BINARY_LONG_SI,R.BINARY_LONG_IEC);var I=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],O={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var P in O)O[P].key=P;var F={name:"",base:{},value:1,offset:0,dimensions:I.map((function(e){return 0}))},L={meter:{name:"meter",base:O.LENGTH,prefixes:R.LONG,value:1,offset:0},inch:{name:"inch",base:O.LENGTH,prefixes:R.NONE,value:.0254,offset:0},foot:{name:"foot",base:O.LENGTH,prefixes:R.NONE,value:.3048,offset:0},yard:{name:"yard",base:O.LENGTH,prefixes:R.NONE,value:.9144,offset:0},mile:{name:"mile",base:O.LENGTH,prefixes:R.NONE,value:1609.344,offset:0},link:{name:"link",base:O.LENGTH,prefixes:R.NONE,value:.201168,offset:0},rod:{name:"rod",base:O.LENGTH,prefixes:R.NONE,value:5.0292,offset:0},chain:{name:"chain",base:O.LENGTH,prefixes:R.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:O.LENGTH,prefixes:R.NONE,value:1e-10,offset:0},m:{name:"m",base:O.LENGTH,prefixes:R.SHORT,value:1,offset:0},in:{name:"in",base:O.LENGTH,prefixes:R.NONE,value:.0254,offset:0},ft:{name:"ft",base:O.LENGTH,prefixes:R.NONE,value:.3048,offset:0},yd:{name:"yd",base:O.LENGTH,prefixes:R.NONE,value:.9144,offset:0},mi:{name:"mi",base:O.LENGTH,prefixes:R.NONE,value:1609.344,offset:0},li:{name:"li",base:O.LENGTH,prefixes:R.NONE,value:.201168,offset:0},rd:{name:"rd",base:O.LENGTH,prefixes:R.NONE,value:5.02921,offset:0},ch:{name:"ch",base:O.LENGTH,prefixes:R.NONE,value:20.1168,offset:0},mil:{name:"mil",base:O.LENGTH,prefixes:R.NONE,value:254e-7,offset:0},m2:{name:"m2",base:O.SURFACE,prefixes:R.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:O.SURFACE,prefixes:R.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:O.SURFACE,prefixes:R.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:O.SURFACE,prefixes:R.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:O.SURFACE,prefixes:R.NONE,value:2589988.110336,offset:0},sqrd:{name:"sqrd",base:O.SURFACE,prefixes:R.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:O.SURFACE,prefixes:R.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:O.SURFACE,prefixes:R.NONE,value:6.4516e-10,offset:0},acre:{name:"acre",base:O.SURFACE,prefixes:R.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:O.SURFACE,prefixes:R.NONE,value:1e4,offset:0},m3:{name:"m3",base:O.VOLUME,prefixes:R.CUBIC,value:1,offset:0},L:{name:"L",base:O.VOLUME,prefixes:R.SHORT,value:.001,offset:0},l:{name:"l",base:O.VOLUME,prefixes:R.SHORT,value:.001,offset:0},litre:{name:"litre",base:O.VOLUME,prefixes:R.LONG,value:.001,offset:0},cuin:{name:"cuin",base:O.VOLUME,prefixes:R.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:O.VOLUME,prefixes:R.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:O.VOLUME,prefixes:R.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:O.VOLUME,prefixes:R.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:O.VOLUME,prefixes:R.NONE,value:15e-6,offset:0},drop:{name:"drop",base:O.VOLUME,prefixes:R.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:O.VOLUME,prefixes:R.NONE,value:5e-8,offset:0},minim:{name:"minim",base:O.VOLUME,prefixes:R.NONE,value:6.161152e-8,offset:0},fluiddram:{name:"fluiddram",base:O.VOLUME,prefixes:R.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:O.VOLUME,prefixes:R.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:O.VOLUME,prefixes:R.NONE,value:.0001182941,offset:0},cc:{name:"cc",base:O.VOLUME,prefixes:R.NONE,value:1e-6,offset:0},cup:{name:"cup",base:O.VOLUME,prefixes:R.NONE,value:.0002365882,offset:0},pint:{name:"pint",base:O.VOLUME,prefixes:R.NONE,value:.0004731765,offset:0},quart:{name:"quart",base:O.VOLUME,prefixes:R.NONE,value:.0009463529,offset:0},gallon:{name:"gallon",base:O.VOLUME,prefixes:R.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:O.VOLUME,prefixes:R.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:O.VOLUME,prefixes:R.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:O.VOLUME,prefixes:R.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:O.VOLUME,prefixes:R.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:O.VOLUME,prefixes:R.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:O.VOLUME,prefixes:R.NONE,value:.0001182941,offset:0},cp:{name:"cp",base:O.VOLUME,prefixes:R.NONE,value:.0002365882,offset:0},pt:{name:"pt",base:O.VOLUME,prefixes:R.NONE,value:.0004731765,offset:0},qt:{name:"qt",base:O.VOLUME,prefixes:R.NONE,value:.0009463529,offset:0},gal:{name:"gal",base:O.VOLUME,prefixes:R.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:O.VOLUME,prefixes:R.NONE,value:.1173478,offset:0},obl:{name:"obl",base:O.VOLUME,prefixes:R.NONE,value:.1589873,offset:0},g:{name:"g",base:O.MASS,prefixes:R.SHORT,value:.001,offset:0},gram:{name:"gram",base:O.MASS,prefixes:R.LONG,value:.001,offset:0},ton:{name:"ton",base:O.MASS,prefixes:R.SHORT,value:907.18474,offset:0},t:{name:"t",base:O.MASS,prefixes:R.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:O.MASS,prefixes:R.LONG,value:1e3,offset:0},grain:{name:"grain",base:O.MASS,prefixes:R.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:O.MASS,prefixes:R.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:O.MASS,prefixes:R.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:O.MASS,prefixes:R.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:O.MASS,prefixes:R.NONE,value:45.359237,offset:0},stick:{name:"stick",base:O.MASS,prefixes:R.NONE,value:.115,offset:0},stone:{name:"stone",base:O.MASS,prefixes:R.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:O.MASS,prefixes:R.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:O.MASS,prefixes:R.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:O.MASS,prefixes:R.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:O.MASS,prefixes:R.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:O.MASS,prefixes:R.NONE,value:45.359237,offset:0},s:{name:"s",base:O.TIME,prefixes:R.SHORT,value:1,offset:0},min:{name:"min",base:O.TIME,prefixes:R.NONE,value:60,offset:0},h:{name:"h",base:O.TIME,prefixes:R.NONE,value:3600,offset:0},second:{name:"second",base:O.TIME,prefixes:R.LONG,value:1,offset:0},sec:{name:"sec",base:O.TIME,prefixes:R.LONG,value:1,offset:0},minute:{name:"minute",base:O.TIME,prefixes:R.NONE,value:60,offset:0},hour:{name:"hour",base:O.TIME,prefixes:R.NONE,value:3600,offset:0},day:{name:"day",base:O.TIME,prefixes:R.NONE,value:86400,offset:0},week:{name:"week",base:O.TIME,prefixes:R.NONE,value:604800,offset:0},month:{name:"month",base:O.TIME,prefixes:R.NONE,value:2629800,offset:0},year:{name:"year",base:O.TIME,prefixes:R.NONE,value:31557600,offset:0},decade:{name:"decade",base:O.TIME,prefixes:R.NONE,value:315576e3,offset:0},century:{name:"century",base:O.TIME,prefixes:R.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:O.TIME,prefixes:R.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:O.FREQUENCY,prefixes:R.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:O.FREQUENCY,prefixes:R.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:O.ANGLE,prefixes:R.SHORT,value:1,offset:0},radian:{name:"radian",base:O.ANGLE,prefixes:R.LONG,value:1,offset:0},deg:{name:"deg",base:O.ANGLE,prefixes:R.SHORT,value:null,offset:0},degree:{name:"degree",base:O.ANGLE,prefixes:R.LONG,value:null,offset:0},grad:{name:"grad",base:O.ANGLE,prefixes:R.SHORT,value:null,offset:0},gradian:{name:"gradian",base:O.ANGLE,prefixes:R.LONG,value:null,offset:0},cycle:{name:"cycle",base:O.ANGLE,prefixes:R.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:O.ANGLE,prefixes:R.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:O.ANGLE,prefixes:R.NONE,value:null,offset:0},A:{name:"A",base:O.CURRENT,prefixes:R.SHORT,value:1,offset:0},ampere:{name:"ampere",base:O.CURRENT,prefixes:R.LONG,value:1,offset:0},K:{name:"K",base:O.TEMPERATURE,prefixes:R.NONE,value:1,offset:0},degC:{name:"degC",base:O.TEMPERATURE,prefixes:R.NONE,value:1,offset:273.15},degF:{name:"degF",base:O.TEMPERATURE,prefixes:R.NONE,value:1/1.8,offset:459.67},degR:{name:"degR",base:O.TEMPERATURE,prefixes:R.NONE,value:1/1.8,offset:0},kelvin:{name:"kelvin",base:O.TEMPERATURE,prefixes:R.NONE,value:1,offset:0},celsius:{name:"celsius",base:O.TEMPERATURE,prefixes:R.NONE,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:O.TEMPERATURE,prefixes:R.NONE,value:1/1.8,offset:459.67},rankine:{name:"rankine",base:O.TEMPERATURE,prefixes:R.NONE,value:1/1.8,offset:0},mol:{name:"mol",base:O.AMOUNT_OF_SUBSTANCE,prefixes:R.SHORT,value:1,offset:0},mole:{name:"mole",base:O.AMOUNT_OF_SUBSTANCE,prefixes:R.LONG,value:1,offset:0},cd:{name:"cd",base:O.LUMINOUS_INTENSITY,prefixes:R.SHORT,value:1,offset:0},candela:{name:"candela",base:O.LUMINOUS_INTENSITY,prefixes:R.LONG,value:1,offset:0},N:{name:"N",base:O.FORCE,prefixes:R.SHORT,value:1,offset:0},newton:{name:"newton",base:O.FORCE,prefixes:R.LONG,value:1,offset:0},dyn:{name:"dyn",base:O.FORCE,prefixes:R.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:O.FORCE,prefixes:R.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:O.FORCE,prefixes:R.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:O.FORCE,prefixes:R.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:O.FORCE,prefixes:R.LONG,value:4448.2216,offset:0},J:{name:"J",base:O.ENERGY,prefixes:R.SHORT,value:1,offset:0},joule:{name:"joule",base:O.ENERGY,prefixes:R.SHORT,value:1,offset:0},erg:{name:"erg",base:O.ENERGY,prefixes:R.NONE,value:1e-7,offset:0},Wh:{name:"Wh",base:O.ENERGY,prefixes:R.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:O.ENERGY,prefixes:R.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:O.ENERGY,prefixes:R.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:O.ENERGY,prefixes:R.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:O.POWER,prefixes:R.SHORT,value:1,offset:0},watt:{name:"watt",base:O.POWER,prefixes:R.LONG,value:1,offset:0},hp:{name:"hp",base:O.POWER,prefixes:R.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:O.POWER,prefixes:R.SHORT,value:v.I,offset:0},VA:{name:"VA",base:O.POWER,prefixes:R.SHORT,value:1,offset:0},Pa:{name:"Pa",base:O.PRESSURE,prefixes:R.SHORT,value:1,offset:0},psi:{name:"psi",base:O.PRESSURE,prefixes:R.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:O.PRESSURE,prefixes:R.NONE,value:101325,offset:0},bar:{name:"bar",base:O.PRESSURE,prefixes:R.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:O.PRESSURE,prefixes:R.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:O.PRESSURE,prefixes:R.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:O.PRESSURE,prefixes:R.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:O.PRESSURE,prefixes:R.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:O.ELECTRIC_CHARGE,prefixes:R.LONG,value:1,offset:0},C:{name:"C",base:O.ELECTRIC_CHARGE,prefixes:R.SHORT,value:1,offset:0},farad:{name:"farad",base:O.ELECTRIC_CAPACITANCE,prefixes:R.LONG,value:1,offset:0},F:{name:"F",base:O.ELECTRIC_CAPACITANCE,prefixes:R.SHORT,value:1,offset:0},volt:{name:"volt",base:O.ELECTRIC_POTENTIAL,prefixes:R.LONG,value:1,offset:0},V:{name:"V",base:O.ELECTRIC_POTENTIAL,prefixes:R.SHORT,value:1,offset:0},ohm:{name:"ohm",base:O.ELECTRIC_RESISTANCE,prefixes:R.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:O.ELECTRIC_INDUCTANCE,prefixes:R.LONG,value:1,offset:0},H:{name:"H",base:O.ELECTRIC_INDUCTANCE,prefixes:R.SHORT,value:1,offset:0},siemens:{name:"siemens",base:O.ELECTRIC_CONDUCTANCE,prefixes:R.LONG,value:1,offset:0},S:{name:"S",base:O.ELECTRIC_CONDUCTANCE,prefixes:R.SHORT,value:1,offset:0},weber:{name:"weber",base:O.MAGNETIC_FLUX,prefixes:R.LONG,value:1,offset:0},Wb:{name:"Wb",base:O.MAGNETIC_FLUX,prefixes:R.SHORT,value:1,offset:0},tesla:{name:"tesla",base:O.MAGNETIC_FLUX_DENSITY,prefixes:R.LONG,value:1,offset:0},T:{name:"T",base:O.MAGNETIC_FLUX_DENSITY,prefixes:R.SHORT,value:1,offset:0},b:{name:"b",base:O.BIT,prefixes:R.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:O.BIT,prefixes:R.BINARY_LONG,value:1,offset:0},B:{name:"B",base:O.BIT,prefixes:R.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:O.BIT,prefixes:R.BINARY_LONG,value:8,offset:0}},k={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function B(e){if("BigNumber"===e.number){var t=xu(y);L.rad.value=new y(1),L.deg.value=t.div(180),L.grad.value=t.div(200),L.cycle.value=t.times(2),L.arcsec.value=t.div(648e3),L.arcmin.value=t.div(10800)}else L.rad.value=1,L.deg.value=Math.PI/180,L.grad.value=Math.PI/200,L.cycle.value=2*Math.PI,L.arcsec.value=Math.PI/648e3,L.arcmin.value=Math.PI/10800;L.radian.value=L.rad.value,L.degree.value=L.deg.value,L.gradian.value=L.grad.value}B(a),i&&i("config",(function(e,t){e.number!==t.number&&B(e)}));var V={si:{NONE:{unit:F,prefix:R.NONE[""]},LENGTH:{unit:L.m,prefix:R.SHORT[""]},MASS:{unit:L.g,prefix:R.SHORT.k},TIME:{unit:L.s,prefix:R.SHORT[""]},CURRENT:{unit:L.A,prefix:R.SHORT[""]},TEMPERATURE:{unit:L.K,prefix:R.SHORT[""]},LUMINOUS_INTENSITY:{unit:L.cd,prefix:R.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:L.mol,prefix:R.SHORT[""]},ANGLE:{unit:L.rad,prefix:R.SHORT[""]},BIT:{unit:L.bits,prefix:R.SHORT[""]},FORCE:{unit:L.N,prefix:R.SHORT[""]},ENERGY:{unit:L.J,prefix:R.SHORT[""]},POWER:{unit:L.W,prefix:R.SHORT[""]},PRESSURE:{unit:L.Pa,prefix:R.SHORT[""]},ELECTRIC_CHARGE:{unit:L.C,prefix:R.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:L.F,prefix:R.SHORT[""]},ELECTRIC_POTENTIAL:{unit:L.V,prefix:R.SHORT[""]},ELECTRIC_RESISTANCE:{unit:L.ohm,prefix:R.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:L.H,prefix:R.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:L.S,prefix:R.SHORT[""]},MAGNETIC_FLUX:{unit:L.Wb,prefix:R.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:L.T,prefix:R.SHORT[""]},FREQUENCY:{unit:L.Hz,prefix:R.SHORT[""]}}};V.cgs=JSON.parse(JSON.stringify(V.si)),V.cgs.LENGTH={unit:L.m,prefix:R.SHORT.c},V.cgs.MASS={unit:L.g,prefix:R.SHORT[""]},V.cgs.FORCE={unit:L.dyn,prefix:R.SHORT[""]},V.cgs.ENERGY={unit:L.erg,prefix:R.NONE[""]},V.us=JSON.parse(JSON.stringify(V.si)),V.us.LENGTH={unit:L.ft,prefix:R.NONE[""]},V.us.MASS={unit:L.lbm,prefix:R.NONE[""]},V.us.TEMPERATURE={unit:L.degF,prefix:R.NONE[""]},V.us.FORCE={unit:L.lbf,prefix:R.NONE[""]},V.us.ENERGY={unit:L.BTU,prefix:R.BTU[""]},V.us.POWER={unit:L.hp,prefix:R.NONE[""]},V.us.PRESSURE={unit:L.psi,prefix:R.NONE[""]},V.auto=JSON.parse(JSON.stringify(V.si));var z=V.auto;for(var U in w.setUnitSystem=function(e){if(!Te(V,e))throw new Error("Unit system "+e+" does not exist. Choices are: "+Object.keys(V).join(", "));z=V[e]},w.getUnitSystem=function(){for(var e in V)if(V[e]===z)return e},w.typeConverters={BigNumber:function(e){return new y(e+"")},Fraction:function(e){return new x(e)},Complex:function(e){return e},number:function(e){return e}},w._getNumberConverter=function(e){if(!w.typeConverters[e])throw new TypeError('Unsupported type "'+e+'"');return w.typeConverters[e]},L){var j=L[U];j.dimensions=j.base.dimensions}for(var Y in k)if(Te(k,Y)){var H=L[k[Y]],K={};for(var Q in H)Te(H,Q)&&(K[Q]=H[Q]);K.name=Y,L[Y]=K}return w.createUnit=function(e,t){if("object"!==Nu(e))throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(t&&t.override)for(var n in e)if(Te(e,n)&&w.deleteUnit(n),e[n].aliases)for(var r=0;r<e[n].aliases.length;r++)w.deleteUnit(e[n].aliases[r]);var i;for(var a in e)Te(e,a)&&(i=w.createUnitSingle(a,e[a]));return i},w.createUnitSingle=function(e,t,n){if(null==t&&(t={}),"string"!=typeof e)throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(Te(L,e))throw new Error('Cannot create unit "'+e+'": a unit with that name already exists');!function(e){for(var t=0;t<e.length;t++){var n=e.charAt(t),r=function(e){return/^[a-zA-Z]$/.test(e)};if(0===t&&!r(n))throw new Error('Invalid unit name (must begin with alpha character): "'+e+'"');if(t>0&&!r(n)&&!function(e){return e>="0"&&e<="9"}(n))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+e+'"')}}(e);var r,i,a,o=null,s=[],u=0;if(t&&"Unit"===t.type)o=t.clone();else if("string"==typeof t)""!==t&&(r=t);else{if("object"!==Nu(t))throw new TypeError('Cannot create unit "'+e+'" from "'+t.toString()+'": expecting "string" or "Unit" or "Object"');r=t.definition,i=t.prefixes,u=t.offset,a=t.baseName,t.aliases&&(s=t.aliases.valueOf())}if(s)for(var c=0;c<s.length;c++)if(Te(L,s[c]))throw new Error('Cannot create alias "'+s[c]+'": a unit with that name already exists');if(r&&"string"==typeof r&&!o)try{o=w.parse(r,{allowNoUnits:!0})}catch(t){throw t.message='Could not create unit "'+e+'" from "'+r+'": '+t.message,t}else r&&"Unit"===r.type&&(o=r.clone());s=s||[],u=u||0,i=i&&i.toUpperCase&&R[i.toUpperCase()]||R.NONE;var l={};if(o){l={name:e,value:o.value,dimensions:o.dimensions.slice(0),prefixes:i,offset:u};var f=!1;for(var p in O)if(Te(O,p)){for(var d=!0,h=0;h<I.length;h++)if(Math.abs((l.dimensions[h]||0)-(O[p].dimensions[h]||0))>1e-12){d=!1;break}if(d){f=!0,l.base=O[p];break}}if(!f){a=a||e+"_STUFF";var m={dimensions:o.dimensions.slice(0)};m.key=a,O[a]=m,z[a]={unit:l,prefix:R.NONE[""]},l.base=O[a]}}else{if(I.indexOf(a=a||e+"_STUFF")>=0)throw new Error('Cannot create new base unit "'+e+'": a base unit with that name already exists (and cannot be overridden)');for(var g in I.push(a),O)Te(O,g)&&(O[g].dimensions[I.length-1]=0);for(var v={dimensions:[]},y=0;y<I.length;y++)v.dimensions[y]=0;v.dimensions[I.length-1]=1,v.key=a,O[a]=v,l={name:e,value:1,dimensions:O[a].dimensions.slice(0),prefixes:i,offset:u,base:O[a]},z[a]={unit:l,prefix:R.NONE[""]}}w.UNITS[e]=l;for(var x=0;x<s.length;x++){var b=s[x],N={};for(var S in l)Te(l,S)&&(N[S]=l[S]);N.name=b,w.UNITS[b]=N}return new w(null,e)},w.deleteUnit=function(e){delete w.UNITS[e]},w.PREFIXES=R,w.BASE_DIMENSIONS=I,w.BASE_UNITS=O,w.UNIT_SYSTEMS=V,w.UNITS=L,w}),{isClass:!0}),Du=Ot("unit",["typed","Unit"],(function(e){var t=e.Unit,n=(0,e.typed)("unit",{Unit:function(e){return e.clone()},string:function(e){return t.isValuelessUnit(e)?new t(null,e):t.parse(e,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string":function(e,n){return new t(e,n)},"Array | Matrix":function(e){return Tr(e,n)}});return n})),Au=Ot("sparse",["typed","SparseMatrix"],(function(e){var t=e.SparseMatrix;return(0,e.typed)("sparse",{"":function(){return new t([])},string:function(e){return new t([],e)},"Array | Matrix":function(e){return new t(e)},"Array | Matrix, string":function(e,n){return new t(e,n)}})})),Mu=Ot("createUnit",["typed","Unit"],(function(e){var t=e.Unit;return(0,e.typed)("createUnit",{"Object, Object":function(e,n){return t.createUnit(e,n)},Object:function(e){return t.createUnit(e,{})},"string, Unit | string | Object, Object":function(e,n,r){var i={};return i[e]=n,t.createUnit(i,r)},"string, Unit | string | Object":function(e,n){var r={};return r[e]=n,t.createUnit(r,{})},string:function(e){var n={};return n[e]={},t.createUnit(n,{})}})})),Eu=Ot("acos",["typed","config","Complex"],(function(e){var t=e.config,n=e.Complex,r=(0,e.typed)("acos",{number:function(e){return e>=-1&&e<=1||t.predictable?Math.acos(e):new n(e,0).acos()},Complex:function(e){return e.acos()},BigNumber:function(e){return e.acos()},"Array | Matrix":function(e){return Tr(e,r)}});return r})),Cu=Ot("acosh",["typed","config","Complex"],(function(e){var t=e.config,n=e.Complex,r=(0,e.typed)("acosh",{number:function(e){return e>=1||t.predictable?Mi(e):e<=-1?new n(Math.log(Math.sqrt(e*e-1)-e),Math.PI):new n(e,0).acosh()},Complex:function(e){return e.acosh()},BigNumber:function(e){return e.acosh()},"Array | Matrix":function(e){return Tr(e,r)}});return r})),Tu=Ot("acot",["typed","BigNumber"],(function(e){var t=e.BigNumber,n=(0,e.typed)("acot",{number:Ei,Complex:function(e){return e.acot()},BigNumber:function(e){return new t(1).div(e).atan()},"Array | Matrix":function(e){return Tr(e,n)}});return n})),Ru=Ot("acoth",["typed","config","Complex","BigNumber"],(function(e){var t=e.config,n=e.Complex,r=e.BigNumber,i=(0,e.typed)("acoth",{number:function(e){return e>=1||e<=-1||t.predictable?Ci(e):new n(e,0).acoth()},Complex:function(e){return e.acoth()},BigNumber:function(e){return new r(1).div(e).atanh()},"Array | Matrix":function(e){return Tr(e,i)}});return i})),Iu=Ot("acsc",["typed","config","Complex","BigNumber"],(function(e){var t=e.config,n=e.Complex,r=e.BigNumber,i=(0,e.typed)("acsc",{number:function(e){return e<=-1||e>=1||t.predictable?Ti(e):new n(e,0).acsc()},Complex:function(e){return e.acsc()},BigNumber:function(e){return new r(1).div(e).asin()},"Array | Matrix":function(e){return Tr(e,i)}});return i})),Ou=Ot("acsch",["typed","BigNumber"],(function(e){var t=e.BigNumber,n=(0,e.typed)("acsch",{number:Ri,Complex:function(e){return e.acsch()},BigNumber:function(e){return new t(1).div(e).asinh()},"Array | Matrix":function(e){return Tr(e,n)}});return n})),Pu=Ot("asec",["typed","config","Complex","BigNumber"],(function(e){var t=e.config,n=e.Complex,r=e.BigNumber,i=(0,e.typed)("asec",{number:function(e){return e<=-1||e>=1||t.predictable?Ii(e):new n(e,0).asec()},Complex:function(e){return e.asec()},BigNumber:function(e){return new r(1).div(e).acos()},"Array | Matrix":function(e){return Tr(e,i)}});return i})),Fu=Ot("asech",["typed","config","Complex","BigNumber"],(function(e){var t=e.config,n=e.Complex,r=e.BigNumber,i=(0,e.typed)("asech",{number:function(e){if(e<=1&&e>=-1||t.predictable){var r=1/e;if(r>0||t.predictable)return Oi(e);var i=Math.sqrt(r*r-1);return new n(Math.log(i-r),Math.PI)}return new n(e,0).asech()},Complex:function(e){return e.asech()},BigNumber:function(e){return new r(1).div(e).acosh()},"Array | Matrix":function(e){return Tr(e,i)}});return i})),Lu=Ot("asin",["typed","config","Complex"],(function(e){var t=e.config,n=e.Complex,r=(0,e.typed)("asin",{number:function(e){return e>=-1&&e<=1||t.predictable?Math.asin(e):new n(e,0).asin()},Complex:function(e){return e.asin()},BigNumber:function(e){return e.asin()},"Array | Matrix":function(e){return Tr(e,r)}});return r})),ku=Ot("asinh",["typed"],(function(e){var t=(0,e.typed)("asinh",{number:Pi,Complex:function(e){return e.asinh()},BigNumber:function(e){return e.asinh()},"Array | Matrix":function(e){return Tr(e,t)}});return t})),Bu=Ot("atan",["typed"],(function(e){var t=(0,e.typed)("atan",{number:function(e){return Math.atan(e)},Complex:function(e){return e.atan()},BigNumber:function(e){return e.atan()},"Array | Matrix":function(e){return Tr(e,t)}});return t})),Vu=Ot("atan2",["typed","matrix","equalScalar","BigNumber","DenseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.BigNumber,a=e.DenseMatrix,o=Fa({typed:t,equalScalar:r}),s=za({typed:t}),u=eo({typed:t,equalScalar:r}),c=ka({typed:t,equalScalar:r}),l=Ua({typed:t,DenseMatrix:a}),f=Ia({typed:t}),p=Oa({typed:t}),d=t("atan2",{"number, number":Math.atan2,"BigNumber, BigNumber":function(e,t){return i.atan2(e,t)},"SparseMatrix, SparseMatrix":function(e,t){return u(e,t,d,!1)},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,d,!0)},"DenseMatrix, SparseMatrix":function(e,t){return s(e,t,d,!1)},"DenseMatrix, DenseMatrix":function(e,t){return f(e,t,d)},"Array, Array":function(e,t){return d(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return d(n(e),t)},"Matrix, Array":function(e,t){return d(e,n(t))},"SparseMatrix, number | BigNumber":function(e,t){return c(e,t,d,!1)},"DenseMatrix, number | BigNumber":function(e,t){return p(e,t,d,!1)},"number | BigNumber, SparseMatrix":function(e,t){return l(t,e,d,!0)},"number | BigNumber, DenseMatrix":function(e,t){return p(t,e,d,!0)},"Array, number | BigNumber":function(e,t){return p(n(e),t,d,!1).valueOf()},"number | BigNumber, Array":function(e,t){return p(n(t),e,d,!0).valueOf()}});return d})),qu=Ot("atanh",["typed","config","Complex"],(function(e){var t=e.config,n=e.Complex,r=(0,e.typed)("atanh",{number:function(e){return e<=1&&e>=-1||t.predictable?Fi(e):new n(e,0).atanh()},Complex:function(e){return e.atanh()},BigNumber:function(e){return e.atanh()},"Array | Matrix":function(e){return Tr(e,r)}});return r})),zu=Ot("cos",["typed"],(function(e){var t=(0,e.typed)("cos",{number:Math.cos,Complex:function(e){return e.cos()},BigNumber:function(e){return e.cos()},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cos is no angle");return t(e.value)},"Array | Matrix":function(e){return Tr(e,t)}});return t})),Gu=Ot("cosh",["typed"],(function(e){var t=(0,e.typed)("cosh",{number:it,Complex:function(e){return e.cosh()},BigNumber:function(e){return e.cosh()},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cosh is no angle");return t(e.value)},"Array | Matrix":function(e){return Tr(e,t)}});return t})),Uu=Ot("cot",["typed","BigNumber"],(function(e){var t=e.BigNumber,n=(0,e.typed)("cot",{number:Li,Complex:function(e){return e.cot()},BigNumber:function(e){return new t(1).div(e.tan())},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return n(e.value)},"Array | Matrix":function(e){return Tr(e,n)}});return n})),ju=Ot("coth",["typed","BigNumber"],(function(e){var t=e.BigNumber,n=(0,e.typed)("coth",{number:ki,Complex:function(e){return e.coth()},BigNumber:function(e){return new t(1).div(e.tanh())},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function coth is no angle");return n(e.value)},"Array | Matrix":function(e){return Tr(e,n)}});return n})),Yu=Ot("csc",["typed","BigNumber"],(function(e){var t=e.BigNumber,n=(0,e.typed)("csc",{number:Bi,Complex:function(e){return e.csc()},BigNumber:function(e){return new t(1).div(e.sin())},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function csc is no angle");return n(e.value)},"Array | Matrix":function(e){return Tr(e,n)}});return n})),Hu=Ot("csch",["typed","BigNumber"],(function(e){var t=e.BigNumber,n=(0,e.typed)("csch",{number:Vi,Complex:function(e){return e.csch()},BigNumber:function(e){return new t(1).div(e.sinh())},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function csch is no angle");return n(e.value)},"Array | Matrix":function(e){return Tr(e,n)}});return n})),Ku=Ot("sec",["typed","BigNumber"],(function(e){var t=e.BigNumber,n=(0,e.typed)("sec",{number:qi,Complex:function(e){return e.sec()},BigNumber:function(e){return new t(1).div(e.cos())},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sec is no angle");return n(e.value)},"Array | Matrix":function(e){return Tr(e,n)}});return n})),Qu=Ot("sech",["typed","BigNumber"],(function(e){var t=e.BigNumber,n=(0,e.typed)("sech",{number:zi,Complex:function(e){return e.sech()},BigNumber:function(e){return new t(1).div(e.cosh())},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sech is no angle");return n(e.value)},"Array | Matrix":function(e){return Tr(e,n)}});return n})),Wu=Ot("sin",["typed"],(function(e){var t=(0,e.typed)("sin",{number:Math.sin,Complex:function(e){return e.sin()},BigNumber:function(e){return e.sin()},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sin is no angle");return t(e.value)},"Array | Matrix":function(e){return Tr(e,t)}});return t})),$u=Ot("sinh",["typed"],(function(e){var t=(0,e.typed)("sinh",{number:Gi,Complex:function(e){return e.sinh()},BigNumber:function(e){return e.sinh()},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sinh is no angle");return t(e.value)},"Array | Matrix":function(e){return Tr(e,t)}});return t})),Xu=Ot("tan",["typed"],(function(e){var t=(0,e.typed)("tan",{number:Math.tan,Complex:function(e){return e.tan()},BigNumber:function(e){return e.tan()},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function tan is no angle");return t(e.value)},"Array | Matrix":function(e){return Tr(e,t)}});return t})),Zu=Ot("tanh",["typed"],(function(e){var t=(0,e.typed)("tanh",{number:ot,Complex:function(e){return e.tanh()},BigNumber:function(e){return e.tanh()},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function tanh is no angle");return t(e.value)},"Array | Matrix":function(e){return Tr(e,t)}});return t})),Ju=Ot("setCartesian",["typed","size","subset","compareNatural","Index","DenseMatrix"],(function(e){var t=e.size,n=e.subset,r=e.compareNatural,i=e.Index,a=e.DenseMatrix;return(0,e.typed)("setCartesian",{"Array | Matrix, Array | Matrix":function(e,o){var s=[];if(0!==n(t(e),new i(0))&&0!==n(t(o),new i(0))){var u=St(Array.isArray(e)?e:e.toArray()).sort(r),c=St(Array.isArray(o)?o:o.toArray()).sort(r);s=[];for(var l=0;l<u.length;l++)for(var f=0;f<c.length;f++)s.push([u[l],c[f]])}return Array.isArray(e)&&Array.isArray(o)?s:new a(s)}})})),ec=Ot("setDifference",["typed","size","subset","compareNatural","Index","DenseMatrix"],(function(e){var t=e.size,n=e.subset,r=e.compareNatural,i=e.Index,a=e.DenseMatrix;return(0,e.typed)("setDifference",{"Array | Matrix, Array | Matrix":function(e,o){var s;if(0===n(t(e),new i(0)))s=[];else{if(0===n(t(o),new i(0)))return St(e.toArray());var u,c=Ct(St(Array.isArray(e)?e:e.toArray()).sort(r)),l=Ct(St(Array.isArray(o)?o:o.toArray()).sort(r));s=[];for(var f=0;f<c.length;f++){u=!1;for(var p=0;p<l.length;p++)if(0===r(c[f].value,l[p].value)&&c[f].identifier===l[p].identifier){u=!0;break}u||s.push(c[f])}}return Array.isArray(e)&&Array.isArray(o)?Tt(s):new a(Tt(s))}})})),tc=Ot("setDistinct",["typed","size","subset","compareNatural","Index","DenseMatrix"],(function(e){var t=e.size,n=e.subset,r=e.compareNatural,i=e.Index,a=e.DenseMatrix;return(0,e.typed)("setDistinct",{"Array | Matrix":function(e){var o;if(0===n(t(e),new i(0)))o=[];else{var s=St(Array.isArray(e)?e:e.toArray()).sort(r);(o=[]).push(s[0]);for(var u=1;u<s.length;u++)0!==r(s[u],s[u-1])&&o.push(s[u])}return Array.isArray(e)?o:new a(o)}})})),nc=Ot("setIntersect",["typed","size","subset","compareNatural","Index","DenseMatrix"],(function(e){var t=e.size,n=e.subset,r=e.compareNatural,i=e.Index,a=e.DenseMatrix;return(0,e.typed)("setIntersect",{"Array | Matrix, Array | Matrix":function(e,o){var s;if(0===n(t(e),new i(0))||0===n(t(o),new i(0)))s=[];else{var u=Ct(St(Array.isArray(e)?e:e.toArray()).sort(r)),c=Ct(St(Array.isArray(o)?o:o.toArray()).sort(r));s=[];for(var l=0;l<u.length;l++)for(var f=0;f<c.length;f++)if(0===r(u[l].value,c[f].value)&&u[l].identifier===c[f].identifier){s.push(u[l]);break}}return Array.isArray(e)&&Array.isArray(o)?Tt(s):new a(Tt(s))}})})),rc=Ot("setIsSubset",["typed","size","subset","compareNatural","Index"],(function(e){var t=e.size,n=e.subset,r=e.compareNatural,i=e.Index;return(0,e.typed)("setIsSubset",{"Array | Matrix, Array | Matrix":function(e,a){if(0===n(t(e),new i(0)))return!0;if(0===n(t(a),new i(0)))return!1;for(var o,s=Ct(St(Array.isArray(e)?e:e.toArray()).sort(r)),u=Ct(St(Array.isArray(a)?a:a.toArray()).sort(r)),c=0;c<s.length;c++){o=!1;for(var l=0;l<u.length;l++)if(0===r(s[c].value,u[l].value)&&s[c].identifier===u[l].identifier){o=!0;break}if(!1===o)return!1}return!0}})})),ic=Ot("setMultiplicity",["typed","size","subset","compareNatural","Index"],(function(e){var t=e.size,n=e.subset,r=e.compareNatural,i=e.Index;return(0,e.typed)("setMultiplicity",{"number | BigNumber | Fraction | Complex, Array | Matrix":function(e,a){if(0===n(t(a),new i(0)))return 0;for(var o=St(Array.isArray(a)?a:a.toArray()),s=0,u=0;u<o.length;u++)0===r(o[u],e)&&s++;return s}})})),ac=Ot("setPowerset",["typed","size","subset","compareNatural","Index"],(function(e){var t=e.size,n=e.subset,r=e.compareNatural,i=e.Index;return(0,e.typed)("setPowerset",{"Array | Matrix":function(e){if(0===n(t(e),new i(0)))return[];for(var o=St(Array.isArray(e)?e:e.toArray()).sort(r),s=[],u=0;u.toString(2).length<=o.length;)s.push(a(o,u.toString(2).split("").reverse())),u++;return function(e){for(var t=[],n=e.length-1;n>0;n--)for(var r=0;r<n;r++)e[r].length>e[r+1].length&&(t=e[r],e[r]=e[r+1],e[r+1]=t);return e}(s)}});function a(e,t){for(var n=[],r=0;r<t.length;r++)"1"===t[r]&&n.push(e[r]);return n}})),oc=Ot("setSize",["typed","compareNatural"],(function(e){var t=e.compareNatural;return(0,e.typed)("setSize",{"Array | Matrix":function(e){return Array.isArray(e)?St(e).length:St(e.toArray()).length},"Array | Matrix, boolean":function(e,n){if(!1===n||0===e.length)return Array.isArray(e)?St(e).length:St(e.toArray()).length;for(var r=St(Array.isArray(e)?e:e.toArray()).sort(t),i=1,a=1;a<r.length;a++)0!==t(r[a],r[a-1])&&i++;return i}})})),sc=Ot("setSymDifference",["typed","size","concat","subset","setDifference","Index"],(function(e){var t=e.size,n=e.concat,r=e.subset,i=e.setDifference,a=e.Index;return(0,e.typed)("setSymDifference",{"Array | Matrix, Array | Matrix":function(e,o){if(0===r(t(e),new a(0)))return St(o);if(0===r(t(o),new a(0)))return St(e);var s=St(e),u=St(o);return n(i(s,u),i(u,s))}})})),uc=Ot("setUnion",["typed","size","concat","subset","setIntersect","setSymDifference","Index"],(function(e){var t=e.size,n=e.concat,r=e.subset,i=e.setIntersect,a=e.setSymDifference,o=e.Index;return(0,e.typed)("setUnion",{"Array | Matrix, Array | Matrix":function(e,s){if(0===r(t(e),new o(0)))return St(s);if(0===r(t(s),new o(0)))return St(e);var u=St(e),c=St(s);return n(a(u,c),i(u,c))}})})),cc=Ot("add",["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.addScalar,i=e.equalScalar,a=e.DenseMatrix,o=Ca({typed:t}),s=Ta({typed:t,equalScalar:i}),u=Ra({typed:t,DenseMatrix:a}),c=Ia({typed:t}),l=Oa({typed:t}),f=t("add",Ae({"DenseMatrix, DenseMatrix":function(e,t){return c(e,t,r)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,r,!1)},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,r,!0)},"SparseMatrix, SparseMatrix":function(e,t){return s(e,t,r)},"Array, Array":function(e,t){return f(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return f(n(e),t)},"Matrix, Array":function(e,t){return f(e,n(t))},"DenseMatrix, any":function(e,t){return l(e,t,r,!1)},"SparseMatrix, any":function(e,t){return u(e,t,r,!1)},"any, DenseMatrix":function(e,t){return l(t,e,r,!0)},"any, SparseMatrix":function(e,t){return u(t,e,r,!0)},"Array, any":function(e,t){return l(n(e),t,r,!1).valueOf()},"any, Array":function(e,t){return l(n(t),e,r,!0).valueOf()},"any, any":r,"any, any, ...any":function(e,t,n){for(var r=f(e,t),i=0;i<n.length;i++)r=f(r,n[i]);return r}},r.signatures));return f})),lc=Ot("hypot",["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],(function(e){var t=e.abs,n=e.addScalar,r=e.divideScalar,i=e.multiplyScalar,a=e.sqrt,o=e.smaller,s=e.isPositive,u=(0,e.typed)("hypot",{"... number | BigNumber":function(e){for(var u=0,c=0,l=0;l<e.length;l++){var f=t(e[l]);o(c,f)?(u=i(u,i(r(c,f),r(c,f))),u=n(u,1),c=f):u=n(u,s(f)?i(r(f,c),r(f,c)):f)}return i(c,a(u))},Array:function(e){return u.apply(u,St(e))},Matrix:function(e){return u.apply(u,St(e.toArray()))}});return u})),fc=Ot("norm",["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix"],(function(e){var t=e.abs,n=e.add,r=e.pow,i=e.conj,a=e.sqrt,o=e.multiply,s=e.equalScalar,u=e.larger,c=e.smaller,l=e.matrix,f=(0,e.typed)("norm",{number:Math.abs,Complex:function(e){return e.abs()},BigNumber:function(e){return e.abs()},boolean:function(e){return Math.abs(e)},Array:function(e){return p(l(e),2)},Matrix:function(e){return p(e,2)},"number | Complex | BigNumber | boolean, number | BigNumber | string":function(e){return f(e)},"Array, number | BigNumber | string":function(e,t){return p(l(e),t)},"Matrix, number | BigNumber | string":function(e,t){return p(e,t)}});function p(e,l){var f=e.size();if(1===f.length){if(l===Number.POSITIVE_INFINITY||"inf"===l){var d=0;return e.forEach((function(e){var n=t(e);u(n,d)&&(d=n)}),!0),d}var h;if(l===Number.NEGATIVE_INFINITY||"-inf"===l)return e.forEach((function(e){var n=t(e);h&&!c(n,h)||(h=n)}),!0),h||0;if("fro"===l)return p(e,2);if("number"==typeof l&&!isNaN(l)){if(!s(l,0)){var m=0;return e.forEach((function(e){m=n(r(t(e),l),m)}),!0),r(m,1/l)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}if(2===f.length){if(1===l){var g=[],v=0;return e.forEach((function(e,r){var i=r[1],a=n(g[i]||0,t(e));u(a,v)&&(v=a),g[i]=a}),!0),v}if(l===Number.POSITIVE_INFINITY||"inf"===l){var y=[],x=0;return e.forEach((function(e,r){var i=r[0],a=n(y[i]||0,t(e));u(a,x)&&(x=a),y[i]=a}),!0),x}if("fro"===l){var b=0;return e.forEach((function(e,t){b=n(b,o(e,i(e)))})),t(a(b))}if(2===l)throw new Error("Unsupported parameter value, missing implementation of matrix singular value decomposition");throw new Error("Unsupported parameter value")}}return f})),pc=Ot("dot",["typed","add","multiply"],(function(e){var t=e.add,n=e.multiply;return(0,e.typed)("dot",{"Matrix, Matrix":function(e,t){return r(e.toArray(),t.toArray())},"Matrix, Array":function(e,t){return r(e.toArray(),t)},"Array, Matrix":function(e,t){return r(e,t.toArray())},"Array, Array":r});function r(e,r){var i=gt(e),a=gt(r),o=i[0];if(1!==i.length||1!==a.length)throw new RangeError("Vector expected");if(i[0]!==a[0])throw new RangeError("Vectors must have equal length ("+i[0]+" != "+a[0]+")");if(0===o)throw new RangeError("Cannot calculate the dot product of empty vectors");for(var s=0,u=0;u<o;u++)s=t(s,n(e[u],r[u]));return s}})),dc=Ot("trace",["typed","matrix","add"],(function(e){var t=e.matrix,n=e.add;return(0,e.typed)("trace",{Array:function(e){return r(t(e))},SparseMatrix:function(e){var t=e._values,r=e._index,i=e._ptr,a=e._size,o=a[1];if(a[0]===o){var s=0;if(t.length>0)for(var u=0;u<o;u++)for(var c=i[u+1],l=i[u];l<c;l++){var f=r[l];if(f===u){s=n(s,t[l]);break}if(f>u)break}return s}throw new RangeError("Matrix must be square (size: "+lt(a)+")")},DenseMatrix:r,any:_e});function r(e){var t=e._size,r=e._data;switch(t.length){case 1:if(1===t[0])return _e(r[0]);throw new RangeError("Matrix must be square (size: "+lt(t)+")");case 2:var i=t[0];if(i===t[1]){for(var a=0,o=0;o<i;o++)a=n(a,r[o][o]);return a}throw new RangeError("Matrix must be square (size: "+lt(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+lt(t)+")")}}})),hc=Ot("index",["typed","Index"],(function(e){var t=e.Index;return(0,e.typed)("index",{"...number | string | BigNumber | Range | Array | Matrix":function(e){var n=e.map((function(e){return V(e)?e.toNumber():Array.isArray(e)||Y(e)?e.map((function(e){return V(e)?e.toNumber():e})):e})),r=new t;return t.apply(r,n),r}})})),mc={end:!0};function gc(e){return(gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var vc=Ot("Node",["mathWithTransform"],(function(e){var t=e.mathWithTransform;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator")}return n.prototype.evaluate=function(e){return this.compile().evaluate(e)},n.prototype.eval=function(e){return ta("Method Node.eval is renamed to Node.evaluate. Please use the new method name."),this.evaluate(e)},n.prototype.type="Node",n.prototype.isNode=!0,n.prototype.comment="",n.prototype.compile=function(){var e=this._compile(t,{}),n={};function r(t){var r=t||{};return function(e){for(var t in e)if(Te(e,t)&&t in mc)throw new Error('Scope contains an illegal symbol, "'+t+'" is a reserved keyword')}(r),e(r,n,null)}return{evaluate:r,eval:function(e){return ta("Method eval is renamed to evaluate. Please use the new method."),r(e)}}},n.prototype._compile=function(e,t){throw new Error("Method _compile should be implemented by type "+this.type)},n.prototype.forEach=function(e){throw new Error("Cannot run forEach on a Node interface")},n.prototype.map=function(e){throw new Error("Cannot run map on a Node interface")},n.prototype._ifNode=function(e){if(!me(e))throw new TypeError("Callback function must return a Node");return e},n.prototype.traverse=function(e){e(this,null,null),function e(t,n){t.forEach((function(t,r,i){n(t,r,i),e(t,n)}))}(this,e)},n.prototype.transform=function(e){return function t(n,r,i){var a=e(n,r,i);return a!==n?a:n.map(t)}(this,null,null)},n.prototype.filter=function(e){var t=[];return this.traverse((function(n,r,i){e(n,r,i)&&t.push(n)})),t},n.prototype.find=function(){throw new Error("Function Node.find is deprecated. Use Node.filter instead.")},n.prototype.match=function(){throw new Error("Function Node.match is deprecated. See functions Node.filter, Node.transform, Node.traverse.")},n.prototype.clone=function(){throw new Error("Cannot clone a Node interface")},n.prototype.cloneDeep=function(){return this.map((function(e){return e.cloneDeep()}))},n.prototype.equals=function(e){return!!e&&Me(this,e)},n.prototype.toString=function(e){var t;if(e&&"object"===gc(e))switch(gc(e.handler)){case"object":case"undefined":break;case"function":t=e.handler(this,e);break;default:throw new TypeError("Object or function expected as callback")}return void 0!==t?t:this._toString(e)},n.prototype.toJSON=function(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)},n.prototype.toHTML=function(e){var t;if(e&&"object"===gc(e))switch(gc(e.handler)){case"object":case"undefined":break;case"function":t=e.handler(this,e);break;default:throw new TypeError("Object or function expected as callback")}return void 0!==t?t:this.toHTML(e)},n.prototype._toString=function(){throw new Error("_toString not implemented for "+this.type)},n.prototype.toTex=function(e){var t;if(e&&"object"===gc(e))switch(gc(e.handler)){case"object":case"undefined":break;case"function":t=e.handler(this,e);break;default:throw new TypeError("Object or function expected as callback")}return void 0!==t?t:this._toTex(e)},n.prototype._toTex=function(e){throw new Error("_toTex not implemented for "+this.type)},n.prototype.getIdentifier=function(){return this.type},n.prototype.getContent=function(){return this},n}),{isClass:!0,isNode:!0});function yc(e){return e&&e.isIndexError?new mt(e.index+1,e.min+1,void 0!==e.max?e.max+1:void 0):e}function xc(e){return(xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bc(e){var t=e.subset;return function(e,n){try{if(Array.isArray(e))return t(e,n);if(e&&"function"==typeof e.subset)return e.subset(n);if("string"==typeof e)return t(e,n);if("object"===xc(e)){if(!n.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return es(e,n.getObjectProperty())}throw new TypeError("Cannot apply index: unsupported type of object")}catch(e){throw yc(e)}}}var wc=Ot("AccessorNode",["subset","Node"],(function(e){var t=e.Node,n=bc({subset:e.subset});function r(e,t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!me(e))throw new TypeError('Node expected for parameter "object"');if(!he(t))throw new TypeError('IndexNode expected for parameter "index"');this.object=e||null,this.index=t,Object.defineProperty(this,"name",{get:function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}function i(e){return!(oe(e)||se(e)||fe(e)||de(e)||ge(e)||ye(e)||be(e))}return(r.prototype=new t).type="AccessorNode",r.prototype.isAccessorNode=!0,r.prototype._compile=function(e,t){var r=this.object._compile(e,t),i=this.index._compile(e,t);if(this.index.isObjectProperty()){var a=this.index.getObjectProperty();return function(e,t,n){return es(r(e,t,n),a)}}return function(e,t,a){var o=r(e,t,a),s=i(e,t,o);return n(o,s)}},r.prototype.forEach=function(e){e(this.object,"object",this),e(this.index,"index",this)},r.prototype.map=function(e){return new r(this._ifNode(e(this.object,"object",this)),this._ifNode(e(this.index,"index",this)))},r.prototype.clone=function(){return new r(this.object,this.index)},r.prototype._toString=function(e){var t=this.object.toString(e);return i(this.object)&&(t="("+t+")"),t+this.index.toString(e)},r.prototype.toHTML=function(e){var t=this.object.toHTML(e);return i(this.object)&&(t='<span class="math-parenthesis math-round-parenthesis">(</span>'+t+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+this.index.toHTML(e)},r.prototype._toTex=function(e){var t=this.object.toTex(e);return i(this.object)&&(t="\\left(' + object + '\\right)"),t+this.index.toTex(e)},r.prototype.toJSON=function(){return{mathjs:"AccessorNode",object:this.object,index:this.index}},r.fromJSON=function(e){return new r(e.object,e.index)},r}),{isClass:!0,isNode:!0}),Nc=Ot("ArrayNode",["Node"],(function(e){function t(e){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(this.items=e||[],!Array.isArray(this.items)||!this.items.every(me))throw new TypeError("Array containing Nodes expected");var n=function(){throw new Error("Property `ArrayNode.nodes` is deprecated, use `ArrayNode.items` instead")};Object.defineProperty(this,"nodes",{get:n,set:n})}return(t.prototype=new(0,e.Node)).type="ArrayNode",t.prototype.isArrayNode=!0,t.prototype._compile=function(e,t){var n=_t(this.items,(function(n){return n._compile(e,t)}));if("Array"!==e.config.matrix){var r=e.matrix;return function(e,t,i){return r(_t(n,(function(n){return n(e,t,i)})))}}return function(e,t,r){return _t(n,(function(n){return n(e,t,r)}))}},t.prototype.forEach=function(e){for(var t=0;t<this.items.length;t++)e(this.items[t],"items["+t+"]",this)},t.prototype.map=function(e){for(var n=[],r=0;r<this.items.length;r++)n[r]=this._ifNode(e(this.items[r],"items["+r+"]",this));return new t(n)},t.prototype.clone=function(){return new t(this.items.slice(0))},t.prototype._toString=function(e){return"["+this.items.map((function(t){return t.toString(e)})).join(", ")+"]"},t.prototype.toJSON=function(){return{mathjs:"ArrayNode",items:this.items}},t.fromJSON=function(e){return new t(e.items)},t.prototype.toHTML=function(e){return'<span class="math-parenthesis math-square-parenthesis">[</span>'+this.items.map((function(t){return t.toHTML(e)})).join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'},t.prototype._toTex=function(e){var t="\\begin{bmatrix}";return this.items.forEach((function(n){t+=n.items?n.items.map((function(t){return t.toTex(e)})).join("&"):n.toTex(e),t+="\\\\"})),t+="\\end{bmatrix}"},t}),{isClass:!0,isNode:!0});function Sc(e){return(Sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _c=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{associativity:"left",associativeWith:[]}},{"OperatorNode:and":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{associativity:"left",associativeWith:[]},"OperatorNode:unequal":{associativity:"left",associativeWith:[]},"OperatorNode:smaller":{associativity:"left",associativeWith:[]},"OperatorNode:larger":{associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{associativity:"left",associativeWith:[]}},{"OperatorNode:to":{associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{associativity:"left",associativeWith:[]},"OperatorNode:mod":{associativity:"left",associativeWith:[]}},{"OperatorNode:unaryPlus":{associativity:"right"},"OperatorNode:unaryMinus":{associativity:"right"},"OperatorNode:bitNot":{associativity:"right"},"OperatorNode:not":{associativity:"right"}},{"OperatorNode:pow":{associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{associativity:"left"}},{"OperatorNode:transpose":{associativity:"left"}}];function Dc(e,t){var n=e;"keep"!==t&&(n=e.getContent());for(var r=n.getIdentifier(),i=0;i<_c.length;i++)if(r in _c[i])return i;return null}function Ac(e,t){var n=e;"keep"!==t&&(n=e.getContent());var r=n.getIdentifier(),i=Dc(n,t);if(null===i)return null;var a=_c[i][r];if(Te(a,"associativity")){if("left"===a.associativity)return"left";if("right"===a.associativity)return"right";throw Error("'"+r+"' has the invalid associativity '"+a.associativity+"'.")}return null}function Mc(e,t,n){var r="keep"!==n?e.getContent():e,i="keep"!==n?e.getContent():t,a=r.getIdentifier(),o=i.getIdentifier(),s=Dc(r,n);if(null===s)return null;var u=_c[s][a];if(Te(u,"associativeWith")&&u.associativeWith instanceof Array){for(var c=0;c<u.associativeWith.length;c++)if(u.associativeWith[c]===o)return!0;return!1}return null}var Ec=Ot("AssignmentNode",["subset","?matrix","Node"],(function(e){var t=e.subset,n=e.matrix,r=e.Node,i=bc({subset:t}),a=function(e){var t=e.subset,n=e.matrix;return function(e,r,i){try{if(Array.isArray(e))return n(e).subset(r,i).valueOf();if(e&&"function"==typeof e.subset)return e.subset(r,i);if("string"==typeof e)return t(e,r,i);if("object"===Sc(e)){if(!r.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return ts(e,r.getObjectProperty(),i),e}throw new TypeError("Cannot apply index: unsupported type of object")}catch(e){throw yc(e)}}}({subset:t,matrix:n});function o(e,t,n){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");if(this.object=e,this.index=n?t:null,this.value=n||t,!be(e)&&!oe(e))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(be(e)&&"end"===e.name)throw new Error('Cannot assign to symbol "end"');if(this.index&&!he(this.index))throw new TypeError('IndexNode expected as "index"');if(!me(this.value))throw new TypeError('Node expected as "value"');Object.defineProperty(this,"name",{get:function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}function s(e,t){t||(t="keep");var n=Dc(e,t),r=Dc(e.value,t);return"all"===t||null!==r&&r<=n}return(o.prototype=new r).type="AssignmentNode",o.prototype.isAssignmentNode=!0,o.prototype._compile=function(e,t){var n=this.object._compile(e,t),r=this.index?this.index._compile(e,t):null,o=this.value._compile(e,t),s=this.object.name;if(this.index){if(this.index.isObjectProperty()){var u=this.index.getObjectProperty();return function(e,t,r){var i=n(e,t,r),a=o(e,t,r);return ts(i,u,a)}}if(be(this.object))return function(e,t,i){var u=n(e,t,i),c=o(e,t,i),l=r(e,t,u);return ts(e,s,a(u,l,c)),c};var c=this.object.object._compile(e,t);if(this.object.index.isObjectProperty()){var l=this.object.index.getObjectProperty();return function(e,t,n){var i=c(e,t,n),s=es(i,l),u=r(e,t,s),f=o(e,t,n);return ts(i,l,a(s,u,f)),f}}var f=this.object.index._compile(e,t);return function(e,t,n){var s=c(e,t,n),u=f(e,t,s),l=i(s,u),p=r(e,t,l),d=o(e,t,n);return a(s,u,a(l,p,d)),d}}if(!be(this.object))throw new TypeError("SymbolNode expected as object");return function(e,t,n){return ts(e,s,o(e,t,n))}},o.prototype.forEach=function(e){e(this.object,"object",this),this.index&&e(this.index,"index",this),e(this.value,"value",this)},o.prototype.map=function(e){return new o(this._ifNode(e(this.object,"object",this)),this.index?this._ifNode(e(this.index,"index",this)):null,this._ifNode(e(this.value,"value",this)))},o.prototype.clone=function(){return new o(this.object,this.index,this.value)},o.prototype._toString=function(e){var t=this.object.toString(e),n=this.index?this.index.toString(e):"",r=this.value.toString(e);return s(this,e&&e.parenthesis)&&(r="("+r+")"),t+n+" = "+r},o.prototype.toJSON=function(){return{mathjs:"AssignmentNode",object:this.object,index:this.index,value:this.value}},o.fromJSON=function(e){return new o(e.object,e.index,e.value)},o.prototype.toHTML=function(e){var t=this.object.toHTML(e),n=this.index?this.index.toHTML(e):"",r=this.value.toHTML(e);return s(this,e&&e.parenthesis)&&(r='<span class="math-paranthesis math-round-parenthesis">(</span>'+r+'<span class="math-paranthesis math-round-parenthesis">)</span>'),t+n+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+r},o.prototype._toTex=function(e){var t=this.object.toTex(e),n=this.index?this.index.toTex(e):"",r=this.value.toTex(e);return s(this,e&&e.parenthesis)&&(r="\\left(".concat(r,"\\right)")),t+n+":="+r},o}),{isClass:!0,isNode:!0}),Cc=Ot("BlockNode",["ResultSet","Node"],(function(e){var t=e.ResultSet;function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!Array.isArray(e))throw new Error("Array expected");this.blocks=e.map((function(e){var t=e&&e.node,n=!e||void 0===e.visible||e.visible;if(!me(t))throw new TypeError('Property "node" must be a Node');if("boolean"!=typeof n)throw new TypeError('Property "visible" must be a boolean');return{node:t,visible:n}}))}return(n.prototype=new(0,e.Node)).type="BlockNode",n.prototype.isBlockNode=!0,n.prototype._compile=function(e,n){var r=_t(this.blocks,(function(t){return{evaluate:t.node._compile(e,n),visible:t.visible}}));return function(e,n,i){var a=[];return Dt(r,(function(t){var r=t.evaluate(e,n,i);t.visible&&a.push(r)})),new t(a)}},n.prototype.forEach=function(e){for(var t=0;t<this.blocks.length;t++)e(this.blocks[t].node,"blocks["+t+"].node",this)},n.prototype.map=function(e){for(var t=[],r=0;r<this.blocks.length;r++){var i=this.blocks[r],a=this._ifNode(e(i.node,"blocks["+r+"].node",this));t[r]={node:a,visible:i.visible}}return new n(t)},n.prototype.clone=function(){return new n(this.blocks.map((function(e){return{node:e.node,visible:e.visible}})))},n.prototype._toString=function(e){return this.blocks.map((function(t){return t.node.toString(e)+(t.visible?"":";")})).join("\n")},n.prototype.toJSON=function(){return{mathjs:"BlockNode",blocks:this.blocks}},n.fromJSON=function(e){return new n(e.blocks)},n.prototype.toHTML=function(e){return this.blocks.map((function(t){return t.node.toHTML(e)+(t.visible?"":'<span class="math-separator">;</span>')})).join('<span class="math-separator"><br /></span>')},n.prototype._toTex=function(e){return this.blocks.map((function(t){return t.node.toTex(e)+(t.visible?"":";")})).join("\\;\\;\n")},n}),{isClass:!0,isNode:!0}),Tc=Ot("ConditionalNode",["Node"],(function(e){function t(e,n,r){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(!me(e))throw new TypeError("Parameter condition must be a Node");if(!me(n))throw new TypeError("Parameter trueExpr must be a Node");if(!me(r))throw new TypeError("Parameter falseExpr must be a Node");this.condition=e,this.trueExpr=n,this.falseExpr=r}return(t.prototype=new(0,e.Node)).type="ConditionalNode",t.prototype.isConditionalNode=!0,t.prototype._compile=function(e,t){var n=this.condition._compile(e,t),r=this.trueExpr._compile(e,t),i=this.falseExpr._compile(e,t);return function(e,t,a){return function(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e)return!!e;if(e){if(V(e))return!e.isZero();if(q(e))return!(!e.re&&!e.im);if(G(e))return!!e.value}if(null==e)return!1;throw new TypeError('Unsupported type of condition "'+Ne(e)+'"')}(n(e,t,a))?r(e,t,a):i(e,t,a)}},t.prototype.forEach=function(e){e(this.condition,"condition",this),e(this.trueExpr,"trueExpr",this),e(this.falseExpr,"falseExpr",this)},t.prototype.map=function(e){return new t(this._ifNode(e(this.condition,"condition",this)),this._ifNode(e(this.trueExpr,"trueExpr",this)),this._ifNode(e(this.falseExpr,"falseExpr",this)))},t.prototype.clone=function(){return new t(this.condition,this.trueExpr,this.falseExpr)},t.prototype._toString=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=Dc(this,t),r=this.condition.toString(e),i=Dc(this.condition,t);("all"===t||"OperatorNode"===this.condition.type||null!==i&&i<=n)&&(r="("+r+")");var a=this.trueExpr.toString(e),o=Dc(this.trueExpr,t);("all"===t||"OperatorNode"===this.trueExpr.type||null!==o&&o<=n)&&(a="("+a+")");var s=this.falseExpr.toString(e),u=Dc(this.falseExpr,t);return("all"===t||"OperatorNode"===this.falseExpr.type||null!==u&&u<=n)&&(s="("+s+")"),r+" ? "+a+" : "+s},t.prototype.toJSON=function(){return{mathjs:"ConditionalNode",condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}},t.fromJSON=function(e){return new t(e.condition,e.trueExpr,e.falseExpr)},t.prototype.toHTML=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=Dc(this,t),r=this.condition.toHTML(e),i=Dc(this.condition,t);("all"===t||"OperatorNode"===this.condition.type||null!==i&&i<=n)&&(r='<span class="math-parenthesis math-round-parenthesis">(</span>'+r+'<span class="math-parenthesis math-round-parenthesis">)</span>');var a=this.trueExpr.toHTML(e),o=Dc(this.trueExpr,t);("all"===t||"OperatorNode"===this.trueExpr.type||null!==o&&o<=n)&&(a='<span class="math-parenthesis math-round-parenthesis">(</span>'+a+'<span class="math-parenthesis math-round-parenthesis">)</span>');var s=this.falseExpr.toHTML(e),u=Dc(this.falseExpr,t);return("all"===t||"OperatorNode"===this.falseExpr.type||null!==u&&u<=n)&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>'),r+'<span class="math-operator math-conditional-operator">?</span>'+a+'<span class="math-operator math-conditional-operator">:</span>'+s},t.prototype._toTex=function(e){return"\\begin{cases} {"+this.trueExpr.toTex(e)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(e)+"}\\\\{"+this.falseExpr.toTex(e)+"}, &\\quad{\\text{otherwise}}\\end{cases}"},t}),{isClass:!0,isNode:!0}),Rc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ic={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},Oc={"–":"\\--","—":"\\---"," ":"~","\t":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},Pc=function(e,t){return Rc({},e,t)},Fc={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},Lc={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},kc={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(Lc.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(Lc.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(Lc.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(Lc.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(Lc.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(Lc.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(Lc.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(Lc.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(Lc.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(Lc.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(Lc.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(Lc.bitAnd,"${args[1]}\\right)")},bitNot:{1:Lc.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(Lc.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(Lc.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(Lc.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(Lc.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(Lc.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(Lc.and,"${args[1]}\\right)")},not:{1:Lc.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(Lc.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(Lc.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(Lc.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},sqrtm:{1:"{${args[0]}}".concat(Lc.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(Lc.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(Lc.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(Lc.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(Lc.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(Lc.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(Lc.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(Lc.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(Lc.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(Lc.to,"${args[1]}\\right)")},numeric:function(e,t){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(Fc.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},Bc={deg:"^\\circ"};function Vc(e){return function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.preserveFormatting,r=void 0!==n&&n,i=t.escapeMapFn,a=void 0===i?Pc:i,o=String(e),s="",u=a(Rc({},Ic),r?Rc({},Oc):{}),c=Object.keys(u),l=function(){var e=!1;c.forEach((function(t,n){e||o.length>=t.length&&o.slice(0,t.length)===t&&(s+=u[c[n]],o=o.slice(t.length,o.length),e=!0)})),e||(s+=o.slice(0,1),o=o.slice(1,o.length))};o;)l();return s}(e,{preserveFormatting:!0})}function qc(e,t){return(t=void 0!==t&&t)?Te(Bc,e)?Bc[e]:"\\mathrm{"+Vc(e)+"}":Te(Fc,e)?Fc[e]:Vc(e)}var zc=Ot("ConstantNode",["Node"],(function(e){function t(e){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(2===arguments.length)throw new SyntaxError("new ConstantNode(valueStr, valueType) is not supported anymore since math v4.0.0. Use new ConstantNode(value) instead, where value is a non-stringified value.");this.value=e}return(t.prototype=new(0,e.Node)).type="ConstantNode",t.prototype.isConstantNode=!0,t.prototype._compile=function(e,t){var n=this.value;return function(){return n}},t.prototype.forEach=function(e){},t.prototype.map=function(e){return this.clone()},t.prototype.clone=function(){return new t(this.value)},t.prototype._toString=function(e){return lt(this.value,e)},t.prototype.toHTML=function(e){var t=this._toString(e);switch(Ne(this.value)){case"number":case"BigNumber":case"Fraction":return'<span class="math-number">'+t+"</span>";case"string":return'<span class="math-string">'+t+"</span>";case"boolean":return'<span class="math-boolean">'+t+"</span>";case"null":return'<span class="math-null-symbol">'+t+"</span>";case"undefined":return'<span class="math-undefined">'+t+"</span>";default:return'<span class="math-symbol">'+t+"</span>"}},t.prototype.toJSON=function(){return{mathjs:"ConstantNode",value:this.value}},t.fromJSON=function(e){return new t(e.value)},t.prototype._toTex=function(e){var t=this._toString(e);switch(Ne(this.value)){case"string":return"\\mathtt{"+Vc(t)+"}";case"number":case"BigNumber":if(!isFinite(this.value))return this.value.valueOf()<0?"-\\infty":"\\infty";var n=t.toLowerCase().indexOf("e");return-1!==n?t.substring(0,n)+"\\cdot10^{"+t.substring(n+1)+"}":t;case"Fraction":return this.value.toLatex();default:return t}},t}),{isClass:!0,isNode:!0}),Gc=Ot("FunctionAssignmentNode",["typed","Node"],(function(e){var t=e.typed;function n(e,t,r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof e)throw new TypeError('String expected for parameter "name"');if(!Array.isArray(t))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!me(r))throw new TypeError('Node expected for parameter "expr"');if(e in mc)throw new Error('Illegal function name, "'+e+'" is a reserved keyword');this.name=e,this.params=t.map((function(e){return e&&e.name||e})),this.types=t.map((function(e){return e&&e.type||"any"})),this.expr=r}function r(e,t){var n=Dc(e,t),r=Dc(e.expr,t);return"all"===t||null!==r&&r<=n}return(n.prototype=new(0,e.Node)).type="FunctionAssignmentNode",n.prototype.isFunctionAssignmentNode=!0,n.prototype._compile=function(e,n){var r=Object.create(n);Dt(this.params,(function(e){r[e]=!0}));var i=this.expr._compile(e,r),a=this.name,o=this.params,s=Et(this.types,","),u=a+"("+Et(this.params,", ")+")";return function(e,n,r){var c={};c[s]=function(){for(var t=Object.create(n),a=0;a<o.length;a++)t[o[a]]=arguments[a];return i(e,t,r)};var l=t(a,c);return l.syntax=u,ts(e,a,l),l}},n.prototype.forEach=function(e){e(this.expr,"expr",this)},n.prototype.map=function(e){var t=this._ifNode(e(this.expr,"expr",this));return new n(this.name,this.params.slice(0),t)},n.prototype.clone=function(){return new n(this.name,this.params.slice(0),this.expr)},n.prototype._toString=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=this.expr.toString(e);return r(this,t)&&(n="("+n+")"),this.name+"("+this.params.join(", ")+") = "+n},n.prototype.toJSON=function(){var e=this.types;return{mathjs:"FunctionAssignmentNode",name:this.name,params:this.params.map((function(t,n){return{name:t,type:e[n]}})),expr:this.expr}},n.fromJSON=function(e){return new n(e.name,e.params,e.expr)},n.prototype.toHTML=function(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",n=[],i=0;i<this.params.length;i++)n.push('<span class="math-symbol math-parameter">'+pt(this.params[i])+"</span>");var a=this.expr.toHTML(e);return r(this,t)&&(a='<span class="math-parenthesis math-round-parenthesis">(</span>'+a+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+pt(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+n.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+a},n.prototype._toTex=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=this.expr.toTex(e);return r(this,t)&&(n="\\left(".concat(n,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(qc).join(",")+"\\right):="+n},n}),{isClass:!0,isNode:!0});function Uc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jc=Ot("IndexNode",["Range","Node","size"],(function(e){var t=e.Range,n=e.size;function r(e,t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(this.dimensions=e,this.dotNotation=t||!1,!Array.isArray(e)||!e.every(me))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties");var n=function(){throw new Error("Property `IndexNode.object` is deprecated, use `IndexNode.fn` instead")};Object.defineProperty(this,"object",{get:n,set:n})}function i(e,n,r){return new t(V(e)?e.toNumber():e,V(n)?n.toNumber():n,V(r)?r.toNumber():r)}return(r.prototype=new(0,e.Node)).type="IndexNode",r.prototype.isIndexNode=!0,r.prototype._compile=function(e,t){var r=_t(this.dimensions,(function(r,a){if(xe(r)){if(r.needsEnd()){var o=Object.create(t);o.end=!0;var s=r.start._compile(e,o),u=r.end._compile(e,o),c=r.step?r.step._compile(e,o):function(){return 1};return function(e,t,r){var o=n(r).valueOf(),l=Object.create(t);return l.end=o[a],i(s(e,l,r),u(e,l,r),c(e,l,r))}}var l=r.start._compile(e,t),f=r.end._compile(e,t),p=r.step?r.step._compile(e,t):function(){return 1};return function(e,t,n){return i(l(e,t,n),f(e,t,n),p(e,t,n))}}if(be(r)&&"end"===r.name){var d=Object.create(t);d.end=!0;var h=r._compile(e,d);return function(e,t,r){var i=n(r).valueOf(),o=Object.create(t);return o.end=i[a],h(e,o,r)}}var m=r._compile(e,t);return function(e,t,n){return m(e,t,n)}})),a=es(e,"index");return function(e,t,n){var i,o=_t(r,(function(r){return r(e,t,n)}));return a.apply(void 0,function(e){if(Array.isArray(e))return Uc(e)}(i=o)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(i)||function(e,t){if(e){if("string"==typeof e)return Uc(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Uc(e,void 0):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}},r.prototype.forEach=function(e){for(var t=0;t<this.dimensions.length;t++)e(this.dimensions[t],"dimensions["+t+"]",this)},r.prototype.map=function(e){for(var t=[],n=0;n<this.dimensions.length;n++)t[n]=this._ifNode(e(this.dimensions[n],"dimensions["+n+"]",this));return new r(t,this.dotNotation)},r.prototype.clone=function(){return new r(this.dimensions.slice(0),this.dotNotation)},r.prototype.isObjectProperty=function(){return 1===this.dimensions.length&&fe(this.dimensions[0])&&"string"==typeof this.dimensions[0].value},r.prototype.getObjectProperty=function(){return this.isObjectProperty()?this.dimensions[0].value:null},r.prototype._toString=function(e){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"IndexNode",dimensions:this.dimensions,dotNotation:this.dotNotation}},r.fromJSON=function(e){return new r(e.dimensions,e.dotNotation)},r.prototype.toHTML=function(e){for(var t=[],n=0;n<this.dimensions.length;n++)t[n]=this.dimensions[n].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+pt(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'},r.prototype._toTex=function(e){var t=this.dimensions.map((function(t){return t.toTex(e)}));return this.dotNotation?"."+this.getObjectProperty():"_{"+t.join(",")+"}"},r}),{isClass:!0,isNode:!0});function Yc(e){return(Yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Hc=Ot("ObjectNode",["Node"],(function(e){function t(e){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(this.properties=e||{},e&&("object"!==Yc(e)||!Object.keys(e).every((function(t){return me(e[t])}))))throw new TypeError("Object containing Nodes expected")}return(t.prototype=new(0,e.Node)).type="ObjectNode",t.prototype.isObjectNode=!0,t.prototype._compile=function(e,t){var n={};for(var r in this.properties)if(Te(this.properties,r)){var i=ft(r),a=JSON.parse(i);if(!ns(this.properties,a))throw new Error('No access to property "'+a+'"');n[a]=this.properties[r]._compile(e,t)}return function(e,t,r){var i={};for(var a in n)Te(n,a)&&(i[a]=n[a](e,t,r));return i}},t.prototype.forEach=function(e){for(var t in this.properties)Te(this.properties,t)&&e(this.properties[t],"properties["+ft(t)+"]",this)},t.prototype.map=function(e){var n={};for(var r in this.properties)Te(this.properties,r)&&(n[r]=this._ifNode(e(this.properties[r],"properties["+ft(r)+"]",this)));return new t(n)},t.prototype.clone=function(){var e={};for(var n in this.properties)Te(this.properties,n)&&(e[n]=this.properties[n]);return new t(e)},t.prototype._toString=function(e){var t=[];for(var n in this.properties)Te(this.properties,n)&&t.push(ft(n)+": "+this.properties[n].toString(e));return"{"+t.join(", ")+"}"},t.prototype.toJSON=function(){return{mathjs:"ObjectNode",properties:this.properties}},t.fromJSON=function(e){return new t(e.properties)},t.prototype.toHTML=function(e){var t=[];for(var n in this.properties)Te(this.properties,n)&&t.push('<span class="math-symbol math-property">'+pt(n)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[n].toHTML(e));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'},t.prototype._toTex=function(e){var t=[];for(var n in this.properties)Te(this.properties,n)&&t.push("\\mathbf{"+n+":} & "+this.properties[n].toTex(e)+"\\\\");return"\\left\\{\\begin{array}{ll}".concat(t.join("\n"),"\\end{array}\\right\\}")},t}),{isClass:!0,isNode:!0}),Kc=Ot("OperatorNode",["Node"],(function(e){function t(e,n,r,i){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof e)throw new TypeError('string expected for parameter "op"');if("string"!=typeof n)throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(r)||!r.every(me))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=!0===i,this.op=e,this.fn=n,this.args=r||[]}function n(e,t,n,r,i){var a,o=Dc(e,t),s=Ac(e,t);if("all"===t||r.length>2&&"OperatorNode:add"!==e.getIdentifier()&&"OperatorNode:multiply"!==e.getIdentifier())return r.map((function(e){switch(e.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}}));switch(r.length){case 0:a=[];break;case 1:var u=Dc(r[0],t);if(i&&null!==u){var c,l;if("keep"===t?(c=r[0].getIdentifier(),l=e.getIdentifier()):(c=r[0].getContent().getIdentifier(),l=e.getContent().getIdentifier()),!1===_c[o][l].latexLeftParens){a=[!1];break}if(!1===_c[u][c].latexParens){a=[!1];break}}if(null===u){a=[!1];break}if(u<=o){a=[!0];break}a=[!1];break;case 2:var f,p,d=Dc(r[0],t),h=Mc(e,r[0],t);f=null!==d&&(d===o&&"right"===s&&!h||d<o);var m,g,v,y=Dc(r[1],t),x=Mc(e,r[1],t);p=null!==y&&(y===o&&"left"===s&&!x||y<o),i&&("keep"===t?(m=e.getIdentifier(),g=e.args[0].getIdentifier(),v=e.args[1].getIdentifier()):(m=e.getContent().getIdentifier(),g=e.args[0].getContent().getIdentifier(),v=e.args[1].getContent().getIdentifier()),null!==d&&(!1===_c[o][m].latexLeftParens&&(f=!1),!1===_c[d][g].latexParens&&(f=!1)),null!==y&&(!1===_c[o][m].latexRightParens&&(p=!1),!1===_c[y][v].latexParens&&(p=!1))),a=[f,p];break;default:"OperatorNode:add"!==e.getIdentifier()&&"OperatorNode:multiply"!==e.getIdentifier()||(a=r.map((function(n){var r=Dc(n,t),i=Mc(e,n,t),a=Ac(n,t);return null!==r&&(o===r&&s===a&&!i||r<o)})))}return r.length>=2&&"OperatorNode:multiply"===e.getIdentifier()&&e.implicit&&"auto"===t&&"hide"===n&&(a=r.map((function(e,t){var n="ParenthesisNode"===e.getIdentifier();return!(!a[t]&&!n)}))),a}return(t.prototype=new(0,e.Node)).type="OperatorNode",t.prototype.isOperatorNode=!0,t.prototype._compile=function(e,t){if("string"!=typeof this.fn||!rs(e,this.fn))throw e[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var n=es(e,this.fn),r=_t(this.args,(function(n){return n._compile(e,t)}));if(1===r.length){var i=r[0];return function(e,t,r){return n(i(e,t,r))}}if(2===r.length){var a=r[0],o=r[1];return function(e,t,r){return n(a(e,t,r),o(e,t,r))}}return function(e,t,i){return n.apply(null,_t(r,(function(n){return n(e,t,i)})))}},t.prototype.forEach=function(e){for(var t=0;t<this.args.length;t++)e(this.args[t],"args["+t+"]",this)},t.prototype.map=function(e){for(var n=[],r=0;r<this.args.length;r++)n[r]=this._ifNode(e(this.args[r],"args["+r+"]",this));return new t(this.op,this.fn,n,this.implicit)},t.prototype.clone=function(){return new t(this.op,this.fn,this.args.slice(0),this.implicit)},t.prototype.isUnary=function(){return 1===this.args.length},t.prototype.isBinary=function(){return 2===this.args.length},t.prototype._toString=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",r=e&&e.implicit?e.implicit:"hide",i=this.args,a=n(this,t,r,i,!1);if(1===i.length){var o=Ac(this,t),s=i[0].toString(e);a[0]&&(s="("+s+")");var u=/[a-zA-Z]+/.test(this.op);return"right"===o?this.op+(u?" ":"")+s:"left"===o?s+(u?" ":"")+this.op:s+this.op}if(2===i.length){var c=i[0].toString(e),l=i[1].toString(e);return a[0]&&(c="("+c+")"),a[1]&&(l="("+l+")"),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===r?c+" "+l:c+" "+this.op+" "+l}if(i.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())){var f=i.map((function(t,n){return t=t.toString(e),a[n]&&(t="("+t+")"),t}));return this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===r?f.join(" "):f.join(" "+this.op+" ")}return this.fn+"("+this.args.join(", ")+")"},t.prototype.toJSON=function(){return{mathjs:"OperatorNode",op:this.op,fn:this.fn,args:this.args,implicit:this.implicit}},t.fromJSON=function(e){return new t(e.op,e.fn,e.args,e.implicit)},t.prototype.toHTML=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",r=e&&e.implicit?e.implicit:"hide",i=this.args,a=n(this,t,r,i,!1);if(1===i.length){var o=Ac(this,t),s=i[0].toHTML(e);return a[0]&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>'),"right"===o?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+pt(this.op)+"</span>"+s:s+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+pt(this.op)+"</span>"}if(2===i.length){var u=i[0].toHTML(e),c=i[1].toHTML(e);return a[0]&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),a[1]&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===r?u+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+c:u+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+pt(this.op)+"</span>"+c}var l=i.map((function(t,n){return t=t.toHTML(e),a[n]&&(t='<span class="math-parenthesis math-round-parenthesis">(</span>'+t+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t}));return i.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())?this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===r?l.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):l.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+pt(this.op)+"</span>"):'<span class="math-function">'+pt(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+l.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'},t.prototype._toTex=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",r=e&&e.implicit?e.implicit:"hide",i=this.args,a=n(this,t,r,i,!0),o=Lc[this.fn];if(o=void 0===o?this.op:o,1===i.length){var s=Ac(this,t),u=i[0].toTex(e);return a[0]&&(u="\\left(".concat(u,"\\right)")),"right"===s?o+u:u+o}if(2===i.length){var c=i[0],l=c.toTex(e);a[0]&&(l="\\left(".concat(l,"\\right)"));var f,p=i[1].toTex(e);switch(a[1]&&(p="\\left(".concat(p,"\\right)")),f="keep"===t?c.getIdentifier():c.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return o+"{"+l+"}{"+p+"}";case"OperatorNode:pow":switch(l="{"+l+"}",p="{"+p+"}",f){case"ConditionalNode":case"OperatorNode:divide":l="\\left(".concat(l,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&"hide"===r)return l+"~"+p}return l+o+p}if(i.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())){var d=i.map((function(t,n){return t=t.toTex(e),a[n]&&(t="\\left(".concat(t,"\\right)")),t}));return"OperatorNode:multiply"===this.getIdentifier()&&this.implicit?d.join("~"):d.join(o)}return"\\mathrm{"+this.fn+"}\\left("+i.map((function(t){return t.toTex(e)})).join(",")+"\\right)"},t.prototype.getIdentifier=function(){return this.type+":"+this.fn},t}),{isClass:!0,isNode:!0}),Qc=Ot("ParenthesisNode",["Node"],(function(e){function t(e){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(!me(e))throw new TypeError('Node expected for parameter "content"');this.content=e}return(t.prototype=new(0,e.Node)).type="ParenthesisNode",t.prototype.isParenthesisNode=!0,t.prototype._compile=function(e,t){return this.content._compile(e,t)},t.prototype.getContent=function(){return this.content.getContent()},t.prototype.forEach=function(e){e(this.content,"content",this)},t.prototype.map=function(e){return new t(e(this.content,"content",this))},t.prototype.clone=function(){return new t(this.content)},t.prototype._toString=function(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?"("+this.content.toString(e)+")":this.content.toString(e)},t.prototype.toJSON=function(){return{mathjs:"ParenthesisNode",content:this.content}},t.fromJSON=function(e){return new t(e.content)},t.prototype.toHTML=function(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(e)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(e)},t.prototype._toTex=function(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?"\\left(".concat(this.content.toTex(e),"\\right)"):this.content.toTex(e)},t}),{isClass:!0,isNode:!0}),Wc=Ot("RangeNode",["Node"],(function(e){function t(e,n,r){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(!me(e))throw new TypeError("Node expected");if(!me(n))throw new TypeError("Node expected");if(r&&!me(r))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=e,this.end=n,this.step=r||null}function n(e,t){var n=Dc(e,t),r={},i=Dc(e.start,t);if(r.start=null!==i&&i<=n||"all"===t,e.step){var a=Dc(e.step,t);r.step=null!==a&&a<=n||"all"===t}var o=Dc(e.end,t);return r.end=null!==o&&o<=n||"all"===t,r}return(t.prototype=new(0,e.Node)).type="RangeNode",t.prototype.isRangeNode=!0,t.prototype.needsEnd=function(){return this.filter((function(e){return be(e)&&"end"===e.name})).length>0},t.prototype._compile=function(e,t){var n=e.range,r=this.start._compile(e,t),i=this.end._compile(e,t);if(this.step){var a=this.step._compile(e,t);return function(e,t,o){return n(r(e,t,o),i(e,t,o),a(e,t,o))}}return function(e,t,a){return n(r(e,t,a),i(e,t,a))}},t.prototype.forEach=function(e){e(this.start,"start",this),e(this.end,"end",this),this.step&&e(this.step,"step",this)},t.prototype.map=function(e){return new t(this._ifNode(e(this.start,"start",this)),this._ifNode(e(this.end,"end",this)),this.step&&this._ifNode(e(this.step,"step",this)))},t.prototype.clone=function(){return new t(this.start,this.end,this.step&&this.step)},t.prototype._toString=function(e){var t,r=n(this,e&&e.parenthesis?e.parenthesis:"keep"),i=this.start.toString(e);if(r.start&&(i="("+i+")"),t=i,this.step){var a=this.step.toString(e);r.step&&(a="("+a+")"),t+=":"+a}var o=this.end.toString(e);return r.end&&(o="("+o+")"),t+":"+o},t.prototype.toJSON=function(){return{mathjs:"RangeNode",start:this.start,end:this.end,step:this.step}},t.fromJSON=function(e){return new t(e.start,e.end,e.step)},t.prototype.toHTML=function(e){var t,r=n(this,e&&e.parenthesis?e.parenthesis:"keep"),i=this.start.toHTML(e);if(r.start&&(i='<span class="math-parenthesis math-round-parenthesis">(</span>'+i+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t=i,this.step){var a=this.step.toHTML(e);r.step&&(a='<span class="math-parenthesis math-round-parenthesis">(</span>'+a+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+='<span class="math-operator math-range-operator">:</span>'+a}var o=this.end.toHTML(e);return r.end&&(o='<span class="math-parenthesis math-round-parenthesis">(</span>'+o+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+'<span class="math-operator math-range-operator">:</span>'+o},t.prototype._toTex=function(e){var t=n(this,e&&e.parenthesis?e.parenthesis:"keep"),r=this.start.toTex(e);if(t.start&&(r="\\left(".concat(r,"\\right)")),this.step){var i=this.step.toTex(e);t.step&&(i="\\left(".concat(i,"\\right)")),r+=":"+i}var a=this.end.toTex(e);return t.end&&(a="\\left(".concat(a,"\\right)")),r+":"+a},t}),{isClass:!0,isNode:!0}),$c=Ot("RelationalNode",["Node"],(function(e){function t(e,n){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(!Array.isArray(e))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(n))throw new TypeError("Parameter params must be an array");if(e.length!==n.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=e,this.params=n}return(t.prototype=new(0,e.Node)).type="RelationalNode",t.prototype.isRelationalNode=!0,t.prototype._compile=function(e,t){var n=this,r=this.params.map((function(n){return n._compile(e,t)}));return function(t,i,a){for(var o,s=r[0](t,i,a),u=0;u<n.conditionals.length;u++)if(o=s,s=r[u+1](t,i,a),!es(e,n.conditionals[u])(o,s))return!1;return!0}},t.prototype.forEach=function(e){var t=this;this.params.forEach((function(n,r){return e(n,"params["+r+"]",t)}),this)},t.prototype.map=function(e){var n=this;return new t(this.conditionals.slice(),this.params.map((function(t,r){return n._ifNode(e(t,"params["+r+"]",n))}),this))},t.prototype.clone=function(){return new t(this.conditionals,this.params)},t.prototype._toString=function(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",n=Dc(this,t),r=this.params.map((function(r,i){var a=Dc(r,t);return"all"===t||null!==a&&a<=n?"("+r.toString(e)+")":r.toString(e)})),i={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="},a=r[0],o=0;o<this.conditionals.length;o++)a+=" "+i[this.conditionals[o]]+" "+r[o+1];return a},t.prototype.toJSON=function(){return{mathjs:"RelationalNode",conditionals:this.conditionals,params:this.params}},t.fromJSON=function(e){return new t(e.conditionals,e.params)},t.prototype.toHTML=function(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",n=Dc(this,t),r=this.params.map((function(r,i){var a=Dc(r,t);return"all"===t||null!==a&&a<=n?'<span class="math-parenthesis math-round-parenthesis">(</span>'+r.toHTML(e)+'<span class="math-parenthesis math-round-parenthesis">)</span>':r.toHTML(e)})),i={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="},a=r[0],o=0;o<this.conditionals.length;o++)a+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+pt(i[this.conditionals[o]])+"</span>"+r[o+1];return a},t.prototype._toTex=function(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",n=Dc(this,t),r=this.params.map((function(r,i){var a=Dc(r,t);return"all"===t||null!==a&&a<=n?"\\left("+r.toTex(e)+"\right)":r.toTex(e)})),i=r[0],a=0;a<this.conditionals.length;a++)i+=Lc[this.conditionals[a]]+r[a+1];return i},t}),{isClass:!0,isNode:!0}),Xc=Ot("SymbolNode",["math","?Unit","Node"],(function(e){var t=e.math,n=e.Unit;function r(e){return!!n&&n.isValuelessUnit(e)}function i(e){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof e)throw new TypeError('String expected for parameter "name"');this.name=e}return(i.prototype=new(0,e.Node)).type="SymbolNode",i.prototype.isSymbolNode=!0,i.prototype._compile=function(e,t){var i=this.name;if(!0===t[i])return function(e,t,n){return t[i]};if(i in e)return function(t,n,r){return es(i in t?t:e,i)};var a=r(i);return function(e,t,r){return i in e?es(e,i):a?new n(null,i):function(e){throw new Error("Undefined symbol "+e)}(i)}},i.prototype.forEach=function(e){},i.prototype.map=function(e){return this.clone()},i.prototype.clone=function(){return new i(this.name)},i.prototype._toString=function(e){return this.name},i.prototype.toHTML=function(e){var t=pt(this.name);return"true"===t||"false"===t?'<span class="math-symbol math-boolean">'+t+"</span>":"i"===t?'<span class="math-symbol math-imaginary-symbol">'+t+"</span>":"Infinity"===t?'<span class="math-symbol math-infinity-symbol">'+t+"</span>":"NaN"===t?'<span class="math-symbol math-nan-symbol">'+t+"</span>":"null"===t?'<span class="math-symbol math-null-symbol">'+t+"</span>":"undefined"===t?'<span class="math-symbol math-undefined-symbol">'+t+"</span>":'<span class="math-symbol">'+t+"</span>"},i.prototype.toJSON=function(){return{mathjs:"SymbolNode",name:this.name}},i.fromJSON=function(e){return new i(e.name)},i.prototype._toTex=function(e){var n=!1;void 0===t[this.name]&&r(this.name)&&(n=!0);var i=qc(this.name,n);return"\\"===i[0]?i:" "+i},i}),{isClass:!0,isNode:!0});function Zc(e){return(Zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jc(){return(Jc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var el=Ot("FunctionNode",["math","Node","SymbolNode"],(function(e){var t=e.math,n=e.SymbolNode;function r(e,t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if("string"==typeof e&&(e=new n(e)),!me(e))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(t)||!t.every(me))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=e,this.args=t||[],Object.defineProperty(this,"name",{get:function(){return this.fn.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}});var i=function(){throw new Error("Property `FunctionNode.object` is deprecated, use `FunctionNode.fn` instead")};Object.defineProperty(this,"object",{get:i,set:i})}(r.prototype=new(0,e.Node)).type="FunctionNode",r.prototype.isFunctionNode=!0,r.prototype._compile=function(e,t){if(!(this instanceof r))throw new TypeError("No valid FunctionNode");var n=_t(this.args,(function(n){return n._compile(e,t)}));if(be(this.fn)){var i=this.fn.name,a=i in e?es(e,i):void 0;if("function"==typeof a&&!0===a.rawArgs){var o=this.args;return function(t,n,r){return(i in t?es(t,i):a)(o,e,Jc({},t,n))}}if(1===n.length){var s=n[0];return function(e,t,n){return(i in e?es(e,i):a)(s(e,t,n))}}if(2===n.length){var u=n[0],c=n[1];return function(e,t,n){return(i in e?es(e,i):a)(u(e,t,n),c(e,t,n))}}return function(e,t,r){return(i in e?es(e,i):a).apply(null,_t(n,(function(n){return n(e,t,r)})))}}if(oe(this.fn)&&he(this.fn.index)&&this.fn.index.isObjectProperty()){var l=this.fn.object._compile(e,t),f=this.fn.index.getObjectProperty(),p=this.args;return function(t,r,i){var a=l(t,r,i);return function(e,t){if(!rs(e,t))throw new Error('No access to method "'+t+'"')}(a,f),a[f]&&a[f].rawArgs?a[f](p,e,Jc({},t,r)):a[f].apply(a,_t(n,(function(e){return e(t,r,i)})))}}var d=this.fn._compile(e,t),h=this.args;return function(t,r,i){var a=d(t,r,i);return a&&a.rawArgs?a(h,e,Jc({},t,r)):a.apply(a,_t(n,(function(e){return e(t,r,i)})))}},r.prototype.forEach=function(e){e(this.fn,"fn",this);for(var t=0;t<this.args.length;t++)e(this.args[t],"args["+t+"]",this)},r.prototype.map=function(e){for(var t=this._ifNode(e(this.fn,"fn",this)),n=[],i=0;i<this.args.length;i++)n[i]=this._ifNode(e(this.args[i],"args["+i+"]",this));return new r(t,n)},r.prototype.clone=function(){return new r(this.fn,this.args.slice(0))};var i=r.prototype.toString;function a(e,t,n){for(var r,i="",a=new RegExp("\\$(?:\\{([a-z_][a-z_0-9]*)(?:\\[([0-9]+)\\])?\\}|\\$)","ig"),o=0;null!==(r=a.exec(e));)if(i+=e.substring(o,r.index),o=r.index,"$$"===r[0])i+="$",o++;else{o+=r[0].length;var s=t[r[1]];if(!s)throw new ReferenceError("Template: Property "+r[1]+" does not exist.");if(void 0===r[2])switch(Zc(s)){case"string":i+=s;break;case"object":if(me(s))i+=s.toTex(n);else{if(!Array.isArray(s))throw new TypeError("Template: "+r[1]+" has to be a Node, String or array of Nodes");i+=s.map((function(e,t){if(me(e))return e.toTex(n);throw new TypeError("Template: "+r[1]+"["+t+"] is not a Node.")})).join(",")}break;default:throw new TypeError("Template: "+r[1]+" has to be a Node, String or array of Nodes")}else{if(!me(s[r[2]]&&s[r[2]]))throw new TypeError("Template: "+r[1]+"["+r[2]+"] is not a Node.");i+=s[r[2]].toTex(n)}}return i+e.slice(o)}r.prototype.toString=function(e){var t,n=this.fn.toString(e);return e&&"object"===Zc(e.handler)&&Te(e.handler,n)&&(t=e.handler[n](this,e)),void 0!==t?t:i.call(this,e)},r.prototype._toString=function(e){var t=this.args.map((function(t){return t.toString(e)}));return(pe(this.fn)?"("+this.fn.toString(e)+")":this.fn.toString(e))+"("+t.join(", ")+")"},r.prototype.toJSON=function(){return{mathjs:"FunctionNode",fn:this.fn,args:this.args}},r.fromJSON=function(e){return new r(e.fn,e.args)},r.prototype.toHTML=function(e){var t=this.args.map((function(t){return t.toHTML(e)}));return'<span class="math-function">'+pt(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'};var o=r.prototype.toTex;return r.prototype.toTex=function(e){var t;return e&&"object"===Zc(e.handler)&&Te(e.handler,this.name)&&(t=e.handler[this.name](this,e)),void 0!==t?t:o.call(this,e)},r.prototype._toTex=function(e){var n,r,i=this.args.map((function(t){return t.toTex(e)}));switch(kc[this.name]&&(n=kc[this.name]),!t[this.name]||"function"!=typeof t[this.name].toTex&&"object"!==Zc(t[this.name].toTex)&&"string"!=typeof t[this.name].toTex||(n=t[this.name].toTex),Zc(n)){case"function":r=n(this,e);break;case"string":r=a(n,this,e);break;case"object":switch(Zc(n[i.length])){case"function":r=n[i.length](this,e);break;case"string":r=a(n[i.length],this,e)}}return void 0!==r?r:a("\\mathrm{${name}}\\left(${args}\\right)",this,e)},r.prototype.getIdentifier=function(){return this.type+":"+this.name},r}),{isClass:!0,isNode:!0});function tl(){return(tl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var nl=Ot("parse",["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],(function(e){var t=e.numeric,n=e.config,r=e.AccessorNode,i=e.ArrayNode,a=e.AssignmentNode,o=e.BlockNode,s=e.ConditionalNode,u=e.ConstantNode,c=e.FunctionAssignmentNode,l=e.FunctionNode,f=e.IndexNode,p=e.ObjectNode,d=e.OperatorNode,h=e.ParenthesisNode,m=e.RangeNode,g=e.RelationalNode,v=e.SymbolNode,y=(0,e.typed)("parse",{string:function(e){return O(e,{})},"Array | Matrix":function(e){return x(e,{})},"string, Object":function(e,t){return O(e,void 0!==t.nodes?t.nodes:{})},"Array | Matrix, Object":x});function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0!==t.nodes?t.nodes:{};return Tr(e,(function(e){if("string"!=typeof e)throw new TypeError("String expected");return O(e,n)}))}var b={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},w={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},N={true:!0,false:!1,null:null,undefined:void 0},S=["NaN","Infinity"];function _(e,t){return e.expression.substr(e.index,t)}function D(e){return _(e,1)}function A(e){e.index++}function M(e){return e.expression.charAt(e.index-1)}function E(e){return e.expression.charAt(e.index+1)}function C(e){for(e.tokenType=0,e.token="",e.comment="";y.isWhitespace(D(e),e.nestingLevel);)A(e);if("#"===D(e))for(;"\n"!==D(e)&&""!==D(e);)e.comment+=D(e),A(e);if(""!==D(e)){if("\n"===D(e)&&!e.nestingLevel)return e.tokenType=1,e.token=D(e),void A(e);var t=D(e),n=_(e,2),r=_(e,3);if(3===r.length&&b[r])return e.tokenType=1,e.token=r,A(e),A(e),void A(e);if(2===n.length&&b[n])return e.tokenType=1,e.token=n,A(e),void A(e);if(b[t])return e.tokenType=1,e.token=t,void A(e);if(y.isDigitDot(t)){if(e.tokenType=2,"."===D(e))e.token+=D(e),A(e),y.isDigit(D(e))||(e.tokenType=1);else{for(;y.isDigit(D(e));)e.token+=D(e),A(e);y.isDecimalMark(D(e),E(e))&&(e.token+=D(e),A(e))}for(;y.isDigit(D(e));)e.token+=D(e),A(e);if("E"===D(e)||"e"===D(e))if(y.isDigit(E(e))||"-"===E(e)||"+"===E(e)){if(e.token+=D(e),A(e),"+"!==D(e)&&"-"!==D(e)||(e.token+=D(e),A(e)),!y.isDigit(D(e)))throw ee(e,'Digit expected, got "'+D(e)+'"');for(;y.isDigit(D(e));)e.token+=D(e),A(e);if(y.isDecimalMark(D(e),E(e)))throw ee(e,'Digit expected, got "'+D(e)+'"')}else if("."===E(e))throw A(e),ee(e,'Digit expected, got "'+D(e)+'"')}else{if(!y.isAlpha(D(e),M(e),E(e))){for(e.tokenType=4;""!==D(e);)e.token+=D(e),A(e);throw ee(e,'Syntax error in part "'+e.token+'"')}for(;y.isAlpha(D(e),M(e),E(e))||y.isDigit(D(e));)e.token+=D(e),A(e);e.tokenType=Te(w,e.token)?1:3}}else e.tokenType=1}function T(e){do{C(e)}while("\n"===e.token)}function R(e){e.nestingLevel++}function I(e){e.nestingLevel--}function O(e,t){var n={extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:0,nestingLevel:0,conditionalLevel:null};tl(n,{expression:e,extraNodes:t}),C(n);var r=function(e){var t,n=[];for(""!==e.token&&"\n"!==e.token&&";"!==e.token&&((t=P(e)).comment=e.comment);"\n"===e.token||";"===e.token;)0===n.length&&t&&n.push({node:t,visible:";"!==e.token}),C(e),"\n"!==e.token&&";"!==e.token&&""!==e.token&&((t=P(e)).comment=e.comment,n.push({node:t,visible:";"!==e.token}));return n.length>0?new o(n):(t||((t=new u(void 0)).comment=e.comment),t)}(n);if(""!==n.token)throw 1===n.tokenType?te(n,"Unexpected operator "+n.token):ee(n,'Unexpected part "'+n.token+'"');return r}function P(e){var t,n,r,i,o=function(e){for(var t=function(e){for(var t=F(e);"or"===e.token;)T(e),t=new d("or","or",[t,F(e)]);return t}(e);"?"===e.token;){var n=e.conditionalLevel;e.conditionalLevel=e.nestingLevel,T(e);var r=t,i=P(e);if(":"!==e.token)throw ee(e,"False part of conditional expression expected");e.conditionalLevel=null,T(e);var a=P(e);t=new s(r,i,a),e.conditionalLevel=n}return t}(e);if("="===e.token){if(be(o))return t=o.name,T(e),r=P(e),new a(new v(t),r);if(oe(o))return T(e),r=P(e),new a(o.object,o.index,r);if(de(o)&&be(o.fn)&&(i=!0,n=[],t=o.name,o.args.forEach((function(e,t){be(e)?n[t]=e.name:i=!1})),i))return T(e),r=P(e),new c(t,n,r);throw ee(e,"Invalid left hand side of assignment operator =")}return o}function F(e){for(var t=L(e);"xor"===e.token;)T(e),t=new d("xor","xor",[t,L(e)]);return t}function L(e){for(var t=k(e);"and"===e.token;)T(e),t=new d("and","and",[t,k(e)]);return t}function k(e){for(var t=B(e);"|"===e.token;)T(e),t=new d("|","bitOr",[t,B(e)]);return t}function B(e){for(var t=V(e);"^|"===e.token;)T(e),t=new d("^|","bitXor",[t,V(e)]);return t}function V(e){for(var t=q(e);"&"===e.token;)T(e),t=new d("&","bitAnd",[t,q(e)]);return t}function q(e){for(var t=[z(e)],n=[],r={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};Te(r,e.token);)n.push({name:e.token,fn:r[e.token]}),T(e),t.push(z(e));return 1===t.length?t[0]:2===t.length?new d(n[0].name,n[0].fn,t):new g(n.map((function(e){return e.fn})),t)}function z(e){var t,n,r,i;t=G(e);for(var a={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};Te(a,e.token);)r=a[n=e.token],T(e),i=[t,G(e)],t=new d(n,r,i);return t}function G(e){var t,n,r,i;t=U(e);for(var a={to:"to",in:"to"};Te(a,e.token);)r=a[n=e.token],T(e),"in"===n&&""===e.token?t=new d("*","multiply",[t,new v("in")],!0):(i=[t,U(e)],t=new d(n,r,i));return t}function U(e){var t,n=[];if(t=":"===e.token?new u(1):j(e),":"===e.token&&e.conditionalLevel!==e.nestingLevel){for(n.push(t);":"===e.token&&n.length<3;)T(e),n.push(")"===e.token||"]"===e.token||","===e.token||""===e.token?new v("end"):j(e));t=3===n.length?new m(n[0],n[2],n[1]):new m(n[0],n[1])}return t}function j(e){var t,n,r,i;t=Y(e);for(var a={"+":"add","-":"subtract"};Te(a,e.token);)r=a[n=e.token],T(e),i=[t,Y(e)],t=new d(n,r,i);return t}function Y(e){var t,n,r,i;n=t=H(e);for(var a={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};Te(a,e.token);)i=a[r=e.token],T(e),n=H(e),t=new d(r,i,[t,n]);return t}function H(e){var t,n;for(n=t=K(e);3===e.tokenType||"in"===e.token&&fe(t)||!(2!==e.tokenType||fe(n)||ve(n)&&"!"!==n.op)||"("===e.token;)n=K(e),t=new d("*","multiply",[t,n],!0);return t}function K(e){for(var t=Q(e),n=t,r=[];"/"===e.token&&fe(n);){if(r.push(tl({},e)),T(e),2!==e.tokenType){tl(e,r.pop());break}if(r.push(tl({},e)),T(e),3!==e.tokenType&&"("!==e.token){r.pop(),tl(e,r.pop());break}tl(e,r.pop()),r.pop(),n=Q(e),t=new d("/","divide",[t,n])}return t}function Q(e){var r,a,o,s={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return Te(s,e.token)?(o=s[e.token],r=e.token,T(e),a=[Q(e)],new d(r,o,a)):function(e){var r,a,o,s;return r=function(e){var r,a,o;r=function(e){var r=[];if(3===e.tokenType&&Te(e.extraNodes,e.token)){var a=e.extraNodes[e.token];if(C(e),"("===e.token){if(r=[],R(e),C(e),")"!==e.token)for(r.push(P(e));","===e.token;)C(e),r.push(P(e));if(")"!==e.token)throw ee(e,"Parenthesis ) expected");I(e),C(e)}return new a(r)}return function(e){var r;return 3===e.tokenType||1===e.tokenType&&e.token in w?(r=e.token,C(e),W(e,Te(N,r)?new u(N[r]):-1!==S.indexOf(r)?new u(t(r,"number")):new v(r))):function(e){var r;return'"'===e.token?(r=$(e),W(e,new u(r))):function(e){var r;return"'"===e.token?(r=X(e),W(e,new u(r))):function(e){var r,a,o,s;if("["===e.token){if(R(e),C(e),"]"!==e.token){var c=Z(e);if(";"===e.token){for(o=1,a=[c];";"===e.token;)C(e),a[o]=Z(e),o++;if("]"!==e.token)throw ee(e,"End of matrix ] expected");I(e),C(e),s=a[0].items.length;for(var l=1;l<o;l++)if(a[l].items.length!==s)throw te(e,"Column dimensions mismatch ("+a[l].items.length+" !== "+s+")");r=new i(a)}else{if("]"!==e.token)throw ee(e,"End of matrix ] expected");I(e),C(e),r=c}}else I(e),C(e),r=new i([]);return W(e,r)}return function(e){if("{"===e.token){var r;R(e);var i={};do{if(C(e),"}"!==e.token){if('"'===e.token)r=$(e);else if("'"===e.token)r=X(e);else{if(!(3===e.tokenType||1===e.tokenType&&e.token in w))throw ee(e,"Symbol or string expected as object key");r=e.token,C(e)}if(":"!==e.token)throw ee(e,"Colon : expected after object key");C(e),i[r]=P(e)}}while(","===e.token);if("}"!==e.token)throw ee(e,"Comma , or bracket } expected after object value");return I(e),C(e),W(e,new p(i))}return function(e){var r;return 2===e.tokenType?(r=e.token,C(e),new u(t(r,n.number))):function(e){var t;if("("===e.token){if(R(e),C(e),t=P(e),")"!==e.token)throw ee(e,"Parenthesis ) expected");return I(e),C(e),W(e,t=new h(t))}return function(e){throw ee(e,""===e.token?"Unexpected end of expression":"Value expected")}(e)}(e)}(e)}(e)}(e)}(e)}(e)}(e)}(e);for(var s={"!":"factorial","'":"ctranspose"};Te(s,e.token);)o=s[a=e.token],C(e),r=W(e,r=new d(a,o,[r]));return r}(e),("^"===e.token||".^"===e.token)&&(o="^"===(a=e.token)?"pow":"dotPow",T(e),s=[r,Q(e)],r=new d(a,o,s)),r}(e)}function W(e,t,n){for(var i;!("("!==e.token&&"["!==e.token&&"."!==e.token||n&&-1===n.indexOf(e.token));)if(i=[],"("===e.token){if(!be(t)&&!oe(t))return t;if(R(e),C(e),")"!==e.token)for(i.push(P(e));","===e.token;)C(e),i.push(P(e));if(")"!==e.token)throw ee(e,"Parenthesis ) expected");I(e),C(e),t=new l(t,i)}else if("["===e.token){if(R(e),C(e),"]"!==e.token)for(i.push(P(e));","===e.token;)C(e),i.push(P(e));if("]"!==e.token)throw ee(e,"Parenthesis ] expected");I(e),C(e),t=new r(t,new f(i))}else{if(C(e),3!==e.tokenType)throw ee(e,"Property name expected after dot");i.push(new u(e.token)),C(e),t=new r(t,new f(i,!0))}return t}function $(e){for(var t="";""!==D(e)&&'"'!==D(e);)"\\"===D(e)&&(t+=D(e),A(e)),t+=D(e),A(e);if(C(e),'"'!==e.token)throw ee(e,'End of string " expected');return C(e),JSON.parse('"'+t+'"')}function X(e){for(var t="";""!==D(e)&&"'"!==D(e);)"\\"===D(e)&&(t+=D(e),A(e)),t+=D(e),A(e);if(C(e),"'"!==e.token)throw ee(e,"End of string ' expected");return C(e),JSON.parse('"'+t+'"')}function Z(e){for(var t=[P(e)],n=1;","===e.token;)C(e),t[n]=P(e),n++;return new i(t)}function J(e){return e.index-e.token.length+1}function ee(e,t){var n=J(e),r=new SyntaxError(t+" (char "+n+")");return r.char=n,r}function te(e,t){var n=J(e),r=new SyntaxError(t+" (char "+n+")");return r.char=n,r}return y.isAlpha=function(e,t,n){return y.isValidLatinOrGreek(e)||y.isValidMathSymbol(e,n)||y.isValidMathSymbol(t,e)},y.isValidLatinOrGreek=function(e){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(e)},y.isValidMathSymbol=function(e,t){return/^[\uD835]$/.test(e)&&/^[\uDC00-\uDFFF]$/.test(t)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(t)},y.isWhitespace=function(e,t){return" "===e||"\t"===e||"\n"===e&&t>0},y.isDecimalMark=function(e,t){return"."===e&&"/"!==t&&"*"!==t&&"^"!==t},y.isDigitDot=function(e){return e>="0"&&e<="9"||"."===e},y.isDigit=function(e){return e>="0"&&e<="9"},y})),rl=Ot("compile",["typed","parse"],(function(e){var t=e.parse;return(0,e.typed)("compile",{string:function(e){return t(e).compile()},"Array | Matrix":function(e){return Tr(e,(function(e){return t(e).compile()}))}})})),il=Ot("evaluate",["typed","parse"],(function(e){var t=e.parse;return(0,e.typed)("evaluate",{string:function(e){return t(e).compile().evaluate({})},"string, Object":function(e,n){return t(e).compile().evaluate(n)},"Array | Matrix":function(e){var n={};return Tr(e,(function(e){return t(e).compile().evaluate(n)}))},"Array | Matrix, Object":function(e,n){return Tr(e,(function(e){return t(e).compile().evaluate(n)}))}})})),al=Ot("eval",["evaluate"],(function(e){var t=e.evaluate;return function(){ta('Function "eval" has been renamed to "evaluate" in v6.0.0, please use the new function instead.');for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(t,n)}})),ol=Ot("Parser",["parse"],(function(e){var t=e.parse;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.scope={}}return n.prototype.type="Parser",n.prototype.isParser=!0,n.prototype.parse=function(e){throw new Error("Parser.parse is deprecated. Use math.parse instead.")},n.prototype.compile=function(e){throw new Error("Parser.compile is deprecated. Use math.compile instead.")},n.prototype.evaluate=function(e){return t(e).compile().evaluate(this.scope)},n.prototype.eval=function(e){return ta("Method Parser.eval is renamed to Parser.evaluate. Please use the new method name."),this.evaluate(e)},n.prototype.get=function(e){return e in this.scope?es(this.scope,e):void 0},n.prototype.getAll=function(){return Ae({},this.scope)},n.prototype.set=function(e,t){return ts(this.scope,e,t)},n.prototype.remove=function(e){delete this.scope[e]},n.prototype.clear=function(){for(var e in this.scope)Te(this.scope,e)&&delete this.scope[e]},n}),{isClass:!0}),sl=Ot("parser",["typed","Parser"],(function(e){var t=e.Parser;return(0,e.typed)("parser",{"":function(){return new t}})})),ul=Ot("lup",["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtract","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],(function(e){var t=e.matrix,n=e.abs,r=e.addScalar,i=e.divideScalar,a=e.multiplyScalar,o=e.subtract,s=e.larger,u=e.equalScalar,c=e.unaryMinus,l=e.DenseMatrix,f=e.SparseMatrix,p=e.Spa;return(0,e.typed)("lup",{DenseMatrix:function(e){return d(e)},SparseMatrix:function(e){return function(e){var t,r,o,l=e._size[0],d=e._size[1],h=Math.min(l,d),m=e._values,g=e._index,v=e._ptr,y=[],x=[],b=[],w=[l,h],N=[],S=[],_=[],D=[h,d],A=[],M=[];for(t=0;t<l;t++)A[t]=t,M[t]=t;var E=function(){var e=new p;r<l&&(b.push(y.length),y.push(1),x.push(r)),_.push(N.length);var d=v[r+1];for(o=v[r];o<d;o++)e.set(A[t=g[o]],m[o]);r>0&&e.forEach(0,r-1,(function(t,n){f._forEachRow(t,y,x,b,(function(r,i){r>t&&e.accumulate(r,c(a(i,n)))}))}));var h,E,C,T,R=r,I=e.get(r),O=n(I);e.forEach(r+1,l-1,(function(e,t){var r=n(t);s(r,O)&&(R=e,O=r,I=t)})),r!==R&&(f._swapRows(r,R,w[1],y,x,b),f._swapRows(r,R,D[1],N,S,_),e.swap(r,R),T=M[E=R],A[C=M[h=r]]=E,A[T]=h,M[h]=T,M[E]=C),e.forEach(0,l-1,(function(e,t){e<=r?(N.push(t),S.push(e)):(t=i(t,I),u(t,0)||(y.push(t),x.push(e)))}))};for(r=0;r<d;r++)E();return _.push(N.length),b.push(y.length),{L:new f({values:y,index:x,ptr:b,size:w}),U:new f({values:N,index:S,ptr:_,size:D}),p:A,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}(e)},Array:function(e){var n=d(t(e));return{L:n.L.valueOf(),U:n.U.valueOf(),p:n.p}}});function d(e){var t,c,f,p=e._size[0],d=e._size[1],h=Math.min(p,d),m=_e(e._data),g=[],v=[p,h],y=[],x=[h,d],b=[];for(t=0;t<p;t++)b[t]=t;for(c=0;c<d;c++){if(c>0)for(t=0;t<p;t++){var w=Math.min(t,c),N=0;for(f=0;f<w;f++)N=r(N,a(m[t][f],m[f][c]));m[t][c]=o(m[t][c],N)}var S=c,_=0,D=0;for(t=c;t<p;t++){var A=m[t][c],M=n(A);s(M,_)&&(S=t,_=M,D=A)}if(c!==S&&(b[c]=[b[S],b[S]=b[c]][0],l._swapRows(c,S,m)),c<p)for(t=c+1;t<p;t++)u(m[t][c],0)||(m[t][c]=i(m[t][c],D))}for(c=0;c<d;c++)for(t=0;t<p;t++)0===c&&(t<d&&(y[t]=[]),g[t]=[]),t<c?(t<d&&(y[t][c]=m[t][c]),c<p&&(g[t][c]=0)):t!==c?(t<d&&(y[t][c]=0),c<p&&(g[t][c]=m[t][c])):(t<d&&(y[t][c]=m[t][c]),c<p&&(g[t][c]=1));var E=new l({data:g,size:v}),C=new l({data:y,size:x}),T=[];for(t=0,h=b.length;t<h;t++)T[b[t]]=t;return{L:E,U:C,p:T,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}}));function cl(){return(cl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ll=Ot("qr",["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtract","complex"],(function(e){var t=e.matrix,n=e.zeros,r=e.identity,i=e.isZero,a=e.equal,o=e.sign,s=e.sqrt,u=e.conj,c=e.unaryMinus,l=e.addScalar,f=e.divideScalar,p=e.multiplyScalar,d=e.subtract,h=e.complex;return cl((0,e.typed)("qr",{DenseMatrix:function(e){return g(e)},SparseMatrix:function(e){return function(e){throw new Error("qr not implemented for sparse matrices yet")}()},Array:function(e){var n=g(t(e));return{Q:n.Q.valueOf(),R:n.R.valueOf()}}}),{_denseQRimpl:m});function m(e){var t,h,m,g=e._size[0],v=e._size[1],y=r([g],"dense"),x=y._data,b=e.clone(),w=b._data,N=n([g],"");for(m=0;m<Math.min(v,g);++m){var S=w[m][m],_=c(a(S,0)?1:o(S)),D=u(_),A=0;for(t=m;t<g;t++)A=l(A,p(w[t][m],u(w[t][m])));var M=p(_,s(A));if(!i(M)){var E=d(S,M);for(N[m]=1,t=m+1;t<g;t++)N[t]=f(w[t][m],E);var C=c(u(f(E,M))),T=void 0;for(h=m;h<v;h++){for(T=0,t=m;t<g;t++)T=l(T,p(u(N[t]),w[t][h]));for(T=p(T,C),t=m;t<g;t++)w[t][h]=p(d(w[t][h],p(N[t],T)),D)}for(t=0;t<g;t++){for(T=0,h=m;h<g;h++)T=l(T,p(x[t][h],N[h]));for(T=p(T,C),h=m;h<g;++h)x[t][h]=f(d(x[t][h],p(T,u(N[h]))),D)}}}return{Q:y,R:b,toString:function(){return"Q: "+this.Q.toString()+"\nR: "+this.R.toString()}}}function g(e){var t=m(e),n=t.R._data;if(e._data.length>0)for(var r="Complex"===n[0][0].type?h(0):0,i=0;i<n.length;++i)for(var a=0;a<i&&a<(n[0]||[]).length;++a)n[i][a]=r;return t}}));function fl(e,t,n,r,i,a,o){var s=0;for(n[o]=e;s>=0;){var u=n[o+s],c=n[r+u];-1===c?(s--,a[t++]=u):(n[r+u]=n[i+c],n[o+ ++s]=c)}return t}function pl(e){return-e-2}var dl=Ot("csAmd",["add","multiply","transpose"],(function(e){var t=e.add,n=e.multiply,r=e.transpose;return function(e,o){if(!o||e<=0||e>3)return null;var s=o._size,u=s[0],c=s[1],l=0,f=Math.max(16,10*Math.sqrt(c)),p=function(e,i,a,o,s){var u=r(i);if(1===e&&o===a)return t(i,u);if(2===e){for(var c=u._index,l=u._ptr,f=0,p=0;p<a;p++){var d=l[p];if(l[p]=f,!(l[p+1]-d>s))for(var h=l[p+1];d<h;d++)c[f++]=c[d]}return l[a]=f,i=r(u),n(u,i)}return n(u,i)}(e,o,u,c,f=Math.min(c-2,f));!function(e,t,n){for(var r=e._values,i=e._index,a=e._ptr,o=e._size[1],s=0,u=0;u<o;u++){var c=a[u];for(a[u]=s;c<a[u+1];c++)t(i[c],u,r?r[c]:1,null)&&(i[s]=i[c],r&&(r[s]=r[c]),s++)}a[o]=s,i.splice(s,i.length-s),r&&r.splice(s,r.length-s)}(p,a);for(var d,h,m,g,v,y,x,b,w,N,S,_,D,A,M,E,C=p._index,T=p._ptr,R=T[c],I=[],O=[],P=c+1,F=2*(c+1),L=3*(c+1),k=4*(c+1),B=5*(c+1),V=6*(c+1),q=7*(c+1),z=I,G=function(e,t,n,r,a,o,s,u,c,l,f,p){for(var d=0;d<e;d++)n[0+d]=t[d+1]-t[d];n[0+e]=0;for(var h=0;h<=e;h++)n[a+h]=-1,o[h]=-1,n[s+h]=-1,n[u+h]=-1,n[c+h]=1,n[l+h]=1,n[f+h]=0,n[p+h]=n[0+h];var m=i(0,0,n,l,e);return n[f+e]=-2,t[e]=-1,n[l+e]=0,m}(c,T,O,0,L,z,F,q,P,V,k,B),U=function(e,t,n,r,i,a,o,s,u,c,l){for(var f=0,p=0;p<e;p++){var d=n[r+p];if(0===d)n[i+p]=-2,f++,t[p]=-1,n[a+p]=0;else if(d>o)n[s+p]=0,n[i+p]=-1,f++,t[p]=pl(e),n[s+e]++;else{var h=n[u+d];-1!==h&&(c[h]=p),n[l+p]=n[u+d],n[u+d]=p}}return f}(c,T,O,B,k,V,f,P,L,z,F),j=0;U<c;){for(m=-1;j<c&&-1===(m=O[L+j]);j++);-1!==O[F+m]&&(z[O[F+m]]=-1),O[L+j]=O[F+m];var Y=O[k+m],H=O[P+m];U+=H;var K=0;O[P+m]=-H;var Q=T[m],W=0===Y?Q:R,$=W;for(g=1;g<=Y+1;g++){for(g>Y?(y=m,x=Q,b=O[0+m]-Y):(x=T[y=C[Q++]],b=O[0+y]),v=1;v<=b;v++)(w=O[P+(d=C[x++])])<=0||(K+=w,O[P+d]=-w,C[$++]=d,-1!==O[F+d]&&(z[O[F+d]]=z[d]),-1!==z[d]?O[F+z[d]]=O[F+d]:O[L+O[B+d]]=O[F+d]);y!==m&&(T[y]=pl(m),O[V+y]=0)}for(0!==Y&&(R=$),O[B+m]=K,T[m]=W,O[0+m]=$-W,O[k+m]=-2,G=i(G,l,O,V,c),N=W;N<$;N++)if(!((S=O[k+(d=C[N])])<=0)){var X=G-(w=-O[P+d]);for(Q=T[d],_=T[d]+S-1;Q<=_;Q++)O[V+(y=C[Q])]>=G?O[V+y]-=w:0!==O[V+y]&&(O[V+y]=O[B+y]+X)}for(N=W;N<$;N++){for(D=(_=T[d=C[N]])+O[k+d]-1,A=_,M=0,E=0,Q=_;Q<=D;Q++)if(0!==O[V+(y=C[Q])]){var Z=O[V+y]-G;Z>0?(E+=Z,C[A++]=y,M+=y):(T[y]=pl(m),O[V+y]=0)}O[k+d]=A-_+1;var J=A,ee=_+O[0+d];for(Q=D+1;Q<ee;Q++){var te=O[P+(h=C[Q])];te<=0||(E+=te,C[A++]=h,M+=h)}0===E?(T[d]=pl(m),K-=w=-O[P+d],H+=w,U+=w,O[P+d]=0,O[k+d]=-1):(O[B+d]=Math.min(O[B+d],E),C[A]=C[J],C[J]=C[_],C[_]=m,O[0+d]=A-_+1,O[F+d]=O[q+(M=(M<0?-M:M)%c)],O[q+M]=d,z[d]=M)}for(O[B+m]=K,G=i(G+(l=Math.max(l,K)),l,O,V,c),N=W;N<$;N++)if(!(O[P+(d=C[N])]>=0))for(d=O[q+(M=z[d])],O[q+M]=-1;-1!==d&&-1!==O[F+d];d=O[F+d],G++){for(b=O[0+d],S=O[k+d],Q=T[d]+1;Q<=T[d]+b-1;Q++)O[V+C[Q]]=G;var ne=d;for(h=O[F+d];-1!==h;){var re=O[0+h]===b&&O[k+h]===S;for(Q=T[h]+1;re&&Q<=T[h]+b-1;Q++)O[V+C[Q]]!==G&&(re=0);re?(T[h]=pl(d),O[P+d]+=O[P+h],O[P+h]=0,O[k+h]=-1,O[F+ne]=h=O[F+h]):(ne=h,h=O[F+h])}}for(Q=W,N=W;N<$;N++)(w=-O[P+(d=C[N])])<=0||(O[P+d]=w,E=O[B+d]+K-w,-1!==O[L+(E=Math.min(E,c-U-w))]&&(z[O[L+E]]=d),O[F+d]=O[L+E],z[d]=-1,O[L+E]=d,j=Math.min(j,E),O[B+d]=E,C[Q++]=d);O[P+m]=H,0==(O[0+m]=Q-W)&&(T[m]=-1,O[V+m]=0),0!==Y&&(R=Q)}for(d=0;d<c;d++)T[d]=pl(T[d]);for(h=0;h<=c;h++)O[L+h]=-1;for(h=c;h>=0;h--)O[P+h]>0||(O[F+h]=O[L+T[h]],O[L+T[h]]=h);for(y=c;y>=0;y--)O[P+y]<=0||-1!==T[y]&&(O[F+y]=O[L+T[y]],O[L+T[y]]=y);for(m=0,d=0;d<=c;d++)-1===T[d]&&(m=fl(d,m,O,L,F,I,V));return I.splice(I.length-1,1),I};function i(e,t,n,r,i){if(e<2||e+t<0){for(var a=0;a<i;a++)0!==n[r+a]&&(n[r+a]=1);e=2}return e}function a(e,t){return e!==t}}));function hl(e,t,n,r,i,a,o){var s,u,c,l=0;if(e<=t||n[r+t]<=n[i+e])return-1;n[i+e]=n[r+t];var f=n[a+e];if(n[a+e]=t,-1===f)l=1,c=e;else{for(l=2,c=f;c!==n[o+c];c=n[o+c]);for(s=f;s!==c;s=u)u=n[o+s],n[o+s]=c}return{jleaf:l,q:c}}var ml=Ot("csCounts",["transpose"],(function(e){var t=e.transpose;return function(e,n,r,i){if(!e||!n||!r)return null;var a,o,s,u,c,l,f=e._size,p=f[0],d=f[1],h=4*d+(i?d+p+1:0),m=[],g=d,v=2*d,y=3*d,x=4*d,b=5*d+1;for(s=0;s<h;s++)m[s]=-1;var w=[],N=t(e),S=N._index,_=N._ptr;for(s=0;s<d;s++)for(w[o=r[s]]=-1===m[y+o]?1:0;-1!==o&&-1===m[y+o];o=n[o])m[y+o]=s;if(i){for(s=0;s<d;s++)m[r[s]]=s;for(a=0;a<p;a++){for(s=d,l=_[a+1],c=_[a];c<l;c++)s=Math.min(s,m[S[c]]);m[b+a]=m[x+s],m[x+s]=a}}for(a=0;a<d;a++)m[0+a]=a;for(s=0;s<d;s++){for(-1!==n[o=r[s]]&&w[n[o]]--,u=i?m[x+s]:o;-1!==u;u=i?m[b+u]:-1)for(c=_[u];c<_[u+1];c++){var D=hl(a=S[c],o,m,y,g,v,0);D.jleaf>=1&&w[o]++,2===D.jleaf&&w[D.q]--}-1!==n[o]&&(m[0+o]=n[o])}for(o=0;o<d;o++)-1!==n[o]&&(w[n[o]]+=w[o]);return w}})),gl=Ot("csSqr",["add","multiply","transpose"],(function(e){var t=e.transpose,n=dl({add:e.add,multiply:e.multiply,transpose:t}),r=ml({transpose:t});return function(e,t,i){var a,o=t._ptr,s=t._size[1],u={};if(u.q=n(e,t),e&&!u.q)return null;if(i){var c=e?function(e,t,n,r){for(var i=e._index,a=e._ptr,o=e._size,s=e._datatype,u=o[0],c=o[1],l=[],f=[],p=0,d=0;d<c;d++){f[d]=p;for(var h=n?n[d]:d,m=a[h+1],g=a[h];g<m;g++)l[p]=i[g],p++}return f[c]=p,e.createSparseMatrix({values:null,index:l,ptr:f,size:[u,c],datatype:s})}(t,0,u.q):t;u.parent=function(e,t){if(!e)return null;var n,r,i=e._index,a=e._ptr,o=e._size,s=o[0],u=o[1],c=[],l=[],f=u;for(n=0;n<s;n++)l[f+n]=-1;for(var p=0;p<u;p++){c[p]=-1,l[0+p]=-1;for(var d=a[p+1],h=a[p];h<d;h++){var m=i[h];for(n=l[f+m];-1!==n&&n<p;n=r)r=l[0+n],l[0+n]=p,-1===r&&(c[n]=p);l[f+m]=p}}return c}(c);var l=function(e,t){if(!e)return null;var n,r=0,i=[],a=[],o=t,s=2*t;for(n=0;n<t;n++)a[0+n]=-1;for(n=t-1;n>=0;n--)-1!==e[n]&&(a[o+n]=a[0+e[n]],a[0+e[n]]=n);for(n=0;n<t;n++)-1===e[n]&&(r=fl(n,r,a,0,o,i,s));return i}(u.parent,s);if(u.cp=r(c,u.parent,l,1),c&&u.parent&&u.cp&&function(e,t){var n=e._ptr,r=e._index,i=e._size,a=i[0],o=i[1];t.pinv=[],t.leftmost=[];var s,u,c,l,f=t.parent,p=t.pinv,d=t.leftmost,h=[],m=a,g=a+o,v=a+2*o;for(u=0;u<o;u++)h[m+u]=-1,h[g+u]=-1,h[v+u]=0;for(s=0;s<a;s++)d[s]=-1;for(u=o-1;u>=0;u--)for(l=n[u+1],c=n[u];c<l;c++)d[r[c]]=u;for(s=a-1;s>=0;s--)p[s]=-1,-1!==(u=d[s])&&(0==h[v+u]++&&(h[g+u]=s),h[0+s]=h[m+u],h[m+u]=s);for(t.lnz=0,t.m2=a,u=0;u<o;u++)if(s=h[m+u],t.lnz++,s<0&&(s=t.m2++),p[s]=u,!(--v[u]<=0)){t.lnz+=h[v+u];var y=f[u];-1!==y&&(0===h[v+y]&&(h[g+y]=h[g+u]),h[0+h[g+u]]=h[m+y],h[m+y]=h[0+s],h[v+y]+=h[v+u])}for(s=0;s<a;s++)p[s]<0&&(p[s]=u++);return!0}(c,u))for(u.unz=0,a=0;a<s;a++)u.unz+=u.cp[a]}else u.unz=4*o[s]+s,u.lnz=u.unz;return u}}));function vl(e,t){return e[t]<0}function yl(e,t){e[t]=pl(e[t])}function xl(e){return e<0?pl(e):e}function bl(e,t,n,r,i){var a,o,s,u=t._index,c=t._ptr,l=t._size[1],f=0;for(r[0]=e;f>=0;){e=r[f];var p=i?i[e]:e;vl(c,e)||(yl(c,e),r[l+f]=p<0?0:xl(c[p]));var d=1;for(o=r[l+f],s=p<0?0:xl(c[p+1]);o<s;o++)if(!vl(c,a=u[o])){r[l+f]=o,r[++f]=a,d=0;break}d&&(f--,r[--n]=e)}return n}var wl=Ot("csSpsolve",["divideScalar","multiply","subtract"],(function(e){var t=e.divideScalar,n=e.multiply,r=e.subtract;return function(e,i,a,o,s,u,c){var l,f,p,d,h=e._values,m=e._index,g=e._ptr,v=e._size[1],y=i._values,x=i._index,b=i._ptr,w=function(e,t,n,r,i){var a,o,s=e._ptr,u=t._index,c=t._ptr,l=e._size[1],f=l;for(o=c[n+1],a=c[n];a<o;a++){var p=u[a];vl(s,p)||(f=bl(p,e,f,r,i))}for(a=f;a<l;a++)yl(s,r[a]);return f}(e,i,a,o,u);for(l=w;l<v;l++)s[o[l]]=0;for(p=b[a+1],l=f=b[a];l<p;l++)s[x[l]]=y[l];for(var N=w;N<v;N++){var S=o[N],_=u?u[S]:S;if(!(_<0))for(f=g[_],p=g[_+1],s[S]=t(s[S],h[c?f:p-1]),l=c?f+1:f,d=c?p:p-1;l<d;l++){var D=m[l];s[D]=r(s[D],n(h[l],s[S]))}}return w}})),Nl=Ot("csLu",["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],(function(e){var t=e.abs,n=e.divideScalar,r=e.multiply,i=e.larger,a=e.largerEq,o=e.SparseMatrix,s=wl({divideScalar:n,multiply:r,subtract:e.subtract});return function(e,u,c){if(!e)return null;var l,f=e._size[1],p=100,d=100;u&&(l=u.q,p=u.lnz||p,d=u.unz||d);var h,m,g=[],v=[],y=[],x=new o({values:g,index:v,ptr:y,size:[f,f]}),b=[],w=[],N=[],S=new o({values:b,index:w,ptr:N,size:[f,f]}),_=[],D=[],A=[];for(h=0;h<f;h++)D[h]=0,_[h]=-1,y[h+1]=0;p=0,d=0;for(var M=0;M<f;M++){y[M]=p,N[M]=d;var E=l?l[M]:M,C=s(x,e,E,A,D,_,1),T=-1,R=-1;for(m=C;m<f;m++)if(_[h=A[m]]<0){var I=t(D[h]);i(I,R)&&(R=I,T=h)}else w[d]=_[h],b[d++]=D[h];if(-1===T||R<=0)return null;_[E]<0&&a(t(D[E]),r(R,c))&&(T=E);var O=D[T];for(w[d]=M,b[d++]=O,_[T]=M,v[p]=T,g[p++]=1,m=C;m<f;m++)_[h=A[m]]<0&&(v[p]=h,g[p++]=n(D[h],O)),D[h]=0}for(y[f]=p,N[f]=d,m=0;m<p;m++)v[m]=_[v[m]];return g.splice(p,g.length-p),v.splice(p,v.length-p),b.splice(d,b.length-d),w.splice(d,w.length-d),{L:x,U:S,pinv:_}}})),Sl=Ot("slu",["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],(function(e){var t=e.typed,n=e.abs,r=e.multiply,i=e.divideScalar,a=e.subtract,o=e.larger,s=e.largerEq,u=e.SparseMatrix,c=gl({add:e.add,multiply:r,transpose:e.transpose}),l=Nl({abs:n,divideScalar:i,multiply:r,subtract:a,larger:o,largerEq:s,SparseMatrix:u});return t("slu",{"SparseMatrix, number, number":function(e,t,n){if(!Ve(t)||t<0||t>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(n<0||n>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var r=c(t,e,!1),i=l(e,r,n);return{L:i.L,U:i.U,p:i.pinv,q:r.q,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\np: "+this.p.toString()+(this.q?"\nq: "+this.q.toString():"")+"\n"}}}})}));function _l(e,t){var n,r=t.length,i=[];if(e)for(n=0;n<r;n++)i[e[n]]=t[n];else for(n=0;n<r;n++)i[n]=t[n];return i}var Dl=Ot("lusolve",["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.lup,i=e.slu,a=e.usolve,o=e.lsolve,s=Us({DenseMatrix:e.DenseMatrix});return t("lusolve",{"Array, Array | Matrix":function(e,t){e=n(e);var i=r(e);return c(i.L,i.U,i.p,null,t).valueOf()},"DenseMatrix, Array | Matrix":function(e,t){var n=r(e);return c(n.L,n.U,n.p,null,t)},"SparseMatrix, Array | Matrix":function(e,t){var n=r(e);return c(n.L,n.U,n.p,null,t)},"SparseMatrix, Array | Matrix, number, number":function(e,t,n,r){var a=i(e,n,r);return c(a.L,a.U,a.p,a.q,t)},"Object, Array | Matrix":function(e,t){return c(e.L,e.U,e.p,e.q,t)}});function u(e){if(Y(e))return e;if(j(e))return n(e);throw new TypeError("Invalid Matrix LU decomposition")}function c(e,t,n,r,i){e=u(e),t=u(t),i=s(e,i,!1),n&&(i._data=_l(n,i._data));var c=o(e,i),l=a(t,c);return r&&(l._data=_l(r,l._data)),l}})),Al=Ot("Help",["parse"],(function(e){var t=e.parse;function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!e)throw new Error('Argument "doc" missing');this.doc=e}return n.prototype.type="Help",n.prototype.isHelp=!0,n.prototype.toString=function(){var e=this.doc||{},n="\n";if(e.name&&(n+="Name: "+e.name+"\n\n"),e.category&&(n+="Category: "+e.category+"\n\n"),e.description&&(n+="Description:\n    "+e.description+"\n\n"),e.syntax&&(n+="Syntax:\n    "+e.syntax.join("\n    ")+"\n\n"),e.examples){n+="Examples:\n";for(var r={},i=0;i<e.examples.length;i++){var a=e.examples[i];n+="    "+a+"\n";var o=void 0;try{o=t(a).compile().evaluate(r)}catch(e){o=e}void 0===o||J(o)||(n+="        "+lt(o,{precision:14})+"\n")}n+="\n"}return e.seealso&&e.seealso.length&&(n+="See also: "+e.seealso.join(", ")+"\n"),n},n.prototype.toJSON=function(){var e=_e(this.doc);return e.mathjs="Help",e},n.fromJSON=function(e){var t={};for(var r in e)"mathjs"!==r&&(t[r]=e[r]);return new n(t)},n.prototype.valueOf=n.prototype.toString,n}),{isClass:!0}),Ml=Ot("Chain",["?on","math"],(function(e){var t=e.on,n=e.math;function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.value=we(e)?e.value:e}function i(e,t){Ee(r.prototype,e,(function(){var e=t();if("function"==typeof e)return a(e)}))}function a(e){return function(){for(var t=[this.value],n=0;n<arguments.length;n++)t[n+1]=arguments[n];return new r(e.apply(e,t))}}r.prototype.type="Chain",r.prototype.isChain=!0,r.prototype.done=function(){return this.value},r.prototype.valueOf=function(){return this.value},r.prototype.toString=function(){return lt(this.value)},r.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},r.fromJSON=function(e){return new r(e.value)},r.createProxy=function(e,t){if("string"==typeof e)!function(e,t){"function"==typeof t&&(r.prototype[e]=a(t))}(e,t);else{var n=function(t){Te(e,t)&&void 0===o[t]&&i(t,(function(){return e[t]}))};for(var s in e)n(s)}};var o={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return r.createProxy(n),t&&t("import",(function(e,t,n){n||i(e,t)})),r}),{isClass:!0}),El={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},Cl={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate([expr1, expr2, expr3, ...])"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(" + 4 + ")")'],seealso:[]},Tl={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},Rl={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},Il={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},Ol={bignumber:{name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","complex","fraction","index","matrix","string","unit"]},boolean:{name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},complex:{name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},createUnit:{name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},fraction:{name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(num,den)"],description:"Create a fraction from a number or from a numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},index:{name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["[]","[1, 2, 3]","A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[0:2, 0:2] = ones(2, 2)"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]},matrix:{name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},number:{name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","boolean","complex","fraction","index","matrix","string","unit"]},sparse:{name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},splitUnit:{name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},string:{name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},unit:{name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},e:Rl,E:Rl,false:{name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},i:{name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},Infinity:{name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},LN2:{name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},LN10:{name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},LOG2E:{name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},LOG10E:{name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},NaN:{name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},null:{name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},pi:Tl,PI:Tl,phi:{name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},SQRT1_2:{name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},SQRT2:{name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},tau:{name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},true:{name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},version:{name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Borh magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Borh radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:{name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},lsolve:{name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Solves the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lup","lusolve","usolve","matrix","sparse"]},lup:{name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},lusolve:{name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},simplify:{name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["derivative","parse","evaluate"]},rationalize:{name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},slu:{name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},usolve:{name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Solves the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["lup","lusolve","lsolve","matrix","sparse"]},qr:{name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},abs:{name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},add:{name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},cbrt:{name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},ceil:{name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]},cube:{name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},divide:{name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},dotDivide:{name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},dotMultiply:{name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},dotPow:{name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},exp:{name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},expm:{name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},expm1:{name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},fix:{name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]},floor:{name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]},gcd:{name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},hypot:{name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenusa of a list with values. ",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},lcm:{name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},log:{name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},log2:{name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},log1p:{name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},log10:{name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},mod:{name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},multiply:{name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},norm:{name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},nthRoot:{name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},nthRoots:{name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},pow:{name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},round:{name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)"],seealso:["ceil","floor","fix"]},sign:{name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},sqrt:{name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},sqrtm:{name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[1, 2], [3, 4]])"],seealso:["sqrt","abs","square","multiply"]},square:{name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},subtract:{name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},unaryMinus:{name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},unaryPlus:{name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},xgcd:{name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},bitAnd:{name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},bitNot:{name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},bitOr:{name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},bitXor:{name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},leftShift:{name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},rightArithShift:{name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},rightLogShift:{name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},bellNumbers:{name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},catalan:{name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},composition:{name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},stirlingS2:{name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},config:{name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},import:{name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},typed:{name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number, number": f(x)=x+x })',"double(2)",'double("hello")'],seealso:[]},arg:{name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},conj:{name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},re:{name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},im:{name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},evaluate:Cl,eval:Cl,help:{name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},distance:{name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},intersect:{name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},and:{name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},not:{name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},or:{name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},xor:{name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},concat:{name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},cross:{name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},column:{name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row"]},ctranspose:{name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},det:{name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},diag:{name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},dot:{name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},getMatrixDataType:{name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},identity:{name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},filter:{name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},flatten:{name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},forEach:{name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["forEach([1, 2, 3], function(val) { console.log(val) })"],seealso:["map","sort","filter"]},inv:{name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},eigs:{name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and eigenvectors of a real symmetric matrix",examples:["eigs([[5, 2.3], [2.3, 1]])"],seealso:["inv"]},kron:{name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},map:{name:"map",category:"Matrix",syntax:["map(x, callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.",examples:["map([1, 2, 3], square)"],seealso:["filter","forEach"]},ones:{name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},partitionSelect:{name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1)'],seealso:["sort"]},range:{name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},resize:{name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},reshape:{name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])"],seealso:["size","squeeze","resize"]},row:{name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column"]},size:{name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},sort:{name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"])',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},squeeze:{name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},subset:{name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of a matrix or string. Indexes are one-based. Both the ranges lower-bound and upper-bound are included.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},trace:{name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},transpose:{name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},zeros:{name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},combinations:{name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},combinationsWithRep:{name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},factorial:{name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},gamma:{name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},kldivergence:{name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},multinomial:{name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},permutations:{name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},pickRandom:{name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},random:{name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},randomInt:{name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},compare:{name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},compareNatural:{name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},compareText:{name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},deepEqual:{name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},equal:{name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},equalText:{name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},larger:{name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},largerEq:{name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},smaller:{name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},smallerEq:{name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},unequal:{name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},setCartesian:{name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},setDifference:{name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},setDistinct:{name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},setIntersect:{name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},setIsSubset:{name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},setMultiplicity:{name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},setPowerset:{name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},setSize:{name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},setSymDifference:{name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},setUnion:{name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},erf:{name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},mad:{name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},max:{name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dim)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},mean:{name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dim)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},median:{name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},min:{name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dim)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},mode:{name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},prod:{name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},quantileSeq:{name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:"Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probablity are: Number, BigNumber. \n\nIn case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.",examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},std:{name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},sum:{name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]},variance:Il,var:Il,acos:{name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},acosh:{name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},acot:{name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},acoth:{name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the hyperbolic arccotangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},acsc:{name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},acsch:{name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the hyperbolic arccosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},asec:{name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},asech:{name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},asin:{name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},asinh:{name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},atan:{name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},atanh:{name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},atan2:{name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},cos:{name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},cosh:{name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},cot:{name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},coth:{name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},csc:{name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},csch:{name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},sec:{name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},sech:{name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},sin:{name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},sinh:{name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},tan:{name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},tanh:{name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},to:{name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},clone:{name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},format:{name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},isNaN:{name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},isInteger:{name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},isNegative:{name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},isNumeric:{name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},hasNumericValue:{name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},isPositive:{name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},isPrime:{name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},isZero:{name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},typeOf:El,typeof:El,numeric:{name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "BigNumber")','numeric("4", "Fraction)','numeric(4, "Fraction")','numeric(fraction(2, 5), "number)'],seealso:["number","fraction","bignumber","string","format"]}},Pl=Ot("help",["typed","mathWithTransform","Help"],(function(e){var t=e.mathWithTransform,n=e.Help;return(0,e.typed)("help",{any:function(e){var r,i=e;if("string"!=typeof e)for(r in t)if(Te(t,r)&&e===t[r]){i=r;break}var a=es(Ol,i);if(!a)throw new Error('No documentation found on "'+("function"==typeof i?i.name:i)+'"');return new n(a)}})})),Fl=Ot("chain",["typed","Chain"],(function(e){var t=e.Chain;return(0,e.typed)("chain",{"":function(){return new t},any:function(e){return new t(e)}})})),Ll=Ot("det",["typed","matrix","subtract","multiply","unaryMinus","lup"],(function(e){var t=e.matrix,n=e.subtract,r=e.multiply,i=e.unaryMinus,a=e.lup;return(0,e.typed)("det",{any:function(e){return _e(e)},"Array | Matrix":function(e){var o;switch((o=Y(e)?e.size():Array.isArray(e)?(e=t(e)).size():[]).length){case 0:return _e(e);case 1:if(1===o[0])return _e(e.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+lt(o)+")");case 2:var s=o[0];if(s===o[1])return function(e,t,o){if(1===t)return _e(e[0][0]);if(2===t)return n(r(e[0][0],e[1][1]),r(e[1][0],e[0][1]));for(var s=a(e),u=s.U[0][0],c=1;c<t;c++)u=r(u,s.U[c][c]);for(var l=0,f=0,p=[];;){for(;p[f];)f++;if(f>=t)break;for(var d=f,h=0;!p[s.p[d]];)p[s.p[d]]=!0,d=s.p[d],h++;h%2==0&&l++}return l%2==0?u:i(u)}(e.clone().valueOf(),s);throw new RangeError("Matrix must be square (size: "+lt(o)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+lt(o)+")")}}})})),kl=Ot("inv",["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],(function(e){var t=e.matrix,n=e.divideScalar,r=e.addScalar,i=e.multiply,a=e.unaryMinus,o=e.det,s=e.identity,u=e.abs;return(0,e.typed)("inv",{"Array | Matrix":function(e){var r=Y(e)?e.size():gt(e);switch(r.length){case 1:if(1===r[0])return Y(e)?t([n(1,e.valueOf()[0])]):[n(1,e[0])];throw new RangeError("Matrix must be square (size: "+lt(r)+")");case 2:var i=r[0],a=r[1];if(i===a)return Y(e)?t(c(e.valueOf(),i,a),e.storage()):c(e,i,a);throw new RangeError("Matrix must be square (size: "+lt(r)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+lt(r)+")")}},any:function(e){return n(1,e)}});function c(e,t,c){var l,f,p,d,h;if(1===t){if(0===(d=e[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,d)]]}if(2===t){var m=o(e);if(0===m)throw Error("Cannot calculate inverse, determinant is zero");return[[n(e[1][1],m),n(a(e[0][1]),m)],[n(a(e[1][0]),m),n(e[0][0],m)]]}var g=e.concat();for(l=0;l<t;l++)g[l]=g[l].concat();for(var v=s(t).valueOf(),y=0;y<c;y++){var x=u(g[y][y]),b=y;for(l=y+1;l<t;)u(g[l][y])>x&&(x=u(g[l][y]),b=l),l++;if(0===x)throw Error("Cannot calculate inverse, determinant is zero");(l=b)!==y&&(h=g[y],g[y]=g[l],g[l]=h,h=v[y],v[y]=v[l],v[l]=h);var w=g[y],N=v[y];for(l=0;l<t;l++){var S=g[l],_=v[l];if(l!==y){if(0!==S[y]){for(p=n(a(S[y]),w[y]),f=y;f<c;f++)S[f]=r(S[f],i(p,w[f]));for(f=0;f<c;f++)_[f]=r(_[f],i(p,N[f]))}}else{for(p=w[y],f=y;f<c;f++)S[f]=n(S[f],p);for(f=0;f<c;f++)_[f]=n(_[f],p)}}}return v}})),Bl=Ot("eigs",["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","inv","bignumber","multiply","add"],(function(e){var t=e.config,n=e.matrix,r=e.addScalar,i=e.subtract,a=e.equal,o=e.abs,s=e.atan,u=e.cos,c=e.sin,l=e.multiplyScalar,f=e.inv,p=e.bignumber,d=e.multiply,h=e.add;function m(e,n){var r=e.datatype();if(void 0===r&&(r=e.getDataType()),"number"!==r&&"BigNumber"!==r&&"Fraction"!==r)throw"mixed"===r?new TypeError("Mixed matrix element type is not supported"):new TypeError("Matrix element type not supported ("+r+")");if(function(e,t){for(var n=0;n<t;n++)for(var r=n;r<t;r++)if(!a(e[n][r],e[r][n]))throw new TypeError("Input matrix is not symmetric")}(e.toArray(),n),"number"===r)return g(e.toArray());if("Fraction"===r){for(var u=e.toArray(),c=0;c<n;c++)for(var h=c;h<n;h++)u[c][h]=u[c][h].valueOf(),u[h][c]=u[c][h];return g(e.toArray())}return"BigNumber"===r?function(e){for(var n,r=e.length,a=o(t.epsilon/r),u=new Array(r),c=0;c<r;c++)u[c]=_(r,0),u[c][c]=1;for(var h,m,g=N(e);o(g[1])>=o(a);){var v=g[0][0],b=g[0][1];h=e[v][b],m=i(e[b][b],e[v][v]),e=x(e,n=o(m)<=t.epsilon?p(-1).acos().div(4):l(.5,s(d(2,h,f(m)))),v,b),u=y(u,n,v,b),g=N(e)}for(var w=_(r,0),D=0;D<r;D++)w[D]=e[D][D];return S(_e(w),_e(u))}(e.toArray()):void 0}function g(e){for(var n,r=e.length,i=Math.abs(t.epsilon/r),a=new Array(r),o=0;o<r;o++)a[o]=_(r,0),a[o][o]=1;for(var s=w(e);Math.abs(s[1])>=Math.abs(i);){var u=s[0][0],c=s[0][1];e=b(e,(l=e[u][u],f=e[c][c],p=e[u][c],n=Math.abs(f-l)<=t.epsilon?Math.PI/4:.5*Math.atan(2*p/(f-l))),u,c),a=v(a,n,u,c),s=w(e)}for(var l,f,p,d=_(r,0),h=0;h<r;h++)d[h]=e[h][h];return S(_e(d),_e(a))}function v(e,t,n,r){for(var i=e.length,a=Math.cos(t),o=Math.sin(t),s=_(i,0),u=_(i,0),c=0;c<i;c++)s[c]=a*e[c][n]-o*e[c][r],u[c]=o*e[c][n]+a*e[c][r];for(var l=0;l<i;l++)e[l][n]=s[l],e[l][r]=u[l];return e}function y(e,t,n,a){for(var o=e.length,s=u(t),f=c(t),d=_(o,p(0)),h=_(o,p(0)),m=0;m<o;m++)d[m]=i(l(s,e[m][n]),l(f,e[m][a])),h[m]=r(l(f,e[m][n]),l(s,e[m][a]));for(var g=0;g<o;g++)e[g][n]=d[g],e[g][a]=h[g];return e}function x(e,t,n,a){for(var o=e.length,s=p(u(t)),f=p(c(t)),m=l(s,s),g=l(f,f),v=_(o,p(0)),y=_(o,p(0)),x=d(p(2),s,f,e[n][a]),b=r(i(l(m,e[n][n]),x),l(g,e[a][a])),w=h(l(g,e[n][n]),x,l(m,e[a][a])),N=0;N<o;N++)v[N]=i(l(s,e[n][N]),l(f,e[a][N])),y[N]=r(l(f,e[n][N]),l(s,e[a][N]));e[n][n]=b,e[a][a]=w,e[n][a]=p(0),e[a][n]=p(0);for(var S=0;S<o;S++)S!==n&&S!==a&&(e[n][S]=v[S],e[S][n]=v[S],e[a][S]=y[S],e[S][a]=y[S]);return e}function b(e,t,n,r){for(var i=e.length,a=Math.cos(t),o=Math.sin(t),s=a*a,u=o*o,c=_(i,0),l=_(i,0),f=s*e[n][n]-2*a*o*e[n][r]+u*e[r][r],p=u*e[n][n]+2*a*o*e[n][r]+s*e[r][r],d=0;d<i;d++)c[d]=a*e[n][d]-o*e[r][d],l[d]=o*e[n][d]+a*e[r][d];e[n][n]=f,e[r][r]=p,e[n][r]=0,e[r][n]=0;for(var h=0;h<i;h++)h!==n&&h!==r&&(e[n][h]=c[h],e[h][n]=c[h],e[r][h]=l[h],e[h][r]=l[h]);return e}function w(e){for(var t=e.length,n=0,r=[0,1],i=0;i<t;i++)for(var a=i+1;a<t;a++)Math.abs(n)<Math.abs(e[i][a])&&(n=Math.abs(e[i][a]),r=[i,a]);return[r,n]}function N(e){for(var t=e.length,n=0,r=[0,1],i=0;i<t;i++)for(var a=i+1;a<t;a++)o(n)<o(e[i][a])&&(n=o(e[i][a]),r=[i,a]);return[r,n]}function S(e,t){for(var n=e.length,r=Array(n),i=Array(n),a=0;a<n;a++)i[a]=Array(n);for(var o=0;o<n;o++){for(var s=0,u=e[0],c=0;c<e.length;c++)e[c]<u&&(u=e[s=c]);r[o]=e.splice(s,1)[0];for(var l=0;l<n;l++)i[l][o]=t[l][s],t[l].splice(s,1)}return[_e(r),_e(i)]}function _(e,t){for(var n=new Array(e),r=0;r<e;r++)n[r]=t;return n}return(0,e.typed)("eigs",{Array:function(e){var t=n(e),r=t.size();if(2!==r.length||r[0]!==r[1])throw new RangeError("Matrix must be square (size: "+lt(r)+")");var i=m(t,r[0]);return{values:i[0],vectors:i[1]}},Matrix:function(e){var t=e.size();if(2!==t.length||t[0]!==t[1])throw new RangeError("Matrix must be square (size: "+lt(t)+")");var r=m(e,t[0]);return{values:n(r[0]),vectors:n(r[1])}}})})),Vl=Ot("expm",["typed","abs","add","identity","inv","multiply"],(function(e){var t=e.abs,n=e.add,r=e.identity,i=e.inv,a=e.multiply;return(0,e.typed)("expm",{Matrix:function(e){var s=e.size();if(2!==s.length||s[0]!==s[1])throw new RangeError("Matrix must be square (size: "+lt(s)+")");for(var u=s[0],c=function(e,t){for(var n=0;n<30;n++)for(var r=0;r<=n;r++){var i=n-r;if(o(e,r,i)<1e-15)return{q:r,j:i}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}(function(e){for(var n=e.size()[0],r=0,i=0;i<n;i++){for(var a=0,o=0;o<n;o++)a+=t(e.get([i,o]));r=Math.max(a,r)}return r}(e)),l=c.q,f=c.j,p=a(e,Math.pow(2,-f)),d=r(u),h=r(u),m=1,g=p,v=-1,y=1;y<=l;y++)y>1&&(g=a(g,p),v=-v),d=n(d,a(m=m*(l-y+1)/((2*l-y+1)*y),g)),h=n(h,a(m*v,g));for(var x=a(i(h),d),b=0;b<f;b++)x=a(x,x);return Q(e)?e.createSparseMatrix(x):x}});function o(e,t,n){for(var r=1,i=2;i<=t;i++)r*=i;for(var a=r,o=t+1;o<=2*t;o++)a*=o;var s=a*(2*t+1);return 8*Math.pow(e/Math.pow(2,n),2*t)*r*r/(a*s)}})),ql=Ot("sqrtm",["typed","abs","add","multiply","sqrt","subtract","inv","size","max","identity"],(function(e){var t=e.abs,n=e.add,r=e.multiply,i=e.sqrt,a=e.subtract,o=e.inv,s=e.size,u=e.max,c=e.identity;function l(e){var i,l=0,f=e,p=c(s(e));do{var d=f;if(f=r(.5,n(d,o(p))),p=r(.5,n(p,o(d))),(i=u(t(a(f,d))))>1e-6&&++l>1e3)throw new Error("computing square root of matrix: iterative method could not converge")}while(i>1e-6);return f}return(0,e.typed)("sqrtm",{"Array | Matrix":function(e){var t=Y(e)?e.size():gt(e);switch(t.length){case 1:if(1===t[0])return i(e);throw new RangeError("Matrix must be square (size: "+lt(t)+")");case 2:if(t[0]===t[1])return l(e);throw new RangeError("Matrix must be square (size: "+lt(t)+")")}}})})),zl=Ot("divide",["typed","matrix","multiply","equalScalar","divideScalar","inv"],(function(e){var t=e.typed,n=e.matrix,r=e.multiply,i=e.divideScalar,a=e.inv,o=ka({typed:t,equalScalar:e.equalScalar}),s=Oa({typed:t});return t("divide",Ae({"Array | Matrix, Array | Matrix":function(e,t){return r(e,a(t))},"DenseMatrix, any":function(e,t){return s(e,t,i,!1)},"SparseMatrix, any":function(e,t){return o(e,t,i,!1)},"Array, any":function(e,t){return s(n(e),t,i,!1).valueOf()},"any, Array | Matrix":function(e,t){return r(e,a(t))}},i.signatures))})),Gl=Ot("distance",["typed","addScalar","subtract","divideScalar","multiplyScalar","unaryMinus","sqrt","abs"],(function(e){var t=e.addScalar,n=e.subtract,r=e.multiplyScalar,i=e.divideScalar,a=e.unaryMinus,o=e.sqrt,s=e.abs;return(0,e.typed)("distance",{"Array, Array, Array":function(e,t,o){if(2===e.length&&2===t.length&&2===o.length){if(!c(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(o))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");var s=i(n(o[1],o[0]),n(t[1],t[0])),u=r(r(s,s),t[0]),l=a(r(s,t[0]));return h(e[0],e[1],u,l,e[1])}throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(e,t,o){if(2===Object.keys(e).length&&2===Object.keys(t).length&&2===Object.keys(o).length){if(!c(e))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(t))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(o))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if("pointX"in e&&"pointY"in e&&"lineOnePtX"in t&&"lineOnePtY"in t&&"lineTwoPtX"in o&&"lineTwoPtY"in o){var s=i(n(o.lineTwoPtY,o.lineTwoPtX),n(t.lineOnePtY,t.lineOnePtX)),u=r(r(s,s),t.lineOnePtX),l=a(r(s,t.lineOnePtX));return h(e.pointX,e.pointY,u,l,e.pointX)}throw new TypeError("Key names do not match")}throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(e,t){if(2===e.length&&3===t.length){if(!c(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!l(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return h(e[0],e[1],t[0],t[1],t[2])}if(3===e.length&&6===t.length){if(!l(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!p(t))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return m(e[0],e[1],e[2],t[0],t[1],t[2],t[3],t[4],t[5])}if(e.length===t.length&&e.length>0){if(!f(e))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!f(t))throw new TypeError("All values of an array should be numbers or BigNumbers");return g(e,t)}throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(e,t){if(2===Object.keys(e).length&&3===Object.keys(t).length){if(!c(e))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!l(t))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in e&&"pointY"in e&&"xCoeffLine"in t&&"yCoeffLine"in t&&"constant"in t)return h(e.pointX,e.pointY,t.xCoeffLine,t.yCoeffLine,t.constant);throw new TypeError("Key names do not match")}if(3===Object.keys(e).length&&6===Object.keys(t).length){if(!l(e))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!p(t))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in e&&"pointY"in e&&"x0"in t&&"y0"in t&&"z0"in t&&"a"in t&&"b"in t&&"c"in t)return m(e.pointX,e.pointY,e.pointZ,t.x0,t.y0,t.z0,t.a,t.b,t.c);throw new TypeError("Key names do not match")}if(2===Object.keys(e).length&&2===Object.keys(t).length){if(!c(e))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(t))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in e&&"pointOneY"in e&&"pointTwoX"in t&&"pointTwoY"in t)return g([e.pointOneX,e.pointOneY],[t.pointTwoX,t.pointTwoY]);throw new TypeError("Key names do not match")}if(3===Object.keys(e).length&&3===Object.keys(t).length){if(!l(e))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!l(t))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in e&&"pointOneY"in e&&"pointOneZ"in e&&"pointTwoX"in t&&"pointTwoY"in t&&"pointTwoZ"in t)return g([e.pointOneX,e.pointOneY,e.pointOneZ],[t.pointTwoX,t.pointTwoY,t.pointTwoZ]);throw new TypeError("Key names do not match")}throw new TypeError("Invalid Arguments: Try again")},Array:function(e){if(!function(e){if(2===e[0].length&&u(e[0][0])&&u(e[0][1])){if(e.some((function(e){return 2!==e.length||!u(e[0])||!u(e[1])})))return!1}else{if(!(3===e[0].length&&u(e[0][0])&&u(e[0][1])&&u(e[0][2])))return!1;if(e.some((function(e){return 3!==e.length||!u(e[0])||!u(e[1])||!u(e[2])})))return!1}return!0}(e))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return function(e){for(var t=[],n=[],r=[],i=0;i<e.length-1;i++)for(var a=i+1;a<e.length;a++)2===e[0].length?(n=[e[i][0],e[i][1]],r=[e[a][0],e[a][1]]):3===e[0].length&&(n=[e[i][0],e[i][1],e[i][2]],r=[e[a][0],e[a][1],e[a][2]]),t.push(g(n,r));return t}(e)}});function u(e){return"number"==typeof e||V(e)}function c(e){return e.constructor!==Array&&(e=d(e)),u(e[0])&&u(e[1])}function l(e){return e.constructor!==Array&&(e=d(e)),u(e[0])&&u(e[1])&&u(e[2])}function f(e){return Array.isArray(e)||(e=d(e)),e.every(u)}function p(e){return e.constructor!==Array&&(e=d(e)),u(e[0])&&u(e[1])&&u(e[2])&&u(e[3])&&u(e[4])&&u(e[5])}function d(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;r++)n.push(e[t[r]]);return n}function h(e,n,a,u,c){var l=s(t(t(r(a,e),r(u,n)),c)),f=o(t(r(a,a),r(u,u)));return i(l,f)}function m(e,a,s,u,c,l,f,p,d){var h=[n(r(n(c,a),d),r(n(l,s),p)),n(r(n(l,s),f),r(n(u,e),d)),n(r(n(u,e),p),r(n(c,a),f))];h=o(t(t(r(h[0],h[0]),r(h[1],h[1])),r(h[2],h[2])));var m=o(t(t(r(f,f),r(p,p)),r(d,d)));return i(h,m)}function g(e,i){for(var a=e.length,s=0,u=0,c=0;c<a;c++)u=n(e[c],i[c]),s=t(r(u,u),s);return o(s)}})),Ul=Ot("intersect",["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar"],(function(e){var t=e.config,n=e.abs,r=e.add,i=e.addScalar,a=e.matrix,o=e.multiply,s=e.multiplyScalar,u=e.divideScalar,c=e.subtract,l=e.smaller,f=e.equalScalar,p=(0,e.typed)("intersect",{"Array, Array, Array":function(e,t,n){if(!m(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!m(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!function(e){return 4===e.length&&d(e[0])&&d(e[1])&&d(e[2])&&d(e[3])}(n))throw new TypeError("Array with 4 numbers expected as third argument");return function(e,t,n,r,a,o,l,f,p,d){var h=s(e,l),m=s(r,l),g=s(t,f),v=s(a,f),y=s(n,p),x=s(o,p),b=u(c(c(c(d,h),g),y),c(c(c(i(i(m,v),x),h),g),y));return[i(e,s(b,c(r,e))),i(t,s(b,c(a,t))),i(n,s(b,c(o,n)))]}(e[0],e[1],e[2],t[0],t[1],t[2],n[0],n[1],n[2],n[3])},"Array, Array, Array, Array":function(e,a,p,d){if(2===e.length){if(!h(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!h(a))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!h(p))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!h(d))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return function(e,a,f,p){var d=e,h=f,m=c(d,a),g=c(h,p),v=c(s(m[0],g[1]),s(g[0],m[1]));if(l(n(v),t.epsilon))return null;var y=s(g[0],d[1]),x=s(g[1],d[0]),b=s(g[0],h[1]),w=s(g[1],h[0]),N=u(i(c(c(y,x),b),w),v);return r(o(m,N),d)}(e,a,p,d)}if(3===e.length){if(!m(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!m(a))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!m(p))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!m(d))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return b=a[0],w=a[1],N=a[2],C=g(v=e[0],S=p[0],A=d[0],S,y=e[1],_=p[1],M=d[1],_,x=e[2],D=p[2],E=d[2],D),T=g(A,S,b,v,M,_,w,y,E,D,N,x),R=g(v,S,b,v,y,_,w,y,x,D,N,x),I=g(A,S,A,S,M,_,M,_,E,D,E,D),O=g(b,v,b,v,w,y,w,y,N,x,N,x),P=u(c(s(C,T),s(R,I)),c(s(O,I),s(T,T))),F=u(i(C,s(P,T)),I),L=i(v,s(P,c(b,v))),k=i(y,s(P,c(w,y))),B=i(x,s(P,c(N,x))),V=i(S,s(F,c(A,S))),q=i(_,s(F,c(M,_))),z=i(D,s(F,c(E,D))),f(L,V)&&f(k,q)&&f(B,z)?[L,k,B]:null}throw new TypeError("Arrays with two or thee dimensional points expected");var v,y,x,b,w,N,S,_,D,A,M,E,C,T,R,I,O,P,F,L,k,B,V,q,z},"Matrix, Matrix, Matrix":function(e,t,n){return a(p(e.valueOf(),t.valueOf(),n.valueOf()))},"Matrix, Matrix, Matrix, Matrix":function(e,t,n,r){return a(p(e.valueOf(),t.valueOf(),n.valueOf(),r.valueOf()))}});function d(e){return"number"==typeof e||V(e)}function h(e){return 2===e.length&&d(e[0])&&d(e[1])}function m(e){return 3===e.length&&d(e[0])&&d(e[1])&&d(e[2])}function g(e,t,n,r,a,o,u,l,f,p,d,h){var m=s(c(e,t),c(n,r)),g=s(c(a,o),c(u,l)),v=s(c(f,p),c(d,h));return i(i(m,g),v)}return p})),jl=Ot("sum",["typed","config","add","?bignumber","?fraction"],(function(e){var t=e.config,n=e.add,r=e.bignumber,i=e.fraction;return(0,e.typed)("sum",{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(e,t){try{return Rr(e,t,n)}catch(e){throw Ns(e,"sum")}},"...":function(e){if(Er(e))throw new TypeError("Scalar values expected in function sum");return a(e)}});function a(e){var a;if(Cr(e,(function(e){try{a=void 0===a?e:n(a,e)}catch(t){throw Ns(t,"sum",e)}})),void 0===a)switch(t.number){case"number":return 0;case"BigNumber":return r?r(0):Uo();case"Fraction":return i?i(0):jo();default:return 0}return a}})),Yl=Ot("mean",["typed","add","divide"],(function(e){var t=e.add,n=e.divide;return(0,e.typed)("mean",{"Array | Matrix":r,"Array | Matrix, number | BigNumber":function(e,r){try{var i=Rr(e,r,t),a=Array.isArray(e)?gt(e):e.size();return n(i,a[r])}catch(e){throw Ns(e,"mean")}},"...":function(e){if(Er(e))throw new TypeError("Scalar values expected in function mean");return r(e)}});function r(e){var r,i=0;if(Cr(e,(function(e){try{r=void 0===r?e:t(r,e),i++}catch(t){throw Ns(t,"mean",e)}})),0===i)throw new Error("Cannot calculate the mean of an empty array");return n(r,i)}})),Hl=Ot("median",["typed","add","divide","compare","partitionSelect"],(function(e){var t=e.typed,n=e.add,r=e.divide,i=e.compare,a=e.partitionSelect,o=t("median",{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(e,t){throw new Error("median(A, dim) is not yet supported")},"...":function(e){if(Er(e))throw new TypeError("Scalar values expected in function median");return s(e)}});function s(e){try{var t=(e=St(e.valueOf())).length;if(0===t)throw new Error("Cannot calculate median of an empty array");if(t%2==0){for(var n=t/2-1,r=a(e,n+1),o=e[n],s=0;s<n;++s)i(e[s],o)>0&&(o=e[s]);return c(o,r)}var l=a(e,(t-1)/2);return u(l)}catch(e){throw Ns(e,"median")}}var u=t({"number | BigNumber | Complex | Unit":function(e){return e}}),c=t({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(e,t){return r(n(e,t),2)}});return o})),Kl=Ot("mad",["typed","abs","map","median","subtract"],(function(e){var t=e.abs,n=e.map,r=e.median,i=e.subtract;return(0,e.typed)("mad",{"Array | Matrix":a,"...":function(e){return a(e)}});function a(e){if(0===(e=St(e.valueOf())).length)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var a=r(e);return r(n(e,(function(e){return t(i(e,a))})))}catch(e){throw e instanceof TypeError&&-1!==e.message.indexOf("median")?new TypeError(e.message.replace("median","mad")):Ns(e,"mad")}}})),Ql=Ot("variance",["typed","add","subtract","multiply","divide","apply","isNaN"],(function(e){var t=e.add,n=e.subtract,r=e.multiply,i=e.divide,a=e.apply,o=e.isNaN;return(0,e.typed)("variance",{"Array | Matrix":function(e){return s(e,"unbiased")},"Array | Matrix, string":s,"Array | Matrix, number | BigNumber":function(e,t){return u(e,t,"unbiased")},"Array | Matrix, number | BigNumber, string":u,"...":function(e){return s(e,"unbiased")}});function s(e,a){var s=0,u=0;if(0===e.length)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(Cr(e,(function(e){try{s=t(s,e),u++}catch(t){throw Ns(t,"variance",e)}})),0===u)throw new Error("Cannot calculate variance of an empty array");var c=i(s,u);if(s=0,Cr(e,(function(e){var i=n(e,c);s=t(s,r(i,i))})),o(s))return s;switch(a){case"uncorrected":return i(s,u);case"biased":return i(s,u+1);case"unbiased":var l=V(s)?s.mul(0):0;return 1===u?l:i(s,u-1);default:throw new Error('Unknown normalization "'+a+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function u(e,t,n){try{if(0===e.length)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return a(e,t,(function(e){return s(e,n)}))}catch(e){throw Ns(e,"variance")}}})),Wl=Ot("var",["variance"],(function(e){var t=e.variance;return function(){ta('Function "var" has been renamed to "variance" in v6.0.0, please use the new function instead.');for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(t,n)}})),$l=Ot("quantileSeq",["typed","add","multiply","partitionSelect","compare"],(function(e){var t=e.add,n=e.multiply,r=e.partitionSelect,i=e.compare;function a(e,a,s){var u=St(e),c=u.length;if(0===c)throw new Error("Cannot calculate quantile of an empty sequence");if(B(a)){var l=a*(c-1),f=l%1;if(0===f){var p=s?u[l]:r(u,l);return o(p),p}var d,h,m=Math.floor(l);if(s)d=u[m],h=u[m+1];else{h=r(u,m+1),d=u[m];for(var g=0;g<m;++g)i(u[g],d)>0&&(d=u[g])}return o(d),o(h),t(n(d,1-f),n(h,f))}var v=a.times(c-1);if(v.isInteger()){v=v.toNumber();var y=s?u[v]:r(u,v);return o(y),y}var x,b,w=v.floor(),N=v.minus(w),S=w.toNumber();if(s)x=u[S],b=u[S+1];else{b=r(u,S+1),x=u[S];for(var _=0;_<S;++_)i(u[_],x)>0&&(x=u[_])}o(x),o(b);var D=new N.constructor(1);return t(n(x,D.minus(N)),n(b,N))}var o=(0,e.typed)({"number | BigNumber | Unit":function(e){return e}});return function(e,t,n){var r,i,o;if(arguments.length<2||arguments.length>3)throw new SyntaxError("Function quantileSeq requires two or three parameters");if(H(e)){if("boolean"==typeof(n=n||!1)){if(i=e.valueOf(),B(t)){if(t<0)throw new Error("N/prob must be non-negative");if(t<=1)return a(i,t,n);if(t>1){if(!Ve(t))throw new Error("N must be a positive integer");var s=t+1;r=new Array(t);for(var u=0;u<t;)r[u]=a(i,++u/s,n);return r}}if(V(t)){var c=t.constructor;if(t.isNegative())throw new Error("N/prob must be non-negative");if(o=new c(1),t.lte(o))return new c(a(i,t,n));if(t.gt(o)){if(!t.isInteger())throw new Error("N must be a positive integer");var l=t.toNumber();if(l>4294967295)throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var f=new c(l+1);r=new Array(l);for(var p=0;p<l;)r[p]=new c(a(i,new c(++p).div(f),n));return r}}if(Array.isArray(t)){r=new Array(t.length);for(var d=0;d<r.length;++d){var h=t[d];if(B(h)){if(h<0||h>1)throw new Error("Probability must be between 0 and 1, inclusive")}else{if(!V(h))throw new TypeError("Unexpected type of argument in function quantileSeq");if(o=new h.constructor(1),h.isNegative()||h.gt(o))throw new Error("Probability must be between 0 and 1, inclusive")}r[d]=a(i,h,n)}return r}throw new TypeError("Unexpected type of argument in function quantileSeq")}throw new TypeError("Unexpected type of argument in function quantileSeq")}throw new TypeError("Unexpected type of argument in function quantileSeq")}})),Xl=Ot("std",["typed","sqrt","variance"],(function(e){var t=e.sqrt,n=e.variance;return(0,e.typed)("std",{"Array | Matrix":r,"Array | Matrix, string":r,"Array | Matrix, number | BigNumber":r,"Array | Matrix, number | BigNumber, string":r,"...":function(e){return r(e)}});function r(e,r){if(0===e.length)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{return t(n.apply(null,arguments))}catch(e){throw e instanceof TypeError&&-1!==e.message.indexOf(" variance")?new TypeError(e.message.replace(" variance"," std")):e}}})),Zl=Ot("combinations",["typed"],(function(e){return(0,e.typed)("combinations",{"number, number":hi,"BigNumber, BigNumber":function(e,t){var n,r,i=e.constructor,a=e.minus(t),o=new i(1);if(!Jl(e)||!Jl(t))throw new TypeError("Positive integer value expected in function combinations");if(t.gt(e))throw new TypeError("k must be less than n in function combinations");if(n=o,t.lt(a))for(r=o;r.lte(a);r=r.plus(o))n=n.times(t.plus(r)).dividedBy(r);else for(r=o;r.lte(t);r=r.plus(o))n=n.times(a.plus(r)).dividedBy(r);return n}})}));function Jl(e){return e.isInteger()&&e.gte(0)}var ef=Ot("combinationsWithRep",["typed"],(function(e){return(0,e.typed)("combinationsWithRep",{"number, number":function(e,t){if(!Ve(e)||e<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!Ve(t)||t<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(e<1)throw new TypeError("k must be less than or equal to n + k - 1");return t<e-1?di(e,e+t-1)/di(1,t):di(t+1,e+t-1)/di(1,e-1)},"BigNumber, BigNumber":function(e,t){var n,r,i=new(0,e.constructor)(1),a=e.minus(i);if(!tf(e)||!tf(t))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(e.lt(i))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(n=i,t.lt(a))for(r=i;r.lte(a);r=r.plus(i))n=n.times(t.plus(r)).dividedBy(r);else for(r=i;r.lte(t);r=r.plus(i))n=n.times(a.plus(r)).dividedBy(r);return n}})}));function tf(e){return e.isInteger()&&e.gte(0)}var nf=Ot("gamma",["typed","config","multiplyScalar","pow","BigNumber","Complex"],(function(e){var t=e.config,n=e.multiplyScalar,r=e.pow,i=e.BigNumber,a=e.Complex,o=(0,e.typed)("gamma",{number:Si,Complex:function(e){if(0===e.im)return o(e.re);e=new a(e.re-1,e.im);for(var t=new a(Di[0],0),i=1;i<Di.length;++i){var s=e.re+i,u=s*s+e.im*e.im;0!==u?(t.re+=Di[i]*s/u,t.im+=-Di[i]*e.im/u):t.re=Di[i]<0?-Infinity:Infinity}var c=new a(e.re+_i+.5,e.im),l=Math.sqrt(2*Math.PI);e.re+=.5;var f=r(c,e);0===f.im?f.re*=l:(0===f.re||(f.re*=l),f.im*=l);var p=Math.exp(-c.re);return c.re=p*Math.cos(-c.im),c.im=p*Math.sin(-c.im),n(n(f,c),t)},BigNumber:function(e){if(e.isInteger())return e.isNegative()||e.isZero()?new i(Infinity):function e(n){if(n<8)return new i([1,1,2,6,24,120,720,5040][n]);var r=t.precision+(0|Math.log(n.toNumber())),a=i.clone({precision:r});if(n%2==1)return n.times(e(new i(n-1)));for(var o=n,s=new a(n),u=n.toNumber();o>2;)s=s.times(u+=o-=2);return new i(s.toPrecision(i.precision))}(e.minus(1));if(!e.isFinite())return new i(e.isNegative()?NaN:Infinity);throw new Error("Integer BigNumber expected")},"Array | Matrix":function(e){return Tr(e,o)}});return o})),rf=Ot("factorial",["typed","gamma"],(function(e){var t=e.gamma,n=(0,e.typed)("factorial",{number:function(e){if(e<0)throw new Error("Value must be non-negative");return t(e+1)},BigNumber:function(e){if(e.isNegative())throw new Error("Value must be non-negative");return t(e.plus(1))},"Array | Matrix":function(e){return Tr(e,n)}});return n})),af=Ot("kldivergence",["typed","matrix","divide","sum","multiply","dotDivide","log","isNumeric"],(function(e){var t=e.matrix,n=e.divide,r=e.sum,i=e.multiply,a=e.dotDivide,o=e.log,s=e.isNumeric;return(0,e.typed)("kldivergence",{"Array, Array":function(e,n){return u(t(e),t(n))},"Matrix, Array":function(e,n){return u(e,t(n))},"Array, Matrix":function(e,n){return u(t(e),n)},"Matrix, Matrix":function(e,t){return u(e,t)}});function u(e,t){var u=t.size().length,c=e.size().length;if(u>1)throw new Error("first object must be one dimensional");if(c>1)throw new Error("second object must be one dimensional");if(u!==c)throw new Error("Length of two vectors must be equal");if(0===r(e))throw new Error("Sum of elements in first object must be non zero");if(0===r(t))throw new Error("Sum of elements in second object must be non zero");var l=n(e,r(e)),f=n(t,r(t)),p=r(i(l,o(a(l,f))));return s(p)?p:Number.NaN}})),of=Ot("multinomial",["typed","add","divide","multiply","factorial","isInteger","isPositive"],(function(e){var t=e.add,n=e.divide,r=e.multiply,i=e.factorial,a=e.isInteger,o=e.isPositive;return(0,e.typed)("multinomial",{"Array | Matrix":function(e){var s=0,u=1;return Cr(e,(function(e){if(!a(e)||!o(e))throw new TypeError("Positive integer value expected in function multinomial");s=t(s,e),u=r(u,i(e))})),n(i(s),u)}})})),sf=Ot("permutations",["typed","factorial"],(function(e){return(0,e.typed)("permutations",{"number | BigNumber":e.factorial,"number, number":function(e,t){if(!Ve(e)||e<0)throw new TypeError("Positive integer value expected in function permutations");if(!Ve(t)||t<0)throw new TypeError("Positive integer value expected in function permutations");if(t>e)throw new TypeError("second argument k must be less than or equal to first argument n");return di(e-t+1,e)},"BigNumber, BigNumber":function(e,t){var n,r;if(!uf(e)||!uf(t))throw new TypeError("Positive integer value expected in function permutations");if(t.gt(e))throw new TypeError("second argument k must be less than or equal to first argument n");for(n=e.mul(0).add(1),r=e.minus(t).plus(1);r.lte(e);r=r.plus(1))n=n.times(r);return n}})}));function uf(e){return e.isInteger()&&e.gte(0)}var cf=b((function(e){var t=[],n=void 0===y?window:y,r=Math.pow(256,6),i=Math.pow(2,52),a=2*i,o=Math.random;function s(e){var t,n=e.length,r=this,i=0,a=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);i<256;)o[i]=i++;for(i=0;i<256;i++)o[i]=o[a=255&a+e[i%n]+(t=o[i])],o[a]=t;(r.g=function(e){for(var t,n=0,i=r.i,a=r.j,o=r.S;e--;)t=o[i=255&i+1],n=256*n+o[255&(o[i]=o[a=255&a+t])+(o[a]=t)];return r.i=i,r.j=a,n})(256)}function u(e,t){var n,r=[],i=(typeof e)[0];if(t&&"o"==i)for(n in e)try{r.push(u(e[n],t-1))}catch(e){}return r.length?r:"s"==i?e:e+"\0"}function c(e,t){for(var n,r=e+"",i=0;i<r.length;)t[255&i]=255&(n^=19*t[255&i])+r.charCodeAt(i++);return f(t)}function l(e){try{return n.crypto.getRandomValues(e=new Uint8Array(256)),f(e)}catch(e){return[+new Date,n,n.navigator&&n.navigator.plugins,n.screen,f(t)]}}function f(e){return String.fromCharCode.apply(0,e)}e.exports=function(n,o){if(o&&!0===o.global)return o.global=!1,Math.random=e.exports(n,o),o.global=!0,Math.random;var p=o&&o.entropy||!1,d=[],h=(c(u(p?[n,f(t)]:0 in arguments?n:l(),3),d),new s(d));return c(f(h.S),t),function(){for(var e=h.g(6),t=r,n=0;e<i;)e=256*(e+n),t*=256,n=h.g(1);for(;e>=a;)e/=2,t/=2,n>>>=1;return(e+n)/t}},e.exports.resetGlobal=function(){Math.random=o},c(Math.random(),t)})),lf=cf();function ff(e){var t,n;return t=null===(n=e)?lf:cf(String(n)),function(){return t()}}var pf=Ot("pickRandom",["typed","config","?on"],(function(e){var t=e.typed,n=e.on,r=ff(e.config.randomSeed);return n&&n("config",(function(e,t){e.randomSeed!==t.randomSeed&&(r=ff(e.randomSeed))})),t({"Array | Matrix":function(e){return i(e)},"Array | Matrix, number":function(e,t){return i(e,t,void 0)},"Array | Matrix, Array":function(e,t){return i(e,void 0,t)},"Array | Matrix, Array | Matrix, number":function(e,t,n){return i(e,n,t)},"Array | Matrix, number, Array | Matrix":function(e,t,n){return i(e,t,n)}});function i(e,t,n){var i=void 0===t;if(i&&(t=1),e=e.valueOf(),n&&(n=n.valueOf()),gt(e).length>1)throw new Error("Only one dimensional vectors supported");var a=0;if(void 0!==n){if(n.length!==e.length)throw new Error("Weights must have the same length as possibles");for(var o=0,s=n.length;o<s;o++){if(!B(n[o])||n[o]<0)throw new Error("Weights must be an array of positive numbers");a+=n[o]}}var u=e.length;if(0===u)return[];if(t>=u)return t>1?e:e[0];for(var c,l=[];l.length<t;){if(void 0===n)c=e[Math.floor(r()*u)];else for(var f=r()*a,p=0,d=e.length;p<d;p++)if((f-=n[p])<0){c=e[p];break}-1===l.indexOf(c)&&l.push(c)}return i?l[0]:l}}));function df(e,t){var n=[];if((e=e.slice(0)).length>1)for(var r=0,i=e.shift();r<i;r++)n.push(df(e,t));else for(var a=0,o=e.shift();a<o;a++)n.push(t());return n}var hf=Ot("random",["typed","config","?on"],(function(e){var t=e.typed,n=e.on,r=ff(e.config.randomSeed);return n&&n("config",(function(e,t){e.randomSeed!==t.randomSeed&&(r=ff(e.randomSeed))})),t("random",{"":function(){return a(0,1)},number:function(e){return a(0,e)},"number, number":function(e,t){return a(e,t)},"Array | Matrix":function(e){return i(e,0,1)},"Array | Matrix, number":function(e,t){return i(e,0,t)},"Array | Matrix, number, number":function(e,t,n){return i(e,t,n)}});function i(e,t,n){var r=df(e.valueOf(),(function(){return a(t,n)}));return Y(e)?e.create(r):r}function a(e,t){return e+r()*(t-e)}})),mf=Ot("randomInt",["typed","config","?on"],(function(e){var t=e.typed,n=e.on,r=ff(e.config.randomSeed);return n&&n("config",(function(e,t){e.randomSeed!==t.randomSeed&&(r=ff(e.randomSeed))})),t("randomInt",{"":function(){return a(0,1)},number:function(e){return a(0,e)},"number, number":function(e,t){return a(e,t)},"Array | Matrix":function(e){return i(e,0,1)},"Array | Matrix, number":function(e,t){return i(e,0,t)},"Array | Matrix, number, number":function(e,t,n){return i(e,t,n)}});function i(e,t,n){var r=df(e.valueOf(),(function(){return a(t,n)}));return Y(e)?e.create(r):r}function a(e,t){return Math.floor(e+r()*(t-e))}})),gf=Ot("stirlingS2",["typed","addScalar","subtract","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","larger"],(function(e){var t=e.addScalar,n=e.subtract,r=e.multiplyScalar,i=e.divideScalar,a=e.pow,o=e.factorial,s=e.combinations,u=e.isNegative,c=e.isInteger,l=e.larger;return(0,e.typed)("stirlingS2",{"number | BigNumber, number | BigNumber":function(e,f){if(!c(e)||u(e)||!c(f)||u(f))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(l(f,e))throw new TypeError("k must be less than or equal to n in function stirlingS2");for(var p=o(f),d=0,h=0;h<=f;h++){var m=a(-1,n(f,h)),g=s(f,h),v=a(h,e);d=t(d,r(r(g,v),m))}return i(d,p)}})})),vf=Ot("bellNumbers",["typed","addScalar","isNegative","isInteger","stirlingS2"],(function(e){var t=e.addScalar,n=e.isNegative,r=e.isInteger,i=e.stirlingS2;return(0,e.typed)("bellNumbers",{"number | BigNumber":function(e){if(!r(e)||n(e))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var a=0,o=0;o<=e;o++)a=t(a,i(e,o));return a}})})),yf=Ot("catalan",["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],(function(e){var t=e.addScalar,n=e.divideScalar,r=e.multiplyScalar,i=e.combinations,a=e.isNegative,o=e.isInteger;return(0,e.typed)("catalan",{"number | BigNumber":function(e){if(!o(e)||a(e))throw new TypeError("Non-negative integer value expected in function catalan");return n(i(r(e,2),e),t(e,1))}})})),xf=Ot("composition",["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],(function(e){var t=e.addScalar,n=e.combinations,r=e.isPositive,i=e.isInteger,a=e.larger;return(0,e.typed)("composition",{"number | BigNumber, number | BigNumber":function(e,o){if(!(i(e)&&r(e)&&i(o)&&r(o)))throw new TypeError("Positive integer value expected in function composition");if(a(o,e))throw new TypeError("k must be less than or equal to n in function composition");return n(t(e,-1),t(o,-1))}})})),bf=Ot("simplifyUtil",["FunctionNode","OperatorNode","SymbolNode"],(function(e){var t=e.FunctionNode,n=e.OperatorNode,r=e.SymbolNode,i={add:!0,multiply:!0},a={add:!0,multiply:!0};function o(e,t){if(!ve(e))return!1;var n=e.fn.toString();return t&&Te(t,n)&&Te(t[n],"associative")?t[n].associative:a[n]||!1}function s(e){var t,n=[];return o(e)?(t=e.op,function e(r){for(var i=0;i<r.args.length;i++){var a=r.args[i];ve(a)&&t===a.op?e(a):n.push(a)}}(e),n):e.args}function u(e){return ve(e)?function(t){try{return new n(e.op,e.fn,t,e.implicit)}catch(e){return console.error(e),[]}}:function(n){return new t(new r(e.name),n)}}return{createMakeNodeFunction:u,isCommutative:function(e,t){if(!ve(e))return!0;var n=e.fn.toString();return t&&Te(t,n)&&Te(t[n],"commutative")?t[n].commutative:i[n]||!1},isAssociative:o,flatten:function e(t){if(!t.args||0===t.args.length)return t;t.args=s(t);for(var n=0;n<t.args.length;n++)e(t.args[n])},allChildren:s,unflattenr:function e(t){if(t.args&&0!==t.args.length){for(var n=u(t),r=t.args.length,i=0;i<r;i++)e(t.args[i]);if(r>2&&o(t)){for(var a=t.args.pop();t.args.length>0;)a=n([t.args.pop(),a]);t.args=a.args}}},unflattenl:function e(t){if(t.args&&0!==t.args.length){for(var n=u(t),r=t.args.length,i=0;i<r;i++)e(t.args[i]);if(r>2&&o(t)){for(var a=t.args.shift();t.args.length>0;)a=n([a,t.args.shift()]);t.args=a.args}}}}})),wf=Ot("simplifyCore",["equal","isZero","add","subtract","multiply","divide","pow","ConstantNode","OperatorNode","FunctionNode","ParenthesisNode"],(function(e){var t=e.equal,n=e.isZero,r=e.add,i=e.subtract,a=e.multiply,o=e.divide,s=e.pow,u=e.ConstantNode,c=e.OperatorNode,l=e.FunctionNode,f=e.ParenthesisNode,p=new u(0),d=new u(1);return function e(h){if(ve(h)&&h.isUnary()){var m=e(h.args[0]);if("+"===h.op)return m;if("-"===h.op){if(ve(m)){if(m.isUnary()&&"-"===m.op)return m.args[0];if(m.isBinary()&&"subtract"===m.fn)return new c("-","subtract",[m.args[1],m.args[0]])}return new c(h.op,h.fn,[m])}}else if(ve(h)&&h.isBinary()){var g=e(h.args[0]),v=e(h.args[1]);if("+"===h.op){if(fe(g)){if(n(g.value))return v;if(fe(v))return new u(r(g.value,v.value))}return fe(v)&&n(v.value)?g:ve(v)&&v.isUnary()&&"-"===v.op?new c("-","subtract",[g,v.args[0]]):new c(h.op,h.fn,v?[g,v]:[g])}if("-"===h.op){if(fe(g)&&v){if(fe(v))return new u(i(g.value,v.value));if(n(g.value))return new c("-","unaryMinus",[v])}if("subtract"===h.fn)return fe(v)&&n(v.value)?g:ve(v)&&v.isUnary()&&"-"===v.op?e(new c("+","add",[g,v.args[0]])):new c(h.op,h.fn,[g,v])}else{if("*"===h.op){if(fe(g)){if(n(g.value))return p;if(t(g.value,1))return v;if(fe(v))return new u(a(g.value,v.value))}if(fe(v)){if(n(v.value))return p;if(t(v.value,1))return g;if(ve(g)&&g.isBinary()&&g.op===h.op){var y=g.args[0];if(fe(y)){var x=new u(a(y.value,v.value));return new c(h.op,h.fn,[x,g.args[1]],h.implicit)}}return new c(h.op,h.fn,[v,g],h.implicit)}return new c(h.op,h.fn,[g,v],h.implicit)}if("/"===h.op){if(fe(g)){if(n(g.value))return p;if(fe(v)&&(t(v.value,1)||t(v.value,2)||t(v.value,4)))return new u(o(g.value,v.value))}return new c(h.op,h.fn,[g,v])}if("^"===h.op){if(fe(v)){if(n(v.value))return d;if(t(v.value,1))return g;if(fe(g))return new u(s(g.value,v.value));if(ve(g)&&g.isBinary()&&"^"===g.op){var b=g.args[1];if(fe(b))return new c(h.op,h.fn,[g.args[0],new u(a(b.value,v.value))])}}return new c(h.op,h.fn,[g,v])}}}else{if(ye(h)){var w=e(h.content);return ye(w)||be(w)||fe(w)?w:new f(w)}if(de(h)){var N=h.args.map(e).map((function(e){return ye(e)?e.content:e}));return new l(e(h.fn),N)}}return h}})),Nf=Ot("simplifyConstant",["typed","config","mathWithTransform","?fraction","?bignumber","ConstantNode","OperatorNode","FunctionNode","SymbolNode"],(function(e){var t=e.typed,n=e.config,r=e.mathWithTransform,i=e.fraction,a=e.bignumber,o=e.ConstantNode,s=e.OperatorNode,u=e.FunctionNode,c=bf({FunctionNode:u,OperatorNode:s,SymbolNode:e.SymbolNode}),l=c.isCommutative,f=c.isAssociative,p=c.allChildren,d=c.createMakeNodeFunction;function h(e,t,n){try{return v(r[e].apply(null,t),n)}catch(i){return t=t.map((function(e){return z(e)?e.valueOf():e})),v(r[e].apply(null,t),n)}}var m=t({Fraction:function(e){var t,n=e.s*e.n;return t=n<0?new s("-","unaryMinus",[new o(-n)]):new o(n),1===e.d?t:new s("/","divide",[t,new o(e.d)])},number:function(e){return e<0?y(new o(-e)):new o(e)},BigNumber:function(e){return e<0?y(new o(-e)):new o(e)},Complex:function(e){throw new Error("Cannot convert Complex number to Node")}});function g(e,t){if(t&&!1!==t.exactFractions&&isFinite(e)&&i){var n=i(e);if(n.valueOf()===e)return n}return e}var v=t({"string, Object":function(e,t){return"BigNumber"===n.number?(void 0===a&&Uo(),a(e)):"Fraction"===n.number?(void 0===i&&jo(),i(e)):g(parseFloat(e),t)},"Fraction, Object":function(e,t){return e},"BigNumber, Object":function(e,t){return e},"number, Object":function(e,t){return g(e,t)},"Complex, Object":function(e,t){return 0!==e.im?e:g(e.re,t)}});function y(e){return new s("-","unaryMinus",[e])}function x(e,t,n,r){return t.reduce((function(t,i){if(me(t)||me(i))me(t)?me(i)||(i=m(i)):t=m(t);else{try{return h(e,[t,i],r)}catch(e){}t=m(t),i=m(i)}return n([t,i])}))}return function(e,t){var n=function e(t,n){switch(t.type){case"SymbolNode":return t;case"ConstantNode":return"number"!=typeof t.value&&isNaN(t.value)?t:v(t.value,n);case"FunctionNode":if(r[t.name]&&r[t.name].rawArgs)return t;if(-1===["add","multiply"].indexOf(t.name)){var i=t.args.map((function(t){return e(t,n)}));if(!i.some(me))try{return h(t.name,i,n)}catch(e){}return i=i.map((function(e){return me(e)?e:m(e)})),new u(t.name,i)}case"OperatorNode":var a,o,s=t.fn.toString(),c=d(t);if(ve(t)&&t.isUnary())o=me((a=[e(t.args[0],n)])[0])?c(a):h(s,a,n);else if(f(t))if(a=(a=p(t)).map((function(t){return e(t,n)})),l(s)){for(var g=[],y=[],b=0;b<a.length;b++)me(a[b])?y.push(a[b]):g.push(a[b]);g.length>1?(o=x(s,g,c,n),y.unshift(o),o=x(s,y,c,n)):o=x(s,a,c,n)}else o=x(s,a,c,n);else o=x(s,a=t.args.map((function(t){return e(t,n)})),c,n);return o;case"ParenthesisNode":return e(t.content,n);case"AccessorNode":case"ArrayNode":case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"IndexNode":case"ObjectNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(t.type))}}(e,t);return me(n)?n:m(n)}})),Sf=Ot("resolve",["parse","FunctionNode","OperatorNode","ParenthesisNode"],(function(e){var t=e.parse,n=e.FunctionNode,r=e.OperatorNode,i=e.ParenthesisNode;return function e(a,o){if(!o)return a;if(be(a)){var s=o[a.name];if(me(s))return e(s,o);if("number"==typeof s)return t(String(s))}else{if(ve(a)){var u=a.args.map((function(t){return e(t,o)}));return new r(a.op,a.fn,u,a.implicit)}if(ye(a))return new i(e(a.content,o));if(de(a)){var c=a.args.map((function(t){return e(t,o)}));return new n(a.name,c)}}return a}}));function _f(e){return(_f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Df=Ot("simplify",["config","typed","parse","add","subtract","multiply","divide","pow","isZero","equal","?fraction","?bignumber","mathWithTransform","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],(function(e){var t=e.typed,n=e.parse,r=e.add,i=e.subtract,a=e.multiply,o=e.divide,s=e.pow,u=e.isZero,c=e.equal,l=e.ConstantNode,f=e.FunctionNode,p=e.OperatorNode,d=e.ParenthesisNode,h=e.SymbolNode,m=Nf({typed:t,config:e.config,mathWithTransform:e.mathWithTransform,fraction:e.fraction,bignumber:e.bignumber,ConstantNode:l,OperatorNode:p,FunctionNode:f,SymbolNode:h}),g=wf({equal:c,isZero:u,add:r,subtract:i,multiply:a,divide:o,pow:s,ConstantNode:l,OperatorNode:p,FunctionNode:f,ParenthesisNode:d}),v=Sf({parse:n,FunctionNode:f,OperatorNode:p,ParenthesisNode:d}),y=bf({FunctionNode:f,OperatorNode:p,SymbolNode:h}),x=y.isCommutative,b=y.isAssociative,w=y.flatten,N=y.unflattenr,S=y.unflattenl,_=y.createMakeNodeFunction,D=t("simplify",{string:function(e){return D(n(e),D.rules,{},{})},"string, Object":function(e,t){return D(n(e),D.rules,t,{})},"string, Object, Object":function(e,t,r){return D(n(e),D.rules,t,r)},"string, Array":function(e,t){return D(n(e),t,{},{})},"string, Array, Object":function(e,t,r){return D(n(e),t,r,{})},"string, Array, Object, Object":function(e,t,r,i){return D(n(e),t,r,i)},"Node, Object":function(e,t){return D(e,D.rules,t,{})},"Node, Object, Object":function(e,t,n){return D(e,D.rules,t,n)},Node:function(e){return D(e,D.rules,{},{})},"Node, Array":function(e,t){return D(e,t,{},{})},"Node, Array, Object":function(e,t,n){return D(e,t,n,{})},"Node, Array, Object, Object":function(e,t,r,i){t=function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r],a=void 0,o=_f(i);switch(o){case"string":var s=i.split("->");if(2!==s.length)throw SyntaxError("Could not parse rule: "+i);i={l:s[0],r:s[1]};case"object":if(a={l:A(n(i.l)),r:A(n(i.r))},i.context&&(a.evaluate=i.context),i.evaluate&&(a.evaluate=n(i.evaluate)),b(a.l)){var u=_(a.l),c=new h("_p"+E++);a.expanded={},a.expanded.l=u([a.l.clone(),c]),w(a.expanded.l),N(a.expanded.l),a.expanded.r=u([a.r,c])}break;case"function":a=i;break;default:throw TypeError("Unsupported type of rule: "+o)}t.push(a)}return t}(t);for(var a=v(e,r),o={},s=(a=A(a)).toString({parenthesis:"all"});!o[s];){o[s]=!0,E=0;for(var u=0;u<t.length;u++)"function"==typeof t[u]?a=t[u](a,i):(w(a),a=C(a,t[u])),S(a);s=a.toString({parenthesis:"all"})}return a}});function A(e){return e.transform((function(e,t,n){return ye(e)?A(e.content):e}))}D.simplifyCore=g,D.resolve=v;var M={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};D.rules=[g,{l:"log(e)",r:"1"},{l:"n-n1",r:"n+-n1"},{l:"-(c*v)",r:"(-c) * v"},{l:"-v",r:"(-1) * v"},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{l:"(n ^ n1) ^ n2",r:"n ^ (n1 * n2)"},{l:"n*n",r:"n^2"},{l:"n * n^n1",r:"n^(n1+1)"},{l:"n^n1 * n^n2",r:"n^(n1+n2)"},{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},{l:"n1*n2 + n2",r:"(n1+1)*n2"},{l:"n1*n3 + n2*n3",r:"(n1+n2)*n3"},{l:"n1 + -1 * (n2 + n3)",r:"n1 + -1 * n2 + -1 * n3"},m,{l:"(-n)*n1",r:"-(n*n1)"},{l:"c+v",r:"v+c",context:{add:{commutative:!1}}},{l:"v*c",r:"c*v",context:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"n-(n1+n2)",r:"n-n1-n2"},{l:"1*n",r:"n"},{l:"n1/(n2/n3)",r:"(n1*n3)/n2"}];var E=0,C=t("applyRule",{"Node, Object":function(e,t){var n=e;if(n instanceof p||n instanceof f){if(n.args)for(var r=0;r<n.args.length;r++)n.args[r]=C(n.args[r],t)}else n instanceof d&&n.content&&(n.content=C(n.content,t));var i=t.r,a=I(t.l,n)[0];if(!a&&t.expanded&&(i=t.expanded.r,a=I(t.expanded.l,n)[0]),a){var o=n.implicit;n=i.clone(),o&&"implicit"in i&&(n.implicit=!0),n=n.transform((function(e){return e.isSymbolNode&&Te(a.placeholders,e.name)?a.placeholders[e.name].clone():e}))}return n}});function T(e,t){var n={placeholders:{}};if(!e.placeholders&&!t.placeholders)return n;if(!e.placeholders)return t;if(!t.placeholders)return e;for(var r in e.placeholders)if(n.placeholders[r]=e.placeholders[r],Te(t.placeholders,r)&&!O(e.placeholders[r],t.placeholders[r]))return null;for(var i in t.placeholders)n.placeholders[i]=t.placeholders[i];return n}function R(e,t){var n,r=[];if(0===e.length||0===t.length)return r;for(var i=0;i<e.length;i++)for(var a=0;a<t.length;a++)(n=T(e[i],t[a]))&&r.push(n);return r}function I(e,t,n){var r=[{placeholders:{}}];if(e instanceof p&&t instanceof p||e instanceof f&&t instanceof f){if(e instanceof p){if(e.op!==t.op||e.fn!==t.fn)return[]}else if(e instanceof f&&e.name!==t.name)return[];if((1!==t.args.length||1!==e.args.length)&&b(t)&&!n){if(t.args.length>=2&&2===e.args.length){for(var i=function(e,t){var n,r,i=[],a=_(e);if(x(e,t))for(var o=0;o<e.args.length;o++)(r=e.args.slice(0)).splice(o,1),n=1===r.length?r[0]:a(r),i.push(a([e.args[o],n]));else n=1===(r=e.args.slice(1)).length?r[0]:a(r),i.push(a([e.args[0],n]));return i}(t,e.context),a=[],o=0;o<i.length;o++){var s=I(e,i[o],!0);a=a.concat(s)}return a}if(e.args.length>2)throw Error("Unexpected non-binary associative function: "+e.toString());return[]}for(var u=[],d=0;d<e.args.length;d++){var m=I(e.args[d],t.args[d]);if(0===m.length)return[];u.push(m)}r=function(e){if(0===e.length)return e;for(var t=e.reduce(R),n=[],r={},i=0;i<t.length;i++){var a=JSON.stringify(t[i]);r[a]||(r[a]=!0,n.push(t[i]))}return n}(u)}else if(e instanceof h){if(0===e.name.length)throw new Error("Symbol in rule has 0 length...!?");if(M[e.name]){if(e.name!==t.name)return[]}else if("n"===e.name[0]||"_p"===e.name.substring(0,2))r[0].placeholders[e.name]=t;else if("v"===e.name[0]){if(fe(t))return[];r[0].placeholders[e.name]=t}else{if("c"!==e.name[0])throw new Error("Invalid symbol in rule: "+e.name);if(!(t instanceof l))return[];r[0].placeholders[e.name]=t}}else{if(!(e instanceof l))return[];if(!c(e.value,t.value))return[]}return r}function O(e,t){if(e instanceof l&&t instanceof l){if(!c(e.value,t.value))return!1}else if(e instanceof h&&t instanceof h){if(e.name!==t.name)return!1}else{if(!(e instanceof p&&t instanceof p||e instanceof f&&t instanceof f))return!1;if(e instanceof p){if(e.op!==t.op||e.fn!==t.fn)return!1}else if(e instanceof f&&e.name!==t.name)return!1;if(e.args.length!==t.args.length)return!1;for(var n=0;n<e.args.length;n++)if(!O(e.args[n],t.args[n]))return!1}return!0}return D})),Af=Ot("derivative",["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],(function(e){var t=e.typed,n=e.config,r=e.parse,i=e.simplify,a=e.equal,o=e.isZero,s=e.numeric,u=e.ConstantNode,c=e.FunctionNode,l=e.OperatorNode,f=e.ParenthesisNode,p=e.SymbolNode,d=t("derivative",{"Node, SymbolNode, Object":function(e,t,n){var r={};m(r,e,t.name);var a=g(e,r);return n.simplify?i(a):a},"Node, SymbolNode":function(e,t){return d(e,t,{simplify:!0})},"string, SymbolNode":function(e,t){return d(r(e),t)},"string, SymbolNode, Object":function(e,t,n){return d(r(e),t,n)},"string, string":function(e,t){return d(r(e),r(t))},"string, string, Object":function(e,t,n){return d(r(e),r(t),n)},"Node, string":function(e,t){return d(e,r(t))},"Node, string, Object":function(e,t,n){return d(e,r(t),n)}});d._simplify=!0,d.toTex=function(e){return h.apply(null,e.args)};var h=t("_derivTex",{"Node, SymbolNode":function(e,t){return fe(e)&&"string"===Ne(e.value)?h(r(e.value).toString(),t.toString(),1):h(e.toString(),t.toString(),1)},"Node, ConstantNode":function(e,t){if("string"===Ne(t.value))return h(e,r(t.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(e,t,n){return h(e.toString(),t.name,n.value)},"string, string, number":function(e,t,n){return(1===n?"{d\\over d"+t+"}":"{d^{"+n+"}\\over d"+t+"^{"+n+"}}")+"\\left[".concat(e,"\\right]")}}),m=t("constTag",{"Object, ConstantNode, string":function(e,t){return e[t]=!0,!0},"Object, SymbolNode, string":function(e,t,n){return t.name!==n&&(e[t]=!0,!0)},"Object, ParenthesisNode, string":function(e,t,n){return m(e,t.content,n)},"Object, FunctionAssignmentNode, string":function(e,t,n){return-1===t.params.indexOf(n)?(e[t]=!0,!0):m(e,t.expr,n)},"Object, FunctionNode | OperatorNode, string":function(e,t,n){if(t.args.length>0){for(var r=m(e,t.args[0],n),i=1;i<t.args.length;++i)r=m(e,t.args[i],n)&&r;if(r)return e[t]=!0,!0}return!1}}),g=t("_derivative",{"ConstantNode, Object":function(e){return v(0)},"SymbolNode, Object":function(e,t){return v(void 0!==t[e]?0:1)},"ParenthesisNode, Object":function(e,t){return new f(g(e.content,t))},"FunctionAssignmentNode, Object":function(e,t){return void 0!==t[e]?v(0):g(e.expr,t)},"FunctionNode, Object":function(e,t){if(1!==e.args.length&&function(e){if("log"!==e.name&&"nthRoot"!==e.name&&"pow"!==e.name||2!==e.args.length){for(var t=0;t<e.args.length;++t)e.args[t]=v(0);throw e.compile().evaluate(),new Error("Expected TypeError, but none found")}}(e),void 0!==t[e])return v(0);var n,r,i,a,o=e.args[0],s=!1,u=!1;switch(e.name){case"cbrt":s=!0,r=new l("*","multiply",[v(3),new l("^","pow",[o,new l("/","divide",[v(2),v(3)])])]);break;case"sqrt":case"nthRoot":if(1===e.args.length)s=!0,r=new l("*","multiply",[v(2),new c("sqrt",[o])]);else if(2===e.args.length)return t[n=new l("/","divide",[v(1),e.args[1]])]=t[e.args[1]],g(new l("^","pow",[o,n]),t);break;case"log10":n=v(10);case"log":if(n||1!==e.args.length){if(1===e.args.length&&n||2===e.args.length&&void 0!==t[e.args[1]])r=new l("*","multiply",[o.clone(),new c("log",[n||e.args[1]])]),s=!0;else if(2===e.args.length)return g(new l("/","divide",[new c("log",[o]),new c("log",[e.args[1]])]),t)}else r=o.clone(),s=!0;break;case"pow":return t[n]=t[e.args[1]],g(new l("^","pow",[o,e.args[1]]),t);case"exp":r=new c("exp",[o.clone()]);break;case"sin":r=new c("cos",[o.clone()]);break;case"cos":r=new l("-","unaryMinus",[new c("sin",[o.clone()])]);break;case"tan":r=new l("^","pow",[new c("sec",[o.clone()]),v(2)]);break;case"sec":r=new l("*","multiply",[e,new c("tan",[o.clone()])]);break;case"csc":u=!0,r=new l("*","multiply",[e,new c("cot",[o.clone()])]);break;case"cot":u=!0,r=new l("^","pow",[new c("csc",[o.clone()]),v(2)]);break;case"asin":s=!0,r=new c("sqrt",[new l("-","subtract",[v(1),new l("^","pow",[o.clone(),v(2)])])]);break;case"acos":s=!0,u=!0,r=new c("sqrt",[new l("-","subtract",[v(1),new l("^","pow",[o.clone(),v(2)])])]);break;case"atan":s=!0,r=new l("+","add",[new l("^","pow",[o.clone(),v(2)]),v(1)]);break;case"asec":s=!0,r=new l("*","multiply",[new c("abs",[o.clone()]),new c("sqrt",[new l("-","subtract",[new l("^","pow",[o.clone(),v(2)]),v(1)])])]);break;case"acsc":s=!0,u=!0,r=new l("*","multiply",[new c("abs",[o.clone()]),new c("sqrt",[new l("-","subtract",[new l("^","pow",[o.clone(),v(2)]),v(1)])])]);break;case"acot":s=!0,u=!0,r=new l("+","add",[new l("^","pow",[o.clone(),v(2)]),v(1)]);break;case"sinh":r=new c("cosh",[o.clone()]);break;case"cosh":r=new c("sinh",[o.clone()]);break;case"tanh":r=new l("^","pow",[new c("sech",[o.clone()]),v(2)]);break;case"sech":u=!0,r=new l("*","multiply",[e,new c("tanh",[o.clone()])]);break;case"csch":u=!0,r=new l("*","multiply",[e,new c("coth",[o.clone()])]);break;case"coth":u=!0,r=new l("^","pow",[new c("csch",[o.clone()]),v(2)]);break;case"asinh":s=!0,r=new c("sqrt",[new l("+","add",[new l("^","pow",[o.clone(),v(2)]),v(1)])]);break;case"acosh":s=!0,r=new c("sqrt",[new l("-","subtract",[new l("^","pow",[o.clone(),v(2)]),v(1)])]);break;case"atanh":s=!0,r=new l("-","subtract",[v(1),new l("^","pow",[o.clone(),v(2)])]);break;case"asech":s=!0,u=!0,r=new l("*","multiply",[o.clone(),new c("sqrt",[new l("-","subtract",[v(1),new l("^","pow",[o.clone(),v(2)])])])]);break;case"acsch":s=!0,u=!0,r=new l("*","multiply",[new c("abs",[o.clone()]),new c("sqrt",[new l("+","add",[new l("^","pow",[o.clone(),v(2)]),v(1)])])]);break;case"acoth":s=!0,u=!0,r=new l("-","subtract",[v(1),new l("^","pow",[o.clone(),v(2)])]);break;case"abs":r=new l("/","divide",[new c(new p("abs"),[o.clone()]),o.clone()]);break;case"gamma":default:throw new Error('Function "'+e.name+'" is not supported by derivative, or a wrong number of arguments is passed')}s?(i="/",a="divide"):(i="*",a="multiply");var f=g(o,t);return u&&(f=new l("-","unaryMinus",[f])),new l(i,a,[f,r])},"OperatorNode, Object":function(e,t){if(void 0!==t[e])return v(0);if("+"===e.op)return new l(e.op,e.fn,e.args.map((function(e){return g(e,t)})));if("-"===e.op){if(e.isUnary())return new l(e.op,e.fn,[g(e.args[0],t)]);if(e.isBinary())return new l(e.op,e.fn,[g(e.args[0],t),g(e.args[1],t)])}if("*"===e.op){var n=e.args.filter((function(e){return void 0!==t[e]}));if(n.length>0){var r=e.args.filter((function(e){return void 0===t[e]})),i=1===r.length?r[0]:new l("*","multiply",r),s=n.concat(g(i,t));return new l("*","multiply",s)}return new l("+","add",e.args.map((function(n){return new l("*","multiply",e.args.map((function(e){return e===n?g(e,t):e.clone()})))})))}if("/"===e.op&&e.isBinary()){var u=e.args[0],f=e.args[1];return void 0!==t[f]?new l("/","divide",[g(u,t),f]):void 0!==t[u]?new l("*","multiply",[new l("-","unaryMinus",[u]),new l("/","divide",[g(f,t),new l("^","pow",[f.clone(),v(2)])])]):new l("/","divide",[new l("-","subtract",[new l("*","multiply",[g(u,t),f.clone()]),new l("*","multiply",[u.clone(),g(f,t)])]),new l("^","pow",[f.clone(),v(2)])])}if("^"===e.op&&e.isBinary()){var p=e.args[0],d=e.args[1];if(void 0!==t[p])return fe(p)&&(o(p.value)||a(p.value,1))?v(0):new l("*","multiply",[e,new l("*","multiply",[new c("log",[p.clone()]),g(d.clone(),t)])]);if(void 0!==t[d]){if(fe(d)){if(o(d.value))return v(0);if(a(d.value,1))return g(p,t)}var h=new l("^","pow",[p.clone(),new l("-","subtract",[d,v(1)])]);return new l("*","multiply",[d.clone(),new l("*","multiply",[g(p,t),h])])}return new l("*","multiply",[new l("^","pow",[p.clone(),d.clone()]),new l("+","add",[new l("*","multiply",[g(p,t),new l("/","divide",[d.clone(),p.clone()])]),new l("*","multiply",[g(d,t),new c("log",[p.clone()])])])])}throw new Error('Operator "'+e.op+'" is not supported by derivative, or a wrong number of arguments is passed')}});function v(e,t){return new u(s(e,t||n.number))}return d})),Mf=Ot("rationalize",["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplify","?bignumber","?fraction","mathWithTransform","ConstantNode","OperatorNode","FunctionNode","SymbolNode","ParenthesisNode"],(function(e){var t=e.typed,n=e.equal,r=e.isZero,i=e.add,a=e.subtract,o=e.multiply,s=e.divide,u=e.pow,c=e.parse,l=e.simplify,f=e.ConstantNode,p=e.OperatorNode,d=e.FunctionNode,h=e.SymbolNode,m=e.ParenthesisNode,g=Nf({typed:t,config:e.config,mathWithTransform:e.mathWithTransform,fraction:e.fraction,bignumber:e.bignumber,ConstantNode:f,OperatorNode:p,FunctionNode:d,SymbolNode:h}),v=wf({equal:n,isZero:r,add:i,subtract:a,multiply:o,divide:s,pow:u,ConstantNode:f,OperatorNode:p,FunctionNode:d,ParenthesisNode:m}),y=t("rationalize",{string:function(e){return y(c(e),{},!1)},"string, boolean":function(e,t){return y(c(e),{},t)},"string, Object":function(e,t){return y(c(e),t,!1)},"string, Object, boolean":function(e,t,n){return y(c(e),t,n)},Node:function(e){return y(e,{},!1)},"Node, boolean":function(e,t){return y(e,{},t)},"Node, Object":function(e,t){return y(e,t,!1)},"Node, Object, boolean":function(e,t,n){var r=function(){var e=[v,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},g,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],t=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],n=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],r={};return r.firstRules=e.concat(t,n),r.distrDivRules=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],r.sucDivRules=n,r.firstRulesAgain=e.concat(t),r.finalRules=[v,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},g,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],r}(),i=function(e,t,n,r){var i=[],a=l(e,r,t,{exactFractions:!1}),o="+-*"+((n=!!n)?"/":"");!function e(t){var n=t.type;if("FunctionNode"===n)throw new Error("There is an unsolved function call");if("OperatorNode"===n)if("^"===t.op){if("ConstantNode"!==t.args[1].type||!Ve(parseFloat(t.args[1].value)))throw new Error("There is a non-integer exponent");e(t.args[0])}else{if(-1===o.indexOf(t.op))throw new Error("Operator "+t.op+" invalid in polynomial expression");for(var r=0;r<t.args.length;r++)e(t.args[r])}else if("SymbolNode"===n){var a=t.name;-1===i.indexOf(a)&&i.push(a)}else if("ParenthesisNode"===n)e(t.content);else if("ConstantNode"!==n)throw new Error("type "+n+" is not allowed in polynomial expression")}(a);var s={};return s.expression=a,s.variables=i,s}(e,t,!0,r.firstRules),a=i.variables.length;if(e=i.expression,a>=1){var o,s;e=function e(t,n,r){var i=t.type,a=arguments.length>1;if("OperatorNode"===i&&t.isBinary()){var o,s=!1;if("^"===t.op&&("ParenthesisNode"!==t.args[0].type&&"OperatorNode"!==t.args[0].type||"ConstantNode"!==t.args[1].type||(s=(o=parseFloat(t.args[1].value))>=2&&Ve(o))),s){if(o>2){var u=t.args[0],c=new p("^","pow",[t.args[0].cloneDeep(),new f(o-1)]);t=new p("*","multiply",[u,c])}else t=new p("*","multiply",[t.args[0],t.args[0].cloneDeep()]);a&&("content"===r?n.content=t:n.args[r]=t)}}if("ParenthesisNode"===i)e(t.content,t,"content");else if("ConstantNode"!==i&&"SymbolNode"!==i)for(var l=0;l<t.args.length;l++)e(t.args[l],t,l);if(!a)return t}(e);var u,c=!0,d=!1;for(e=l(e,r.firstRules,{},{exactFractions:!1});s=c?r.distrDivRules:r.sucDivRules,c=!c,(u=(e=l(e,s)).toString())!==o;)d=!0,o=u;d&&(e=l(e,r.firstRulesAgain,{},{exactFractions:!1})),e=l(e,r.finalRules,{},{exactFractions:!1})}var h=[],m={};return"OperatorNode"===e.type&&e.isBinary()&&"/"===e.op?(1===a&&(e.args[0]=x(e.args[0],h),e.args[1]=x(e.args[1])),n&&(m.numerator=e.args[0],m.denominator=e.args[1])):(1===a&&(e=x(e,h)),n&&(m.numerator=e,m.denominator=null)),n?(m.coefficients=h,m.variables=i.variables,m.expression=e,m):e}});function x(e,t){void 0===t&&(t=[]),t[0]=0;var n=0,r="";!function e(i,a,o){var s=i.type;if("FunctionNode"===s)throw new Error("There is an unsolved function call");if("OperatorNode"===s){if(-1==="+-*^".indexOf(i.op))throw new Error("Operator "+i.op+" invalid");if(null!==a){if(("unaryMinus"===i.fn||"pow"===i.fn)&&"add"!==a.fn&&"subtract"!==a.fn&&"multiply"!==a.fn)throw new Error("Invalid "+i.op+" placing");if(("subtract"===i.fn||"add"===i.fn||"multiply"===i.fn)&&"add"!==a.fn&&"subtract"!==a.fn)throw new Error("Invalid "+i.op+" placing");if(("subtract"===i.fn||"add"===i.fn||"unaryMinus"===i.fn)&&0!==o.noFil)throw new Error("Invalid "+i.op+" placing")}"^"!==i.op&&"*"!==i.op||(o.fire=i.op);for(var u=0;u<i.args.length;u++)"unaryMinus"===i.fn&&(o.oper="-"),"+"!==i.op&&"subtract"!==i.fn||(o.fire="",o.cte=1,o.oper=0===u?"+":i.op),o.noFil=u,e(i.args[u],i,o)}else if("SymbolNode"===s){if(i.name!==r&&""!==r)throw new Error("There is more than one variable");if(r=i.name,null===a)return void(t[1]=1);if("^"===a.op&&0!==o.noFil)throw new Error("In power the variable should be the first parameter");if("*"===a.op&&1!==o.noFil)throw new Error("In multiply the variable should be the second parameter");""!==o.fire&&"*"!==o.fire||(n<1&&(t[1]=0),t[1]+=o.cte*("+"===o.oper?1:-1),n=Math.max(1,n))}else{if("ConstantNode"!==s)throw new Error("Type "+s+" is not allowed");var c=parseFloat(i.value);if(null===a)return void(t[0]=c);if("^"===a.op){if(1!==o.noFil)throw new Error("Constant cannot be powered");if(!Ve(c)||c<=0)throw new Error("Non-integer exponent is not allowed");for(var l=n+1;l<c;l++)t[l]=0;return c>n&&(t[c]=0),t[c]+=o.cte*("+"===o.oper?1:-1),void(n=Math.max(c,n))}o.cte=c,""===o.fire&&(t[0]+=o.cte*("+"===o.oper?1:-1))}}(e,null,{cte:1,oper:"+",fire:""});for(var i,a=!0,o=n=t.length-1;o>=0;o--)if(0!==t[o]){var s=new f(a?t[o]:Math.abs(t[o])),u=t[o]<0?"-":"+";if(o>0){var c=new h(r);if(o>1){var l=new f(o);c=new p("^","pow",[c,l])}s=-1===t[o]&&a?new p("-","unaryMinus",[c]):1===Math.abs(t[o])?c:new p("*","multiply",[s,c])}i=a?s:"+"===u?new p("+","add",[i,s]):new p("-","subtract",[i,s]),a=!1}return a?new f(0):i}return y})),Ef=Ot("reviver",["classes"],(function(e){var t=e.classes;return function(e,n){var r=t[n&&n.mathjs];return r&&"function"==typeof r.fromJSON?r.fromJSON(n):n}})),Cf=Ot("replacer",[],(function(){return function(e,t){return"number"!=typeof t||isFinite(t)&&!isNaN(t)?t:{mathjs:"number",value:String(t)}}})),Tf=Ot("true",[],(function(){return!0})),Rf=Ot("false",[],(function(){return!1})),If=Ot("null",[],(function(){return null})),Of=Wf("Infinity",["config","?BigNumber"],(function(e){return"BigNumber"===e.config.number?new(0,e.BigNumber)(Infinity):Infinity})),Pf=Wf("NaN",["config","?BigNumber"],(function(e){return"BigNumber"===e.config.number?new(0,e.BigNumber)(NaN):NaN})),Ff=Wf("pi",["config","?BigNumber"],(function(e){return"BigNumber"===e.config.number?xu(e.BigNumber):mi})),Lf=Wf("tau",["config","?BigNumber"],(function(e){return"BigNumber"===e.config.number?bu(e.BigNumber):gi})),kf=Wf("e",["config","?BigNumber"],(function(e){return"BigNumber"===e.config.number?vu(e.BigNumber):vi})),Bf=Wf("phi",["config","?BigNumber"],(function(e){return"BigNumber"===e.config.number?yu(e.BigNumber):1.618033988749895})),Vf=Wf("LN2",["config","?BigNumber"],(function(e){return"BigNumber"===e.config.number?new(0,e.BigNumber)(2).ln():Math.LN2})),qf=Wf("LN10",["config","?BigNumber"],(function(e){return"BigNumber"===e.config.number?new(0,e.BigNumber)(10).ln():Math.LN10})),zf=Wf("LOG2E",["config","?BigNumber"],(function(e){var t=e.BigNumber;return"BigNumber"===e.config.number?new t(1).div(new t(2).ln()):Math.LOG2E})),Gf=Wf("LOG10E",["config","?BigNumber"],(function(e){var t=e.BigNumber;return"BigNumber"===e.config.number?new t(1).div(new t(10).ln()):Math.LOG10E})),Uf=Wf("SQRT1_2",["config","?BigNumber"],(function(e){return"BigNumber"===e.config.number?new(0,e.BigNumber)("0.5").sqrt():Math.SQRT1_2})),jf=Wf("SQRT2",["config","?BigNumber"],(function(e){return"BigNumber"===e.config.number?new(0,e.BigNumber)(2).sqrt():Math.SQRT2})),Yf=Wf("i",["Complex"],(function(e){return e.Complex.I})),Hf=Ot("PI",["pi"],(function(e){return e.pi})),Kf=Ot("E",["e"],(function(e){return e.e})),Qf=Ot("version",[],(function(){return"6.6.5"}));function Wf(e,t,n){return Ot(e,t,n,{recreateOnConfigChange:!0})}var $f=Hp("speedOfLight","299792458","m s^-1"),Xf=Hp("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),Zf=Hp("planckConstant","6.62607015e-34","J s"),Jf=Hp("reducedPlanckConstant","1.0545718176461565e-34","J s"),ep=Hp("magneticConstant","1.25663706212e-6","N A^-2"),tp=Hp("electricConstant","8.8541878128e-12","F m^-1"),np=Hp("vacuumImpedance","376.730313667","ohm"),rp=Hp("coulomb","8.987551792261171e9","N m^2 C^-2"),ip=Hp("elementaryCharge","1.602176634e-19","C"),ap=Hp("bohrMagneton","9.2740100783e-24","J T^-1"),op=Hp("conductanceQuantum","7.748091729863649e-5","S"),sp=Hp("inverseConductanceQuantum","12906.403729652257","ohm"),up=Hp("magneticFluxQuantum","2.0678338484619295e-15","Wb"),cp=Hp("nuclearMagneton","5.0507837461e-27","J T^-1"),lp=Hp("klitzing","25812.807459304513","ohm"),fp=Hp("bohrRadius","5.29177210903e-11","m"),pp=Hp("classicalElectronRadius","2.8179403262e-15","m"),dp=Hp("electronMass","9.1093837015e-31","kg"),hp=Hp("fermiCoupling","1.1663787e-5","GeV^-2"),mp=Kp("fineStructure",.0072973525693),gp=Hp("hartreeEnergy","4.3597447222071e-18","J"),vp=Hp("protonMass","1.67262192369e-27","kg"),yp=Hp("deuteronMass","3.3435830926e-27","kg"),xp=Hp("neutronMass","1.6749271613e-27","kg"),bp=Hp("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),wp=Hp("rydberg","10973731.568160","m^-1"),Np=Hp("thomsonCrossSection","6.6524587321e-29","m^2"),Sp=Kp("weakMixingAngle",.2229),_p=Kp("efimovFactor",22.7),Dp=Hp("atomicMass","1.66053906660e-27","kg"),Ap=Hp("avogadro","6.02214076e23","mol^-1"),Mp=Hp("boltzmann","1.380649e-23","J K^-1"),Ep=Hp("faraday","96485.33212331001","C mol^-1"),Cp=Hp("firstRadiation","3.7417718521927573e-16","W m^2"),Tp=Hp("loschmidt","2.686780111798444e25","m^-3"),Rp=Hp("gasConstant","8.31446261815324","J K^-1 mol^-1"),Ip=Hp("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),Op=Hp("molarVolume","0.022413969545014137","m^3 mol^-1"),Pp=Kp("sackurTetrode",-1.16487052358),Fp=Hp("secondRadiation","0.014387768775039337","m K"),Lp=Hp("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),kp=Hp("wienDisplacement","2.897771955e-3","m K"),Bp=Hp("molarMass","0.99999999965e-3","kg mol^-1"),Vp=Hp("molarMassC12","11.9999999958e-3","kg mol^-1"),qp=Hp("gravity","9.80665","m s^-2"),zp=Hp("planckLength","1.616255e-35","m"),Gp=Hp("planckMass","2.176435e-8","kg"),Up=Hp("planckTime","5.391245e-44","s"),jp=Hp("planckCharge","1.87554603778e-18","C"),Yp=Hp("planckTemperature","1.416785e+32","K");function Hp(e,t,n){return Ot(e,["config","Unit","BigNumber"],(function(e){var r=new(0,e.Unit)("BigNumber"===e.config.number?new(0,e.BigNumber)(t):parseFloat(t),n);return r.fixPrefix=!0,r}))}function Kp(e,t){return Ot(e,["config","BigNumber"],(function(e){return"BigNumber"===e.config.number?new(0,e.BigNumber)(t):t}))}var Qp=Ot("apply",["typed","isInteger"],(function(e){var t=e.typed,n=xa({typed:t,isInteger:e.isInteger});return t("apply",{"...any":function(e){var t=e[1];B(t)?e[1]=t-1:V(t)&&(e[1]=t.minus(1));try{return n.apply(null,e)}catch(e){throw yc(e)}}})}),{isTransformFunction:!0}),Wp=Ot("column",["typed","Index","matrix","range"],(function(e){var t=e.typed,n=Do({typed:t,Index:e.Index,matrix:e.matrix,range:e.range});return t("column",{"...any":function(e){var t=e.length-1,r=e[t];B(r)&&(e[t]=r-1);try{return n.apply(null,e)}catch(e){throw yc(e)}}})}),{isTransformFunction:!0});function $p(e,t,n){var r=e.filter((function(e){return be(e)&&!(e.name in t)&&!(e.name in n)}))[0];if(!r)throw new Error('No undefined variable found in inline expression "'+e+'"');var i=r.name,a=Object.create(n),o=e.compile();return function(e){return a[i]=e,o.evaluate(a)}}var Xp=Ot("filter",["typed"],(function(e){var t=e.typed;function n(e,t,n){var i,a;return e[0]&&(i=e[0].compile().evaluate(n)),e[1]&&(a=be(e[1])||pe(e[1])?e[1].compile().evaluate(n):$p(e[1],t,n)),r(i,a)}n.rawArgs=!0;var r=t("filter",{"Array, function":Zp,"Matrix, function":function(e,t){return e.create(Zp(e.toArray(),t))},"Array, RegExp":Mt,"Matrix, RegExp":function(e,t){return e.create(Mt(e.toArray(),t))}});return n}),{isTransformFunction:!0});function Zp(e,t){var n=Ro(t);return At(e,(function(e,r,i){return 1===n?t(e):2===n?t(e,[r+1]):t(e,[r+1],i)}))}var Jp=Ot("forEach",["typed"],(function(e){var t=e.typed;function n(e,t,n){var i,a;return e[0]&&(i=e[0].compile().evaluate(n)),e[1]&&(a=be(e[1])||pe(e[1])?e[1].compile().evaluate(n):$p(e[1],t,n)),r(i,a)}n.rawArgs=!0;var r=t("forEach",{"Array | Matrix, function":function(e,t){var n=Ro(t);!function r(i,a){Array.isArray(i)?Dt(i,(function(e,t){r(e,a.concat(t+1))})):1===n?t(i):2===n?t(i,a):t(i,a,e)}(e.valueOf(),[])}});return n}),{isTransformFunction:!0}),ed=Ot("index",["Index"],(function(e){var t=e.Index;return function(){for(var e=[],n=0,r=arguments.length;n<r;n++){var i=arguments[n];if(W(i))i.start--,i.end-=i.step>0?0:2;else if(i&&!0===i.isSet)i=i.map((function(e){return e-1}));else if(j(i)||Y(i))i=i.map((function(e){return e-1}));else if(B(i))i--;else if(V(i))i=i.toNumber()-1;else if("string"!=typeof i)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");e[n]=i}var a=new t;return t.apply(a,e),a}}),{isTransformFunction:!0}),td=Ot("map",["typed"],(function(e){var t=e.typed;function n(e,t,n){var i,a;return e[0]&&(i=e[0].compile().evaluate(n)),e[1]&&(a=be(e[1])||pe(e[1])?e[1].compile().evaluate(n):$p(e[1],t,n)),r(i,a)}n.rawArgs=!0;var r=t("map",{"Array, function":function(e,t){return nd(e,t,e)},"Matrix, function":function(e,t){return e.create(nd(e.valueOf(),t,e))}});return n}),{isTransformFunction:!0});function nd(e,t,n){var r=Ro(t);return function e(i,a){return Array.isArray(i)?_t(i,(function(t,n){return e(t,a.concat(n+1))})):1===r?t(i):2===r?t(i,a):t(i,a,n)}(e,[])}var rd=["typed","larger"],id=Ot("max",rd,(function(e){var t=e.typed,n=fu({typed:t,larger:e.larger});return t("max",{"...any":function(e){if(2===e.length&&H(e[0])){var t=e[1];B(t)?e[1]=t-1:V(t)&&(e[1]=t.minus(1))}try{return n.apply(null,e)}catch(e){throw yc(e)}}})}),{isTransformFunction:!0}),ad=["typed","add","divide"],od=Ot("mean",ad,(function(e){var t=e.typed,n=Yl({typed:t,add:e.add,divide:e.divide});return t("mean",{"...any":function(e){if(2===e.length&&H(e[0])){var t=e[1];B(t)?e[1]=t-1:V(t)&&(e[1]=t.minus(1))}try{return n.apply(null,e)}catch(e){throw yc(e)}}})}),{isTransformFunction:!0}),sd=["typed","smaller"],ud=Ot("min",sd,(function(e){var t=e.typed,n=pu({typed:t,smaller:e.smaller});return t("min",{"...any":function(e){if(2===e.length&&H(e[0])){var t=e[1];B(t)?e[1]=t-1:V(t)&&(e[1]=t.minus(1))}try{return n.apply(null,e)}catch(e){throw yc(e)}}})}),{isTransformFunction:!0}),cd=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq"],ld=Ot("range",cd,(function(e){var t=e.typed,n=Ho({typed:t,config:e.config,matrix:e.matrix,bignumber:e.bignumber,smaller:e.smaller,smallerEq:e.smallerEq,larger:e.larger,largerEq:e.largerEq});return t("range",{"...any":function(e){return"boolean"!=typeof e[e.length-1]&&e.push(!0),n.apply(null,e)}})}),{isTransformFunction:!0}),fd=["typed","Index","matrix","range"],pd=Ot("row",fd,(function(e){var t=e.typed,n=$o({typed:t,Index:e.Index,matrix:e.matrix,range:e.range});return t("row",{"...any":function(e){var t=e.length-1,r=e[t];B(r)&&(e[t]=r-1);try{return n.apply(null,e)}catch(e){throw yc(e)}}})}),{isTransformFunction:!0}),dd=["typed","matrix"],hd=Ot("subset",dd,(function(e){var t=e.typed,n=ss({typed:t,matrix:e.matrix});return t("subset",{"...any":function(e){try{return n.apply(null,e)}catch(e){throw yc(e)}}})}),{isTransformFunction:!0}),md=["typed","matrix","isInteger"],gd=Ot("concat",md,(function(e){var t=e.typed,n=So({typed:t,matrix:e.matrix,isInteger:e.isInteger});return t("concat",{"...any":function(e){var t=e.length-1,r=e[t];B(r)?e[t]=r-1:V(r)&&(e[t]=r.minus(1));try{return n.apply(null,e)}catch(e){throw yc(e)}}})}),{isTransformFunction:!0}),vd=["typed","sqrt","variance"],yd=Ot("std",vd,(function(e){var t=e.typed,n=Xl({typed:t,sqrt:e.sqrt,variance:e.variance});return t("std",{"...any":function(e){if(e.length>=2&&H(e[0])){var t=e[1];B(t)?e[1]=t-1:V(t)&&(e[1]=t.minus(1))}try{return n.apply(null,e)}catch(e){throw yc(e)}}})}),{isTransformFunction:!0}),xd=["typed","config","add","?bignumber","?fraction"],bd=Ot("sum",xd,(function(e){var t=e.typed,n=jl({typed:t,config:e.config,add:e.add,bignumber:e.bignumber,fraction:e.fraction});return t("sum",{"...any":function(e){if(2===e.length&&H(e[0])){var t=e[1];B(t)?e[1]=t-1:V(t)&&(e[1]=t.minus(1))}try{return n.apply(null,e)}catch(e){throw yc(e)}}})}),{isTransformFunction:!0}),wd=["typed","add","subtract","multiply","divide","apply","isNaN"],Nd=Ot("variance",wd,(function(e){var t=e.typed,n=Ql({typed:t,add:e.add,subtract:e.subtract,multiply:e.multiply,divide:e.divide,apply:e.apply,isNaN:e.isNaN});return t("variance",{"...any":function(e){if(e.length>=2&&H(e[0])){var t=e[1];B(t)?e[1]=t-1:V(t)&&(e[1]=t.minus(1))}try{return n.apply(null,e)}catch(e){throw yc(e)}}})}),{isTransformFunction:!0}),Sd={__proto__:null,createTyped:kt,createResultSet:Ut,createBigNumberClass:yr,createComplexClass:wr,createFractionClass:Sr,createRangeClass:_r,createMatrixClass:Dr,createDenseMatrixClass:Ar,createClone:Mr,createIsInteger:Pr,createIsNegative:Wi,createIsNumeric:$i,createHasNumericValue:Xi,createIsPositive:Zi,createIsZero:Ji,createIsNaN:ea,createTypeOf:na,createDeprecatedTypeof:ra,createEqualScalar:oa,createSparseMatrixClass:sa,createNumber:ua,createString:ca,createBoolean:la,createBignumber:fa,createComplex:pa,createFraction:da,createMatrix:ha,createSplitUnit:ma,createUnaryMinus:ga,createUnaryPlus:va,createAbs:ya,createApply:xa,createAddScalar:wa,createCbrt:Na,createCeil:Sa,createCube:_a,createExp:Da,createExpm1:Aa,createFix:Ma,createFloor:Ea,createGcd:Pa,createLcm:Ba,createLog10:Va,createLog2:qa,createMod:ja,createMultiplyScalar:Ya,createMultiply:Ha,createNthRoot:Ka,createSign:Qa,createSqrt:Wa,createSquare:$a,createSubtract:Xa,createXgcd:Ja,createDotMultiply:to,createBitAnd:lo,createBitNot:fo,createBitOr:po,createBitXor:mo,createArg:go,createConj:vo,createIm:yo,createRe:xo,createNot:bo,createOr:wo,createXor:No,createConcat:So,createColumn:Do,createCross:Ao,createDiag:Mo,createEye:Eo,createFilter:Io,createFlatten:Po,createForEach:Fo,createGetMatrixDataType:ko,createIdentity:Bo,createKron:Vo,createMap:qo,createOnes:Go,createRange:Ho,createReshape:Ko,createResize:Wo,createRow:$o,createSize:Xo,createSqueeze:Zo,createSubset:ss,createTranspose:ps,createCtranspose:ds,createZeros:hs,createErf:ms,createMode:ws,createProd:Ss,createFormat:_s,createPrint:Ds,createTo:Ms,createIsPrime:Es,createNumeric:Cs,createDivideScalar:Ts,createPow:Rs,createRound:Ls,createLog:Bs,createLog1p:Vs,createNthRoots:qs,createDotPow:zs,createDotDivide:Gs,createLsolve:js,createUsolve:Ys,createLeftShift:Ks,createRightArithShift:Qs,createRightLogShift:Ws,createAnd:$s,createCompare:Xs,createCompareNatural:Js,createCompareText:eu,createEqual:tu,createEqualText:nu,createSmaller:ru,createSmallerEq:iu,createLarger:au,createLargerEq:ou,createDeepEqual:su,createUnequal:uu,createPartitionSelect:cu,createSort:lu,createMax:fu,createMin:pu,createImmutableDenseMatrixClass:du,createIndexClass:hu,createFibonacciHeapClass:mu,createSpaClass:gu,createUnitClass:_u,createUnitFunction:Du,createSparse:Au,createCreateUnit:Mu,createAcos:Eu,createAcosh:Cu,createAcot:Tu,createAcoth:Ru,createAcsc:Iu,createAcsch:Ou,createAsec:Pu,createAsech:Fu,createAsin:Lu,createAsinh:ku,createAtan:Bu,createAtan2:Vu,createAtanh:qu,createCos:zu,createCosh:Gu,createCot:Uu,createCoth:ju,createCsc:Yu,createCsch:Hu,createSec:Ku,createSech:Qu,createSin:Wu,createSinh:$u,createTan:Xu,createTanh:Zu,createSetCartesian:Ju,createSetDifference:ec,createSetDistinct:tc,createSetIntersect:nc,createSetIsSubset:rc,createSetMultiplicity:ic,createSetPowerset:ac,createSetSize:oc,createSetSymDifference:sc,createSetUnion:uc,createAdd:cc,createHypot:lc,createNorm:fc,createDot:pc,createTrace:dc,createIndex:hc,createNode:vc,createAccessorNode:wc,createArrayNode:Nc,createAssignmentNode:Ec,createBlockNode:Cc,createConditionalNode:Tc,createConstantNode:zc,createFunctionAssignmentNode:Gc,createIndexNode:jc,createObjectNode:Hc,createOperatorNode:Kc,createParenthesisNode:Qc,createRangeNode:Wc,createRelationalNode:$c,createSymbolNode:Xc,createFunctionNode:el,createParse:nl,createCompile:rl,createEvaluate:il,createDeprecatedEval:al,createParserClass:ol,createParser:sl,createLup:ul,createQr:ll,createSlu:Sl,createLusolve:Dl,createHelpClass:Al,createChainClass:Ml,createHelp:Pl,createChain:Fl,createDet:Ll,createInv:kl,createEigs:Bl,createExpm:Vl,createSqrtm:ql,createDivide:zl,createDistance:Gl,createIntersect:Ul,createSum:jl,createMean:Yl,createMedian:Hl,createMad:Kl,createVariance:Ql,createDeprecatedVar:Wl,createQuantileSeq:$l,createStd:Xl,createCombinations:Zl,createCombinationsWithRep:ef,createGamma:nf,createFactorial:rf,createKldivergence:af,createMultinomial:of,createPermutations:sf,createPickRandom:pf,createRandom:hf,createRandomInt:mf,createStirlingS2:gf,createBellNumbers:vf,createCatalan:yf,createComposition:xf,createSimplify:Df,createDerivative:Af,createRationalize:Mf,createReviver:Ef,createReplacer:Cf,createE:kf,createUppercaseE:Kf,createFalse:Rf,createI:Yf,createInfinity:Of,createLN10:qf,createLN2:Vf,createLOG10E:Gf,createLOG2E:zf,createNaN:Pf,createNull:If,createPhi:Bf,createPi:Ff,createUppercasePi:Hf,createSQRT1_2:Uf,createSQRT2:jf,createTau:Lf,createTrue:Tf,createVersion:Qf,createAtomicMass:Dp,createAvogadro:Ap,createBohrMagneton:ap,createBohrRadius:fp,createBoltzmann:Mp,createClassicalElectronRadius:pp,createConductanceQuantum:op,createCoulomb:rp,createDeuteronMass:yp,createEfimovFactor:_p,createElectricConstant:tp,createElectronMass:dp,createElementaryCharge:ip,createFaraday:Ep,createFermiCoupling:hp,createFineStructure:mp,createFirstRadiation:Cp,createGasConstant:Rp,createGravitationConstant:Xf,createGravity:qp,createHartreeEnergy:gp,createInverseConductanceQuantum:sp,createKlitzing:lp,createLoschmidt:Tp,createMagneticConstant:ep,createMagneticFluxQuantum:up,createMolarMass:Bp,createMolarMassC12:Vp,createMolarPlanckConstant:Ip,createMolarVolume:Op,createNeutronMass:xp,createNuclearMagneton:cp,createPlanckCharge:jp,createPlanckConstant:Zf,createPlanckLength:zp,createPlanckMass:Gp,createPlanckTemperature:Yp,createPlanckTime:Up,createProtonMass:vp,createQuantumOfCirculation:bp,createReducedPlanckConstant:Jf,createRydberg:wp,createSackurTetrode:Pp,createSecondRadiation:Fp,createSpeedOfLight:$f,createStefanBoltzmann:Lp,createThomsonCrossSection:Np,createVacuumImpedance:np,createWeakMixingAngle:Sp,createWienDisplacement:kp,createApplyTransform:Qp,createColumnTransform:Wp,createFilterTransform:Xp,createForEachTransform:Jp,createIndexTransform:ed,createMapTransform:td,createMaxTransform:id,createMeanTransform:od,createMinTransform:ud,createRangeTransform:ld,createRowTransform:pd,createSubsetTransform:hd,createConcatTransform:gd,createStdTransform:yd,createSumTransform:bd,createVarianceTransform:Nd},_d=Ut({}),Dd=wr({}),Ad=_r({}),Md=Eo({}),Ed=Rf({}),Cd=If({}),Td=Tf({}),Rd=yr({config:ke}),Id=Dr({}),Od=Cf({}),Pd=Yf({Complex:Dd}),Fd=qf({BigNumber:Rd,config:ke}),Ld=Gf({BigNumber:Rd,config:ke}),kd=Pf({BigNumber:Rd,config:ke}),Bd=Ff({BigNumber:Rd,config:ke}),Vd=Uf({BigNumber:Rd,config:ke}),qd=Lf({BigNumber:Rd,config:ke}),zd=_p({BigNumber:Rd,config:ke}),Gd=mp({BigNumber:Rd,config:ke}),Ud=Pp({BigNumber:Rd,config:ke}),jd=Sp({BigNumber:Rd,config:ke}),Yd=Sr({}),Hd=kf({BigNumber:Rd,config:ke}),Kd=Of({BigNumber:Rd,config:ke}),Qd=zf({BigNumber:Rd,config:ke}),Wd=Qf({}),$d=Ar({Matrix:Id}),Xd=Bf({BigNumber:Rd,config:ke}),Zd=kt({BigNumber:Rd,Complex:Dd,DenseMatrix:$d,Fraction:Yd}),Jd=Pr({typed:Zd}),eh=$i({typed:Zd}),th=Zi({typed:Zd}),nh=ea({typed:Zd}),rh=oa({config:ke,typed:Zd}),ih=ua({typed:Zd}),ah=la({typed:Zd}),oh=pa({Complex:Dd,typed:Zd}),sh=ma({typed:Zd}),uh=va({BigNumber:Rd,config:ke,typed:Zd}),ch=xa({isInteger:Jd,typed:Zd}),lh=_a({typed:Zd}),fh=Aa({Complex:Dd,typed:Zd}),ph=Va({Complex:Dd,config:ke,typed:Zd}),dh=Ya({typed:Zd}),hh=Qa({BigNumber:Rd,Fraction:Yd,complex:oh,typed:Zd}),mh=$a({typed:Zd}),gh=fo({typed:Zd}),vh=go({typed:Zd}),yh=yo({typed:Zd}),xh=bo({typed:Zd}),bh=Io({typed:Zd}),wh=Fo({typed:Zd}),Nh=qo({typed:Zd}),Sh=ms({typed:Zd}),_h=_s({typed:Zd}),Dh=Es({typed:Zd}),Ah=Eu({Complex:Dd,config:ke,typed:Zd}),Mh=Tu({BigNumber:Rd,typed:Zd}),Eh=Iu({BigNumber:Rd,Complex:Dd,config:ke,typed:Zd}),Ch=Pu({BigNumber:Rd,Complex:Dd,config:ke,typed:Zd}),Th=Lu({Complex:Dd,config:ke,typed:Zd}),Rh=Bu({typed:Zd}),Ih=qu({Complex:Dd,config:ke,typed:Zd}),Oh=Gu({typed:Zd}),Ph=ju({BigNumber:Rd,typed:Zd}),Fh=Hu({BigNumber:Rd,typed:Zd}),Lh=Qu({BigNumber:Rd,typed:Zd}),kh=$u({typed:Zd}),Bh=Zu({typed:Zd}),Vh=Zl({typed:Zd}),qh=pf({config:ke,typed:Zd}),zh=mf({config:ke,typed:Zd}),Gh=Vf({BigNumber:Rd,config:ke}),Uh=Mr({typed:Zd}),jh=Xi({isNumeric:eh,typed:Zd}),Yh=na({typed:Zd}),Hh=ca({typed:Zd}),Kh=da({Fraction:Yd,typed:Zd}),Qh=ga({typed:Zd}),Wh=wa({typed:Zd}),$h=Da({typed:Zd}),Xh=qa({Complex:Dd,config:ke,typed:Zd}),Zh=Wa({Complex:Dd,config:ke,typed:Zd}),Jh=vo({typed:Zd}),em=ko({typed:Zd}),tm=ws({isNaN:nh,isNumeric:eh,typed:Zd}),nm=Ds({typed:Zd}),rm=Cu({Complex:Dd,config:ke,typed:Zd}),im=Ou({BigNumber:Rd,typed:Zd}),am=ku({typed:Zd}),om=zu({typed:Zd}),sm=Yu({BigNumber:Rd,typed:Zd}),um=Wu({typed:Zd}),cm=ef({typed:Zd}),lm=hf({config:ke,typed:Zd}),fm=jf({BigNumber:Rd,config:ke}),pm=Wi({typed:Zd}),dm=sa({Matrix:Id,equalScalar:rh,typed:Zd}),hm=ha({DenseMatrix:$d,Matrix:Id,SparseMatrix:dm,typed:Zd}),mm=Na({BigNumber:Rd,Complex:Dd,Fraction:Yd,config:ke,isNegative:pm,matrix:hm,typed:Zd,unaryMinus:Qh}),gm=Pa({BigNumber:Rd,DenseMatrix:$d,equalScalar:rh,matrix:hm,typed:Zd}),vm=ja({DenseMatrix:$d,equalScalar:rh,matrix:hm,typed:Zd}),ym=Ka({BigNumber:Rd,equalScalar:rh,matrix:hm,typed:Zd}),xm=Ja({BigNumber:Rd,config:ke,matrix:hm,typed:Zd}),bm=lo({equalScalar:rh,matrix:hm,typed:Zd}),wm=mo({DenseMatrix:$d,matrix:hm,typed:Zd}),Nm=wo({DenseMatrix:$d,equalScalar:rh,matrix:hm,typed:Zd}),Sm=So({isInteger:Jd,matrix:hm,typed:Zd}),_m=Mo({DenseMatrix:$d,SparseMatrix:dm,matrix:hm,typed:Zd}),Dm=Bo({BigNumber:Rd,DenseMatrix:$d,SparseMatrix:dm,config:ke,matrix:hm,typed:Zd}),Am=Go({BigNumber:Rd,config:ke,matrix:hm,typed:Zd}),Mm=Ko({isInteger:Jd,matrix:hm,typed:Zd}),Em=Xo({matrix:hm,config:ke,typed:Zd}),Cm=ss({matrix:hm,typed:Zd}),Tm=hs({BigNumber:Rd,config:ke,matrix:hm,typed:Zd}),Rm=Ms({matrix:hm,typed:Zd}),Im=Ls({BigNumber:Rd,DenseMatrix:$d,equalScalar:rh,matrix:hm,typed:Zd,zeros:Tm}),Om=Ks({DenseMatrix:$d,equalScalar:rh,matrix:hm,typed:Zd,zeros:Tm}),Pm=Ws({DenseMatrix:$d,equalScalar:rh,matrix:hm,typed:Zd,zeros:Tm}),Fm=Xs({BigNumber:Rd,DenseMatrix:$d,Fraction:Yd,config:ke,equalScalar:rh,matrix:hm,typed:Zd}),Lm=eu({matrix:hm,typed:Zd}),km=ru({DenseMatrix:$d,config:ke,matrix:hm,typed:Zd}),Bm=au({DenseMatrix:$d,config:ke,matrix:hm,typed:Zd}),Vm=uu({DenseMatrix:$d,config:ke,equalScalar:rh,matrix:hm,typed:Zd}),qm=fu({larger:Bm,typed:Zd}),zm=du({DenseMatrix:$d,smaller:km}),Gm=mu({larger:Bm,smaller:km}),Um=Au({SparseMatrix:dm,typed:Zd}),jm=Ru({BigNumber:Rd,Complex:Dd,config:ke,typed:Zd}),Ym=Vu({BigNumber:Rd,DenseMatrix:$d,equalScalar:rh,matrix:hm,typed:Zd}),Hm=Ku({BigNumber:Rd,typed:Zd}),Km=cc({DenseMatrix:$d,SparseMatrix:dm,addScalar:Wh,equalScalar:rh,matrix:hm,typed:Zd}),Qm=dc({add:Km,matrix:hm,typed:Zd}),Wm=xf({addScalar:Wh,combinations:Vh,isInteger:Jd,isNegative:pm,isPositive:th,larger:Bm,typed:Zd}),$m=Ji({typed:Zd}),Xm=ya({typed:Zd}),Zm=Ea({config:ke,round:Im,typed:Zd}),Jm=Ha({addScalar:Wh,equalScalar:rh,matrix:hm,multiplyScalar:dh,typed:Zd}),eg=to({equalScalar:rh,matrix:hm,multiplyScalar:dh,typed:Zd}),tg=xo({typed:Zd}),ng=Po({matrix:hm,typed:Zd}),rg=Wo({config:ke,matrix:hm}),ig=Zo({matrix:hm,typed:Zd}),ag=Ss({multiply:Jm,typed:Zd}),og=Rs({Complex:Dd,config:ke,fraction:Kh,identity:Dm,matrix:hm,multiply:Jm,number:ih,typed:Zd}),sg=zs({DenseMatrix:$d,equalScalar:rh,matrix:hm,pow:og,typed:Zd}),ug=Qs({DenseMatrix:$d,equalScalar:rh,matrix:hm,typed:Zd,zeros:Tm}),cg=Js({compare:Fm,typed:Zd}),lg=nu({compareText:Lm,isZero:$m,typed:Zd}),fg=ou({DenseMatrix:$d,config:ke,matrix:hm,typed:Zd}),pg=cu({compare:Fm,isNaN:nh,isNumeric:eh,typed:Zd}),dg=pu({smaller:km,typed:Zd}),hg=gu({FibonacciHeap:Gm,addScalar:Wh,equalScalar:rh}),mg=Fu({BigNumber:Rd,Complex:Dd,config:ke,typed:Zd}),gg=Xu({typed:Zd}),vg=oc({compareNatural:cg,typed:Zd}),yg=fc({abs:Xm,add:Km,conj:Jh,equalScalar:rh,larger:Bm,matrix:hm,multiply:Jm,pow:og,smaller:km,sqrt:Zh,typed:Zd}),xg=$l({add:Km,compare:Fm,multiply:Jm,partitionSelect:pg,typed:Zd}),bg=nf({BigNumber:Rd,Complex:Dd,config:ke,multiplyScalar:dh,pow:og,typed:Zd}),wg=fa({BigNumber:Rd,typed:Zd}),Ng=Ba({equalScalar:rh,matrix:hm,typed:Zd}),Sg=po({DenseMatrix:$d,equalScalar:rh,matrix:hm,typed:Zd}),_g=Vo({matrix:hm,multiplyScalar:dh,typed:Zd}),Dg=ps({matrix:hm,typed:Zd}),Ag=Cs({bignumber:wg,fraction:Kh,number:ih}),Mg=$s({equalScalar:rh,matrix:hm,not:xh,typed:Zd,zeros:Tm}),Eg=iu({DenseMatrix:$d,config:ke,matrix:hm,typed:Zd}),Cg=lu({compare:Fm,compareNatural:cg,matrix:hm,typed:Zd}),Tg=Uu({BigNumber:Rd,typed:Zd}),Rg=pc({add:Km,multiply:Jm,typed:Zd}),Ig=jl({bignumber:wg,fraction:Kh,add:Km,config:ke,typed:Zd}),Og=rf({gamma:bg,typed:Zd}),Pg=sf({factorial:Og,typed:Zd}),Fg=Sa({config:ke,round:Im,typed:Zd}),Lg=Xa({DenseMatrix:$d,addScalar:Wh,equalScalar:rh,matrix:hm,typed:Zd,unaryMinus:Qh}),kg=Ao({matrix:hm,multiply:Jm,subtract:Lg,typed:Zd}),Bg=ds({conj:Jh,transpose:Dg,typed:Zd}),Vg=tu({DenseMatrix:$d,equalScalar:rh,matrix:hm,typed:Zd}),qg=hu({ImmutableDenseMatrix:zm}),zg=Ju({DenseMatrix:$d,Index:qg,compareNatural:cg,size:Em,subset:Cm,typed:Zd}),Gg=tc({DenseMatrix:$d,Index:qg,compareNatural:cg,size:Em,subset:Cm,typed:Zd}),Ug=rc({Index:qg,compareNatural:cg,size:Em,subset:Cm,typed:Zd}),jg=ac({Index:qg,compareNatural:cg,size:Em,subset:Cm,typed:Zd}),Yg=hc({Index:qg,typed:Zd}),Hg=Ma({Complex:Dd,ceil:Fg,floor:Zm,typed:Zd}),Kg=Ho({bignumber:wg,matrix:hm,config:ke,larger:Bm,largerEq:fg,smaller:km,smallerEq:Eg,typed:Zd}),Qg=Ts({numeric:Ag,typed:Zd}),Wg=qs({Complex:Dd,config:ke,divideScalar:Qg,typed:Zd}),$g=js({DenseMatrix:$d,divideScalar:Qg,equalScalar:rh,matrix:hm,multiplyScalar:dh,subtract:Lg,typed:Zd}),Xg=su({equal:Vg,typed:Zd}),Zg=ec({DenseMatrix:$d,Index:qg,compareNatural:cg,size:Em,subset:Cm,typed:Zd}),Jg=ic({Index:qg,compareNatural:cg,size:Em,subset:Cm,typed:Zd}),ev=lc({abs:Xm,addScalar:Wh,divideScalar:Qg,isPositive:th,multiplyScalar:dh,smaller:km,sqrt:Zh,typed:Zd}),tv=ul({DenseMatrix:$d,Spa:hg,SparseMatrix:dm,abs:Xm,addScalar:Wh,divideScalar:Qg,equalScalar:rh,larger:Bm,matrix:hm,multiplyScalar:dh,subtract:Lg,typed:Zd,unaryMinus:Qh}),nv=Sl({SparseMatrix:dm,abs:Xm,add:Km,divideScalar:Qg,larger:Bm,largerEq:fg,multiply:Jm,subtract:Lg,transpose:Dg,typed:Zd}),rv=Ll({lup:tv,matrix:hm,multiply:Jm,subtract:Lg,typed:Zd,unaryMinus:Qh}),iv=Gl({abs:Xm,addScalar:Wh,divideScalar:Qg,multiplyScalar:dh,sqrt:Zh,subtract:Lg,typed:Zd,unaryMinus:Qh}),av=gf({addScalar:Wh,combinations:Vh,divideScalar:Qg,factorial:Og,isInteger:Jd,isNegative:pm,larger:Bm,multiplyScalar:dh,pow:og,subtract:Lg,typed:Zd}),ov=yf({addScalar:Wh,combinations:Vh,divideScalar:Qg,isInteger:Jd,isNegative:pm,multiplyScalar:dh,typed:Zd}),sv=No({DenseMatrix:$d,matrix:hm,typed:Zd}),uv=$o({Index:qg,matrix:hm,range:Kg,typed:Zd}),cv=Gs({DenseMatrix:$d,divideScalar:Qg,equalScalar:rh,matrix:hm,typed:Zd}),lv=_u({BigNumber:Rd,Complex:Dd,Fraction:Yd,abs:Xm,addScalar:Wh,config:ke,divideScalar:Qg,equal:Vg,fix:Hg,format:_h,isNumeric:eh,multiplyScalar:dh,number:ih,pow:og,round:Im,subtract:Lg}),fv=Mu({Unit:lv,typed:Zd}),pv=sc({Index:qg,concat:Sm,setDifference:Zg,size:Em,subset:Cm,typed:Zd}),dv=ll({addScalar:Wh,complex:oh,conj:Jh,divideScalar:Qg,equal:Vg,identity:Dm,isZero:$m,matrix:hm,multiplyScalar:dh,sign:hh,sqrt:Zh,subtract:Lg,typed:Zd,unaryMinus:Qh,zeros:Tm}),hv=kl({abs:Xm,addScalar:Wh,det:rv,divideScalar:Qg,identity:Dm,matrix:hm,multiply:Jm,typed:Zd,unaryMinus:Qh}),mv=Vl({abs:Xm,add:Km,identity:Dm,inv:hv,multiply:Jm,typed:Zd}),gv=zl({divideScalar:Qg,equalScalar:rh,inv:hv,matrix:hm,multiply:Jm,typed:Zd}),vv=Yl({add:Km,divide:gv,typed:Zd}),yv=Ql({add:Km,apply:ch,divide:gv,isNaN:nh,multiply:Jm,subtract:Lg,typed:Zd}),xv=Xl({sqrt:Zh,typed:Zd,variance:yv}),bv=of({add:Km,divide:gv,factorial:Og,isInteger:Jd,isPositive:th,multiply:Jm,typed:Zd}),wv=Dp({BigNumber:Rd,Unit:lv,config:ke}),Nv=ap({BigNumber:Rd,Unit:lv,config:ke}),Sv=Mp({BigNumber:Rd,Unit:lv,config:ke}),_v=op({BigNumber:Rd,Unit:lv,config:ke}),Dv=yp({BigNumber:Rd,Unit:lv,config:ke}),Av=dp({BigNumber:Rd,Unit:lv,config:ke}),Mv=Ep({BigNumber:Rd,Unit:lv,config:ke}),Ev=Cp({BigNumber:Rd,Unit:lv,config:ke}),Cv=Xf({BigNumber:Rd,Unit:lv,config:ke}),Tv=gp({BigNumber:Rd,Unit:lv,config:ke}),Rv=lp({BigNumber:Rd,Unit:lv,config:ke}),Iv=ep({BigNumber:Rd,Unit:lv,config:ke}),Ov=Bp({BigNumber:Rd,Unit:lv,config:ke}),Pv=Ip({BigNumber:Rd,Unit:lv,config:ke}),Fv=xp({BigNumber:Rd,Unit:lv,config:ke}),Lv=jp({BigNumber:Rd,Unit:lv,config:ke}),kv=zp({BigNumber:Rd,Unit:lv,config:ke}),Bv=Yp({BigNumber:Rd,Unit:lv,config:ke}),Vv=vp({BigNumber:Rd,Unit:lv,config:ke}),qv=Jf({BigNumber:Rd,Unit:lv,config:ke}),zv=Fp({BigNumber:Rd,Unit:lv,config:ke}),Gv=Lp({BigNumber:Rd,Unit:lv,config:ke}),Uv=np({BigNumber:Rd,Unit:lv,config:ke}),jv=Do({Index:qg,matrix:hm,range:Kg,typed:Zd}),Yv=Ys({DenseMatrix:$d,divideScalar:Qg,equalScalar:rh,matrix:hm,multiplyScalar:dh,subtract:Lg,typed:Zd}),Hv=nc({DenseMatrix:$d,Index:qg,compareNatural:cg,size:Em,subset:Cm,typed:Zd}),Kv=Dl({DenseMatrix:$d,lsolve:$g,lup:tv,matrix:hm,slu:nv,typed:Zd,usolve:Yv}),Qv=Bl({abs:Xm,add:Km,addScalar:Wh,atan:Rh,bignumber:wg,config:ke,cos:om,equal:Vg,inv:hv,matrix:hm,multiply:Jm,multiplyScalar:dh,sin:um,subtract:Lg,typed:Zd}),Wv=Ul({abs:Xm,add:Km,addScalar:Wh,config:ke,divideScalar:Qg,equalScalar:rh,matrix:hm,multiply:Jm,multiplyScalar:dh,smaller:km,subtract:Lg,typed:Zd}),$v=vf({addScalar:Wh,isInteger:Jd,isNegative:pm,stirlingS2:av,typed:Zd}),Xv=Ap({BigNumber:Rd,Unit:lv,config:ke}),Zv=pp({BigNumber:Rd,Unit:lv,config:ke}),Jv=tp({BigNumber:Rd,Unit:lv,config:ke}),ey=hp({BigNumber:Rd,Unit:lv,config:ke}),ty=qp({BigNumber:Rd,Unit:lv,config:ke}),ny=Tp({BigNumber:Rd,Unit:lv,config:ke}),ry=Vp({BigNumber:Rd,Unit:lv,config:ke}),iy=cp({BigNumber:Rd,Unit:lv,config:ke}),ay=Gp({BigNumber:Rd,Unit:lv,config:ke}),oy=bp({BigNumber:Rd,Unit:lv,config:ke}),sy=$f({BigNumber:Rd,Unit:lv,config:ke}),uy=kp({BigNumber:Rd,Unit:lv,config:ke}),cy=Bs({Complex:Dd,config:ke,divideScalar:Qg,typed:Zd}),ly=Du({Unit:lv,typed:Zd}),fy=ql({abs:Xm,add:Km,identity:Dm,inv:hv,max:qm,multiply:Jm,size:Em,sqrt:Zh,subtract:Lg,typed:Zd}),py=af({divide:gv,dotDivide:cv,isNumeric:eh,log:cy,matrix:hm,multiply:Jm,sum:Ig,typed:Zd}),dy=fp({BigNumber:Rd,Unit:lv,config:ke}),hy=ip({BigNumber:Rd,Unit:lv,config:ke}),my=sp({BigNumber:Rd,Unit:lv,config:ke}),gy=Op({BigNumber:Rd,Unit:lv,config:ke}),vy=Up({BigNumber:Rd,Unit:lv,config:ke}),yy=Np({BigNumber:Rd,Unit:lv,config:ke}),xy=Vs({Complex:Dd,config:ke,divideScalar:Qg,log:cy,typed:Zd}),by=Hl({add:Km,compare:Fm,divide:gv,partitionSelect:pg,typed:Zd}),wy=Rp({BigNumber:Rd,Unit:lv,config:ke}),Ny=Zf({BigNumber:Rd,Unit:lv,config:ke}),Sy=uc({Index:qg,concat:Sm,setIntersect:Hv,setSymDifference:pv,size:Em,subset:Cm,typed:Zd}),_y=up({BigNumber:Rd,Unit:lv,config:ke}),Dy=rp({BigNumber:Rd,Unit:lv,config:ke}),Ay=Kl({abs:Xm,map:Nh,median:by,subtract:Lg,typed:Zd}),My=wp({BigNumber:Rd,Unit:lv,config:ke});function Ey(){return(Ey=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Cy={},Ty={},Ry={},Iy=vc({mathWithTransform:Ty}),Oy=Nc({Node:Iy}),Py=Cc({Node:Iy,ResultSet:_d}),Fy=zc({Node:Iy}),Ly=Hc({Node:Iy}),ky=Qc({Node:Iy}),By=$c({Node:Iy}),Vy=Ml({math:Cy}),qy=Ef({classes:Ry}),zy=Tc({Node:Iy}),Gy=Kc({Node:Iy}),Uy=Wc({Node:Iy}),jy=Gc({Node:Iy,typed:Zd}),Yy=Fl({Chain:Vy,typed:Zd}),Hy=wc({Node:Iy,subset:Cm}),Ky=jc({Node:Iy,Range:Ad,size:Em}),Qy=Ec({matrix:hm,Node:Iy,subset:Cm}),Wy=Xc({Unit:lv,Node:Iy,math:Cy}),$y=el({Node:Iy,SymbolNode:Wy,math:Cy}),Xy=nl({AccessorNode:Hy,ArrayNode:Oy,AssignmentNode:Qy,BlockNode:Py,ConditionalNode:zy,ConstantNode:Fy,FunctionAssignmentNode:jy,FunctionNode:$y,IndexNode:Ky,ObjectNode:Ly,OperatorNode:Gy,ParenthesisNode:ky,RangeNode:Uy,RelationalNode:By,SymbolNode:Wy,config:ke,numeric:Ag,typed:Zd}),Zy=il({parse:Xy,typed:Zd}),Jy=ol({parse:Xy}),ex=Al({parse:Xy}),tx=rl({parse:Xy,typed:Zd}),nx=sl({Parser:Jy,typed:Zd}),rx=Df({bignumber:wg,fraction:Kh,ConstantNode:Fy,FunctionNode:$y,OperatorNode:Gy,ParenthesisNode:ky,SymbolNode:Wy,add:Km,config:ke,divide:gv,equal:Vg,isZero:$m,mathWithTransform:Ty,multiply:Jm,parse:Xy,pow:og,subtract:Lg,typed:Zd}),ix=Mf({bignumber:wg,fraction:Kh,ConstantNode:Fy,FunctionNode:$y,OperatorNode:Gy,ParenthesisNode:ky,SymbolNode:Wy,add:Km,config:ke,divide:gv,equal:Vg,isZero:$m,mathWithTransform:Ty,multiply:Jm,parse:Xy,pow:og,simplify:rx,subtract:Lg,typed:Zd}),ax=Pl({Help:ex,mathWithTransform:Ty,typed:Zd}),ox=Af({ConstantNode:Fy,FunctionNode:$y,OperatorNode:Gy,ParenthesisNode:ky,SymbolNode:Wy,config:ke,equal:Vg,isZero:$m,numeric:Ag,parse:Xy,simplify:rx,typed:Zd});Ey(Cy,{typeof:Yh,eye:Md,reviver:qy,false:Ed,null:Cd,true:Td,replacer:Od,i:Pd,LN10:Fd,LOG10E:Ld,NaN:kd,pi:Bd,SQRT1_2:Vd,tau:qd,efimovFactor:zd,fineStructure:Gd,sackurTetrode:Ud,weakMixingAngle:jd,e:Hd,Infinity:Kd,LOG2E:Qd,PI:Bd,version:Wd,E:Hd,phi:Xd,typed:Zd,isInteger:Jd,isNumeric:eh,isPositive:th,isNaN:nh,equalScalar:rh,number:ih,boolean:ah,complex:oh,splitUnit:sh,unaryPlus:uh,apply:ch,cube:lh,expm1:fh,log10:ph,multiplyScalar:dh,sign:hh,square:mh,bitNot:gh,arg:vh,im:yh,not:xh,filter:bh,forEach:wh,map:Nh,erf:Sh,format:_h,isPrime:Dh,acos:Ah,acot:Mh,acsc:Eh,asec:Ch,asin:Th,atan:Rh,atanh:Ih,cosh:Oh,coth:Ph,csch:Fh,sech:Lh,sinh:kh,tanh:Bh,chain:Yy,combinations:Vh,pickRandom:qh,randomInt:zh,LN2:Gh,clone:Uh,hasNumericValue:jh,typeOf:Yh,string:Hh,fraction:Kh,unaryMinus:Qh,addScalar:Wh,exp:$h,log2:Xh,sqrt:Zh,conj:Jh,getMatrixDataType:em,mode:tm,print:nm,acosh:rm,acsch:im,asinh:am,cos:om,csc:sm,sin:um,combinationsWithRep:cm,random:lm,SQRT2:fm,isNegative:pm,matrix:hm,cbrt:mm,gcd:gm,mod:vm,nthRoot:ym,xgcd:xm,bitAnd:bm,bitXor:wm,or:Nm,concat:Sm,diag:_m,identity:Dm,ones:Am,reshape:Mm,size:Em,subset:Cm,zeros:Tm,to:Rm,round:Im,leftShift:Om,rightLogShift:Pm,compare:Fm,compareText:Lm,smaller:km,larger:Bm,unequal:Vm,max:qm,sparse:Um,acoth:jm,atan2:Ym,sec:Hm,add:Km,trace:Qm,composition:Wm,isZero:$m,abs:Xm,floor:Zm,multiply:Jm,dotMultiply:eg,re:tg,flatten:ng,resize:rg,squeeze:ig,prod:ag,pow:og,dotPow:sg,rightArithShift:ug,compareNatural:cg,equalText:lg,largerEq:fg,partitionSelect:pg,min:dg,asech:mg,tan:gg,setSize:vg,norm:yg,quantileSeq:xg,gamma:bg,bignumber:wg,lcm:Ng,bitOr:Sg,kron:_g,transpose:Dg,numeric:Ag,and:Mg,smallerEq:Eg,sort:Cg,cot:Tg,dot:Rg,sum:Ig,factorial:Og,permutations:Pg,ceil:Fg,subtract:Lg,cross:kg,ctranspose:Bg,equal:Vg,setCartesian:zg,setDistinct:Gg,setIsSubset:Ug,setPowerset:jg,index:Yg,fix:Hg,range:Kg,divideScalar:Qg,nthRoots:Wg,lsolve:$g,deepEqual:Xg,setDifference:Zg,setMultiplicity:Jg,hypot:ev,lup:tv,slu:nv,det:rv,distance:iv,stirlingS2:av,catalan:ov,xor:sv,row:uv,dotDivide:cv,createUnit:fv,setSymDifference:pv,qr:dv,inv:hv,expm:mv,divide:gv,mean:vv,variance:yv,std:xv,multinomial:bv,atomicMass:wv,bohrMagneton:Nv,boltzmann:Sv,conductanceQuantum:_v,deuteronMass:Dv,electronMass:Av,faraday:Mv,firstRadiation:Ev,gravitationConstant:Cv,hartreeEnergy:Tv,klitzing:Rv,magneticConstant:Iv,molarMass:Ov,molarPlanckConstant:Pv,neutronMass:Fv,planckCharge:Lv,planckLength:kv,planckTemperature:Bv,protonMass:Vv,reducedPlanckConstant:qv,secondRadiation:zv,stefanBoltzmann:Gv,vacuumImpedance:Uv,column:jv,usolve:Yv,setIntersect:Hv,lusolve:Kv,eigs:Qv,intersect:Wv,var:yv,bellNumbers:$v,avogadro:Xv,classicalElectronRadius:Zv,electricConstant:Jv,fermiCoupling:ey,gravity:ty,loschmidt:ny,molarMassC12:ry,nuclearMagneton:iy,planckMass:ay,quantumOfCirculation:oy,speedOfLight:sy,wienDisplacement:uy,log:cy,unit:ly,parse:Xy,evaluate:Zy,sqrtm:fy,kldivergence:py,bohrRadius:dy,elementaryCharge:hy,inverseConductanceQuantum:my,molarVolume:gy,planckTime:vy,thomsonCrossSection:yy,log1p:xy,compile:tx,parser:nx,median:by,simplify:rx,rationalize:ix,gasConstant:wy,planckConstant:Ny,setUnion:Sy,help:ax,derivative:ox,magneticFluxQuantum:_y,eval:Zy,coulomb:Dy,mad:Ay,rydberg:My,config:ke}),Ey(Ty,Cy,{apply:Qp({isInteger:Jd,typed:Zd}),filter:Xp({typed:Zd}),map:td({typed:Zd}),forEach:Jp({typed:Zd}),max:id({larger:Bm,typed:Zd}),min:ud({smaller:km,typed:Zd}),subset:hd({matrix:hm,typed:Zd}),concat:gd({isInteger:Jd,matrix:hm,typed:Zd}),range:ld({bignumber:wg,matrix:hm,config:ke,larger:Bm,largerEq:fg,smaller:km,smallerEq:Eg,typed:Zd}),sum:bd({bignumber:wg,fraction:Kh,add:Km,config:ke,typed:Zd}),index:ed({Index:qg}),column:Wp({Index:qg,matrix:hm,range:Kg,typed:Zd}),row:pd({Index:qg,matrix:hm,range:Kg,typed:Zd}),mean:od({add:Km,divide:gv,typed:Zd}),variance:Nd({add:Km,apply:ch,divide:gv,isNaN:nh,multiply:Jm,subtract:Lg,typed:Zd}),std:yd({sqrt:Zh,typed:Zd,variance:yv})}),Ey(Ry,{ResultSet:_d,Complex:Dd,Range:Ad,Node:Iy,ArrayNode:Oy,BlockNode:Py,ConstantNode:Fy,ObjectNode:Ly,ParenthesisNode:ky,RelationalNode:By,Chain:Vy,BigNumber:Rd,Matrix:Id,ConditionalNode:zy,OperatorNode:Gy,Fraction:Yd,RangeNode:Uy,DenseMatrix:$d,FunctionAssignmentNode:jy,SparseMatrix:dm,ImmutableDenseMatrix:zm,FibonacciHeap:Gm,AccessorNode:Hy,IndexNode:Ky,Spa:hg,AssignmentNode:Qy,Index:qg,Unit:lv,SymbolNode:Wy,FunctionNode:$y,Parser:Jy,Help:ex}),Vy.createProxy(Cy);var sx={createBigNumberClass:yr},ux={createComplexClass:wr},cx={createMatrixClass:Dr},lx={MatrixDependencies:cx,createDenseMatrixClass:Ar},fx={createFractionClass:Sr},px={BigNumberDependencies:sx,ComplexDependencies:ux,DenseMatrixDependencies:lx,FractionDependencies:fx,createTyped:kt},dx={createResultSet:Ut},hx={createRangeClass:_r},mx={typedDependencies:px,createClone:Mr},gx={typedDependencies:px,createIsInteger:Pr},vx={typedDependencies:px,createIsNegative:Wi},yx={typedDependencies:px,createIsNumeric:$i},xx={isNumericDependencies:yx,typedDependencies:px,createHasNumericValue:Xi},bx={typedDependencies:px,createIsPositive:Zi},wx={typedDependencies:px,createIsZero:Ji},Nx={typedDependencies:px,createIsNaN:ea},Sx={typedDependencies:px,createTypeOf:na},_x={createDeprecatedTypeof:ra},Dx={typedDependencies:px,createEqualScalar:oa},Ax={MatrixDependencies:cx,equalScalarDependencies:Dx,typedDependencies:px,createSparseMatrixClass:sa},Mx={typedDependencies:px,createNumber:ua},Ex={typedDependencies:px,createString:ca},Cx={typedDependencies:px,createBoolean:la},Tx={BigNumberDependencies:sx,typedDependencies:px,createBignumber:fa},Rx={ComplexDependencies:ux,typedDependencies:px,createComplex:pa},Ix={FractionDependencies:fx,typedDependencies:px,createFraction:da},Ox={DenseMatrixDependencies:lx,MatrixDependencies:cx,SparseMatrixDependencies:Ax,typedDependencies:px,createMatrix:ha},Px={typedDependencies:px,createSplitUnit:ma},Fx={typedDependencies:px,createUnaryMinus:ga},Lx={BigNumberDependencies:sx,typedDependencies:px,createUnaryPlus:va},kx={typedDependencies:px,createAbs:ya},Bx={isIntegerDependencies:gx,typedDependencies:px,createApply:xa},Vx={typedDependencies:px,createAddScalar:wa},qx={BigNumberDependencies:sx,ComplexDependencies:ux,FractionDependencies:fx,isNegativeDependencies:vx,matrixDependencies:Ox,typedDependencies:px,unaryMinusDependencies:Fx,createCbrt:Na},zx={BigNumberDependencies:sx,matrixDependencies:Ox,typedDependencies:px,createZeros:hs},Gx={BigNumberDependencies:sx,DenseMatrixDependencies:lx,equalScalarDependencies:Dx,matrixDependencies:Ox,typedDependencies:px,zerosDependencies:zx,createRound:Ls},Ux={roundDependencies:Gx,typedDependencies:px,createCeil:Sa},jx={typedDependencies:px,createCube:_a},Yx={typedDependencies:px,createExp:Da},Hx={ComplexDependencies:ux,typedDependencies:px,createExpm1:Aa},Kx={roundDependencies:Gx,typedDependencies:px,createFloor:Ea},Qx={ComplexDependencies:ux,ceilDependencies:Ux,floorDependencies:Kx,typedDependencies:px,createFix:Ma},Wx={BigNumberDependencies:sx,DenseMatrixDependencies:lx,equalScalarDependencies:Dx,matrixDependencies:Ox,typedDependencies:px,createGcd:Pa},$x={equalScalarDependencies:Dx,matrixDependencies:Ox,typedDependencies:px,createLcm:Ba},Xx={ComplexDependencies:ux,typedDependencies:px,createLog10:Va},Zx={ComplexDependencies:ux,typedDependencies:px,createLog2:qa},Jx={DenseMatrixDependencies:lx,equalScalarDependencies:Dx,matrixDependencies:Ox,typedDependencies:px,createMod:ja},eb={typedDependencies:px,createMultiplyScalar:Ya},tb={addScalarDependencies:Vx,equalScalarDependencies:Dx,matrixDependencies:Ox,multiplyScalarDependencies:eb,typedDependencies:px,createMultiply:Ha},nb={BigNumberDependencies:sx,equalScalarDependencies:Dx,matrixDependencies:Ox,typedDependencies:px,createNthRoot:Ka},rb={BigNumberDependencies:sx,FractionDependencies:fx,complexDependencies:Rx,typedDependencies:px,createSign:Qa},ib={ComplexDependencies:ux,typedDependencies:px,createSqrt:Wa},ab={typedDependencies:px,createSquare:$a},ob={DenseMatrixDependencies:lx,addScalarDependencies:Vx,equalScalarDependencies:Dx,matrixDependencies:Ox,typedDependencies:px,unaryMinusDependencies:Fx,createSubtract:Xa},sb={BigNumberDependencies:sx,matrixDependencies:Ox,typedDependencies:px,createXgcd:Ja},ub={equalScalarDependencies:Dx,matrixDependencies:Ox,multiplyScalarDependencies:eb,typedDependencies:px,createDotMultiply:to},cb={equalScalarDependencies:Dx,matrixDependencies:Ox,typedDependencies:px,createBitAnd:lo},lb={typedDependencies:px,createBitNot:fo},fb={DenseMatrixDependencies:lx,equalScalarDependencies:Dx,matrixDependencies:Ox,typedDependencies:px,createBitOr:po},pb={DenseMatrixDependencies:lx,matrixDependencies:Ox,typedDependencies:px,createBitXor:mo},db={typedDependencies:px,createArg:go},hb={typedDependencies:px,createConj:vo},mb={typedDependencies:px,createIm:yo},gb={typedDependencies:px,createRe:xo},vb={typedDependencies:px,createNot:bo},yb={DenseMatrixDependencies:lx,equalScalarDependencies:Dx,matrixDependencies:Ox,typedDependencies:px,createOr:wo},xb={DenseMatrixDependencies:lx,matrixDependencies:Ox,typedDependencies:px,createXor:No},bb={isIntegerDependencies:gx,matrixDependencies:Ox,typedDependencies:px,createConcat:So},wb={DenseMatrixDependencies:lx,matrixDependencies:Ox,typedDependencies:px,createSmaller:ru},Nb={DenseMatrixDependencies:lx,smallerDependencies:wb,createImmutableDenseMatrixClass:du},Sb={ImmutableDenseMatrixDependencies:Nb,createIndexClass:hu},_b={DenseMatrixDependencies:lx,matrixDependencies:Ox,typedDependencies:px,createLarger:au},Db={DenseMatrixDependencies:lx,matrixDependencies:Ox,typedDependencies:px,createLargerEq:ou},Ab={DenseMatrixDependencies:lx,matrixDependencies:Ox,typedDependencies:px,createSmallerEq:iu},Mb={bignumberDependencies:Tx,matrixDependencies:Ox,largerDependencies:_b,largerEqDependencies:Db,smallerDependencies:wb,smallerEqDependencies:Ab,typedDependencies:px,createRange:Ho},Eb={IndexDependencies:Sb,matrixDependencies:Ox,rangeDependencies:Mb,typedDependencies:px,createColumn:Do},Cb={matrixDependencies:Ox,multiplyDependencies:tb,subtractDependencies:ob,typedDependencies:px,createCross:Ao},Tb={DenseMatrixDependencies:lx,SparseMatrixDependencies:Ax,matrixDependencies:Ox,typedDependencies:px,createDiag:Mo},Rb={createEye:Eo},Ib={typedDependencies:px,createFilter:Io},Ob={matrixDependencies:Ox,typedDependencies:px,createFlatten:Po},Pb={typedDependencies:px,createForEach:Fo},Fb={typedDependencies:px,createGetMatrixDataType:ko},Lb={BigNumberDependencies:sx,DenseMatrixDependencies:lx,SparseMatrixDependencies:Ax,matrixDependencies:Ox,typedDependencies:px,createIdentity:Bo},kb={matrixDependencies:Ox,multiplyScalarDependencies:eb,typedDependencies:px,createKron:Vo},Bb={typedDependencies:px,createMap:qo},Vb={BigNumberDependencies:sx,matrixDependencies:Ox,typedDependencies:px,createOnes:Go},qb={isIntegerDependencies:gx,matrixDependencies:Ox,typedDependencies:px,createReshape:Ko},zb={matrixDependencies:Ox,createResize:Wo},Gb={IndexDependencies:Sb,matrixDependencies:Ox,rangeDependencies:Mb,typedDependencies:px,createRow:$o},Ub={matrixDependencies:Ox,typedDependencies:px,createSize:Xo},jb={matrixDependencies:Ox,typedDependencies:px,createSqueeze:Zo},Yb={matrixDependencies:Ox,typedDependencies:px,createSubset:ss},Hb={matrixDependencies:Ox,typedDependencies:px,createTranspose:ps},Kb={conjDependencies:hb,transposeDependencies:Hb,typedDependencies:px,createCtranspose:ds},Qb={typedDependencies:px,createErf:ms},Wb={isNaNDependencies:Nx,isNumericDependencies:yx,typedDependencies:px,createMode:ws},$b={multiplyDependencies:tb,typedDependencies:px,createProd:Ss},Xb={typedDependencies:px,createFormat:_s},Zb={typedDependencies:px,createPrint:Ds},Jb={matrixDependencies:Ox,typedDependencies:px,createTo:Ms},ew={typedDependencies:px,createIsPrime:Es},tw={bignumberDependencies:Tx,fractionDependencies:Ix,numberDependencies:Mx,createNumeric:Cs},nw={numericDependencies:tw,typedDependencies:px,createDivideScalar:Ts},rw={ComplexDependencies:ux,fractionDependencies:Ix,identityDependencies:Lb,matrixDependencies:Ox,multiplyDependencies:tb,numberDependencies:Mx,typedDependencies:px,createPow:Rs},iw={ComplexDependencies:ux,divideScalarDependencies:nw,typedDependencies:px,createLog:Bs},aw={ComplexDependencies:ux,divideScalarDependencies:nw,logDependencies:iw,typedDependencies:px,createLog1p:Vs},ow={ComplexDependencies:ux,divideScalarDependencies:nw,typedDependencies:px,createNthRoots:qs},sw={DenseMatrixDependencies:lx,equalScalarDependencies:Dx,matrixDependencies:Ox,powDependencies:rw,typedDependencies:px,createDotPow:zs},uw={DenseMatrixDependencies:lx,divideScalarDependencies:nw,equalScalarDependencies:Dx,matrixDependencies:Ox,typedDependencies:px,createDotDivide:Gs},cw={DenseMatrixDependencies:lx,divideScalarDependencies:nw,equalScalarDependencies:Dx,matrixDependencies:Ox,multiplyScalarDependencies:eb,subtractDependencies:ob,typedDependencies:px,createLsolve:js},lw={DenseMatrixDependencies:lx,divideScalarDependencies:nw,equalScalarDependencies:Dx,matrixDependencies:Ox,multiplyScalarDependencies:eb,subtractDependencies:ob,typedDependencies:px,createUsolve:Ys},fw={DenseMatrixDependencies:lx,equalScalarDependencies:Dx,matrixDependencies:Ox,typedDependencies:px,zerosDependencies:zx,createLeftShift:Ks},pw={DenseMatrixDependencies:lx,equalScalarDependencies:Dx,matrixDependencies:Ox,typedDependencies:px,zerosDependencies:zx,createRightArithShift:Qs},dw={DenseMatrixDependencies:lx,equalScalarDependencies:Dx,matrixDependencies:Ox,typedDependencies:px,zerosDependencies:zx,createRightLogShift:Ws},hw={equalScalarDependencies:Dx,matrixDependencies:Ox,notDependencies:vb,typedDependencies:px,zerosDependencies:zx,createAnd:$s},mw={BigNumberDependencies:sx,DenseMatrixDependencies:lx,FractionDependencies:fx,equalScalarDependencies:Dx,matrixDependencies:Ox,typedDependencies:px,createCompare:Xs},gw={compareDependencies:mw,typedDependencies:px,createCompareNatural:Js},vw={matrixDependencies:Ox,typedDependencies:px,createCompareText:eu},yw={DenseMatrixDependencies:lx,equalScalarDependencies:Dx,matrixDependencies:Ox,typedDependencies:px,createEqual:tu},xw={compareTextDependencies:vw,isZeroDependencies:wx,typedDependencies:px,createEqualText:nu},bw={equalDependencies:yw,typedDependencies:px,createDeepEqual:su},ww={DenseMatrixDependencies:lx,equalScalarDependencies:Dx,matrixDependencies:Ox,typedDependencies:px,createUnequal:uu},Nw={compareDependencies:mw,isNaNDependencies:Nx,isNumericDependencies:yx,typedDependencies:px,createPartitionSelect:cu},Sw={compareDependencies:mw,compareNaturalDependencies:gw,matrixDependencies:Ox,typedDependencies:px,createSort:lu},_w={largerDependencies:_b,typedDependencies:px,createMax:fu},Dw={smallerDependencies:wb,typedDependencies:px,createMin:pu},Aw={largerDependencies:_b,smallerDependencies:wb,createFibonacciHeapClass:mu},Mw={FibonacciHeapDependencies:Aw,addScalarDependencies:Vx,equalScalarDependencies:Dx,createSpaClass:gu},Ew={BigNumberDependencies:sx,ComplexDependencies:ux,FractionDependencies:fx,absDependencies:kx,addScalarDependencies:Vx,divideScalarDependencies:nw,equalDependencies:yw,fixDependencies:Qx,formatDependencies:Xb,isNumericDependencies:yx,multiplyScalarDependencies:eb,numberDependencies:Mx,powDependencies:rw,roundDependencies:Gx,subtractDependencies:ob,createUnitClass:_u},Cw={UnitDependencies:Ew,typedDependencies:px,createUnitFunction:Du},Tw={SparseMatrixDependencies:Ax,typedDependencies:px,createSparse:Au},Rw={UnitDependencies:Ew,typedDependencies:px,createCreateUnit:Mu},Iw={ComplexDependencies:ux,typedDependencies:px,createAcos:Eu},Ow={ComplexDependencies:ux,typedDependencies:px,createAcosh:Cu},Pw={BigNumberDependencies:sx,typedDependencies:px,createAcot:Tu},Fw={BigNumberDependencies:sx,ComplexDependencies:ux,typedDependencies:px,createAcoth:Ru},Lw={BigNumberDependencies:sx,ComplexDependencies:ux,typedDependencies:px,createAcsc:Iu},kw={BigNumberDependencies:sx,typedDependencies:px,createAcsch:Ou},Bw={BigNumberDependencies:sx,ComplexDependencies:ux,typedDependencies:px,createAsec:Pu},Vw={BigNumberDependencies:sx,ComplexDependencies:ux,typedDependencies:px,createAsech:Fu},qw={ComplexDependencies:ux,typedDependencies:px,createAsin:Lu},zw={typedDependencies:px,createAsinh:ku},Gw={typedDependencies:px,createAtan:Bu},Uw={BigNumberDependencies:sx,DenseMatrixDependencies:lx,equalScalarDependencies:Dx,matrixDependencies:Ox,typedDependencies:px,createAtan2:Vu},jw={ComplexDependencies:ux,typedDependencies:px,createAtanh:qu},Yw={typedDependencies:px,createCos:zu},Hw={typedDependencies:px,createCosh:Gu},Kw={BigNumberDependencies:sx,typedDependencies:px,createCot:Uu},Qw={BigNumberDependencies:sx,typedDependencies:px,createCoth:ju},Ww={BigNumberDependencies:sx,typedDependencies:px,createCsc:Yu},$w={BigNumberDependencies:sx,typedDependencies:px,createCsch:Hu},Xw={BigNumberDependencies:sx,typedDependencies:px,createSec:Ku},Zw={BigNumberDependencies:sx,typedDependencies:px,createSech:Qu},Jw={typedDependencies:px,createSin:Wu},eN={typedDependencies:px,createSinh:$u},tN={typedDependencies:px,createTan:Xu},nN={typedDependencies:px,createTanh:Zu},rN={DenseMatrixDependencies:lx,IndexDependencies:Sb,compareNaturalDependencies:gw,sizeDependencies:Ub,subsetDependencies:Yb,typedDependencies:px,createSetCartesian:Ju},iN={DenseMatrixDependencies:lx,IndexDependencies:Sb,compareNaturalDependencies:gw,sizeDependencies:Ub,subsetDependencies:Yb,typedDependencies:px,createSetDifference:ec},aN={DenseMatrixDependencies:lx,IndexDependencies:Sb,compareNaturalDependencies:gw,sizeDependencies:Ub,subsetDependencies:Yb,typedDependencies:px,createSetDistinct:tc},oN={DenseMatrixDependencies:lx,IndexDependencies:Sb,compareNaturalDependencies:gw,sizeDependencies:Ub,subsetDependencies:Yb,typedDependencies:px,createSetIntersect:nc},sN={IndexDependencies:Sb,compareNaturalDependencies:gw,sizeDependencies:Ub,subsetDependencies:Yb,typedDependencies:px,createSetIsSubset:rc},uN={IndexDependencies:Sb,compareNaturalDependencies:gw,sizeDependencies:Ub,subsetDependencies:Yb,typedDependencies:px,createSetMultiplicity:ic},cN={IndexDependencies:Sb,compareNaturalDependencies:gw,sizeDependencies:Ub,subsetDependencies:Yb,typedDependencies:px,createSetPowerset:ac},lN={compareNaturalDependencies:gw,typedDependencies:px,createSetSize:oc},fN={IndexDependencies:Sb,concatDependencies:bb,setDifferenceDependencies:iN,sizeDependencies:Ub,subsetDependencies:Yb,typedDependencies:px,createSetSymDifference:sc},pN={IndexDependencies:Sb,concatDependencies:bb,setIntersectDependencies:oN,setSymDifferenceDependencies:fN,sizeDependencies:Ub,subsetDependencies:Yb,typedDependencies:px,createSetUnion:uc},dN={DenseMatrixDependencies:lx,SparseMatrixDependencies:Ax,addScalarDependencies:Vx,equalScalarDependencies:Dx,matrixDependencies:Ox,typedDependencies:px,createAdd:cc},hN={absDependencies:kx,addScalarDependencies:Vx,divideScalarDependencies:nw,isPositiveDependencies:bx,multiplyScalarDependencies:eb,smallerDependencies:wb,sqrtDependencies:ib,typedDependencies:px,createHypot:lc},mN={absDependencies:kx,addDependencies:dN,conjDependencies:hb,equalScalarDependencies:Dx,largerDependencies:_b,matrixDependencies:Ox,multiplyDependencies:tb,powDependencies:rw,smallerDependencies:wb,sqrtDependencies:ib,typedDependencies:px,createNorm:fc},gN={addDependencies:dN,multiplyDependencies:tb,typedDependencies:px,createDot:pc},vN={addDependencies:dN,matrixDependencies:Ox,typedDependencies:px,createTrace:dc},yN={IndexDependencies:Sb,typedDependencies:px,createIndex:hc},xN={createNode:vc},bN={NodeDependencies:xN,subsetDependencies:Yb,createAccessorNode:wc},wN={NodeDependencies:xN,createArrayNode:Nc},NN={matrixDependencies:Ox,NodeDependencies:xN,subsetDependencies:Yb,createAssignmentNode:Ec},SN={NodeDependencies:xN,ResultSetDependencies:dx,createBlockNode:Cc},_N={NodeDependencies:xN,createConditionalNode:Tc},DN={NodeDependencies:xN,createConstantNode:zc},AN={NodeDependencies:xN,typedDependencies:px,createFunctionAssignmentNode:Gc},MN={NodeDependencies:xN,RangeDependencies:hx,sizeDependencies:Ub,createIndexNode:jc},EN={NodeDependencies:xN,createObjectNode:Hc},CN={NodeDependencies:xN,createOperatorNode:Kc},TN={NodeDependencies:xN,createParenthesisNode:Qc},RN={NodeDependencies:xN,createRangeNode:Wc},IN={NodeDependencies:xN,createRelationalNode:$c},ON={UnitDependencies:Ew,NodeDependencies:xN,createSymbolNode:Xc},PN={NodeDependencies:xN,SymbolNodeDependencies:ON,createFunctionNode:el},FN={AccessorNodeDependencies:bN,ArrayNodeDependencies:wN,AssignmentNodeDependencies:NN,BlockNodeDependencies:SN,ConditionalNodeDependencies:_N,ConstantNodeDependencies:DN,FunctionAssignmentNodeDependencies:AN,FunctionNodeDependencies:PN,IndexNodeDependencies:MN,ObjectNodeDependencies:EN,OperatorNodeDependencies:CN,ParenthesisNodeDependencies:TN,RangeNodeDependencies:RN,RelationalNodeDependencies:IN,SymbolNodeDependencies:ON,numericDependencies:tw,typedDependencies:px,createParse:nl},LN={parseDependencies:FN,typedDependencies:px,createCompile:rl},kN={parseDependencies:FN,typedDependencies:px,createEvaluate:il},BN={evaluateDependencies:kN,createDeprecatedEval:al},VN={parseDependencies:FN,createParserClass:ol},qN={ParserDependencies:VN,typedDependencies:px,createParser:sl},zN={DenseMatrixDependencies:lx,SpaDependencies:Mw,SparseMatrixDependencies:Ax,absDependencies:kx,addScalarDependencies:Vx,divideScalarDependencies:nw,equalScalarDependencies:Dx,largerDependencies:_b,matrixDependencies:Ox,multiplyScalarDependencies:eb,subtractDependencies:ob,typedDependencies:px,unaryMinusDependencies:Fx,createLup:ul},GN={addScalarDependencies:Vx,complexDependencies:Rx,conjDependencies:hb,divideScalarDependencies:nw,equalDependencies:yw,identityDependencies:Lb,isZeroDependencies:wx,matrixDependencies:Ox,multiplyScalarDependencies:eb,signDependencies:rb,sqrtDependencies:ib,subtractDependencies:ob,typedDependencies:px,unaryMinusDependencies:Fx,zerosDependencies:zx,createQr:ll},UN={SparseMatrixDependencies:Ax,absDependencies:kx,addDependencies:dN,divideScalarDependencies:nw,largerDependencies:_b,largerEqDependencies:Db,multiplyDependencies:tb,subtractDependencies:ob,transposeDependencies:Hb,typedDependencies:px,createSlu:Sl},jN={DenseMatrixDependencies:lx,lsolveDependencies:cw,lupDependencies:zN,matrixDependencies:Ox,sluDependencies:UN,typedDependencies:px,usolveDependencies:lw,createLusolve:Dl},YN={parseDependencies:FN,createHelpClass:Al},HN={createChainClass:Ml},KN={HelpDependencies:YN,typedDependencies:px,createHelp:Pl},QN={ChainDependencies:HN,typedDependencies:px,createChain:Fl},WN={lupDependencies:zN,matrixDependencies:Ox,multiplyDependencies:tb,subtractDependencies:ob,typedDependencies:px,unaryMinusDependencies:Fx,createDet:Ll},$N={absDependencies:kx,addScalarDependencies:Vx,detDependencies:WN,divideScalarDependencies:nw,identityDependencies:Lb,matrixDependencies:Ox,multiplyDependencies:tb,typedDependencies:px,unaryMinusDependencies:Fx,createInv:kl},XN={absDependencies:kx,addDependencies:dN,addScalarDependencies:Vx,atanDependencies:Gw,bignumberDependencies:Tx,cosDependencies:Yw,equalDependencies:yw,invDependencies:$N,matrixDependencies:Ox,multiplyDependencies:tb,multiplyScalarDependencies:eb,sinDependencies:Jw,subtractDependencies:ob,typedDependencies:px,createEigs:Bl},ZN={absDependencies:kx,addDependencies:dN,identityDependencies:Lb,invDependencies:$N,multiplyDependencies:tb,typedDependencies:px,createExpm:Vl},JN={absDependencies:kx,addDependencies:dN,identityDependencies:Lb,invDependencies:$N,maxDependencies:_w,multiplyDependencies:tb,sizeDependencies:Ub,sqrtDependencies:ib,subtractDependencies:ob,typedDependencies:px,createSqrtm:ql},eS={divideScalarDependencies:nw,equalScalarDependencies:Dx,invDependencies:$N,matrixDependencies:Ox,multiplyDependencies:tb,typedDependencies:px,createDivide:zl},tS={absDependencies:kx,addScalarDependencies:Vx,divideScalarDependencies:nw,multiplyScalarDependencies:eb,sqrtDependencies:ib,subtractDependencies:ob,typedDependencies:px,unaryMinusDependencies:Fx,createDistance:Gl},nS={absDependencies:kx,addDependencies:dN,addScalarDependencies:Vx,divideScalarDependencies:nw,equalScalarDependencies:Dx,matrixDependencies:Ox,multiplyDependencies:tb,multiplyScalarDependencies:eb,smallerDependencies:wb,subtractDependencies:ob,typedDependencies:px,createIntersect:Ul},rS={bignumberDependencies:Tx,fractionDependencies:Ix,addDependencies:dN,typedDependencies:px,createSum:jl},iS={addDependencies:dN,divideDependencies:eS,typedDependencies:px,createMean:Yl},aS={addDependencies:dN,compareDependencies:mw,divideDependencies:eS,partitionSelectDependencies:Nw,typedDependencies:px,createMedian:Hl},oS={absDependencies:kx,mapDependencies:Bb,medianDependencies:aS,subtractDependencies:ob,typedDependencies:px,createMad:Kl},sS={addDependencies:dN,applyDependencies:Bx,divideDependencies:eS,isNaNDependencies:Nx,multiplyDependencies:tb,subtractDependencies:ob,typedDependencies:px,createVariance:Ql},uS={varianceDependencies:sS,createDeprecatedVar:Wl},cS={addDependencies:dN,compareDependencies:mw,multiplyDependencies:tb,partitionSelectDependencies:Nw,typedDependencies:px,createQuantileSeq:$l},lS={sqrtDependencies:ib,typedDependencies:px,varianceDependencies:sS,createStd:Xl},fS={typedDependencies:px,createCombinations:Zl},pS={typedDependencies:px,createCombinationsWithRep:ef},dS={BigNumberDependencies:sx,ComplexDependencies:ux,multiplyScalarDependencies:eb,powDependencies:rw,typedDependencies:px,createGamma:nf},hS={gammaDependencies:dS,typedDependencies:px,createFactorial:rf},mS={divideDependencies:eS,dotDivideDependencies:uw,isNumericDependencies:yx,logDependencies:iw,matrixDependencies:Ox,multiplyDependencies:tb,sumDependencies:rS,typedDependencies:px,createKldivergence:af},gS={addDependencies:dN,divideDependencies:eS,factorialDependencies:hS,isIntegerDependencies:gx,isPositiveDependencies:bx,multiplyDependencies:tb,typedDependencies:px,createMultinomial:of},vS={factorialDependencies:hS,typedDependencies:px,createPermutations:sf},yS={typedDependencies:px,createPickRandom:pf},xS={typedDependencies:px,createRandom:hf},bS={typedDependencies:px,createRandomInt:mf},wS={addScalarDependencies:Vx,combinationsDependencies:fS,divideScalarDependencies:nw,factorialDependencies:hS,isIntegerDependencies:gx,isNegativeDependencies:vx,largerDependencies:_b,multiplyScalarDependencies:eb,powDependencies:rw,subtractDependencies:ob,typedDependencies:px,createStirlingS2:gf},NS={addScalarDependencies:Vx,isIntegerDependencies:gx,isNegativeDependencies:vx,stirlingS2Dependencies:wS,typedDependencies:px,createBellNumbers:vf},SS={addScalarDependencies:Vx,combinationsDependencies:fS,divideScalarDependencies:nw,isIntegerDependencies:gx,isNegativeDependencies:vx,multiplyScalarDependencies:eb,typedDependencies:px,createCatalan:yf},_S={addScalarDependencies:Vx,combinationsDependencies:fS,isIntegerDependencies:gx,isNegativeDependencies:vx,isPositiveDependencies:bx,largerDependencies:_b,typedDependencies:px,createComposition:xf},DS={bignumberDependencies:Tx,fractionDependencies:Ix,ConstantNodeDependencies:DN,FunctionNodeDependencies:PN,OperatorNodeDependencies:CN,ParenthesisNodeDependencies:TN,SymbolNodeDependencies:ON,addDependencies:dN,divideDependencies:eS,equalDependencies:yw,isZeroDependencies:wx,multiplyDependencies:tb,parseDependencies:FN,powDependencies:rw,subtractDependencies:ob,typedDependencies:px,createSimplify:Df},AS={ConstantNodeDependencies:DN,FunctionNodeDependencies:PN,OperatorNodeDependencies:CN,ParenthesisNodeDependencies:TN,SymbolNodeDependencies:ON,equalDependencies:yw,isZeroDependencies:wx,numericDependencies:tw,parseDependencies:FN,simplifyDependencies:DS,typedDependencies:px,createDerivative:Af},MS={bignumberDependencies:Tx,fractionDependencies:Ix,ConstantNodeDependencies:DN,FunctionNodeDependencies:PN,OperatorNodeDependencies:CN,ParenthesisNodeDependencies:TN,SymbolNodeDependencies:ON,addDependencies:dN,divideDependencies:eS,equalDependencies:yw,isZeroDependencies:wx,multiplyDependencies:tb,parseDependencies:FN,powDependencies:rw,simplifyDependencies:DS,subtractDependencies:ob,typedDependencies:px,createRationalize:Mf},ES={createReviver:Ef},CS={createReplacer:Cf},TS={BigNumberDependencies:sx,createE:kf},RS={eDependencies:TS,createUppercaseE:Kf},IS={createFalse:Rf},OS={ComplexDependencies:ux,createI:Yf},PS={BigNumberDependencies:sx,createInfinity:Of},FS={BigNumberDependencies:sx,createLN10:qf},LS={BigNumberDependencies:sx,createLN2:Vf},kS={BigNumberDependencies:sx,createLOG10E:Gf},BS={BigNumberDependencies:sx,createLOG2E:zf},VS={BigNumberDependencies:sx,createNaN:Pf},qS={createNull:If},zS={BigNumberDependencies:sx,createPhi:Bf},GS={BigNumberDependencies:sx,createPi:Ff},US={piDependencies:GS,createUppercasePi:Hf},jS={BigNumberDependencies:sx,createSQRT1_2:Uf},YS={BigNumberDependencies:sx,createSQRT2:jf},HS={BigNumberDependencies:sx,createTau:Lf},KS={createTrue:Tf},QS={createVersion:Qf},WS={BigNumberDependencies:sx,UnitDependencies:Ew,createAtomicMass:Dp},$S={BigNumberDependencies:sx,UnitDependencies:Ew,createAvogadro:Ap},XS={BigNumberDependencies:sx,UnitDependencies:Ew,createBohrMagneton:ap},ZS={BigNumberDependencies:sx,UnitDependencies:Ew,createBohrRadius:fp},JS={BigNumberDependencies:sx,UnitDependencies:Ew,createBoltzmann:Mp},e_={BigNumberDependencies:sx,UnitDependencies:Ew,createClassicalElectronRadius:pp},t_={BigNumberDependencies:sx,UnitDependencies:Ew,createConductanceQuantum:op},n_={BigNumberDependencies:sx,UnitDependencies:Ew,createCoulomb:rp},r_={BigNumberDependencies:sx,UnitDependencies:Ew,createDeuteronMass:yp},i_={BigNumberDependencies:sx,createEfimovFactor:_p},a_={BigNumberDependencies:sx,UnitDependencies:Ew,createElectricConstant:tp},o_={BigNumberDependencies:sx,UnitDependencies:Ew,createElectronMass:dp},s_={BigNumberDependencies:sx,UnitDependencies:Ew,createElementaryCharge:ip},u_={BigNumberDependencies:sx,UnitDependencies:Ew,createFaraday:Ep},c_={BigNumberDependencies:sx,UnitDependencies:Ew,createFermiCoupling:hp},l_={BigNumberDependencies:sx,createFineStructure:mp},f_={BigNumberDependencies:sx,UnitDependencies:Ew,createFirstRadiation:Cp},p_={BigNumberDependencies:sx,UnitDependencies:Ew,createGasConstant:Rp},d_={BigNumberDependencies:sx,UnitDependencies:Ew,createGravitationConstant:Xf},h_={BigNumberDependencies:sx,UnitDependencies:Ew,createGravity:qp},m_={BigNumberDependencies:sx,UnitDependencies:Ew,createHartreeEnergy:gp},g_={BigNumberDependencies:sx,UnitDependencies:Ew,createInverseConductanceQuantum:sp},v_={BigNumberDependencies:sx,UnitDependencies:Ew,createKlitzing:lp},y_={BigNumberDependencies:sx,UnitDependencies:Ew,createLoschmidt:Tp},x_={BigNumberDependencies:sx,UnitDependencies:Ew,createMagneticConstant:ep},b_={BigNumberDependencies:sx,UnitDependencies:Ew,createMagneticFluxQuantum:up},w_={BigNumberDependencies:sx,UnitDependencies:Ew,createMolarMass:Bp},N_={BigNumberDependencies:sx,UnitDependencies:Ew,createMolarMassC12:Vp},S_={BigNumberDependencies:sx,UnitDependencies:Ew,createMolarPlanckConstant:Ip},__={BigNumberDependencies:sx,UnitDependencies:Ew,createMolarVolume:Op},D_={BigNumberDependencies:sx,UnitDependencies:Ew,createNeutronMass:xp},A_={BigNumberDependencies:sx,UnitDependencies:Ew,createNuclearMagneton:cp},M_={BigNumberDependencies:sx,UnitDependencies:Ew,createPlanckCharge:jp},E_={BigNumberDependencies:sx,UnitDependencies:Ew,createPlanckConstant:Zf},C_={BigNumberDependencies:sx,UnitDependencies:Ew,createPlanckLength:zp},T_={BigNumberDependencies:sx,UnitDependencies:Ew,createPlanckMass:Gp},R_={BigNumberDependencies:sx,UnitDependencies:Ew,createPlanckTemperature:Yp},I_={BigNumberDependencies:sx,UnitDependencies:Ew,createPlanckTime:Up},O_={BigNumberDependencies:sx,UnitDependencies:Ew,createProtonMass:vp},P_={BigNumberDependencies:sx,UnitDependencies:Ew,createQuantumOfCirculation:bp},F_={BigNumberDependencies:sx,UnitDependencies:Ew,createReducedPlanckConstant:Jf},L_={BigNumberDependencies:sx,UnitDependencies:Ew,createRydberg:wp},k_={BigNumberDependencies:sx,createSackurTetrode:Pp},B_={BigNumberDependencies:sx,UnitDependencies:Ew,createSecondRadiation:Fp},V_={BigNumberDependencies:sx,UnitDependencies:Ew,createSpeedOfLight:$f},q_={BigNumberDependencies:sx,UnitDependencies:Ew,createStefanBoltzmann:Lp},z_={BigNumberDependencies:sx,UnitDependencies:Ew,createThomsonCrossSection:Np},G_={BigNumberDependencies:sx,UnitDependencies:Ew,createVacuumImpedance:np},U_={BigNumberDependencies:sx,createWeakMixingAngle:Sp},j_={BigNumberDependencies:sx,UnitDependencies:Ew,createWienDisplacement:kp},Y_={isIntegerDependencies:gx,typedDependencies:px,createApplyTransform:Qp},H_={IndexDependencies:Sb,matrixDependencies:Ox,rangeDependencies:Mb,typedDependencies:px,createColumnTransform:Wp},K_={typedDependencies:px,createFilterTransform:Xp},Q_={typedDependencies:px,createForEachTransform:Jp},W_={IndexDependencies:Sb,createIndexTransform:ed},$_={typedDependencies:px,createMapTransform:td},X_={largerDependencies:_b,typedDependencies:px,createMaxTransform:id},Z_={addDependencies:dN,divideDependencies:eS,typedDependencies:px,createMeanTransform:od},J_={smallerDependencies:wb,typedDependencies:px,createMinTransform:ud},eD={bignumberDependencies:Tx,matrixDependencies:Ox,largerDependencies:_b,largerEqDependencies:Db,smallerDependencies:wb,smallerEqDependencies:Ab,typedDependencies:px,createRangeTransform:ld},tD={IndexDependencies:Sb,matrixDependencies:Ox,rangeDependencies:Mb,typedDependencies:px,createRowTransform:pd},nD={matrixDependencies:Ox,typedDependencies:px,createSubsetTransform:hd},rD={isIntegerDependencies:gx,matrixDependencies:Ox,typedDependencies:px,createConcatTransform:gd},iD={sqrtDependencies:ib,typedDependencies:px,varianceDependencies:sS,createStdTransform:yd},aD={bignumberDependencies:Tx,fractionDependencies:Ix,addDependencies:dN,typedDependencies:px,createSumTransform:bd},oD={addDependencies:dN,applyDependencies:Bx,divideDependencies:eS,isNaNDependencies:Nx,multiplyDependencies:tb,subtractDependencies:ob,typedDependencies:px,createVarianceTransform:Nd},sD=Sd;function uD(){}uD.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function i(){r.off(e,i),t.apply(n,arguments)}return i._=t,this.on(e,i,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var a=0,o=r.length;a<o;a++)r[a].fn!==t&&r[a].fn._!==t&&i.push(r[a]);return i.length?n[e]=i:delete n[e],this}};var cD=uD;function lD(e){return(lD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fD(){return(fD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pD(){return function(){throw new Error("The global import function is not available anymore in v6.0.0. \nPlease create a mathjs instance if you want to import functions. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.import(...);\n")}}cD.TinyEmitter=uD;var dD=al({evaluate:Zy}),hD=pD(),mD=Wl({variance:yv}),gD=ra({typeOf:Yh}),vD=xD("type",{isNumber:B,isComplex:q,isBigNumber:V,isFraction:z,isUnit:G,isString:U,isArray:j,isMatrix:Y,isCollection:H,isDenseMatrix:K,isSparseMatrix:Q,isRange:W,isIndex:$,isBoolean:X,isResultSet:Z,isHelp:J,isFunction:ee,isDate:te,isRegExp:ne,isObject:re,isNull:ie,isUndefined:ae,isAccessorNode:oe,isArrayNode:se,isAssignmentNode:ue,isBlockNode:ce,isConditionalNode:le,isConstantNode:fe,isFunctionAssignmentNode:pe,isFunctionNode:de,isIndexNode:he,isNode:me,isObjectNode:ge,isOperatorNode:ve,isParenthesisNode:ye,isRangeNode:xe,isSymbolNode:be,isChain:we,BigNumber:Rd,Chain:Vy,Complex:Dd,Fraction:Yd,Matrix:Id,DenseMatrix:$d,SparseMatrix:dm,Spa:hg,FibonacciHeap:Gm,ImmutableDenseMatrix:zm,Index:qg,Range:Ad,ResultSet:_d,Unit:lv,Help:ex,Parser:Jy}),yD=xD("expression",{parse:Xy,Parser:Jy,node:xD("expression.node",{AccessorNode:Hy,ArrayNode:Oy,AssignmentNode:Qy,BlockNode:Py,ConditionalNode:zy,ConstantNode:Fy,IndexNode:Ky,FunctionAssignmentNode:jy,FunctionNode:$y,Node:Iy,ObjectNode:Ly,OperatorNode:Gy,ParenthesisNode:ky,RangeNode:Uy,RelationalNode:By,SymbolNode:Wy})});function xD(e,t){var n={};return Object.keys(t).forEach((function(r){Ee(n,r,(function(){return ta("math.".concat(e,".").concat(r," is moved to math.").concat(r," in v6.0.0. ")+"Please use the new location instead."),t[r]}))})),n}var bD={__proto__:null,config:ke,IndexError:mt,DimensionError:ht,ArgumentsError:Qo,create:function e(t,n){var r=fD({},L,n);if("function"!=typeof Object.create)throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var i,a,o=(i={isNumber:B,isComplex:q,isBigNumber:V,isFraction:z,isUnit:G,isString:U,isArray:j,isMatrix:Y,isCollection:H,isDenseMatrix:K,isSparseMatrix:Q,isRange:W,isIndex:$,isBoolean:X,isResultSet:Z,isHelp:J,isFunction:ee,isDate:te,isRegExp:ne,isObject:re,isNull:ie,isUndefined:ae,isAccessorNode:oe,isArrayNode:se,isAssignmentNode:ue,isBlockNode:ce,isConditionalNode:le,isConstantNode:fe,isFunctionAssignmentNode:pe,isFunctionNode:de,isIndexNode:he,isNode:me,isObjectNode:ge,isOperatorNode:ve,isParenthesisNode:ye,isRangeNode:xe,isSymbolNode:be,isChain:we},a=new cD,i.on=a.on.bind(a),i.off=a.off.bind(a),i.once=a.once.bind(a),i.emit=a.emit.bind(a),i);o.config=function(e,t){function n(n){if(n){var r=De(e,_e);Fe(n,"matrix",Oe),Fe(n,"number",Pe),function e(t,n){if(Array.isArray(n))throw new TypeError("Arrays are not supported by deepExtend");for(var r in n)if(Te(n,r))if(n[r]&&n[r].constructor===Object)void 0===t[r]&&(t[r]={}),t[r]&&t[r].constructor===Object?e(t[r],n[r]):t[r]=n[r];else{if(Array.isArray(n[r]))throw new TypeError("Arrays are not supported by deepExtend");t[r]=n[r]}return t}(e,n);var i=De(e,_e),a=De(n,_e);return t("config",i,r,a),i}return De(e,_e)}return n.MATRIX_OPTIONS=Oe,n.NUMBER_OPTIONS=Pe,Object.keys(L).forEach((function(t){Object.defineProperty(n,t,{get:function(){return e[t]},enumerable:!0,configurable:!0})})),n}(r,o.emit),o.expression={transform:{},mathWithTransform:{config:o.config}};var s,u=[],c=[],l={},f=function(e,t,n,r){function i(t,i,o){var s;if(o.wrap&&"function"==typeof i&&(i=function(e){var t=function(){for(var t=[],r=0,i=arguments.length;r<i;r++){var a=arguments[r];t[r]=a&&a.valueOf()}return e.apply(n,t)};return e.transform&&(t.transform=e.transform),t}(i)),"function"==typeof(s=i)&&"string"==typeof s.signature&&(i=e(t,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},i.signature,i))),l(n[t])&&l(i))return i=o.override?e(t,i.signatures):e(n[t],i),n[t]=i,delete r[t],a(t,i),void n.emit("import",t,(function(){return i}));if(void 0===n[t]||o.override)return n[t]=i,delete r[t],a(t,i),void n.emit("import",t,(function(){return i}));if(!o.silent)throw new Error('Cannot import "'+t+'": already exists')}function a(e,t){t&&"function"==typeof t.transform?(n.expression.transform[e]=t.transform,f(e)&&(n.expression.mathWithTransform[e]=t.transform)):(delete n.expression.transform[e],f(e)&&(n.expression.mathWithTransform[e]=t))}function o(e){delete n.expression.transform[e],f(e)?n.expression.mathWithTransform[e]=n[e]:delete n.expression.mathWithTransform[e]}function s(i,a){if(ta("Factories of type { name, factory } are deprecated since v6. Please create your factory functions using the math.factory function."),"string"==typeof i.name){var s=i.name,u=s in n.expression.transform,c=i.path?Ce(n,i.path):n,f=Te(c,s)?c[s]:void 0,d=function(){var n=t(i);if(n&&"function"==typeof n.transform)throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');if(l(f)&&l(n))return a.override||(n=e(f,n)),n;if(void 0===f||a.override)return n;if(a.silent)return f;throw new Error('Cannot import "'+s+'": already exists')};!1!==i.lazy?(Ee(c,s,d),u?o(s):("expression.transform"===i.path||p(i))&&Ee(n.expression.mathWithTransform,s,d)):(c[s]=d(),u?o(s):("expression.transform"===i.path||p(i))&&(n.expression.mathWithTransform[s]=d())),r[i.path?i.path+"."+i.name:i.name]=i,n.emit("import",s,d,i.path)}else t(i)}function u(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.fn;if(It(a,"."))throw new Error("Factory name should not contain a nested path. Name: "+JSON.stringify(a));var s=h(t)?n.expression.transform:n,u=a in n.expression.transform,c=Te(s,a)?s[a]:void 0,f=function(){var r={};t.dependencies.map(Ft).forEach((function(e){if(It(e,"."))throw new Error("Factory dependency should not contain a nested path. Name: "+JSON.stringify(e));"math"===e?r.math=n:"mathWithTransform"===e?r.mathWithTransform=n.expression.mathWithTransform:"classes"===e?r.classes=n:r[e]=n[e]}));var o=t(r);if(o&&"function"==typeof o.transform)throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');if(void 0===c||i.override)return o;if(l(c)&&l(o))return e(c,o);if(i.silent)return c;throw new Error('Cannot import "'+a+'": already exists')};t.meta&&!1===t.meta.lazy?(s[a]=f(),c&&u?o(a):(h(t)||d(t))&&Ee(n.expression.mathWithTransform,a,(function(){return s[a]}))):(Ee(s,a,f),c&&u?o(a):(h(t)||d(t))&&Ee(n.expression.mathWithTransform,a,(function(){return s[a]}))),r[a]=t,n.emit("import",a,f)}function c(e){return"function"==typeof e||"number"==typeof e||"string"==typeof e||"boolean"==typeof e||null===e||G(e)||q(e)||V(e)||z(e)||Y(e)||Array.isArray(e)}function l(e){return"function"==typeof e&&"object"===lD(e.signatures)}function f(e){return!Te(m,e)}function p(e){return void 0===e.path&&!Te(m,e.name)}function d(e){return!(-1!==e.fn.indexOf(".")||Te(m,e.fn)||e.meta&&e.meta.isClass)}function h(e){return void 0!==e&&void 0!==e.meta&&!0===e.meta.isTransformFunction||!1}var m={expression:!0,type:!0,docs:!0,error:!0,json:!0,chain:!0};return function(e,t){var n=arguments.length;if(1!==n&&2!==n)throw new Qo("import",n,1,2);function r(e,n,i){if(Re(n))s(n,t);else if(Array.isArray(n))n.forEach((function(t){return r(e,t)}));else if("object"===lD(n))for(var a in n)Te(n,a)&&r(e,n[a],a);else if(Pt(n)||void 0!==i){var o=Pt(n)?h(n)?n.fn+".transform":n.fn:i;if(Te(e,o)&&e[o]!==n&&!t.silent)throw new Error('Cannot import "'+o+'" twice');e[o]=n}else if(!t.silent)throw new TypeError("Factory, Object, or Array expected")}t||(t={});var a={};for(var o in r(a,e),a)if(Te(a,o)){var l=a[o];if(Pt(l))u(l,t);else if(c(l))i(o,l,t);else if(!t.silent)throw new TypeError("Factory, Object, or Array expected")}}}((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.typed.apply(o.typed,t)}),(function e(t){if(Pt(t))return t(o);var n=t[Object.keys(t)[0]];if(Pt(n))return n(o);if(!Re(t))throw console.warn("Factory object with properties `type`, `name`, and `factory` expected",t),new Error("Factory object with properties `type`, `name`, and `factory` expected");var i,a=u.indexOf(t);return-1===a?(i=!0===t.math?t.factory(o.type,r,e,o.typed,o):t.factory(o.type,r,e,o.typed),u.push(t),c.push(i)):i=c[a],i}),o,l);return o.import=f,o.on("config",(function(){Ie(l).forEach((function(e){e&&e.meta&&e.meta.recreateOnConfigChange&&f(e,{override:!0})}))})),o.create=e.bind(null,t),o.factory=Ot,o.import(Ie((function e(t,n){for(var r in t)if(Te(t,r)){var i=t[r];"object"===Se(i)&&null!==i?e(i,n):n[r]=i}}(t,s={}),s))),["type.isNumber","type.isComplex","type.isBigNumber","type.isFraction","type.isUnit","type.isString","type.isArray","type.isMatrix","type.isDenseMatrix","type.isSparseMatrix","type.isCollection","type.isRange","type.isIndex","type.isBoolean","type.isResultSet","type.isHelp","type.isFunction","type.isDate","type.isRegExp","type.isObject","type.isNull","type.isUndefined","type.isAccessorNode","type.isArrayNode","type.isAssignmentNode","type.isBlockNode","type.isConditionalNode","type.isConstantNode","type.isFunctionAssignmentNode","type.isFunctionNode","type.isIndexNode","type.isNode","type.isObjectNode","type.isOperatorNode","type.isParenthesisNode","type.isRangeNode","type.isSymbolNode","type.isChain","type.BigNumber","type.Chain","type.Complex","type.Fraction","type.Matrix","type.DenseMatrix","type.SparseMatrix","type.Spa","type.FibonacciHeap","type.ImmutableDenseMatrix","type.Index","type.Range","type.ResultSet","type.Unit","type.Help","type.Parser","expression.parse","expression.Parser","expression.node.AccessorNode","expression.node.ArrayNode","expression.node.AssignmentNode","expression.node.BlockNode","expression.node.ConditionalNode","expression.node.ConstantNode","expression.node.IndexNode","expression.node.FunctionAssignmentNode","expression.node.FunctionNode","expression.node.Node","expression.node.ObjectNode","expression.node.OperatorNode","expression.node.ParenthesisNode","expression.node.RangeNode","expression.node.RelationalNode","expression.node.SymbolNode","json.reviver","error.ArgumentsError","error.DimensionError","error.IndexError"].forEach((function(e){var t,n=e.split("."),r=(t=n).slice(0,t.length-1),i=function(e){return e[e.length-1]}(n);Ee(Ce(o,r),i,(function(){return ta("math.".concat(e," is moved to math.").concat(i," in v6.0.0. ")+"Please use the new location instead."),o[i]}))})),Ee(o.expression,"docs",(function(){throw new Error("math.expression.docs has been moved. Please import via \"import { docs } from 'mathjs'\"")})),o.ArgumentsError=Qo,o.DimensionError=ht,o.IndexError=mt,o},factory:Ot,ResultSet:_d,Complex:Dd,Range:Ad,eye:Md,_false:Ed,_null:Cd,_true:Td,BigNumber:Rd,Matrix:Id,replacer:Od,i:Pd,LN10:Fd,LOG10E:Ld,_NaN:kd,pi:Bd,SQRT1_2:Vd,tau:qd,efimovFactor:zd,fineStructure:Gd,sackurTetrode:Ud,weakMixingAngle:jd,Fraction:Yd,e:Hd,_Infinity:Kd,LOG2E:Qd,version:Wd,DenseMatrix:$d,phi:Xd,typed:Zd,isInteger:Jd,isNumeric:eh,isPositive:th,isNaN:nh,equalScalar:rh,number:ih,boolean:ah,complex:oh,splitUnit:sh,unaryPlus:uh,apply:ch,cube:lh,expm1:fh,log10:ph,multiplyScalar:dh,sign:hh,square:mh,bitNot:gh,arg:vh,im:yh,not:xh,filter:bh,forEach:wh,map:Nh,erf:Sh,format:_h,isPrime:Dh,acos:Ah,acot:Mh,acsc:Eh,asec:Ch,asin:Th,atan:Rh,atanh:Ih,cosh:Oh,coth:Ph,csch:Fh,sech:Lh,sinh:kh,tanh:Bh,combinations:Vh,pickRandom:qh,randomInt:zh,LN2:Gh,clone:Uh,hasNumericValue:jh,typeOf:Yh,string:Hh,fraction:Kh,unaryMinus:Qh,addScalar:Wh,exp:$h,log2:Xh,sqrt:Zh,conj:Jh,getMatrixDataType:em,mode:tm,print:nm,acosh:rm,acsch:im,asinh:am,cos:om,csc:sm,sin:um,combinationsWithRep:cm,random:lm,SQRT2:fm,isNegative:pm,SparseMatrix:dm,matrix:hm,cbrt:mm,gcd:gm,mod:vm,nthRoot:ym,xgcd:xm,bitAnd:bm,bitXor:wm,or:Nm,concat:Sm,diag:_m,identity:Dm,ones:Am,reshape:Mm,size:Em,subset:Cm,zeros:Tm,to:Rm,round:Im,leftShift:Om,rightLogShift:Pm,compare:Fm,compareText:Lm,smaller:km,larger:Bm,unequal:Vm,max:qm,ImmutableDenseMatrix:zm,FibonacciHeap:Gm,sparse:Um,acoth:jm,atan2:Ym,sec:Hm,add:Km,trace:Qm,composition:Wm,isZero:$m,abs:Xm,floor:Zm,multiply:Jm,dotMultiply:eg,re:tg,flatten:ng,resize:rg,squeeze:ig,prod:ag,pow:og,dotPow:sg,rightArithShift:ug,compareNatural:cg,equalText:lg,largerEq:fg,partitionSelect:pg,min:dg,Spa:hg,asech:mg,tan:gg,setSize:vg,norm:yg,quantileSeq:xg,gamma:bg,bignumber:wg,lcm:Ng,bitOr:Sg,kron:_g,transpose:Dg,numeric:Ag,and:Mg,smallerEq:Eg,sort:Cg,cot:Tg,dot:Rg,sum:Ig,factorial:Og,permutations:Pg,ceil:Fg,subtract:Lg,cross:kg,ctranspose:Bg,equal:Vg,Index:qg,setCartesian:zg,setDistinct:Gg,setIsSubset:Ug,setPowerset:jg,index:Yg,fix:Hg,range:Kg,divideScalar:Qg,nthRoots:Wg,lsolve:$g,deepEqual:Xg,setDifference:Zg,setMultiplicity:Jg,hypot:ev,lup:tv,slu:nv,det:rv,distance:iv,stirlingS2:av,catalan:ov,xor:sv,row:uv,dotDivide:cv,Unit:lv,createUnit:fv,setSymDifference:pv,qr:dv,inv:hv,expm:mv,divide:gv,mean:vv,variance:yv,std:xv,multinomial:bv,atomicMass:wv,bohrMagneton:Nv,boltzmann:Sv,conductanceQuantum:_v,deuteronMass:Dv,electronMass:Av,faraday:Mv,firstRadiation:Ev,gravitationConstant:Cv,hartreeEnergy:Tv,klitzing:Rv,magneticConstant:Iv,molarMass:Ov,molarPlanckConstant:Pv,neutronMass:Fv,planckCharge:Lv,planckLength:kv,planckTemperature:Bv,protonMass:Vv,reducedPlanckConstant:qv,secondRadiation:zv,stefanBoltzmann:Gv,vacuumImpedance:Uv,column:jv,usolve:Yv,setIntersect:Hv,lusolve:Kv,eigs:Qv,intersect:Wv,bellNumbers:$v,avogadro:Xv,classicalElectronRadius:Zv,electricConstant:Jv,fermiCoupling:ey,gravity:ty,loschmidt:ny,molarMassC12:ry,nuclearMagneton:iy,planckMass:ay,quantumOfCirculation:oy,speedOfLight:sy,wienDisplacement:uy,log:cy,unit:ly,sqrtm:fy,kldivergence:py,bohrRadius:dy,elementaryCharge:hy,inverseConductanceQuantum:my,molarVolume:gy,planckTime:vy,thomsonCrossSection:yy,log1p:xy,median:by,gasConstant:wy,planckConstant:Ny,setUnion:Sy,magneticFluxQuantum:_y,coulomb:Dy,mad:Ay,rydberg:My,Node:Iy,ArrayNode:Oy,BlockNode:Py,ConstantNode:Fy,ObjectNode:Ly,ParenthesisNode:ky,RelationalNode:By,Chain:Vy,reviver:qy,ConditionalNode:zy,OperatorNode:Gy,RangeNode:Uy,FunctionAssignmentNode:jy,chain:Yy,AccessorNode:Hy,IndexNode:Ky,AssignmentNode:Qy,SymbolNode:Wy,FunctionNode:$y,parse:Xy,evaluate:Zy,Parser:Jy,Help:ex,compile:tx,parser:nx,simplify:rx,rationalize:ix,help:ax,derivative:ox,docs:Ol,isAccessorNode:oe,isArray:j,isArrayNode:se,isAssignmentNode:ue,isBigNumber:V,isBlockNode:ce,isBoolean:X,isChain:we,isCollection:H,isComplex:q,isConditionalNode:le,isConstantNode:fe,isDate:te,isDenseMatrix:K,isFraction:z,isFunction:ee,isFunctionAssignmentNode:pe,isFunctionNode:de,isHelp:J,isIndex:$,isIndexNode:he,isMatrix:Y,isNode:me,isNull:ie,isNumber:B,isString:U,isUndefined:ae,isObject:re,isObjectNode:ge,isOperatorNode:ve,isParenthesisNode:ye,isRange:W,isRangeNode:xe,isRegExp:ne,isResultSet:Z,isSparseMatrix:Q,isSymbolNode:be,isUnit:G,typedDependencies:px,ResultSetDependencies:dx,BigNumberDependencies:sx,ComplexDependencies:ux,FractionDependencies:fx,RangeDependencies:hx,MatrixDependencies:cx,DenseMatrixDependencies:lx,cloneDependencies:mx,isIntegerDependencies:gx,isNegativeDependencies:vx,isNumericDependencies:yx,hasNumericValueDependencies:xx,isPositiveDependencies:bx,isZeroDependencies:wx,isNaNDependencies:Nx,typeOfDependencies:Sx,typeofDependencies:_x,equalScalarDependencies:Dx,SparseMatrixDependencies:Ax,numberDependencies:Mx,stringDependencies:Ex,booleanDependencies:Cx,bignumberDependencies:Tx,complexDependencies:Rx,fractionDependencies:Ix,matrixDependencies:Ox,splitUnitDependencies:Px,unaryMinusDependencies:Fx,unaryPlusDependencies:Lx,absDependencies:kx,applyDependencies:Bx,addScalarDependencies:Vx,cbrtDependencies:qx,ceilDependencies:Ux,cubeDependencies:jx,expDependencies:Yx,expm1Dependencies:Hx,fixDependencies:Qx,floorDependencies:Kx,gcdDependencies:Wx,lcmDependencies:$x,log10Dependencies:Xx,log2Dependencies:Zx,modDependencies:Jx,multiplyScalarDependencies:eb,multiplyDependencies:tb,nthRootDependencies:nb,signDependencies:rb,sqrtDependencies:ib,squareDependencies:ab,subtractDependencies:ob,xgcdDependencies:sb,dotMultiplyDependencies:ub,bitAndDependencies:cb,bitNotDependencies:lb,bitOrDependencies:fb,bitXorDependencies:pb,argDependencies:db,conjDependencies:hb,imDependencies:mb,reDependencies:gb,notDependencies:vb,orDependencies:yb,xorDependencies:xb,concatDependencies:bb,columnDependencies:Eb,crossDependencies:Cb,diagDependencies:Tb,eyeDependencies:Rb,filterDependencies:Ib,flattenDependencies:Ob,forEachDependencies:Pb,getMatrixDataTypeDependencies:Fb,identityDependencies:Lb,kronDependencies:kb,mapDependencies:Bb,onesDependencies:Vb,rangeDependencies:Mb,reshapeDependencies:qb,resizeDependencies:zb,rowDependencies:Gb,sizeDependencies:Ub,squeezeDependencies:jb,subsetDependencies:Yb,transposeDependencies:Hb,ctransposeDependencies:Kb,zerosDependencies:zx,erfDependencies:Qb,modeDependencies:Wb,prodDependencies:$b,formatDependencies:Xb,printDependencies:Zb,toDependencies:Jb,isPrimeDependencies:ew,numericDependencies:tw,divideScalarDependencies:nw,powDependencies:rw,roundDependencies:Gx,logDependencies:iw,log1pDependencies:aw,nthRootsDependencies:ow,dotPowDependencies:sw,dotDivideDependencies:uw,lsolveDependencies:cw,usolveDependencies:lw,leftShiftDependencies:fw,rightArithShiftDependencies:pw,rightLogShiftDependencies:dw,andDependencies:hw,compareDependencies:mw,compareNaturalDependencies:gw,compareTextDependencies:vw,equalDependencies:yw,equalTextDependencies:xw,smallerDependencies:wb,smallerEqDependencies:Ab,largerDependencies:_b,largerEqDependencies:Db,deepEqualDependencies:bw,unequalDependencies:ww,partitionSelectDependencies:Nw,sortDependencies:Sw,maxDependencies:_w,minDependencies:Dw,ImmutableDenseMatrixDependencies:Nb,IndexDependencies:Sb,FibonacciHeapDependencies:Aw,SpaDependencies:Mw,UnitDependencies:Ew,unitDependencies:Cw,sparseDependencies:Tw,createUnitDependencies:Rw,acosDependencies:Iw,acoshDependencies:Ow,acotDependencies:Pw,acothDependencies:Fw,acscDependencies:Lw,acschDependencies:kw,asecDependencies:Bw,asechDependencies:Vw,asinDependencies:qw,asinhDependencies:zw,atanDependencies:Gw,atan2Dependencies:Uw,atanhDependencies:jw,cosDependencies:Yw,coshDependencies:Hw,cotDependencies:Kw,cothDependencies:Qw,cscDependencies:Ww,cschDependencies:$w,secDependencies:Xw,sechDependencies:Zw,sinDependencies:Jw,sinhDependencies:eN,tanDependencies:tN,tanhDependencies:nN,setCartesianDependencies:rN,setDifferenceDependencies:iN,setDistinctDependencies:aN,setIntersectDependencies:oN,setIsSubsetDependencies:sN,setMultiplicityDependencies:uN,setPowersetDependencies:cN,setSizeDependencies:lN,setSymDifferenceDependencies:fN,setUnionDependencies:pN,addDependencies:dN,hypotDependencies:hN,normDependencies:mN,dotDependencies:gN,traceDependencies:vN,indexDependencies:yN,NodeDependencies:xN,AccessorNodeDependencies:bN,ArrayNodeDependencies:wN,AssignmentNodeDependencies:NN,BlockNodeDependencies:SN,ConditionalNodeDependencies:_N,ConstantNodeDependencies:DN,FunctionAssignmentNodeDependencies:AN,IndexNodeDependencies:MN,ObjectNodeDependencies:EN,OperatorNodeDependencies:CN,ParenthesisNodeDependencies:TN,RangeNodeDependencies:RN,RelationalNodeDependencies:IN,SymbolNodeDependencies:ON,FunctionNodeDependencies:PN,parseDependencies:FN,compileDependencies:LN,evaluateDependencies:kN,evalDependencies:BN,ParserDependencies:VN,parserDependencies:qN,lupDependencies:zN,qrDependencies:GN,sluDependencies:UN,lusolveDependencies:jN,HelpDependencies:YN,ChainDependencies:HN,helpDependencies:KN,chainDependencies:QN,detDependencies:WN,invDependencies:$N,eigsDependencies:XN,expmDependencies:ZN,sqrtmDependencies:JN,divideDependencies:eS,distanceDependencies:tS,intersectDependencies:nS,sumDependencies:rS,meanDependencies:iS,medianDependencies:aS,madDependencies:oS,varianceDependencies:sS,varDependencies:uS,quantileSeqDependencies:cS,stdDependencies:lS,combinationsDependencies:fS,combinationsWithRepDependencies:pS,gammaDependencies:dS,factorialDependencies:hS,kldivergenceDependencies:mS,multinomialDependencies:gS,permutationsDependencies:vS,pickRandomDependencies:yS,randomDependencies:xS,randomIntDependencies:bS,stirlingS2Dependencies:wS,bellNumbersDependencies:NS,catalanDependencies:SS,compositionDependencies:_S,simplifyDependencies:DS,derivativeDependencies:AS,rationalizeDependencies:MS,reviverDependencies:ES,replacerDependencies:CS,eDependencies:TS,EDependencies:RS,falseDependencies:IS,iDependencies:OS,InfinityDependencies:PS,LN10Dependencies:FS,LN2Dependencies:LS,LOG10EDependencies:kS,LOG2EDependencies:BS,NaNDependencies:VS,nullDependencies:qS,phiDependencies:zS,piDependencies:GS,PIDependencies:US,SQRT1_2Dependencies:jS,SQRT2Dependencies:YS,tauDependencies:HS,trueDependencies:KS,versionDependencies:QS,atomicMassDependencies:WS,avogadroDependencies:$S,bohrMagnetonDependencies:XS,bohrRadiusDependencies:ZS,boltzmannDependencies:JS,classicalElectronRadiusDependencies:e_,conductanceQuantumDependencies:t_,coulombDependencies:n_,deuteronMassDependencies:r_,efimovFactorDependencies:i_,electricConstantDependencies:a_,electronMassDependencies:o_,elementaryChargeDependencies:s_,faradayDependencies:u_,fermiCouplingDependencies:c_,fineStructureDependencies:l_,firstRadiationDependencies:f_,gasConstantDependencies:p_,gravitationConstantDependencies:d_,gravityDependencies:h_,hartreeEnergyDependencies:m_,inverseConductanceQuantumDependencies:g_,klitzingDependencies:v_,loschmidtDependencies:y_,magneticConstantDependencies:x_,magneticFluxQuantumDependencies:b_,molarMassDependencies:w_,molarMassC12Dependencies:N_,molarPlanckConstantDependencies:S_,molarVolumeDependencies:__,neutronMassDependencies:D_,nuclearMagnetonDependencies:A_,planckChargeDependencies:M_,planckConstantDependencies:E_,planckLengthDependencies:C_,planckMassDependencies:T_,planckTemperatureDependencies:R_,planckTimeDependencies:I_,protonMassDependencies:O_,quantumOfCirculationDependencies:P_,reducedPlanckConstantDependencies:F_,rydbergDependencies:L_,sackurTetrodeDependencies:k_,secondRadiationDependencies:B_,speedOfLightDependencies:V_,stefanBoltzmannDependencies:q_,thomsonCrossSectionDependencies:z_,vacuumImpedanceDependencies:G_,weakMixingAngleDependencies:U_,wienDisplacementDependencies:j_,applyTransformDependencies:Y_,columnTransformDependencies:H_,filterTransformDependencies:K_,forEachTransformDependencies:Q_,indexTransformDependencies:W_,mapTransformDependencies:$_,maxTransformDependencies:X_,meanTransformDependencies:Z_,minTransformDependencies:J_,rangeTransformDependencies:eD,rowTransformDependencies:tD,subsetTransformDependencies:nD,concatTransformDependencies:rD,stdTransformDependencies:iD,sumTransformDependencies:aD,varianceTransformDependencies:oD,all:sD,createTyped:kt,createResultSet:Ut,createBigNumberClass:yr,createComplexClass:wr,createFractionClass:Sr,createRangeClass:_r,createMatrixClass:Dr,createDenseMatrixClass:Ar,createClone:Mr,createIsInteger:Pr,createIsNegative:Wi,createIsNumeric:$i,createHasNumericValue:Xi,createIsPositive:Zi,createIsZero:Ji,createIsNaN:ea,createTypeOf:na,createDeprecatedTypeof:ra,createEqualScalar:oa,createSparseMatrixClass:sa,createNumber:ua,createString:ca,createBoolean:la,createBignumber:fa,createComplex:pa,createFraction:da,createMatrix:ha,createSplitUnit:ma,createUnaryMinus:ga,createUnaryPlus:va,createAbs:ya,createApply:xa,createAddScalar:wa,createCbrt:Na,createCeil:Sa,createCube:_a,createExp:Da,createExpm1:Aa,createFix:Ma,createFloor:Ea,createGcd:Pa,createLcm:Ba,createLog10:Va,createLog2:qa,createMod:ja,createMultiplyScalar:Ya,createMultiply:Ha,createNthRoot:Ka,createSign:Qa,createSqrt:Wa,createSquare:$a,createSubtract:Xa,createXgcd:Ja,createDotMultiply:to,createBitAnd:lo,createBitNot:fo,createBitOr:po,createBitXor:mo,createArg:go,createConj:vo,createIm:yo,createRe:xo,createNot:bo,createOr:wo,createXor:No,createConcat:So,createColumn:Do,createCross:Ao,createDiag:Mo,createEye:Eo,createFilter:Io,createFlatten:Po,createForEach:Fo,createGetMatrixDataType:ko,createIdentity:Bo,createKron:Vo,createMap:qo,createOnes:Go,createRange:Ho,createReshape:Ko,createResize:Wo,createRow:$o,createSize:Xo,createSqueeze:Zo,createSubset:ss,createTranspose:ps,createCtranspose:ds,createZeros:hs,createErf:ms,createMode:ws,createProd:Ss,createFormat:_s,createPrint:Ds,createTo:Ms,createIsPrime:Es,createNumeric:Cs,createDivideScalar:Ts,createPow:Rs,createRound:Ls,createLog:Bs,createLog1p:Vs,createNthRoots:qs,createDotPow:zs,createDotDivide:Gs,createLsolve:js,createUsolve:Ys,createLeftShift:Ks,createRightArithShift:Qs,createRightLogShift:Ws,createAnd:$s,createCompare:Xs,createCompareNatural:Js,createCompareText:eu,createEqual:tu,createEqualText:nu,createSmaller:ru,createSmallerEq:iu,createLarger:au,createLargerEq:ou,createDeepEqual:su,createUnequal:uu,createPartitionSelect:cu,createSort:lu,createMax:fu,createMin:pu,createImmutableDenseMatrixClass:du,createIndexClass:hu,createFibonacciHeapClass:mu,createSpaClass:gu,createUnitClass:_u,createUnitFunction:Du,createSparse:Au,createCreateUnit:Mu,createAcos:Eu,createAcosh:Cu,createAcot:Tu,createAcoth:Ru,createAcsc:Iu,createAcsch:Ou,createAsec:Pu,createAsech:Fu,createAsin:Lu,createAsinh:ku,createAtan:Bu,createAtan2:Vu,createAtanh:qu,createCos:zu,createCosh:Gu,createCot:Uu,createCoth:ju,createCsc:Yu,createCsch:Hu,createSec:Ku,createSech:Qu,createSin:Wu,createSinh:$u,createTan:Xu,createTanh:Zu,createSetCartesian:Ju,createSetDifference:ec,createSetDistinct:tc,createSetIntersect:nc,createSetIsSubset:rc,createSetMultiplicity:ic,createSetPowerset:ac,createSetSize:oc,createSetSymDifference:sc,createSetUnion:uc,createAdd:cc,createHypot:lc,createNorm:fc,createDot:pc,createTrace:dc,createIndex:hc,createNode:vc,createAccessorNode:wc,createArrayNode:Nc,createAssignmentNode:Ec,createBlockNode:Cc,createConditionalNode:Tc,createConstantNode:zc,createFunctionAssignmentNode:Gc,createIndexNode:jc,createObjectNode:Hc,createOperatorNode:Kc,createParenthesisNode:Qc,createRangeNode:Wc,createRelationalNode:$c,createSymbolNode:Xc,createFunctionNode:el,createParse:nl,createCompile:rl,createEvaluate:il,createDeprecatedEval:al,createParserClass:ol,createParser:sl,createLup:ul,createQr:ll,createSlu:Sl,createLusolve:Dl,createHelpClass:Al,createChainClass:Ml,createHelp:Pl,createChain:Fl,createDet:Ll,createInv:kl,createEigs:Bl,createExpm:Vl,createSqrtm:ql,createDivide:zl,createDistance:Gl,createIntersect:Ul,createSum:jl,createMean:Yl,createMedian:Hl,createMad:Kl,createVariance:Ql,createDeprecatedVar:Wl,createQuantileSeq:$l,createStd:Xl,createCombinations:Zl,createCombinationsWithRep:ef,createGamma:nf,createFactorial:rf,createKldivergence:af,createMultinomial:of,createPermutations:sf,createPickRandom:pf,createRandom:hf,createRandomInt:mf,createStirlingS2:gf,createBellNumbers:vf,createCatalan:yf,createComposition:xf,createSimplify:Df,createDerivative:Af,createRationalize:Mf,createReviver:Ef,createReplacer:Cf,createE:kf,createUppercaseE:Kf,createFalse:Rf,createI:Yf,createInfinity:Of,createLN10:qf,createLN2:Vf,createLOG10E:Gf,createLOG2E:zf,createNaN:Pf,createNull:If,createPhi:Bf,createPi:Ff,createUppercasePi:Hf,createSQRT1_2:Uf,createSQRT2:jf,createTau:Lf,createTrue:Tf,createVersion:Qf,createAtomicMass:Dp,createAvogadro:Ap,createBohrMagneton:ap,createBohrRadius:fp,createBoltzmann:Mp,createClassicalElectronRadius:pp,createConductanceQuantum:op,createCoulomb:rp,createDeuteronMass:yp,createEfimovFactor:_p,createElectricConstant:tp,createElectronMass:dp,createElementaryCharge:ip,createFaraday:Ep,createFermiCoupling:hp,createFineStructure:mp,createFirstRadiation:Cp,createGasConstant:Rp,createGravitationConstant:Xf,createGravity:qp,createHartreeEnergy:gp,createInverseConductanceQuantum:sp,createKlitzing:lp,createLoschmidt:Tp,createMagneticConstant:ep,createMagneticFluxQuantum:up,createMolarMass:Bp,createMolarMassC12:Vp,createMolarPlanckConstant:Ip,createMolarVolume:Op,createNeutronMass:xp,createNuclearMagneton:cp,createPlanckCharge:jp,createPlanckConstant:Zf,createPlanckLength:zp,createPlanckMass:Gp,createPlanckTemperature:Yp,createPlanckTime:Up,createProtonMass:vp,createQuantumOfCirculation:bp,createReducedPlanckConstant:Jf,createRydberg:wp,createSackurTetrode:Pp,createSecondRadiation:Fp,createSpeedOfLight:$f,createStefanBoltzmann:Lp,createThomsonCrossSection:Np,createVacuumImpedance:np,createWeakMixingAngle:Sp,createWienDisplacement:kp,createApplyTransform:Qp,createColumnTransform:Wp,createFilterTransform:Xp,createForEachTransform:Jp,createIndexTransform:ed,createMapTransform:td,createMaxTransform:id,createMeanTransform:od,createMinTransform:ud,createRangeTransform:ld,createRowTransform:pd,createSubsetTransform:hd,createConcatTransform:gd,createStdTransform:yd,createSumTransform:bd,createVarianceTransform:Nd,deprecatedEval:dD,deprecatedImport:hD,deprecatedVar:mD,deprecatedTypeof:gD,type:vD,expression:yD,json:xD("json",{reviver:qy}),error:xD("error",{ArgumentsError:Qo,DimensionError:ht,IndexError:mt})},wD={LeGascuel:{alphabet:"ARNDCQEGHILKMFPSTWYV",rootprob:{A:.079066,R:.055941,N:.041977,D:.053052,C:.012937,Q:.040767,E:.071586,G:.057337,H:.022355,I:.062157,L:.099081,K:.0646,M:.022951,F:.042302,P:.04404,S:.061197,T:.053287,W:.012066,Y:.034155,V:.069147},subrate:{A:{R:.023780059838785415,N:.011619956117479187,D:.020963119830342308,C:.03220118806861281,Q:.039539556174800844,E:.07434507079592036,G:.11846019836138307,H:.008022247759976862,I:.009312956806827104,L:.039170273824718854,K:.034658964166178474,M:.025797653869038237,F:.010732029160376083,P:.051863602444553035,S:.28928853358549556,T:.11400726534071219,W:.002180525116577236,Y:.007478523362328794,V:.17617706551848886},R:{A:.03361030748848622,N:.03156149298708182,D:.0065759888937963135,C:.006915466606697501,Q:.11446965967381248,E:.02605508227143853,G:.022372375035829305,H:.0542465109781797,I:.007893357123778822,L:.029907316576601065,K:.40866276521168743,M:.011111304862018612,F:.002230239697097559,P:.014644711643512854,S:.05251611729460102,T:.03085239246806752,W:.007162441678846282,Y:.010739667636638212,V:.011816289761745303},N:{A:.02188682970161301,R:.04206068750006776,D:.2692990903662267,C:.006840652148607381,Q:.06913052504967644,E:.03877888487354867,G:.08243001678246818,H:.10080372861884797,I:.011903218096361284,L:.006779796292793331,K:.13857164444745146,M:.008514888572000574,F:.0037870757725932055,P:.007125079203173861,S:.24529878644522043,T:.10660987847848198,W:.0005475052578883485,Y:.02090365438657137,V:.00578675766782108},D:{A:.031242366593264063,R:.006934090980695536,N:.213080900179128,C:.0008092846689063697,Q:.021336816340862316,E:.37538660953025904,G:.048445384194250804,H:.020725574488358038,I:.000664456439064151,L:.0014937409050543244,K:.01827909938063158,M:.000586350479341114,F:.0007367295353865765,P:.01737179280267975,S:.07590089317330083,T:.02269273724013015,W:.00036065171364339603,Y:.004614566452688203,V:.0026252966778291145},C:{A:.1968013554790863,R:.029903232391224,N:.022196031169675508,D:.003318711467482471,Q:.003457357896917096,E:.0002504787011780186,G:.03263985441723913,H:.01431929801458755,I:.019929155723837376,L:.05885464007618758,K:.0008569811611698462,M:.020510791309596318,F:.04675419474710319,P:.003319813832345319,S:.17040121523162713,T:.0609324453560889,W:.008085741437284098,Y:.03980863217105396,V:.1354787092264462},Q:{A:.07668542076966182,R:.15707673441295028,N:.07118237913043068,D:.027766595052749227,C:.0010971579736653782,E:.2955484742427142,G:.01536392145975772,H:.10760559804682471,I:.004528373190980324,L:.057710257782915005,K:.20893479780526658,M:.03838702187572755,F:.0015167338936199874,P:.027493829516995943,S:.0748943889786494,T:.05755704323393889,W:.0028499690234478586,Y:.008789286067109561,V:.014543785414732618},E:{A:.08211336528860726,R:.020360787826482037,N:.02273937991139263,D:.27819699953621246,C:45266434179029796e-21,Q:.1683097903144851,G:.02000178351715039,H:.009475832788308334,I:.0027513717750397237,L:.006903250867461523,K:.11674330196739328,M:.003987380637557869,F:.0007957406574504417,P:.018470719795310783,S:.03745080510204949,T:.032214297738304795,W:.0009393595587342143,Y:.004099852067482321,V:.01694331778005055},G:{A:.1633530537635578,R:.02182766855397609,N:.06034785242474609,D:.044824886587603016,C:.007364560346649156,Q:.010923853465475052,E:.024972490274320733,H:.006963205003841722,I:.000541075145187412,L:.004385411660825779,K:.019162631066242917,M:.0032025275241232332,F:.0037896561872497615,P:.008674137754803087,S:.1064818649997877,T:.006918551242919123,W:.003239603186611878,Y:.0018675559302370587,V:.0053036289537274715},H:{A:.0283733858819204,R:.13574610022949454,N:.18928374485499355,D:.04918511195510492,C:.00828668120844192,Q:.1962315998915188,E:.030343858912271992,G:.017859507282723005,I:.006767759214048915,L:.03629495138742272,K:.04504312621452824,M:.010155145972092586,F:.028855761859156177,P:.02240973426551097,S:.06058559194717776,T:.031133480593136052,W:.0072040330624839125,Y:.18125439944921548,V:.008229368491544669},I:{A:.011846425066985085,R:.007103983314209358,N:.008038698554160555,D:.0005671242660558157,C:.004147939694632691,Q:.002970030565772075,E:.003168745272262073,G:.0004991171645930569,H:.002434050183085791,L:.4106962146518183,K:.010275828156650554,M:.0980832751278198,F:.047070443599109967,P:.003447485429012548,S:.003923022520710688,T:.05508469333084793,W:.001347285725842141,Y:.00794180046391689,V:.7363517061908176},L:{A:.03125762628783743,R:.016885630914218068,N:.0028723520047495045,D:.0007998096758706717,C:.007684646689735052,Q:.02374495694468259,E:.004987597184102912,G:.002537785734871143,H:.008188993230446149,I:.2576441963051752,K:.008882474721909684,M:.1448745161684952,F:.10967574486452078,P:.010968571185215636,S:.011155385792571396,T:.016142504693035426,W:.007476458435205244,Y:.010234448314410912,V:.1177393734477345},K:{A:.042420211466920536,R:.35388550694592885,N:.09004368295620233,D:.015011498147697625,C:.00017162175359217182,Q:.13185208826822448,E:.12936820456095688,G:.017008169929491793,H:.015587292361080167,I:.009887223695556167,L:.0136235987294355,M:.01506967551813421,F:.0010117763566476882,P:.01718973196079554,S:.04581702316314235,T:.060579846280528996,W:.0006021640823381505,Y:.004506124636296121,V:.012806126249830319},M:{A:.08887269839263551,R:.027082807079699497,N:.015573590588073203,D:.0013553686388394746,C:.011561505257820905,Q:.06818542637827482,E:.01243695831642271,G:.008000667537390694,H:.009891433410576,I:.2656338343479541,L:.6254329631166691,K:.042416497689489345,F:.07609486305229383,P:.004397337445886918,S:.021232850694731777,T:.10765893666203162,W:.008400023644887627,Y:.016438959647372443,V:.13129027991504044},F:{A:.02005906618113317,R:.0029493130087309004,N:.0037579802303944255,D:.0009239510025844798,C:.014298591495514964,Q:.0014616966252471758,E:.0013466004137924288,G:.005136577864127927,H:.015249173948310633,I:.06916357531062074,L:.25688578499649156,K:.0015450984028991695,M:.04128535771153127,P:.004160182720791013,S:.022142174329943386,T:.008792383265295436,W:.02964753761389009,Y:.26654151427584344,V:.04526923657205464},P:{A:.09311188898458286,R:.01860217561420873,N:.00679131357201701,D:.02092662015821449,C:.0009752141586978062,Q:.025450521069922197,E:.030023727231315116,G:.011293120718600011,H:.011375331732640728,I:.00486569827000756,L:.024677043633114223,K:.025214729442947136,M:.0022916278773966996,F:.003996004756015019,S:.08188943095988824,T:.030451728655292103,W:.0011478473794115057,Y:.0030607233046751683,V:.020502096301340908},S:{A:.37375830835614154,R:.04800568847455391,N:.16825836492983345,D:.06579888204699504,C:.0360226893712365,Q:.049891654092399956,E:.043808574505863264,G:.0997655227134145,H:.022131655276878912,I:.0039845631455759966,L:.018061126847946248,K:.048364784161625506,M:.007963056298426214,F:.015305623780663514,P:.05893116557140837,T:.3448873495792334,W:.003002760346628398,Y:.01368064385209428,V:.006801901885884378},T:{A:.1691613046602126,R:.03238901959307458,N:.08398226338302472,D:.022592660424932624,C:.014793158661056585,Q:.0440337789989676,E:.043276835211107534,G:.007444385546479512,H:.013061139840102773,I:.06425393216667319,L:.03001511639782016,K:.07344114079835933,M:.046369288106485405,F:.006979852438465809,P:.025167379097698582,S:.3960829307748671,W:.0016991896143804365,Y:.008396675459416025,V:.1513041306388495},W:{A:.014288529659149325,R:.03320687468559091,N:.0019047429314088518,D:.0015857197672973185,C:.008669421264225458,Q:.009629097230142453,E:.005573097411863705,G:.015394424656950543,H:.013347104186294369,I:.006940430868653237,L:.061393583475764194,K:.003223918425248179,M:.015977866954567873,F:.10394083674314425,P:.004189557317195649,S:.015229564473116035,T:.007504120419483699,Y:.10764993497064898,V:.013104010678099284},Y:{A:.017312163026376472,R:.017590037981589174,N:.025690900312841648,D:.007167676165949777,C:.015078444573178895,Q:.010490786856912765,E:.008592944227866767,G:.0031351209009516097,H:.11863393645695247,I:.014452890980403517,L:.029689338996930104,K:.00852278294553446,M:.011046422569663152,F:.33011972293651676,P:.003946545288768685,S:.02451220500121838,T:.013100092086250964,W:.038029691563631986,V:.017239196951026155},V:{A:.20144931612774003,R:.009559562462027188,N:.003512961178679125,D:.002014219551856049,C:.025347275532742342,Q:.008574580242127707,E:.017540954005274254,G:.004397792721591278,H:.0026605280435663308,I:.661914660096644,L:.16870919722583744,K:.011964015152342671,M:.04357735280388293,F:.027694321452428235,P:.013057866879417094,S:.006019870561419386,T:.11660004352108369,W:.002286621152645031,Y:.008515261281939902}}},makeGappedModel:e=>{let{model:t,deletionRate:n,gapChar:r,gapFreq:i}=e;n=n||.05,r=r||"-",i=i||.5;const a=n*i/(1-i),o=t.alphabet.split(""),s={alphabet:t.alphabet+r,rootprob:{},subrate:{}};return s.rootprob[r]=i,s.subrate[r]={},o.forEach(e=>{s.rootprob[e]=(1-i)*t.rootprob[e],s.subrate[e]={},Object.keys(t.subrate[e]).forEach(n=>{s.subrate[e][n]=t.subrate[e][n]}),s.subrate[r][e]=t.rootprob[e]*a,s.subrate[e][r]=n}),s}};const ND=e=>{const t=(e=>{const t={},n={};return e.forEach(e=>{const[r,i]=e;t[r]=t[i]=n[i]=!0}),Object.keys(t).filter(e=>!n[e]).sort()})(e);if(0==t.length)throw new Error("No root nodes");if(t.length>1)throw new Error("Multiple possible root nodes");const n=t[0];let r={},i={},a={},o={};r[n]=[],a[n]=0,e.forEach(e=>{const t=e[0],n=e[1],s=e[2];r[t]=r[t]||[],r[n]=r[n]||[],r[t].push(n),i[n]=t,a[n]=s,o[n]=e});let s={},u={},c={},l={},f=0;const p=(e,t)=>{if(!e)throw new Error("All nodes must be named");if(s[e])throw new Error("All node names must be unique (duplicate '"+e+"')");s[e]=!0,l[e]=(void 0!==t?l[t]:0)+a[e],f=Math.max(f,l[e]);const n=r[e];let i=[];return i=n.reduce((t,n)=>t.concat(p(n,e)),[]),u[e]=i,n.forEach(e=>c[e]=n.filter(t=>t!=e)),[e].concat(i)},d=p(n),h=d;c[n]=[];let m={};d.forEach((e,t)=>m[e]=t);const g=[null].concat(d.slice(1).map(e=>{const t=o[e];return[m[t[0]],m[t[1]],t[2]]})),v=g.slice(0).reverse(),y=h.filter(e=>0==r[e].length),x=h.filter(e=>0!=r[e].length),b=y.map(e=>m[e]),w=x.map(e=>m[e]),N=d.map(e=>c[e].map(e=>m[e])),S=d.map(e=>void 0===i[e]?-1:m[i[e]]);return{root:n,nodes:h,leaves:y,internals:x,branches:e,children:r,descendants:u,siblings:c,parent:i,branchLength:a,distFromRoot:l,maxDistFromRoot:f,preorder:d,preorderRank:m,preorderBranches:g,postorderBranches:v,leafPreorderRank:b,internalPreorderRank:w,siblingsPreorderRank:N,parentPreorderRank:S}},SD=e=>{const t=e=>e.name=e.name||"node"+ ++nodes;let n=[];const r=e=>{e.branchset&&e.branchset.forEach(i=>{n.push([t(e),t(i),Math.max(i.length,0)]),r(i)})};return r(e),n},_D=(e,t)=>{const n=e.split(""),r={};n.forEach((e,t)=>r[e]=t);const i=n.map((t,n)=>{const r=new Float32Array(e.length).fill(-Infinity);return r[n]=0,r}),a=new Float32Array(e.length).fill(0),o=t&&n.indexOf(t)>=0?i[n.indexOf(t)]:a;return{alphSize:e.length,chars:n,charToIndex:r,initMissing:a,initGap:o,initChar:i,init:e=>{const t=r[e];return void 0===t?o:i[t]}}},DD=(e,t)=>{const n=e.alphabet.split(""),r=n.map((t,r)=>n.map((n,r)=>e.subrate[t][n]||0));return n.forEach((e,t)=>{r[t][t]=0,n.forEach((e,n)=>{t!=n&&(r[t][t]-=r[t][n])})}),{logMatrixExponentials:t.preorderBranches.map(e=>null===e?null:bD.log(bD.expm(bD.multiply(r,e[2]))).toArray()),logRootProb:n.map(t=>bD.log(e.rootprob[t]))}},AD=(e,t)=>new Array(e.nodes.length).fill(0).map(()=>new Float32Array(t.alphSize)),MD=(e,t)=>{const n=Math.max(e,t);return-Infinity==n?n:n+Math.log(1+Math.exp(-Math.abs(e-t)))},ED=e=>{const{treeIndex:t,alphabetIndex:n,columnChars:r,logProbs:i}=e;let{logF:a,logE:o}=e;const s=t.nodes.length,{alphSize:u}=n,{logMatrixExponentials:c,logRootProb:l}=i;o=o||AD(t,n),a=a||AD(t,n),t.leafPreorderRank.forEach(e=>a[e].set(n.init(r[e]))),t.internalPreorderRank.forEach(e=>a[e].set(n.initMissing)),t.postorderBranches.forEach(e=>{if(null!==e){const t=c[e[1]],n=a[e[0]],r=a[e[1]],i=o[e[1]];for(let e=0;e<u;++e){let a=-Infinity;for(let n=0;n<u;++n)a=MD(a,t[e][n]+r[n]);i[e]=a,n[e]+=a}}});let f=-Infinity;if(s>0)for(let e=0;e<u;++e)f=MD(f,l[e]+a[0][e]);return{logE:o,logF:a,logL:f}},CD=e=>{const{treeIndex:t,alphabetIndex:n,logProbs:r}=e;let{logE:i,logG:a}=e;const{alphSize:o}=n,{logMatrixExponentials:s,logRootProb:u}=r;a=a||AD(t,n);for(let e=0;e<o;++e)a[0][e]=u[e];return t.preorderBranches.forEach(e=>{if(null!==e){const n=s[e[1]],r=a[e[0]],u=a[e[1]],c=t.siblingsPreorderRank[e[1]].map(e=>i[e]);for(let e=0;e<o;++e){let t=-Infinity;for(let i=0;i<o;++i)t=MD(t,r[i]+n[i][e]+c.reduce((e,t)=>e+t[i],0));u[e]=t}}}),{logG:a}},TD=e=>{const{logF:t,logG:n,logL:r,nodeNum:i,i:a}=e;return bD.exp(n[i][a]+t[i][a]-r)};var RD={models:wD,defaultModel:"LeGascuel",getNewickJSBranchList:SD,indexBranchList:ND,indexAlphabet:_D,getLogProbs:DD,logsumexp:MD,initColumn:AD,fillLeavesToRoot:ED,fillRootToLeaves:CD,getNodePostProfiles:e=>{const{branchList:t,newickJS:n,nodeSeq:r,isCaseSensitive:i,defaultGapChar:a}=e;let{model:o,postProbThreshold:s}=e;o=o||wD.LeGascuel;const u=_D(o.alphabet,a),{alphSize:c,chars:l}=u;if(void 0===s&&(s=1/(2*c)),!t&&!n)throw new Error("You must specify a tree, either as a list of branches or as a NewickJS object");if(t&&n)throw new Error("Specify tree either as a list of branches or as a NewickJS object, but not both");const f=t?ND(t):(e=>ND(SD(e)))(n),{preorder:p,leafPreorderRank:d,internalPreorderRank:h}=f,m=i?e=>e:e=>void 0===e?e:e.toUpperCase(),g=f.preorder.map(e=>m(r[e])),v=g.map(e=>void 0===e?[]:void 0);if(d.filter(e=>void 0===g[e]).length)throw new Error("All leaf nodes must have sequences specified");if(h.filter(e=>void 0!==g[e]).length)throw new Error("No internal nodes may have sequences specified");const y=g.reduce((e,t)=>void 0!==t&&t.length>e?t.length:e,0),x=DD(o,f),b=AD(f,u),w=AD(f,u),N=AD(f,u);for(let e=0;e<y;++e){const t=g.map(t=>void 0===t?void 0:t.charAt(e)),{logL:n}=ED({treeIndex:f,alphabetIndex:u,columnChars:t,model:o,logProbs:x,logF:w,logE:b});CD({treeIndex:f,alphabetIndex:u,columnChars:t,logProbs:x,logF:w,logE:b,logG:N}),h.forEach(e=>{let t=v[e],r={};for(let t=0;t<c;++t){const i=TD({logF:w,logG:N,logL:n,nodeNum:e,i:t});i>=s&&(r[l[t]]=i)}t.push(r)})}let S={};return h.forEach(e=>S[p[e]]=v[e]),{nodeProfile:S,treeIndex:f,columns:y}}},ID=function(){var e=o(A.mark((function e(t){var n,r,i,a,o,s,u,c,l;return A.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.branches,r=t.rowData,i=t.id,a=(a=t.gapChar)||"-",o={},s=Math.log(20)/Math.log(2),u=RD.models.makeGappedModel({model:RD.models[RD.defaultModel],deletionRate:.001,gapChar:a}),c=RD.getNodePostProfiles({branchList:n,nodeSeq:r,postProbThreshold:.01,model:u,defaultGapChar:a}),l=c.nodeProfile,Object.keys(l).forEach((function(e){o[e]=l[e].map((function(e){if(e[a]>=.5)return a;var t=Object.keys(e).filter((function(e){return e!==a})).sort((function(t,n){return e[t]-e[n]})),n=t.reduce((function(t,n){return t+e[n]}),0),r=t.map((function(t){return e[t]/n})),i=r.reduce((function(e,t){return e-t*Math.log(t)}),0)/Math.log(2);return t.map((function(e,t){return[e,r[t]*(s-i)/s]}))}))})),e.abrupt("return",{id:i,ancestralRowData:o});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),OD={clustal:{G:"orange",P:"orange",S:"orange",T:"orange",H:"red",K:"red",R:"red",F:"blue",W:"blue",Y:"blue",I:"green",L:"green",M:"green",V:"green"},lesk:{G:"orange",A:"orange",S:"orange",T:"orange",C:"green",V:"green",I:"green",L:"green",P:"green",F:"green",Y:"green",M:"green",W:"green",N:"magenta",Q:"magenta",H:"magenta",D:"red",E:"red",K:"blue",R:"blue"},maeditor:{A:"lightgreen",G:"lightgreen",C:"green",D:"darkgreen",E:"darkgreen",N:"darkgreen",Q:"darkgreen",I:"blue",L:"blue",M:"blue",V:"blue",F:"#c8a2c8",W:"#c8a2c8",Y:"#c8a2c8",H:"darkblue",K:"orange",R:"orange",P:"pink",S:"red",T:"red"},cinema:{H:"blue",K:"blue",R:"blue",D:"red",E:"red",S:"green",T:"green",N:"green",Q:"green",A:"white",V:"white",L:"white",I:"white",M:"white",F:"magenta",W:"magenta",Y:"magenta",P:"brown",G:"brown",C:"yellow",B:"gray",Z:"gray",X:"gray","-":"gray",".":"gray"}},PD={tree:{overflowX:"scroll",overflowY:"hidden"},treeCanvas:{position:"relative"}};function FD(e){var t=e.jbrequire,n=t("react"),r=t("@material-ui/core/styles").withStyles,i=function(e){d(r,e);var t=g(r);function r(e){var i;return s(this,r),(i=t.call(this,e)).canvasRef=n.createRef(),i}return c(r,[{key:"componentDidMount",value:function(){this.renderTree(),this.canvasRef.current.addEventListener("click",this.handleClick.bind(this))}},{key:"componentDidUpdate",value:function(){this.renderTree()}},{key:"componentWillUnmount",value:function(){this.canvasRef.current.removeEventListener("click",this.handleClick.bind(this))}},{key:"handleClick",value:function(e){e.preventDefault();var t,n,r=this.props,i=r.treeLayout,a=r.handleNodeClick,o=r.config,s=+e.offsetX,u=+e.offsetY;this.nodesWithHandles.forEach((function(e){var r=Math.pow(s-i.nx[e],2)+Math.pow(u-i.ny[e],2);(void 0===n||r<n)&&(n=r,t=e)})),t&&n<=Math.pow(o.nodeHandleClickRadius,2)&&a(t)}},{key:"renderTree",value:function(){var e=this.props,t=e.treeIndex,n=e.treeLayout,r=e.computedView,i=e.computedTreeConfig,a=r.collapsed,o=r.ancestorCollapsed,s=r.forceDisplayNode,u=r.nodeScale,c=i.treeWidth,l=i.branchStrokeStyle,f=i.treeStrokeWidth,p=i.rowConnectorDash,d=i.nodeHandleRadius,h=i.nodeHandleFillStyle,m=i.collapsedNodeHandleFillStyle,g=n.nx,v=n.ny,y=this.canvasRef.current,x=y.getContext("2d");x.setTransform(1,0,0,1,0,0),x.globalAlpha=1,x.clearRect(0,0,y.width,y.height),x.strokeStyle=l,x.fillStyle=l,x.lineWidth=f;var b=function(e){var t=u[e];x.globalAlpha=void 0===t||s[e]?1:t},w=t.nodes.filter((function(e){return!o[e]&&t.children[e].length}));t.nodes.forEach((function(e){o[e]||(t.children[e].length||(b(e),x.setLineDash([]),x.beginPath(),x.fillRect(g[e],v[e]-d,1,2*d)),t.children[e].length&&!a[e]&&(x.setLineDash([]),t.children[e].forEach((function(t){b(t),x.beginPath(),x.moveTo(g[e],v[e]),x.lineTo(g[e],v[t]),x.lineTo(g[t],v[t]),x.stroke()}))),x.globalAlpha=1,(0===t.children[e].length||s[e])&&(b(e),x.setLineDash(p),x.beginPath(),x.moveTo(g[e],v[e]),x.lineTo(c,v[e]),x.stroke()))})),x.strokeStyle=l,x.setLineDash([]),w.forEach((function(e){b(e),function(e){x.beginPath(),x.arc(g[e],v[e],d,0,2*Math.PI)}(e),a[e]||s[e]&&!1!==a[e]?x.fillStyle=m:(x.fillStyle=h,x.stroke()),x.fill()})),this.nodesWithHandles=w}},{key:"render",value:function(){var e=this.props,t=e.computedTreeConfig.treeWidth,r=e.classes;return n.createElement("div",{className:r.tree,style:{minWidth:t}},n.createElement("canvas",{className:r.treeCanvas,ref:this.canvasRef,width:t,height:e.treeLayout.treeHeight,style:{top:-e.scrollTop}}))}}]),r}(n.Component);return r(PD)(i)}var LD={alignmentNames:{marginLeft:"2px",marginRight:"2px",overflowX:"scroll",overflowY:"hidden",flexShrink:"0",whiteSpace:"nowrap"},alignmentNamesContent:{position:"relative"},alignmentName:{display:"flex",flexDirection:"column",justifyContent:"center"},alignmentNameLink:{color:"blue",cursor:"pointer",textDecoration:"underline","&:active":{color:"red"}}};function kD(e){var t=e.jbrequire,n=t("react"),r=t("@material-ui/core/styles").withStyles,i=function(e){d(r,e);var t=g(r);function r(){return s(this,r),t.apply(this,arguments)}return c(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.data.structure,i=void 0===r?{}:r,a=t.computedFontConfig,o=t.treeIndex,s=t.computedView,u=t.classes,c=t.config.nameDivWidth,l=a.nameFontName,f=a.nameFontSize,p=t.treeLayout.nodeHeight;return n.createElement("div",{className:u.alignmentNames,style:{fontFamily:l,fontSize:"".concat(f,"px"),maxWidth:c}},n.createElement("div",{className:u.alignmentNamesContent,style:{top:-this.props.scrollTop}},o.nodes.filter((function(e){return s.nodeVisible[e]})).map((function(t,r){var a={height:"".concat(p[t],"px")},o=e.props.view.nodeScale[t];return void 0!==o&&1!==o&&(a.transform="scale(1,".concat(o,")"),a.opacity=o),n.createElement("div",{className:u.alignmentName,key:t,style:a},i[t]?n.createElement("span",{className:u.alignmentNameLink,onClick:function(){return e.props.handleNameClick(t)},style:{fontFamily:l,fontSize:"".concat(f,"px")}},t):n.createElement("span",null," ",t," "))}))))}}]),r}(n.Component);return r(LD)(i)}var BD={alignmentCanvas:{position:"absolute",overflow:"hidden",pointerEvents:"none"}};function VD(e){var t=e.jbrequire,n=t("react"),r=t("@material-ui/core/styles").withStyles,i=function(e){d(r,e);var t=g(r);function r(e){var i;return s(this,r),(i=t.call(this,e)).state={clientWidth:0,clientHeight:0},i.canvasRef=n.createRef(),i}return c(r,[{key:"render",value:function(){var e=this.getDimensions();return n.createElement("canvas",{ref:this.canvasRef,className:this.props.classes.alignmentCanvas,width:e.width,height:e.height,style:{top:e.top,left:e.left}})}},{key:"getColor",value:function(e){var t=this.props.computedFontConfig.color;return t[e.toUpperCase()]||t.default||"black"}},{key:"getOffscreenRatio",value:function(){return 1}},{key:"getDimensions",value:function(){var e=this.props,t=e.scrollLeft,n=e.scrollTop,r=this.state,i=r.clientWidth,a=r.clientHeight,o=this.getOffscreenRatio(),s=o*i,u=o*a,c=Math.max(0,n-u),l=Math.max(0,t-s),f=Math.min(this.props.treeLayout.treeHeight,n+a+u),p=Math.min(this.props.alignLayout.alignWidth,t+i+s);return{top:c,left:l,bottom:f,right:p,width:p-l,height:f-c}}},{key:"setClientSize",value:function(e,t){e===this.state.clientWidth&&t===this.state.clientHeight||this.setState({clientWidth:e,clientHeight:t})}},{key:"componentDidMount",value:function(){this.renderVisibleRegion()}},{key:"componentDidUpdate",value:function(){this.renderVisibleRegion()}},{key:"renderVisibleRegion",value:function(){var e=this.canvasRef.current,t=e.getContext("2d"),n=this.getDimensions(),r=n.top,i=n.left,a=n.bottom,o=n.right,s=this.props,u=s.computedFontConfig,c=s.treeLayout,l=s.alignLayout,f=s.treeIndex,p=s.alignIndex,d=s.data.rowData;t.setTransform(1,0,0,1,0,0),t.globalAlpha=1,t.clearRect(0,0,e.width,e.height),t.font=u.charFont;for(var h,m=0,g=m;g<c.rowHeight.length&&c.rowY[g]<a;++g)c.rowY[g]<r&&(m=g),h=g;for(var v=0,y=0;y<p.columns&&v<o;++y){var x=l.computedColScale[y];if(v=l.colX[y],x&&v+l.colWidth[y]>=i)for(var b=m;b<=h;++b){var w=c.computedRowScale[b],N=c.rowY[b],S=c.rowHeight[b],_=d[f.nodes[b]];if(S&&_){t.globalAlpha=Math.min(x,w);var D=_[y];if("string"==typeof D)t.setTransform(x,0,0,w,v-i,N+S-r),t.fillStyle=this.getColor(D),t.fillText(D,0,0);else for(var A=0,M=0;M<D.length;M++){var E=D[M],C=E[0],T=E[1];t.setTransform(x,0,0,w*T,v-i,N+S*(1-A)-r),t.fillStyle=this.getColor(C),t.fillText(C,0,0),A+=T}}}}}}]),r}(n.Component);return r(BD)(i)}var qD={alignmentRows:{position:"relative",overflowX:"scroll",overflowY:"scroll",padding:"1px",cursor:"move"},alignmentRowsBack:{zIndex:2},alignmentColumnCursor:{position:"absolute",zIndex:"1",borderStyle:"solid",borderWidth:"1px",borderColor:"black",backgroundColor:"black",opacity:"0.1",pointerEvents:"none"}};function zD(e){var t=e.jbrequire,n=t("react"),r=t("@material-ui/core/styles").withStyles,i=t(VD),a=function(e){d(r,e);var t=g(r);function r(e){var i;return s(this,r),(i=t.call(this,e)).rowsDivRef=n.createRef(),i.alignCanvasRef=n.createRef(),i}return c(r,[{key:"componentDidUpdate",value:function(){this.setScrollPos(),this.setClientSize()}},{key:"componentDidMount",value:function(){this.setScrollPos(),this.setClientSize(),window.addEventListener("resize",this.setClientSize.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setClientSize.bind(this))}},{key:"setClientSize",value:function(){this.props.setClientSize(this.rowsDivRef.current.clientWidth,this.rowsDivRef.current.clientHeight),this.alignCanvasRef.current.setClientSize(this.rowsDivRef.current.clientWidth,this.rowsDivRef.current.clientHeight)}},{key:"setScrollPos",value:function(e){this.rowsDivRef.current.scrollLeft=(e=e||this.props).scrollLeft,this.rowsDivRef.current.scrollTop=e.scrollTop}},{key:"handleClick",value:function(e){this.props.handleAlignCharClick(this.resolveAlignCoords(e))}},{key:"handleMouseMove",value:function(e){var t=this.resolveAlignCoords(e);this.lastCoords&&t.row===this.lastCoords.row&&t.column===this.lastCoords.column||(this.props.handleAlignCharMouseOut(this.lastCoords),this.props.handleAlignCharMouseOver(t),this.lastCoords=t)}},{key:"handleMouseLeave",value:function(e){this.props.handleMouseLeave(e)}},{key:"handleMouseDown",value:function(e){this.props.handleMouseDown(e)}},{key:"handleScroll",value:function(e){this.props.handleScroll(this.rowsDivRef.current.scrollLeft,this.rowsDivRef.current.scrollTop)}},{key:"resolveAlignCoords",value:function(e){var t,n,r=this.props,i=r.treeIndex,a=r.alignIndex,o=r.treeLayout,s=r.alignLayout,u=r.data.rowData,c=parseInt(e.nativeEvent.offsetX),l=parseInt(e.nativeEvent.offsetY);for(t=0;t<i.nodes.length-1&&!(o.rowY[t]<=l&&o.rowY[t]+o.rowHeight[t]>l);++t);for(n=0;n<a.columns-1&&!(s.colX[n]<=c&&s.colX[n]+s.colWidth[n]>c);++n);var f=i.nodes[t],p=a.alignColToSeqPos[f],d=u[f],h=d&&d[n];return{row:t,column:n,node:f,seqPos:p&&p[n],c:h,isGap:this.props.isGapChar(h)}}},{key:"render",value:function(){var e=this.props,t=e.treeLayout,r=e.alignLayout,a=e.data,o=e.alignIndex,s=e.treeIndex,u=e.computedFontConfig,c=e.scrollLeft,l=e.scrollTop,f=e.hoverColumn,p=e.classes,d=t.treeHeight,h=r.alignWidth;return n.createElement("div",{className:p.alignmentRows,ref:this.rowsDivRef,onClick:this.handleClick.bind(this),onScroll:this.handleScroll.bind(this)},n.createElement(i,{ref:this.alignCanvasRef,data:a,treeIndex:s,alignIndex:o,treeLayout:t,alignLayout:r,computedFontConfig:u,scrollLeft:c,scrollTop:l}),null!==this.props.hoverColumn?n.createElement("div",{className:p.alignmentColumnCursor,style:{left:r.colX[f],top:0,width:r.colWidth[f],height:t.treeHeight}}):"",n.createElement("div",{className:p.alignmentRowsBack,style:{width:h,height:d},onMouseMove:this.handleMouseMove.bind(this),onMouseLeave:this.handleMouseLeave.bind(this),onMouseDown:this.handleMouseDown.bind(this)}))}}]),r}(n.Component);return r(qD)(a)}var GD=b((function(e,t){t=function(){var e,t,n,r,i,a,o,s,u,c,l,f,p,d,h,m,g,v,y,x,b,w,N,S,_,D,A,M,E,C,T,R,I,O,P,F;return e=function(){var e={};if(!t)var t=1e-6;if(!n)var n="undefined"!=typeof Float32Array?Float32Array:Array;if(!r)var r=Math.random;e.glMatrix={setMatrixArrayType:function(e){n=e}};var i,a={create:function(){var e=new n(3);return e[0]=0,e[1]=0,e[2]=0,e},clone:function(e){var t=new n(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},fromValues:function(e,t,r){var i=new n(3);return i[0]=e,i[1]=t,i[2]=r,i},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},set:function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},subtract:function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}};a.sub=a.subtract,a.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e},a.mul=a.multiply,a.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},a.div=a.divide,a.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},a.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},a.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},a.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},a.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)},a.dist=a.distance,a.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i},a.sqrDist=a.squaredDistance,a.length=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)},a.len=a.length,a.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},a.sqrLen=a.squaredLength,a.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},a.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},a.cross=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],u=n[2];return e[0]=i*u-a*s,e[1]=a*o-r*u,e[2]=r*s-i*o,e},a.lerp=function(e,t,n,r){var i=t[0],a=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e},a.random=function(e,t){t=t||1;var n=2*r()*Math.PI,i=2*r()-1,a=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(n)*a,e[1]=Math.sin(n)*a,e[2]=i*t,e},a.transformMat4=function(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12],e[1]=n[1]*r+n[5]*i+n[9]*a+n[13],e[2]=n[2]*r+n[6]*i+n[10]*a+n[14],e},a.transformMat3=function(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e},a.transformQuat=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*a-u*i,f=c*i+u*r-o*a,p=c*a+o*i-s*r,d=-o*r-s*i-u*a;return e[0]=l*c+d*-o+f*-u-p*-s,e[1]=f*c+d*-s+p*-o-l*-u,e[2]=p*c+d*-u+l*-s-f*-o,e},a.forEach=(i=a.create(),function(e,t,n,r,a,o){var s,u;for(t||(t=3),n||(n=0),u=r?Math.min(r*t+n,e.length):e.length,s=n;s<u;s+=t)i[0]=e[s],i[1]=e[s+1],i[2]=e[s+2],a(i,i,o),e[s]=i[0],e[s+1]=i[1],e[s+2]=i[2];return e}),a.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},e.vec3=a;var o={create:function(){var e=new n(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},clone:function(e){var t=new n(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},fromValues:function(e,t,r,i){var a=new n(4);return a[0]=e,a[1]=t,a[2]=r,a[3]=i,a},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},set:function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},subtract:function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}};o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e},o.div=o.divide,o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},o.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+a*a)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return n*n+r*r+i*i+a*a},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},o.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e[3]=t[3]*o),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},o.lerp=function(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e[3]=s+r*(n[3]-s),e},o.random=function(e,t){return t=t||1,e[0]=r(),e[1]=r(),e[2]=r(),e[3]=r(),o.normalize(e,e),o.scale(e,e,t),e},o.transformMat4=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e},o.transformQuat=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*a-u*i,f=c*i+u*r-o*a,p=c*a+o*i-s*r,d=-o*r-s*i-u*a;return e[0]=l*c+d*-o+f*-u-p*-s,e[1]=f*c+d*-s+p*-o-l*-u,e[2]=p*c+d*-u+l*-s-f*-o,e},o.forEach=function(){var e=o.create();return function(t,n,r,i,a,o){var s,u;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,t.length):t.length,s=r;s<u;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],a(e,e,o),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}(),o.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},e.vec4=o;var s={create:function(){var e=new n(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromMat4:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},clone:function(e){var t=new n(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},transpose:function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},invert:function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=l*o-s*c,p=-l*a+s*u,d=c*a-o*u,h=n*f+r*p+i*d;return h?(e[0]=f*(h=1/h),e[1]=(-l*r+i*c)*h,e[2]=(s*r-i*o)*h,e[3]=p*h,e[4]=(l*n-i*u)*h,e[5]=(-s*n+i*a)*h,e[6]=d*h,e[7]=(-c*n+r*u)*h,e[8]=(o*n-r*a)*h,e):null},adjoint:function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8];return e[0]=o*l-s*c,e[1]=i*c-r*l,e[2]=r*s-i*o,e[3]=s*u-a*l,e[4]=n*l-i*u,e[5]=i*a-n*s,e[6]=a*c-o*u,e[7]=r*u-n*c,e[8]=n*o-r*a,e},determinant:function(e){var t=e[3],n=e[4],r=e[5],i=e[6],a=e[7],o=e[8];return e[0]*(o*n-r*a)+e[1]*(-o*t+r*i)+e[2]*(a*t-n*i)},multiply:function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],p=n[0],d=n[1],h=n[2],m=n[3],g=n[4],v=n[5],y=n[6],x=n[7],b=n[8];return e[0]=p*r+d*o+h*c,e[1]=p*i+d*s+h*l,e[2]=p*a+d*u+h*f,e[3]=m*r+g*o+v*c,e[4]=m*i+g*s+v*l,e[5]=m*a+g*u+v*f,e[6]=y*r+x*o+b*c,e[7]=y*i+x*s+b*l,e[8]=y*a+x*u+b*f,e}};s.mul=s.multiply,s.translate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],p=n[0],d=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=p*r+d*o+c,e[7]=p*i+d*s+l,e[8]=p*a+d*u+f,e},s.rotate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],p=Math.sin(n),d=Math.cos(n);return e[0]=d*r+p*o,e[1]=d*i+p*s,e[2]=d*a+p*u,e[3]=d*o-p*r,e[4]=d*s-p*i,e[5]=d*u-p*a,e[6]=c,e[7]=l,e[8]=f,e},s.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,u=i+i,c=n*o,l=n*s,f=n*u,p=r*s,d=r*u,h=i*u,m=a*o,g=a*s,v=a*u;return e[0]=1-(p+h),e[3]=l+v,e[6]=f-g,e[1]=l-v,e[4]=1-(c+h),e[7]=d+m,e[2]=f+g,e[5]=d-m,e[8]=1-(c+p),e},s.normalFromMat4=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],p=t[10],d=t[11],h=t[12],m=t[13],g=t[14],v=t[15],y=n*s-r*o,x=n*u-i*o,b=n*c-a*o,w=r*u-i*s,N=r*c-a*s,S=i*c-a*u,_=l*m-f*h,D=l*g-p*h,A=l*v-d*h,M=f*g-p*m,E=f*v-d*m,C=p*v-d*g,T=y*C-x*E+b*M+w*A-N*D+S*_;return T?(e[0]=(s*C-u*E+c*M)*(T=1/T),e[1]=(u*A-o*C-c*D)*T,e[2]=(o*E-s*A+c*_)*T,e[3]=(i*E-r*C-a*M)*T,e[4]=(n*C-i*A+a*D)*T,e[5]=(r*A-n*E-a*_)*T,e[6]=(m*S-g*N+v*w)*T,e[7]=(g*b-h*S-v*x)*T,e[8]=(h*N-m*b+v*y)*T,e):null},s.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},e.mat3=s;var u={create:function(){var e=new n(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromValues:function(e,t,r,i,a,o,s,u,c,l,f,p,d,h,m,g){var v=new n(16);return v[0]=e,v[1]=t,v[2]=r,v[3]=i,v[4]=a,v[5]=o,v[6]=s,v[7]=u,v[8]=c,v[9]=l,v[10]=f,v[11]=p,v[12]=d,v[13]=h,v[14]=m,v[15]=g,v},clone:function(e){var t=new n(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},transpose:function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},invert:function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],p=t[10],d=t[11],h=t[12],m=t[13],g=t[14],v=t[15],y=n*s-r*o,x=n*u-i*o,b=n*c-a*o,w=r*u-i*s,N=r*c-a*s,S=i*c-a*u,_=l*m-f*h,D=l*g-p*h,A=l*v-d*h,M=f*g-p*m,E=f*v-d*m,C=p*v-d*g,T=y*C-x*E+b*M+w*A-N*D+S*_;return T?(e[0]=(s*C-u*E+c*M)*(T=1/T),e[1]=(i*E-r*C-a*M)*T,e[2]=(m*S-g*N+v*w)*T,e[3]=(p*N-f*S-d*w)*T,e[4]=(u*A-o*C-c*D)*T,e[5]=(n*C-i*A+a*D)*T,e[6]=(g*b-h*S-v*x)*T,e[7]=(l*S-p*b+d*x)*T,e[8]=(o*E-s*A+c*_)*T,e[9]=(r*A-n*E-a*_)*T,e[10]=(h*N-m*b+v*y)*T,e[11]=(f*b-l*N-d*y)*T,e[12]=(s*D-o*M-u*_)*T,e[13]=(n*M-r*D+i*_)*T,e[14]=(m*x-h*w-g*y)*T,e[15]=(l*w-f*x+p*y)*T,e):null},adjoint:function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],p=t[10],d=t[11],h=t[12],m=t[13],g=t[14],v=t[15];return e[0]=s*(p*v-d*g)-f*(u*v-c*g)+m*(u*d-c*p),e[1]=-(r*(p*v-d*g)-f*(i*v-a*g)+m*(i*d-a*p)),e[2]=r*(u*v-c*g)-s*(i*v-a*g)+m*(i*c-a*u),e[3]=-(r*(u*d-c*p)-s*(i*d-a*p)+f*(i*c-a*u)),e[4]=-(o*(p*v-d*g)-l*(u*v-c*g)+h*(u*d-c*p)),e[5]=n*(p*v-d*g)-l*(i*v-a*g)+h*(i*d-a*p),e[6]=-(n*(u*v-c*g)-o*(i*v-a*g)+h*(i*c-a*u)),e[7]=n*(u*d-c*p)-o*(i*d-a*p)+l*(i*c-a*u),e[8]=o*(f*v-d*m)-l*(s*v-c*m)+h*(s*d-c*f),e[9]=-(n*(f*v-d*m)-l*(r*v-a*m)+h*(r*d-a*f)),e[10]=n*(s*v-c*m)-o*(r*v-a*m)+h*(r*c-a*s),e[11]=-(n*(s*d-c*f)-o*(r*d-a*f)+l*(r*c-a*s)),e[12]=-(o*(f*g-p*m)-l*(s*g-u*m)+h*(s*p-u*f)),e[13]=n*(f*g-p*m)-l*(r*g-i*m)+h*(r*p-i*f),e[14]=-(n*(s*g-u*m)-o*(r*g-i*m)+h*(r*u-i*s)),e[15]=n*(s*p-u*f)-o*(r*p-i*f)+l*(r*u-i*s),e},determinant:function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],p=e[11],d=e[12],h=e[13],m=e[14],g=e[15];return(t*o-n*a)*(f*g-p*m)-(t*s-r*a)*(l*g-p*h)+(t*u-i*a)*(l*m-f*h)+(n*s-r*o)*(c*g-p*d)-(n*u-i*o)*(c*m-f*d)+(r*u-i*s)*(c*h-l*d)},multiply:function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],p=t[9],d=t[10],h=t[11],m=t[12],g=t[13],v=t[14],y=t[15],x=n[0],b=n[1],w=n[2],N=n[3];return e[0]=x*r+b*s+w*f+N*m,e[1]=x*i+b*u+w*p+N*g,e[2]=x*a+b*c+w*d+N*v,e[3]=x*o+b*l+w*h+N*y,e[4]=(x=n[4])*r+(b=n[5])*s+(w=n[6])*f+(N=n[7])*m,e[5]=x*i+b*u+w*p+N*g,e[6]=x*a+b*c+w*d+N*v,e[7]=x*o+b*l+w*h+N*y,e[8]=(x=n[8])*r+(b=n[9])*s+(w=n[10])*f+(N=n[11])*m,e[9]=x*i+b*u+w*p+N*g,e[10]=x*a+b*c+w*d+N*v,e[11]=x*o+b*l+w*h+N*y,e[12]=(x=n[12])*r+(b=n[13])*s+(w=n[14])*f+(N=n[15])*m,e[13]=x*i+b*u+w*p+N*g,e[14]=x*a+b*c+w*d+N*v,e[15]=x*o+b*l+w*h+N*y,e},fromMat3:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=0,e[4]=t[3],e[5]=t[4],e[6]=t[5],e[7]=0,e[8]=t[6],e[9]=t[7],e[10]=t[8],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}};u.mul=u.multiply,u.translate=function(e,t,n){var r,i,a,o,s,u,c,l,f,p,d,h,m=n[0],g=n[1],v=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*v+t[12],e[13]=t[1]*m+t[5]*g+t[9]*v+t[13],e[14]=t[2]*m+t[6]*g+t[10]*v+t[14],e[15]=t[3]*m+t[7]*g+t[11]*v+t[15]):(i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],p=t[9],d=t[10],h=t[11],e[0]=r=t[0],e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=c,e[7]=l,e[8]=f,e[9]=p,e[10]=d,e[11]=h,e[12]=r*m+s*g+f*v+t[12],e[13]=i*m+u*g+p*v+t[13],e[14]=a*m+c*g+d*v+t[14],e[15]=o*m+l*g+h*v+t[15]),e},u.scale=function(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},u.rotate=function(e,n,r,i){var a,o,s,u,c,l,f,p,d,h,m,g,v,y,x,b,w,N,S,_,D,A,M,E,C=i[0],T=i[1],R=i[2],I=Math.sqrt(C*C+T*T+R*R);return Math.abs(I)<t?null:(C*=I=1/I,T*=I,R*=I,a=Math.sin(r),o=Math.cos(r),c=n[1],l=n[2],f=n[3],d=n[5],h=n[6],m=n[7],v=n[9],y=n[10],x=n[11],S=C*T*(s=1-o)-R*a,_=T*T*s+o,D=R*T*s+C*a,A=C*R*s+T*a,M=T*R*s-C*a,E=R*R*s+o,e[0]=(u=n[0])*(b=C*C*s+o)+(p=n[4])*(w=T*C*s+R*a)+(g=n[8])*(N=R*C*s-T*a),e[1]=c*b+d*w+v*N,e[2]=l*b+h*w+y*N,e[3]=f*b+m*w+x*N,e[4]=u*S+p*_+g*D,e[5]=c*S+d*_+v*D,e[6]=l*S+h*_+y*D,e[7]=f*S+m*_+x*D,e[8]=u*A+p*M+g*E,e[9]=c*A+d*M+v*E,e[10]=l*A+h*M+y*E,e[11]=f*A+m*M+x*E,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e)},u.rotateX=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+c*r,e[5]=o*i+l*r,e[6]=s*i+f*r,e[7]=u*i+p*r,e[8]=c*i-a*r,e[9]=l*i-o*r,e[10]=f*i-s*r,e[11]=p*i-u*r,e},u.rotateY=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],c=t[8],l=t[9],f=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-c*r,e[1]=o*i-l*r,e[2]=s*i-f*r,e[3]=u*i-p*r,e[8]=a*r+c*i,e[9]=o*r+l*i,e[10]=s*r+f*i,e[11]=u*r+p*i,e},u.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],c=t[4],l=t[5],f=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+c*r,e[1]=o*i+l*r,e[2]=s*i+f*r,e[3]=u*i+p*r,e[4]=c*i-a*r,e[5]=l*i-o*r,e[6]=f*i-s*r,e[7]=p*i-u*r,e},u.fromRotationTranslation=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=r+r,u=i+i,c=a+a,l=r*s,f=r*u,p=r*c,d=i*u,h=i*c,m=a*c,g=o*s,v=o*u,y=o*c;return e[0]=1-(d+m),e[1]=f+y,e[2]=p-v,e[3]=0,e[4]=f-y,e[5]=1-(l+m),e[6]=h+g,e[7]=0,e[8]=p+v,e[9]=h-g,e[10]=1-(l+d),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},u.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,u=i+i,c=n*o,l=n*s,f=n*u,p=r*s,d=r*u,h=i*u,m=a*o,g=a*s,v=a*u;return e[0]=1-(p+h),e[1]=l+v,e[2]=f-g,e[3]=0,e[4]=l-v,e[5]=1-(c+h),e[6]=d+m,e[7]=0,e[8]=f+g,e[9]=d-m,e[10]=1-(c+p),e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},u.frustum=function(e,t,n,r,i,a,o){var s=1/(n-t),u=1/(i-r),c=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*u,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*u,e[10]=(o+a)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*c,e[15]=0,e},u.perspective=function(e,t,n,r,i){var a=1/Math.tan(t/2),o=1/(r-i);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*o,e[15]=0,e},u.ortho=function(e,t,n,r,i,a,o){var s=1/(t-n),u=1/(r-i),c=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(o+a)*c,e[15]=1,e},u.lookAt=function(e,n,r,i){var a,o,s,c,l,f,p,d,h,m,g=n[0],v=n[1],y=n[2],x=i[0],b=i[1],w=i[2],N=r[0],S=r[1],_=r[2];return Math.abs(g-N)<t&&Math.abs(v-S)<t&&Math.abs(y-_)<t?u.identity(e):(p=g-N,d=v-S,h=y-_,a=b*(h*=m=1/Math.sqrt(p*p+d*d+h*h))-w*(d*=m),o=w*(p*=m)-x*h,s=x*d-b*p,(m=Math.sqrt(a*a+o*o+s*s))?(a*=m=1/m,o*=m,s*=m):(a=0,o=0,s=0),c=d*s-h*o,l=h*a-p*s,f=p*o-d*a,(m=Math.sqrt(c*c+l*l+f*f))?(c*=m=1/m,l*=m,f*=m):(c=0,l=0,f=0),e[0]=a,e[1]=c,e[2]=p,e[3]=0,e[4]=o,e[5]=l,e[6]=d,e[7]=0,e[8]=s,e[9]=f,e[10]=h,e[11]=0,e[12]=-(a*g+o*v+s*y),e[13]=-(c*g+l*v+f*y),e[14]=-(p*g+d*v+h*y),e[15]=1,e)},u.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},e.mat4=u;var c,l,f,p,d,h={create:function(){var e=new n(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}};return h.rotationTo=(c=a.create(),l=a.fromValues(1,0,0),f=a.fromValues(0,1,0),function(e,t,n){var r=a.dot(t,n);return r<-.999999?(a.cross(c,l,t),a.length(c)<1e-6&&a.cross(c,f,t),a.normalize(c,c),h.setAxisAngle(e,c,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(a.cross(c,t,n),e[0]=c[0],e[1]=c[1],e[2]=c[2],e[3]=1+r,h.normalize(e,e))}),h.setAxes=(p=s.create(),function(e,t,n,r){return p[0]=n[0],p[3]=n[1],p[6]=n[2],p[1]=r[0],p[4]=r[1],p[7]=r[2],p[2]=t[0],p[5]=t[1],p[8]=t[2],h.normalize(e,h.fromMat3(e,p))}),h.clone=o.clone,h.fromValues=o.fromValues,h.copy=o.copy,h.set=o.set,h.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},h.setAxisAngle=function(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e},h.add=o.add,h.multiply=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],u=n[1],c=n[2],l=n[3];return e[0]=r*l+o*s+i*c-a*u,e[1]=i*l+o*u+a*s-r*c,e[2]=a*l+o*c+r*u-i*s,e[3]=o*l-r*s-i*u-a*c,e},h.mul=h.multiply,h.scale=o.scale,h.rotateX=function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+o*s,e[1]=i*u+a*s,e[2]=a*u-i*s,e[3]=o*u-r*s,e},h.rotateY=function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u-a*s,e[1]=i*u+o*s,e[2]=a*u+r*s,e[3]=o*u-i*s,e},h.rotateZ=function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+i*s,e[1]=i*u-r*s,e[2]=a*u+o*s,e[3]=o*u-a*s,e},h.calculateW=function(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=-Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e},h.dot=o.dot,h.lerp=o.lerp,h.slerp=function(e,t,n,r){var i,a,o,s,u,c=t[0],l=t[1],f=t[2],p=t[3],d=n[0],h=n[1],m=n[2],g=n[3];return(a=c*d+l*h+f*m+p*g)<0&&(a=-a,d=-d,h=-h,m=-m,g=-g),1-a>1e-6?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-r)*i)/o,u=Math.sin(r*i)/o):(s=1-r,u=r),e[0]=s*c+u*d,e[1]=s*l+u*h,e[2]=s*f+u*m,e[3]=s*p+u*g,e},h.invert=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a,s=o?1/o:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=a*s,e},h.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},h.length=o.length,h.len=h.length,h.squaredLength=o.squaredLength,h.sqrLen=h.squaredLength,h.normalize=o.normalize,h.fromMat3=(d="undefined"!=typeof Int8Array?new Int8Array([1,2,0]):[1,2,0],function(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,e[0]=(t[7]-t[5])*(n=.5/n),e[1]=(t[2]-t[6])*n,e[2]=(t[3]-t[1])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var a=d[i],o=d[a];n=Math.sqrt(t[3*i+i]-t[3*a+a]-t[3*o+o]+1),e[i]=.5*n,e[3]=(t[3*o+a]-t[3*a+o])*(n=.5/n),e[a]=(t[3*a+i]+t[3*i+a])*n,e[o]=(t[3*o+i]+t[3*i+o])*n}return e}),h.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},e.quat=h,e}(),t=function(){var t=e.vec4,n={rgb:{}},r=n.rgb;n.rgb.create=t.create,n.rgb.scale=t.scale,n.rgb.copy=t.copy,n.rgb.fromValues=t.fromValues,n.rgb.mix=function(e,t,n,r){var i=1-r;return e[0]=t[0]*r+n[0]*i,e[1]=t[1]*r+n[1]*i,e[2]=t[2]*r+n[2]*i,e[3]=t[3]*r+n[3]*i,e};var i={white:r.fromValues(1,1,1,1),black:r.fromValues(0,0,0,1),grey:r.fromValues(.5,.5,.5,1),lightgrey:r.fromValues(.8,.8,.8,1),darkgrey:r.fromValues(.3,.3,.3,1),red:r.fromValues(1,0,0,1),darkred:r.fromValues(.5,0,0,1),lightred:r.fromValues(1,.5,.5,1),green:r.fromValues(0,1,0,1),darkgreen:r.fromValues(0,.5,0,1),lightgreen:r.fromValues(.5,1,.5,1),blue:r.fromValues(0,0,1,1),darkblue:r.fromValues(0,0,.5,1),lightblue:r.fromValues(.5,.5,1,1),yellow:r.fromValues(1,1,0,1),darkyellow:r.fromValues(.5,.5,0,1),lightyellow:r.fromValues(1,1,.5,1),cyan:r.fromValues(0,1,1,1),darkcyan:r.fromValues(0,.5,.5,1),lightcyan:r.fromValues(.5,1,1,1),magenta:r.fromValues(1,0,1,1),darkmagenta:r.fromValues(.5,0,.5,1),lightmagenta:r.fromValues(1,.5,1,1),orange:r.fromValues(1,.5,0,1),darkorange:r.fromValues(.5,.25,0,1),lightorange:r.fromValues(1,.75,.5,1)};function a(e,t){this._colors=e;for(var r=0;r<this._colors.length;++r)this._colors[r]=n.forceRGB(this._colors[r]);this._stops=t}n.hex2rgb=function(e){var t,n,i,a;return 4===e.length||5===e.length?(t=parseInt(e[1],16),n=parseInt(e[2],16),i=parseInt(e[3],16),a=15,5===e.length&&(a=parseInt(e[4],16)),r.fromValues(1/15*t,1/15*n,1/15*i,1/15*a)):7===e.length||9===e.length?(t=parseInt(e.substr(1,2),16),n=parseInt(e.substr(3,2),16),i=parseInt(e.substr(5,2),16),a=255,9===e.length&&(a=parseInt(e.substr(7,2),16)),r.fromValues(1/255*t,1/255*n,1/255*i,1/255*a)):void 0},n.setColorPalette=function(e){console.log("setting colors"),i=e,n.initGradients()},n.forceRGB=function(e){if("string"==typeof e){var t=i[e];if(void 0!==t)return t;if(e.length>0&&"#"===e[0])return n.hex2rgb(e)}return 3===e.length?[e[0],e[1],e[2],1]:e},a.prototype={colorAt:function(e,n){if(n<=this._stops[0])return t.copy(e,this._colors[0]);if(n>=this._stops[this._stops.length-1])return t.copy(e,this._colors[this._stops.length-1]);for(var i=0,a=1;a<this._stops.length&&!(this._stops[a]>n);++a)i=a;var o=i+1,s=this._stops[i];return r.mix(e,this._colors[o],this._colors[i],(n-s)/(this._stops[o]-s))}};var o={};n.gradient=function(e,t){if("string"==typeof e)return o[e];if("equal"===(t=t||"equal")){t=[];for(var n=0;n<e.length;++n)t.push(1*n/(e.length-1))}return new a(e,t)};var s=n.gradient;function u(e,t,n){this.colorFor=e,this._beginFunc=t,this._endFunc=n}n.initGradients=function(){o.rainbow=s(["red","yellow","green","blue"]),o.reds=s(["lightred","darkred"]),o.greens=s(["lightgreen","darkgreen"]),o.blues=s(["lightblue","darkblue"]),o.trafficlight=s(["green","yellow","red"]),o.heatmap=s(["red","white","blue"])},u.prototype={begin:function(e){this._beginFunc&&this._beginFunc(e)},end:function(e){this._endFunc&&this._endFunc(e)}},n.ColorOp=u,n.uniform=function(e){return e=n.forceRGB(e||"white"),new u((function(t,n,r){n[r+0]=e[0],n[r+1]=e[1],n[r+2]=e[2],n[r+3]=e[3]}),null,null)};var c={H:[1,1,1],C:[.83,.83,.83],N:[.13,.2,1],O:[1,.13,0],F:[.12,.94,.12],CL:[.12,.94,.12],BR:[.6,.13,0],I:[.4,0,.73],HE:[0,1,1],NE:[0,1,1],AR:[0,1,1],XE:[0,1,1],KR:[0,1,1],P:[1,.6,0],S:[.87,.87,0],B:[1,.67,.47],LI:[.47,0,1],NA:[.47,0,1],K:[.47,0,1],RB:[.47,0,1],CS:[.47,0,1],FR:[.47,0,1],BE:[0,.47,0],MG:[0,.47,0],SR:[0,.47,0],BA:[0,.47,0],RA:[0,.47,0],TI:[.6,.6,.6],FE:[.87,.47,0]};n.byElement=function(){return new u((function(e,t,n){var r=e.element(),i=c[r];return void 0!==i?(t[n]=i[0],t[n+1]=i[1],t[n+2]=i[2],t[n+3]=1,t):(t[n]=1,t[n+1]=0,t[n+2]=1,t[n+3]=1,t)}),null,null)},n.bySS=function(){return new u((function(e,t,n){switch(e.residue().ss()){case"C":return t[n]=.8,t[n+1]=.8,t[n+2]=.8,void(t[n+3]=1);case"H":return t[n]=.6,t[n+1]=.6,t[n+2]=.9,void(t[n+3]=1);case"E":return t[n]=.2,t[n+1]=.8,t[n+2]=.2,void(t[n+3]=1)}}),null,null)},n.rainbow=function(e){return e||(e=s("rainbow")),new u((function(t,n,r){var i=0,a=this.chainLimits[t.residue().chain().name()];void 0!==a&&(i=(t.residue().index()-a[0])/(a[1]-a[0]));var o=[1,1,1,1];e.colorAt(o,i),n[r]=o[0],n[r+1]=o[1],n[r+2]=o[2],n[r+3]=o[3]}),(function(e){var t=e.chains();this.chainLimits={};for(var n=0;n<t.length;++n){var r=t[n].backboneTraces();if(0!==r.length){for(var i=r[0].residueAt(0).index(),a=r[0].residueAt(r[0].length()-1).index(),o=1;o<r.length;++o){var s=r[o];i=Math.min(i,s.residueAt(0).index()),a=Math.max(a,s.residueAt(s.length()-1).index())}i!==a&&(this.chainLimits[t[n].name()]=[i,a])}}}),(function(){this.chainLimits=null}))},n.ssSuccession=function(e,t){return e||(e=s("rainbow")),t||(t=n.forceRGB("lightgrey")),new u((function(n,r,i){var a=n.residue().index(),o=this.chainLimits[n.residue().chain().name()],s=o.indices[a];if(-1===s)return r[i]=t[0],r[i+1]=t[1],r[i+2]=t[2],void(r[i+3]=t[3]);var u=0;null!==o.max&&(u=s/(o.max>0?o.max:1));var c=[0,0,0,0];e.colorAt(c,u),r[i]=c[0],r[i+1]=c[1],r[i+2]=c[2],r[i+3]=c[3]}),(function(e){var t=e.chains();this.chainLimits={};for(var n=0;n<t.length;++n){for(var r=t[n].residues(),i=null,a={},o=0,s="C",u=0;u<r.length;++u){var c=r[u].ss();"C"===c?("C"!==s&&o++,a[r[u].index()]=-1):(i=o,a[r[u].index()]=o),s=c}this.chainLimits[t[n].name()]={indices:a,max:i}}}),(function(){this.chainLimits=null}))},n.byChain=function(e){return e||(e=s("rainbow")),new u((function(t,n,r){var i=this.chainIndices[t.residue().chain().name()],a=[0,0,0,0];e.colorAt(a,i*this.scale),n[r+0]=a[0],n[r+1]=a[1],n[r+2]=a[2],n[r+3]=a[3]}),(function(e){var t=e.chains();this.chainIndices={};for(var n=0;n<t.length;++n)this.chainIndices[t[n].name()]=n;this.scale=t.length>1?1/(t.length-1):1}),(function(){this.chainIndices=null}))};var l=function(){var e=t.create();return function(t,n,r,i){r.colorAt(e,i),t[n+0]=e[0],t[n+1]=e[1],t[n+2]=e[2],t[n+3]=e[3]}}();function f(e,t,n,r,i){return t||(t=s("rainbow")),new u((function(n,r,a){var o=0;this._min!==this._max&&(o=(i(n).prop(e)-this._min)/(this._max-this._min)),l(r,a,t,o)}),(function(t){if(void 0!==n)return this._min=n[0],void(this._max=n[1]);n=function(e,t,n){var r=null,i=null;return e[t]((function(e){var t=e.prop(n);null!==r||null!==i?(r=Math.min(r,t),i=Math.max(i,t)):r=i=t})),{min:r,max:i}}(t,r,e),this._min=n.min,this._max=n.max}),(function(){}))}return n.byAtomProp=function(e,t,n){return f(e,t,n,"eachAtom",(function(e){return e}))},n.byResidueProp=function(e,t,n){return f(e,t,n,"eachResidue",(function(e){return e.residue()}))},n.interpolateColor=function(e,n){for(var r=new Float32Array(4*(n*(e.length/4-1)+1)),i=0,a=t.create(),o=t.create(),s=1/n,u=0;u<e.length/4-1;++u){t.set(a,e[4*u+0],e[4*u+1],e[4*u+2],e[4*u+3]),t.set(o,e[4*u+4],e[4*u+5],e[4*u+6],e[4*u+7]);for(var c=0;c<n;++c){var l=s*c;r[i+0]=a[0]*(1-l)+o[0]*l,r[i+1]=a[1]*(1-l)+o[1]*l,r[i+2]=a[2]*(1-l)+o[2]*l,r[i+3]=a[3]*(1-l)+o[3]*l,i+=4}}return r[i+0]=o[0],r[i+1]=o[1],r[i+2]=o[2],r[i+3]=o[3],r},n.initGradients(),n}(),n=function(){function e(e,t,n){this._pool=e,this._start=t,this._next=t,this._end=n}function t(){this.clear()}return e.prototype={nextId:function(e){var t=this._next;return console.assert(this._next<this._end),this._next++,this._pool._objects[t]=e,t},hasLeft:function(){return this._next<this._end},recycle:function(){this._pool.recycle(this)},length:function(){return this._end-this._start}},t.prototype={MAX_ID:16777216,getContinuousRange:function(t){for(var n=-1,r=null,i=0;i<this._free.length;++i){var a=this._free[i].length();a>=t&&(null===r||a<r)&&(r=a,n=i)}if(-1!==n){var o=this._free[n];return this._free.splice(n,1),this._usedCount++,o}var s=this._unusedRangeStart,u=s+t;if(u>this.MAX_ID)return console.error("not enough free object ids."),null;this._unusedRangeStart=u;var c=new e(this,s,u);return this._usedCount++,c},clear:function(){this._objects={},this._unusedRangeStart=1,this._free=[],this._usedCount=0},recycle:function(e){for(var t=e._start;t<e._next;++t)delete this._objects[t];e._next=e._start,this._free.push(e),this._usedCount--,console.assert(this._usedCount>=0),this._free.length>0&&0===this._usedCount&&this.clear()},objectForId:function(e){return this._objects[e]}},t}(),r=function(){var e={};function t(e,t){return e<t}function n(e,t){void 0===e||void 0===t?(this._empty=!0,this._min=this._max=null):(this._empty=!1,this._min=e,this._max=t)}return e.derive=function(e,t,n){for(var r in t.prototype)e.prototype[r]=t.prototype[r];if(void 0!==n)for(var i in n)e.prototype[i]=n[i]},e.bind=function(e,t){return function(){return t.apply(e,arguments)}},e.copy=function(e){e=e||{};var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},e.binarySearch=function(e,n,r){if(0===e.length)return-1;r=r||t;for(var i=0,a=e.length,o=i+a>>1;;){var s=e[o];if(r(n,s))a=o;else{if(!r(s,n))return o;i=o}var u=i+a>>1;if(u===o)return-1;o=u}return-1},e.indexFirstLargerEqualThan=function(e,n,r){if(r=r||t,0===e.length||r(e[e.length-1],n))return-1;for(var i=0,a=e.length,o=i+a>>1;;){var s=e[o];r(n,s)?a=o:r(s,n)?i=o+1:a=o;var u=i+a>>1;if(u===o)return o;o=u}},e.indexLastSmallerThan=function(e,n,r){if(r=r||t,0===e.length||r(e[e.length-1],n))return e.length-1;if(r(n,e[0])||!r(e[0],n))return-1;for(var i=0,a=e.length,o=i+a>>1;;){var s=e[o];r(n,s)||!r(s,n)?a=o:i=o;var u=i+a>>1;if(u===o)return o;o=u}},e.indexLastSmallerEqualThan=function(e,n,r){if(r=r||t,0===e.length||r(e[e.length-1],n))return e.length-1;if(r(n,e[0]))return-1;for(var i=0,a=e.length,o=i+a>>1;;){r(n,e[o])?a=o:i=o;var s=i+a>>1;if(s===o)return o;o=s}},n.prototype={min:function(){return this._min},max:function(){return this._max},length:function(){return this._max-this._min},empty:function(){return this._empty},center:function(){return.5*(this._max+this._min)},extend:function(e){this._min-=e,this._max+=e},update:function(e){this._empty?(this._min=this._max=e,this._empty=!1):e<this._min?this._min=e:e>this._max&&(this._max=e)}},e.Range=n,e}(),i=function(){function e(e){if("complete"!==document.readyState&&"loaded"!==document.readyState&&"interactive"!==document.readyState)return console.error("isWebGLSupported only works after DOMContentLoaded"),!1;if(void 0===e)try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("experimental-webgl"))}catch(e){return!1}return!!e}function t(e,t){this._width=t.width,this._antialias=t.antialias,this._height=t.height,this._resize=!1,this._lastTimestamp=null,this._domElement=e,this._initCanvas(),this._backgroundColor=t.backgroundColor,this._forceManualAntialiasing=t.forceManualAntialiasing}return t.prototype={_ensureSize:function(){if(this._resize){this._resize=!1;var e=this._width*this._samples,t=this._height*this._samples;this._realWidth=e,this._realHeight=t,this._gl.viewport(0,0,e,t),this._canvas.width=e,this._canvas.height=t,this._samples>1&&this._initManualAntialiasing(this._samples)}},resize:function(e,t){e===this._width&&t===this._height||(this._resize=!0,this._width=e,this._height=t)},fitParent:function(){var e=this._domElement.getBoundingClientRect();this.resize(e.width,e.height)},gl:function(){return this._gl},imageData:function(){return this._canvas.toDataURL()},_initContext:function(){try{this._gl=this._canvas.getContext("experimental-webgl",{antialias:this._antialias&&!this._forceManualAntialiasing,preserveDrawingBuffer:!0})}catch(e){return console.error("WebGL not supported",e),!1}return!!this._gl||(console.error("WebGL not supported"),!1)},_initManualAntialiasing:function(e){var t=1/e,n="translate("+.5*-(1-t)*this._realWidth+"px, "+.5*-(1-t)*this._realHeight+"px) scale("+t+", "+t+")";this._canvas.style.webkitTransform=n,this._canvas.style.transform=n,this._canvas.style.ieTransform=n,this._canvas.width=this._realWidth,this._canvas.height=this._realHeight},initGL:function(){var e=1;if(!this._initContext())return!1;var t=this._gl;return t.getContextAttributes().antialias&&!this._forceManualAntialiasing||!this._antialias||(e=2),this._realWidth=this._width*e,this._realHeight=this._height*e,this._samples=e,e>1&&this._initManualAntialiasing(e),t.viewportWidth=this._realWidth,t.viewportHeight=this._realHeight,t.clearColor(this._backgroundColor[0],this._backgroundColor[1],this._backgroundColor[2],1),t.lineWidth(2),t.cullFace(t.FRONT),t.enable(t.CULL_FACE),t.enable(t.DEPTH_TEST),!0},_shaderFromString:function(e,t,n){var r,i=this._gl;if("fragment"===t)r=i.createShader(i.FRAGMENT_SHADER);else{if("vertex"!==t)return console.error("could not determine type for shader"),null;r=i.createShader(i.VERTEX_SHADER)}var a=e.replace("${PRECISION}",n);return i.shaderSource(r,a),i.compileShader(r),i.getShaderParameter(r,i.COMPILE_STATUS)?r:(console.log(a),console.error(i.getShaderInfoLog(r)),null)},initShader:function(e,t,n){var i=this._gl,a=this._shaderFromString(t,"fragment",n),o=this._shaderFromString(e,"vertex",n),s=i.createProgram();if(i.attachShader(s,o),i.attachShader(s,a),i.linkProgram(s),!i.getProgramParameter(s,i.LINK_STATUS))return console.error("could not initialise shaders"),console.error(i.getShaderInfoLog(s)),null;var u=r.bind(i,i.getAttribLocation),c=r.bind(i,i.getUniformLocation);return s.posAttrib=u(s,"attrPos"),s.colorAttrib=u(s,"attrColor"),s.normalAttrib=u(s,"attrNormal"),s.objIdAttrib=u(s,"attrObjId"),s.selectAttrib=u(s,"attrSelect"),s.symId=c(s,"symId"),s.projection=c(s,"projectionMat"),s.modelview=c(s,"modelviewMat"),s.rotation=c(s,"rotationMat"),s.fog=c(s,"fog"),s.fogFar=c(s,"fogFar"),s.fogNear=c(s,"fogNear"),s.fogColor=c(s,"fogColor"),s.outlineColor=c(s,"outlineColor"),s.outlineWidth=c(s,"outlineWidth"),s.relativePixelSize=c(s,"relativePixelSize"),s.screenDoorTransparency=c(s,"screenDoorTransparency"),s.selectionColor=c(s,"selectionColor"),s.pointSize=c(s,"pointSize"),s.zoom=c(s,"zoom"),s},on:function(e,t){this._canvas.addEventListener(e,t,!1)},removeEventListener:function(e,t){this._canvas.removeEventListener(e,t,!1)},onWheel:function(e,t){"onwheel"in this._canvas?this.on("wheel",e):this.on("mousewheel",t)},domElement:function(){return this._canvas},bind:function(){this._ensureSize(),this._gl.viewport(0,0,this._realWidth,this._realHeight)},superSamplingFactor:function(){return this._samples},viewportWidth:function(){return this._realWidth},viewportHeight:function(){return this._realHeight},width:function(){return this._width},height:function(){return this._height},_initCanvas:function(){this._canvas=document.createElement("canvas"),this._canvas.width=this._width,this._canvas.height=this._height,this._domElement.appendChild(this._canvas)},isWebGLSupported:function(){return e(this._gl)},destroy:function(){this._canvas.width=1,this._canvas.height=1,this._canvas.parentElement.removeChild(this._canvas),this._canvas=null}},{Canvas:t,isWebGLSupported:e}}(),a=function(){function e(e,t){this._width=t.width,this._height=t.height,this._colorBufferWidth=this._width,this._colorBufferHeight=this._height,this._gl=e,this._colorHandle=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this._colorHandle),this._depthHandle=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this._depthHandle),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,this._width,this._height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this._depthHandle),this._colorTexture=e.createTexture(),this._initColorBuffer()}return e.prototype={width:function(){return this._width},height:function(){return this._height},bind:function(){var e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._colorHandle),e.bindRenderbuffer(e.RENDERBUFFER,this._depthHandle),this._colorBufferWidth===this._width&&this._colorBufferHeight===this._height||this._resizeBuffers(),e.viewport(0,0,this._width,this._height)},colorTexture:function(){return this._colorTexture},_initColorBuffer:function(){this.bind();var e=this._gl;e.bindTexture(e.TEXTURE_2D,this._colorTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this._width,this._height,0,e.RGBA,e.UNSIGNED_BYTE,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._colorTexture,0),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),this.release()},_resizeBuffers:function(){var e=this._gl;e.bindRenderbuffer(e.RENDERBUFFER,this._depthHandle),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,this._width,this._height),e.bindTexture(e.TEXTURE_2D,this._colorTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this._width,this._height,0,e.RGBA,e.UNSIGNED_BYTE,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._colorTexture,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this._depthHandle),e.bindTexture(e.TEXTURE_2D,null),this._colorBufferWidth=this._width,this._colorBufferHeight=this._height},resize:function(e,t){this._width=e,this._height=t},release:function(){var e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null)}},e}(),o=function(){function e(e){this._freeArrays=[],this._bufferType=e}return e.prototype.request=function(e){for(var t=-1,n=null,r=0;r<this._freeArrays.length;++r){var i=this._freeArrays[r].length;i>=e&&(null===n||i<n)&&(n=i,t=r)}if(-1!==t){var a=this._freeArrays[t];return this._freeArrays.splice(t,1),a}return new this._bufferType(e)},e.prototype.release=function(e){this._freeArrays.push(e)},e}(),s=function(){var t,n,r,i=e.vec3,a=e.mat4;function o(e){this._projection=a.create(),this._camModelView=a.create(),this._modelView=a.create(),this._rotation=a.create(),this._translation=a.create(),this._near=.1,this._far=4e3,this._fogNear=-5,this._fogFar=50,this._fog=!0,this._fovY=45*Math.PI/180,this._fogColor=i.fromValues(1,1,1),this._outlineColor=i.fromValues(.1,.1,.1),this._outlineWidth=1,this._selectionColor=i.fromValues(.1,1,.1),this._center=i.create(),this._zoom=50,this._screenDoorTransparency=!1,this._updateProjectionMat=!0,this._updateModelViewMat=!0,this._upsamplingFactor=1,this._gl=e,this._currentShader=null,this._stateId=0,this.setViewportSize(e.viewportWidth,e.viewportHeight)}return o.prototype={_incrementStateId:function(){this._stateId+=1,this._stateId>68719476735&&(this._stateId=0)},setScreenDoorTransparency:function(e){this._screenDoorTransparency=e,this._incrementStateId()},setOutlineWidth:function(e){this._outlineWidth!==e&&(this._outlineWidth=e,this._incrementStateId())},setRotation:function(e){16===e.length?a.copy(this._rotation,e):a.fromMat3(this._rotation,e),this._updateModelViewMat=!0},upsamplingFactor:function(){return this._upsamplingFactor},setUpsamplingFactor:function(e){this._upsamplingFactor!==e&&(this._incrementStateId(),this._upsamplingFactor=e,this._relativePixelSize=new Float32Array([this._upsamplingFactor/this._width,this._upsamplingFactor/this._height]))},mainAxes:function(){return[i.fromValues(this._rotation[0],this._rotation[4],this._rotation[8]),i.fromValues(this._rotation[1],this._rotation[5],this._rotation[9]),i.fromValues(this._rotation[2],this._rotation[6],this._rotation[10])]},fieldOfViewY:function(){return this._fovY},setFieldOfViewY:function(e){this._fovY=e,this._updateProjectionMat=!0},aspectRatio:function(){return this._width/this._height},rotation:function(){return this._rotation},_updateIfRequired:function(){var e=!1;return this._updateModelViewMat&&(a.identity(this._camModelView),a.translate(this._camModelView,this._camModelView,[-this._center[0],-this._center[1],-this._center[2]]),a.mul(this._camModelView,this._rotation,this._camModelView),a.identity(this._translation),a.translate(this._translation,this._translation,[0,0,-this._zoom]),a.mul(this._camModelView,this._translation,this._camModelView),e=!0),this._updateProjectionMat&&(a.identity(this._projection),a.perspective(this._projection,this._fovY,this._width/this._height,this._near,this._far),e=!0),this._updateProjectionMat=!1,this._updateModelViewMat=!1,e&&this._incrementStateId(),e},setViewportSize:function(e,t){this._updateProjectionMat=!0,this._width=e,this._height=t,this._relativePixelSize=new Float32Array([this._upsamplingFactor/e,this._upsamplingFactor/t])},viewportWidth:function(){return this._width},viewportHeight:function(){return this._height},setCenter:function(e){this._updateModelViewMat=!0,i.copy(this._center,e)},fog:function(e){return void 0!==e&&e!==this._fog&&(this._fog=e,this._incrementStateId()),this._fog},rotateZ:(r=a.create(),function(e){a.identity(r),this._updateModelViewMat=!0,a.rotate(r,r,e,[0,0,1]),a.mul(this._rotation,r,this._rotation)}),rotateX:function(){var e=a.create();return function(t){a.identity(e),this._updateModelViewMat=!0,a.rotate(e,e,t,[1,0,0]),a.mul(this._rotation,e,this._rotation)}}(),rotateY:function(){var e=a.create();return function(t){a.identity(e),this._updateModelViewMat=!0,a.rotate(e,e,t,[0,1,0]),a.mul(this._rotation,e,this._rotation)}}(),panX:function(e){return this.panXY(e,0)},panY:function(e){return this.panXY(0,e)},panXY:(t=a.create(),n=i.create(),function(e,r){a.transpose(t,this._rotation),this._updateModelViewMat=!0,i.set(n,-e,r,0),i.transformMat4(n,n,t),i.add(n,n,this._center),this.setCenter(n)}),nearOffset:function(){return this._near},farOffset:function(){return this._far},setNearFar:function(e,t){e===this._near&&t===this._far||(this._near=e,this._far=t,this._updateProjectionMat=!0)},setFogNearFar:function(e,t){this._fogNear=e,this._fogFar=t,this._updateProjectionMat=!0},setZoom:function(e){return this._updateModelViewMat=!0,this._zoom=e,this._zoom},zoom:function(e){return void 0===e||(this._updateModelViewMat=!0,this._zoom=Math.min(1e3,Math.max(2,(1+.1*e)*this._zoom))),this._zoom},center:function(){return this._center},setFogColor:function(e){this._fogColor=i.clone(e)},currentShader:function(){return this._currentShader},invalidateCurrentShader:function(){this._currentShader=null},setOutlineColor:function(e){this._outlineColor=i.clone(e)},setSelectionColor:function(e){this._selectionColor=i.clone(e)},bind:function(e,t){var n=!1,r=this._gl;if(this._currentShader!==e&&(this._currentShader=e,r.useProgram(e),n=!0),n=this._updateIfRequired()||n,t?(a.mul(this._modelView,this._camModelView,t),r.uniformMatrix4fv(e.modelview,!1,this._modelView)):r.uniformMatrix4fv(e.modelview,!1,this._camModelView),this._stateId!==e.stateId){e.stateId=this._stateId,r.uniformMatrix4fv(e.projection,!1,this._projection),e.rotation&&r.uniformMatrix4fv(e.rotation,!1,this._rotation),r.uniform1i(e.fog,this._fog);var i=this._zoom;r.uniform1f(e.fogFar,this._fogFar+i),r.uniform1f(e.zoom,this._zoom),r.uniform1f(e.fogNear,this._fogNear+i),r.uniform3fv(e.fogColor,this._fogColor),r.uniform3fv(e.outlineColor,this._outlineColor),r.uniform3fv(e.selectionColor,this._selectionColor),r.uniform2fv(e.relativePixelSize,this._relativePixelSize),r.uniform1f(e.outlineWidth,this._outlineWidth),r.uniform1i(e.screenDoorTransparency,this._screenDoorTransparency)}}},o}(),u={PRELUDE_FS:"\nprecision ${PRECISION} float;\nuniform bool screenDoorTransparency;\nvec4 handleAlpha(vec4 inColor) {\n  if (screenDoorTransparency) {\n    ivec2 pxCoord = ivec2(gl_FragCoord.xy);\n    ivec2 mod = pxCoord - (pxCoord/2) * 2;\n    if (inColor.a < 0.99 &&\n        (inColor.a < 0.01 || mod.x != 0 || mod.y != 0)) { discard; }\n    return vec4(inColor.rgb, 1.0);\n  } else {\n    if (inColor.a == 0.0) { discard; }\n    return inColor;\n  } \n} \nuniform vec3 selectionColor;\n\nvec3 handleSelect(vec3 inColor, float vertSelect) { \n  return mix(inColor, selectionColor, step(0.5, vertSelect) * 0.7); \n} \n\nuniform bool fog;\nuniform float fogNear;\nuniform float fogFar;\nuniform vec3 fogColor;\nvec3 handleFog(vec3 inColor) {\n  if (fog) {\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep(fogNear, fogFar, depth);\n    return mix(inColor, fogColor, fogFactor);\n  } else {\n    return inColor;\n  }\n}",LINES_FS:"\nvarying vec4 vertColor;\nvarying vec3 vertNormal;\n\nvoid main(void) {\n  gl_FragColor = handleAlpha(vertColor);\n  gl_FragColor.rgb = handleFog(gl_FragColor.rgb);\n}",SELECT_LINES_FS:"\nprecision ${PRECISION} float;\n\nvarying float vertSelect;\nvarying vec3 vertNormal;\nuniform float fogNear;\nuniform float fogFar;\nuniform vec3 fogColor;\nuniform bool fog;\nuniform vec3 selectionColor;\n\nvoid main(void) {\n  gl_FragColor = mix(vec4(0.0, 0.0, 0.0, 0.0), vec4(selectionColor, 1.0), \n                     vertSelect);\n  gl_FragColor.a = step(0.5, vertSelect);\n  if (gl_FragColor.a == 0.0) { discard; }\n  float depth = gl_FragCoord.z / gl_FragCoord.w;\n  if (fog) {\n    float fog_factor = smoothstep(fogNear, fogFar, depth);\n    gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w),\n                        fog_factor);\n  }\n}",SELECT_LINES_VS:"\nattribute vec3 attrPos;\nattribute float attrSelect;\n\nuniform mat4 projectionMat;\nuniform mat4 modelviewMat;\nuniform float pointSize;\nvarying float vertSelect;\nvoid main(void) {\n  gl_Position = projectionMat * modelviewMat * vec4(attrPos, 1.0);\n  gl_Position.z += gl_Position.w * 0.000001; \n  float distToCamera = vec4(modelviewMat * vec4(attrPos, 1.0)).z;\n  gl_PointSize = pointSize * 200.0 / abs(distToCamera); \n  vertSelect = attrSelect;\n}",SELECT_VS:"\nprecision ${PRECISION} float;\nuniform mat4 projectionMat;\nuniform mat4 modelviewMat;\nuniform float pointSize;\nattribute vec3 attrPos;\nattribute float attrObjId;\n\nvarying float objId;\n\nvoid main(void) {\n  gl_Position = projectionMat * modelviewMat * vec4(attrPos, 1.0);\n  float distToCamera = vec4(modelviewMat * vec4(attrPos, 1.0)).z;\n  gl_PointSize = pointSize * 200.0 / abs(distToCamera); \n  objId = attrObjId;\n}",SELECT_FS:"\nprecision ${PRECISION} float;\n\nvarying float objId;\nuniform int symId;\n\nint intMod(int x, int y) { \n  int z = x/y;\n  return x-y*z;\n}\nvoid main(void) {\n  // ints are only required to be 7bit...\n  int integralObjId = int(objId+0.5);\n  int red = intMod(integralObjId, 256);\n  integralObjId/=256;\n  int green = intMod(integralObjId, 256);\n  integralObjId/=256;\n  int blue = intMod(integralObjId, 256);\n  int alpha = symId;\n  gl_FragColor = vec4(float(red), float(green), \n                      float(blue), float(alpha))/255.0;\n}",LINES_VS:"\nattribute vec3 attrPos;\nattribute vec4 attrColor;\n\nuniform mat4 projectionMat;\nuniform mat4 modelviewMat;\nvarying vec4 vertColor;\nuniform float pointSize;\nvoid main(void) {\n  gl_Position = projectionMat * modelviewMat * vec4(attrPos, 1.0);\n  float distToCamera = vec4(modelviewMat * vec4(attrPos, 1.0)).z;\n  gl_PointSize = pointSize * 200.0 / abs(distToCamera); \n  vertColor = attrColor;\n}",HEMILIGHT_FS:"\nvarying vec4 vertColor;\nvarying vec3 vertNormal;\nvarying float vertSelect;\n\nvoid main(void) {\n  float dp = dot(vertNormal, vec3(0.0, 0.0, 1.0));\n  float hemi = min(1.0, max(0.0, dp)*0.6+0.5);\n  gl_FragColor = vec4(vertColor.rgb*hemi, vertColor.a);\n  gl_FragColor.rgb = handleFog(handleSelect(gl_FragColor.rgb, vertSelect));\n  gl_FragColor = handleAlpha(gl_FragColor);\n}",PHONG_FS:"\nvarying vec4 vertColor;\nvarying vec3 vertNormal;\nvarying vec3 vertPos;\nuniform float zoom;\nvarying float vertSelect;\n\nvoid main(void) {\n  vec3 eyePos = vec3(0.0, 0.0, zoom);\n  float dp = dot(vertNormal, normalize(eyePos - vertPos));\n  float hemi = min(1.0, max(0.3, dp)+0.2);\n  //hemi *= vertColor.a;\n  vec3 rgbColor = vertColor.rgb * hemi; \n  rgbColor += min(vertColor.rgb, 0.8) * pow(max(0.0, dp), 18.0);\n  rgbColor = handleSelect(rgbColor, vertSelect);\n  gl_FragColor = vec4(clamp(rgbColor, 0.0, 1.0), vertColor.a);\n  gl_FragColor.rgb = handleFog(gl_FragColor.rgb);\n  gl_FragColor = handleAlpha(gl_FragColor);\n}",HEMILIGHT_VS:"\nattribute vec3 attrPos;\nattribute vec4 attrColor;\nattribute vec3 attrNormal;\nattribute float attrSelect;\n\nuniform mat4 projectionMat;\nuniform mat4 modelviewMat;\nvarying vec4 vertColor;\nvarying vec3 vertNormal;\nvarying vec3 vertPos;\nvarying float vertSelect;\nvoid main(void) {\n  vertPos = (modelviewMat * vec4(attrPos, 1.0)).xyz;\n  gl_Position = projectionMat * modelviewMat * vec4(attrPos, 1.0);\n  vec4 n = (modelviewMat * vec4(attrNormal, 0.0));\n  vertNormal = n.xyz;\n  vertColor = attrColor;\n  vertSelect = attrSelect;\n}",OUTLINE_FS:"\nvarying float vertAlpha;\nvarying float vertSelect;\n\nuniform vec3 outlineColor;\n\nvoid main() {\n  gl_FragColor = vec4(mix(outlineColor, selectionColor, \n                          step(0.5, vertSelect)), \n                      vertAlpha);\n  gl_FragColor.rgb = handleFog(gl_FragColor.rgb);\n  gl_FragColor = handleAlpha(gl_FragColor);\n}",OUTLINE_VS:"\nprecision ${PRECISION} float;\n\nattribute vec3 attrPos;\nattribute vec3 attrNormal;\nattribute vec4 attrColor;\nattribute float attrSelect;\n\nuniform vec3 outlineColor;\nuniform mat4 projectionMat;\nuniform mat4 modelviewMat;\nvarying float vertAlpha;\nvarying float vertSelect;\nuniform vec2 relativePixelSize;\nuniform float outlineWidth;\n\nvoid main(void) {\n  gl_Position = projectionMat * modelviewMat * vec4(attrPos, 1.0);\n  vec4 normal = modelviewMat * vec4(attrNormal, 0.0);\n  vertAlpha = attrColor.a;\n  vertSelect = attrSelect;\n  vec2 expansion = relativePixelSize * \n       (outlineWidth + 2.0 * step(0.5, attrSelect));\n  vec2 offset = normal.xy * expansion;\n  gl_Position.xy += gl_Position.w * offset;\n}",TEXT_VS:"\nprecision ${PRECISION} float;\n\nattribute vec3 attrCenter;\nattribute vec2 attrCorner;\nuniform mat4 projectionMat;\nuniform mat4 modelviewMat;\nuniform mat4 rotationMat;\nvarying vec2 vertTex;\nuniform float width;\nuniform float height;\nvoid main() { \n  vec4 pos = modelviewMat* vec4(attrCenter, 1.0);\n  pos.z += 4.0;\n  gl_Position = projectionMat * pos;\n  gl_Position.xy += vec2(width,height)*attrCorner*gl_Position.w; \n  vertTex = (attrCorner+abs(attrCorner))/(2.0*abs(attrCorner)); \n}",TEXT_FS:"\nprecision ${PRECISION} float;\n\nuniform mat4 projectionMat;\nuniform mat4 modelviewMat;\nuniform sampler2D sampler;\nuniform float xScale;\nuniform float yScale;\nvarying vec2 vertTex;\nvoid main() { \n  vec2 texCoord = vec2(vertTex.x*xScale, vertTex.y*yScale);\n  gl_FragColor = texture2D(sampler, texCoord);\n  if (gl_FragColor.a == 0.0) { discard; }\n}"},c=function(){function e(e,t,n){this._element=e,this._element.addEventListener("touchmove",r.bind(this,this._touchMove)),this._element.addEventListener("touchstart",r.bind(this,this._touchStart)),this._element.addEventListener("touchend",r.bind(this,this._touchEnd)),this._element.addEventListener("touchcancel",r.bind(this,this._touchEnd)),this._touchState={scale:1,rotation:0,center:null},this._lastSingleTap=null,this._viewer=t,this._cam=n}function t(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function n(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}return e.prototype={_extractEventAttributes:function(e,r){var i,a,o,s={};s.center=function(e){for(var t=0,n=0,r=0;r<e.length;++r)t+=e[r].clientX,n+=e[r].clientY;return{x:t/=e.length,y:n/=e.length}}(r.targetTouches),s.pointers=[];for(var u=0;u<r.targetTouches.length;++u){var c=r.targetTouches[u];s.pointers.push({x:c.clientX,y:c.clientY})}return s.numTouches=r.targetTouches.length,s.rotation=0,s.scale=1,s.deltaScale=0,s.deltaRotation=0,e.center&&(s.deltaCenter={x:s.center.x-e.center.x,y:s.center.y-e.center.y}),2!==e.numTouches||2!==s.numTouches||(s.initialPointers=e.initialPointers?e.initialPointers:e.pointers,s.scale=(a=s.pointers,o=t((i=s.initialPointers)[0],i[1]),t(a[0],a[1])/(0===o?1:o)),s.deltaScale=s.scale-e.scale,s.rotation=function(e,t){return n(t[1],t[0])-n(e[1],e[0])}(s.initialPointers,s.pointers),s.deltaRotation=s.rotation-e.rotation),s},_touchMove:function(e){e.preventDefault();var t=this._extractEventAttributes(this._touchState,e),n=4*-t.deltaScale;if(0!==n&&this._cam.zoom(n),2===t.numTouches&&2===this._touchState.numTouches){var r=.002*Math.tan(.5*this._cam.fieldOfViewY())*this._cam.zoom();this._cam.panXY(t.deltaCenter.x*r,t.deltaCenter.y*r)}this._cam.rotateZ(-t.deltaRotation),1===t.numTouches&&1===this._touchState.numTouches&&(this._cam.rotateX(.005*t.deltaCenter.y),this._cam.rotateY(.005*t.deltaCenter.x)),this._viewer.requestRedraw(),this._touchState=t},_touchStart:function(e){if(e.preventDefault(),1===e.targetTouches.length){var t=(new Date).getTime();null!==this._lastSingleTap&&t-this._lastSingleTap<500&&this._viewer._mouseDoubleClick({clientX:e.targetTouches[0].clientX,clientY:e.targetTouches[0].clientY}),this._lastSingleTap=t}else this._lastSingleTap=null;this._touchState=this._extractEventAttributes(this._touchState,e)},_touchEnd:function(e){e.preventDefault()}},e}(),l=function(){function e(e,t,n,r){this._viewer=t,this._canvas=e,this._cam=n,this._canvas=e,this._animationTime=r,this._lastMouseUpTime=null,this._init()}return e.prototype={_centerOnClicked:function(e){null!==e&&this._viewer.setCenter(e.pos(),this._animationTime)},_mouseUp:function(e){var t=this._canvas,n=(new Date).getTime();if((null===this._lastMouseUpTime||n-this._lastMouseUpTime>300)&n-this._lastMouseDownTime<300){var r=this._canvas.domElement().getBoundingClientRect(),i=this._viewer.pick({x:e.clientX-r.left,y:e.clientY-r.top});this._viewer._dispatchEvent(e,"click",i)}this._lastMouseUpTime=n,t.removeEventListener("mousemove",this._mouseRotateListener),t.removeEventListener("mousemove",this._mousePanListener),t.removeEventListener("mouseup",this._mouseUpListener),document.removeEventListener("mouseup",this._mouseUpListener),document.removeEventListener("mousemove",this._mouseRotateListener),document.removeEventListener("mousemove",this._mousePanListener)},setCam:function(e){this._cam=e},_init:function(){return this._mousePanListener=r.bind(this,this._mousePan),this._mouseRotateListener=r.bind(this,this._mouseRotate),this._mouseUpListener=r.bind(this,this._mouseUp),this._canvas.onWheel(r.bind(this,this._mouseWheelFF),r.bind(this,this._mouseWheel)),this._canvas.on("dblclick",r.bind(this,this._mouseDoubleClick)),this._canvas.on("mousedown",r.bind(this,this._mouseDown)),!0},_mouseWheel:function(e){this._cam.zoom(e.wheelDelta<0?-1:1),e.preventDefault(),this._viewer.requestRedraw()},_mouseWheelFF:function(e){this._cam.zoom(e.deltaY<0?1:-1),e.preventDefault(),this._viewer.requestRedraw()},_mouseDoubleClick:function(e){var t=this._canvas.domElement().getBoundingClientRect(),n=this._viewer.pick({x:e.clientX-t.left,y:e.clientY-t.top});this._viewer._dispatchEvent(e,"doubleClick",n),this._viewer.requestRedraw()},_mouseDown:function(e){0===e.button&&(this._lastMouseDownTime=(new Date).getTime(),e.preventDefault(),!0===e.shiftKey?(this._canvas.on("mousemove",this._mousePanListener),document.addEventListener("mousemove",this._mousePanListener,!1)):(this._canvas.on("mousemove",this._mouseRotateListener),document.addEventListener("mousemove",this._mouseRotateListener,!1)),this._canvas.on("mouseup",this._mouseUpListener),document.addEventListener("mouseup",this._mouseUpListener,!1),this._lastMousePos={x:e.pageX,y:e.pageY})},_mouseRotate:function(e){var t={x:e.pageX,y:e.pageY},n=t.x-this._lastMousePos.x;this._cam.rotateX(.005*(t.y-this._lastMousePos.y)),this._cam.rotateY(.005*n),this._lastMousePos=t,this._viewer.requestRedraw()},_mousePan:function(e){var t={x:e.pageX,y:e.pageY},n=t.x-this._lastMousePos.x,r=t.y-this._lastMousePos.y,i=.002*Math.tan(.5*this._cam.fieldOfViewY())*this._cam.zoom();this._cam.panXY(i*n,i*r),this._lastMousePos=t,this._viewer.requestRedraw()}},e}(),f=function(){var t,n,r=e.vec3,i=e.vec4,a=e.mat3,o=e.quat,s=(t=r.create(),function(e,n,i){return r.cross(t,e,n),Math.atan2(r.dot(t,i),r.dot(e,n))}),u=function(){var e=r.create();return function(t,n){return r.copy(e,n),Math.abs(n[0])<Math.abs(n[1])?Math.abs(n[0])<Math.abs(n[2])?e[0]+=1:e[2]+=1:Math.abs(n[1])<Math.abs(n[2])?e[1]+=1:e[2]+=1,r.cross(t,n,e)}}(),c=(n=r.create(),function(e,t,i,a,o,s,u){var c=s*s,l=c*(3-2*s),f=1-l,p=c*(s-2)+s,d=c*(s-1);r.copy(n,t),r.scale(n,n,f),r.scaleAndAdd(n,n,i,p),r.scaleAndAdd(n,n,a,l),r.scaleAndAdd(n,n,o,d),e[u]=n[0],e[u+1]=n[1],e[u+2]=n[2]});function l(e,t,n){return n?e*t:t*(e-1)+1}function f(e,t){this._center=e||r.create(),this._radius=t||1}var p=function(){var e=a.create(),t=a.create(),n=a.create(),s=a.create(),u=o.create(),c=r.create(),l=r.create();return function(f){for(var p=o.fromValues(0,0,0,1),d=0;d<24;++d){a.fromQuat(e,p);var h=a.transpose(n,e);a.mul(t,e,a.mul(s,f,h)),r.set(c,t[5],t[2],t[1]),r.set(l,Math.abs(c[0]),Math.abs(c[1]),Math.abs(c[2]));var m=l[0]>l[1]&&l[0]>l[2]?0:l[1]>l[2]?1:2,g=(m+1)%3,v=(m+2)%3;if(0===c[m])break;var y=(t[3*v+v]-t[3*g+g])/(2*c[m]),x=y>0?1:-1,b=x/((y*=x)+(y<1e6?Math.sqrt(y*y+1):y)),w=1/Math.sqrt(b*b+1);if(1===w)break;if(i.set(u,0,0,0,0),u[m]=x*Math.sqrt((1-w)/2),u[m]*=-1,u[3]=Math.sqrt(1-u[m]*u[m]),1===u[3])break;p=o.mul(p,p,u),o.normalize(p,p)}return p}}();return f.prototype.center=function(){return this._center},f.prototype.radius=function(){return this._radius},{signedAngle:s,axisRotation:function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=a*a,c=a*o,l=a*s,f=o*o,p=o*s,d=s*s;return e[0]=u+i-u*i,e[1]=c-i*c-r*s,e[2]=l-i*l+r*o,e[3]=c-i*c+r*s,e[4]=f+i-i*f,e[5]=p-i*p-r*a,e[6]=l-i*l-r*o,e[7]=p-i*p+r*a,e[8]=d+i-i*d,e},ortho:u,diagonalizer:p,catmullRomSpline:function(e,t,n,i,a,o){i=i||.5;var s=null,u=3*l(t,n,a=a||!1);s=o?o.request(u):new Float32Array(u);var f,p,d,h=0,m=1/n,g=r.create(),v=r.create(),y=r.create(),x=r.create(),b=r.create(),w=r.create();for(r.set(x,e[0],e[1],e[2]),r.set(b,e[3],e[4],e[5]),a?(r.set(y,e[e.length-3],e[e.length-2],e[e.length-1]),r.sub(g,b,y),r.scale(g,g,i)):(r.set(y,e[0],e[1],e[2]),r.set(g,0,0,0)),f=1,d=t-1;f<d;++f){for(r.set(w,e[3*(f+1)],e[3*(f+1)+1],e[3*(f+1)+2]),r.sub(v,w,x),r.scale(v,v,i),p=0;p<n;++p)c(s,x,g,b,v,m*p,h),h+=3;r.copy(y,x),r.copy(x,b),r.copy(b,w),r.copy(g,v)}for(a?(r.set(w,e[0],e[1],e[3]),r.sub(v,w,x),r.scale(v,v,i)):r.set(v,0,0,0),p=0;p<n;++p)c(s,x,g,b,v,m*p,h),h+=3;if(!a)return s[h]=e[3*(t-1)+0],s[h+1]=e[3*(t-1)+1],s[h+2]=e[3*(t-1)+2],s;for(r.copy(y,x),r.copy(x,b),r.copy(b,w),r.copy(g,v),r.set(w,e[3],e[4],e[5]),r.sub(v,w,x),r.scale(v,v,i),p=0;p<n;++p)c(s,x,g,b,v,m*p,h),h+=3;return s},cubicHermiteInterpolate:c,interpolateScalars:function(e,t){for(var n=new Float32Array(t*(e.length-1)+1),r=0,i=0,a=0,o=1/t,s=0;s<e.length-1;++s){i=e[s],a=e[s+1];for(var u=0;u<t;++u){var c=o*u;n[r+0]=i*(1-c)+a*c,r+=1}}return n[r+0]=a,n},catmullRomSplineNumPoints:l,Sphere:f,buildRotation:function(e,t,n,i,a){a?r.cross(i,t,n):u(i,t),r.cross(n,i,t),r.normalize(i,i),r.normalize(n,n),e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=i[0],e[4]=i[1],e[5]=i[2],e[6]=t[0],e[7]=t[1],e[8]=t[2]}}}(),p=function(){var t,n,r=e.vec3;function i(e,t){this._arcs=t,this._stacks=e,this._indices=new Uint16Array(3*t*e*2),this._verts=new Float32Array(3*t*e);var n,r,i=Math.PI/(e-1),a=2*Math.PI/t;for(n=0;n<this._stacks;++n){var o=Math.sin(n*i),s=Math.cos(n*i);for(r=0;r<this._arcs;++r){var u=o*Math.cos(r*a),c=o*Math.sin(r*a);this._verts[3*(r+n*this._arcs)]=u,this._verts[3*(r+n*this._arcs)+1]=c,this._verts[3*(r+n*this._arcs)+2]=s}}var l=0;for(n=0;n<this._stacks-1;++n)for(r=0;r<this._arcs;++r)this._indices[l]=n*this._arcs+r,this._indices[l+1]=n*this._arcs+(r+1)%this._arcs,this._indices[l+2]=(n+1)*this._arcs+r,this._indices[l+=3]=n*this._arcs+(r+1)%this._arcs,this._indices[l+1]=(n+1)*this._arcs+(r+1)%this._arcs,this._indices[l+2]=(n+1)*this._arcs+r,l+=3}function a(e,t,n){var i=f.catmullRomSpline(e,e.length/3,t,n,!0);this._indices=new Uint16Array(2*i.length),this._verts=i,this._normals=new Float32Array(i.length),this._arcs=i.length/3;for(var a=r.create(),o=0;o<this._arcs;++o){var s=0===o?this._arcs-1:o-1,u=o===this._arcs-1?0:o+1;a[0]=this._verts[3*u+1]-this._verts[3*s+1],a[1]=this._verts[3*s]-this._verts[3*u],r.normalize(a,a),this._normals[3*o]=a[0],this._normals[3*o+1]=a[1],this._normals[3*o+2]=a[2]}for(o=0;o<this._arcs;++o)this._indices[6*o]=o,this._indices[6*o+1]=o+this._arcs,this._indices[6*o+2]=(o+1)%this._arcs+this._arcs,this._indices[6*o+3]=o,this._indices[6*o+4]=(o+1)%this._arcs+this._arcs,this._indices[6*o+5]=(o+1)%this._arcs}function o(e){this._arcs=e,this._indices=new Uint16Array(3*e*2),this._verts=new Float32Array(3*e*2),this._normals=new Float32Array(3*e*2);for(var t=2*Math.PI/this._arcs,n=0;n<this._arcs;++n){var r=Math.cos(t*n),i=Math.sin(t*n);this._verts[3*n]=r,this._verts[3*n+1]=i,this._verts[3*n+2]=-.5,this._verts[3*e+3*n]=r,this._verts[3*e+3*n+1]=i,this._verts[3*e+3*n+2]=.5,this._normals[3*n]=r,this._normals[3*n+1]=i,this._normals[3*e+3*n]=r,this._normals[3*e+3*n+1]=i}for(n=0;n<this._arcs;++n)this._indices[6*n]=n%this._arcs,this._indices[6*n+1]=e+(n+1)%this._arcs,this._indices[6*n+2]=(n+1)%this._arcs,this._indices[6*n+3]=n%this._arcs,this._indices[6*n+4]=e+n%this._arcs,this._indices[6*n+5]=e+(n+1)%this._arcs}return i.prototype={addTransformed:(t=r.create(),n=r.create(),function(e,i,a,o,s){for(var u=e.numVerts(),c=0;c<this._stacks*this._arcs;++c)r.set(n,this._verts[3*c],this._verts[3*c+1],this._verts[3*c+2]),r.copy(t,n),r.scale(t,t,a),r.add(t,t,i),e.addVertex(t,n,o,s);for(c=0;c<this._indices.length/3;++c)e.addTriangle(u+this._indices[3*c],u+this._indices[3*c+1],u+this._indices[3*c+2])}),numIndices:function(){return this._indices.length},numVerts:function(){return this._verts.length/3}},a.prototype={addTransformed:function(){var e=r.create(),t=r.create();return function(n,i,a,o,s,u,c,l){for(var f=this._arcs,p=this._normals,d=this._verts,h=n.numVerts()-f,m=0;m<f;++m)r.set(e,a*d[3*m],a*d[3*m+1],0),r.transformMat3(e,e,o),r.add(e,e,i),r.set(t,p[3*m],p[3*m+1],0),r.transformMat3(t,t,o),n.addVertex(e,t,s,l);if(!u)if(0!==c)for(m=0;m<f;++m)n.addTriangle(h+(m+c)%f,h+m+f,h+(m+1)%f+f),n.addTriangle(h+(m+c)%f,h+(m+1)%f+f,h+(m+1+c)%f);else for(m=0;m<this._indices.length/3;++m)n.addTriangle(h+this._indices[3*m],h+this._indices[3*m+1],h+this._indices[3*m+2])}}()},o.prototype={numVerts:function(){return this._verts.length/3},numIndices:function(){return this._indices.length},addTransformed:function(){var e=r.create(),t=r.create();return function(n,i,a,o,s,u,c,l,f){for(var p=n.numVerts(),d=this._verts,h=this._normals,m=this._arcs,g=0;g<2*m;++g)r.set(e,o*d[3*g],o*d[3*g+1],a*d[3*g+2]),r.transformMat3(e,e,s),r.add(e,e,i),r.set(t,h[3*g],h[3*g+1],h[3*g+2]),r.transformMat3(t,t,s),n.addVertex(e,t,g<m?u:c,g<m?l:f);var v=this._indices;for(g=0;g<v.length/3;++g)n.addTriangle(p+v[3*g],p+v[3*g+1],p+v[3*g+2])}}()},{TubeProfile:a,ProtoCylinder:o,ProtoSphere:i}}(),T=function(){function e(e){this._children=[],this._visible=!0,this._name=name||"",this._gl=e,this._order=1}return e.prototype={order:function(e){return void 0!==e&&(this._order=e),this._order},add:function(e){this._children.push(e)},draw:function(e,t,n,r){for(var i=0,a=this._children.length;i!==a;++i)this._children[i].draw(e,t,n,r)},show:function(){this._visible=!0},hide:function(){this._visible=!1},name:function(e){return void 0!==e&&(this._name=e),this._name},destroy:function(){for(var e=0;e<this._children.length;++e)this._children[e].destroy()},visible:function(){return this._visible}},e}(),O=function(){var t,n=e.vec3,i=(t=n.create(),function(e,r,i){for(var a=0;a<r.length;++a)for(var o=r[a],s=e.chainsByName(o.chains()),u=0;u<o.matrices().length;++u)for(var c=o.matrix(u),l=0;l<s.length;++l)for(var f=s[l],p=0;p<f.residues().length;++p){var d=f.residues()[p].centralAtom();null!==d&&(n.transformMat4(t,d.pos(),c),i(d,t))}});function a(e){T.call(this,e),this._idRanges=[],this._vertAssocs=[],this._showRelated=null,this._selection=null}return r.derive(a,T,{setShowRelated:function(e){if(!e||"asym"===e||null!==this.structure().assembly(e))return this._showRelated=e,e;console.error("no assembly with name",e,". Falling back to asymmetric unit")},symWithIndex:function(e){if("asym"===this.showRelated())return null;var t=this.structure().assembly(this.showRelated());if(!t)return null;for(var n=t.generators(),r=0;r<n.length;++r){if(n[r].matrices().length>e)return n[r].matrix(e);e-=n[r].matrices().length}return null},showRelated:function(){return this._showRelated},select:function(e){return this.structure().select(e)},structure:function(){return this._vertAssocs[0]._structure},getColorForAtom:function(e,t){return this._vertAssocs[0].getColorForAtom(e,t)},addIdRange:function(e){this._idRanges.push(e)},destroy:function(){T.prototype.destroy.call(this);for(var e=0;e<this._idRanges.length;++e)this._idRanges[e].recycle()},eachCentralAtom:function(e){var t=this.structure(),n=t.assembly(this.showRelated());return null===n?function(e,t){e.eachResidue((function(e){var n=e.centralAtom();null!==n&&t(n,n.pos())}))}(t,e):i(t,n.generators(),e)},addVertAssoc:function(e){this._vertAssocs.push(e)},_vertArraysInvolving:function(e){for(var t=this.vertArrays(),n=[],r={},i=0;i<e.length;++i)r[e[i]]=!0;for(var a=0;a<t.length;++a)!0===r[t[a].chain()]&&n.push(t[a]);return n},_drawSymmetryRelated:function(e,t,n){for(var r=n.generators(),i=0;i<r.length;++i){var a=r[i],o=this._vertArraysInvolving(a.chains());this._drawVertArrays(e,t,o,a.matrices())}},_updateProjectionIntervalsAsym:function(e,t,n,r,i,a){for(var o=this.vertArrays(),s=0;s<o.length;++s)o[s].updateProjectionIntervals(e,t,n,r,i,a)},updateProjectionIntervals:function(e,t,n,r,i,a){if(this._visible){var o=this.showRelated();if("asym"===o)return this._updateProjectionIntervalsAsym(e,t,n,r,i,a);for(var s=this.structure().assembly(o).generators(),u=0;u<s.length;++u)for(var c=s[u],l=this._vertArraysInvolving(c.chains()),f=0;f<c.matrices().length;++f)for(var p=0;p<l.length;++p){var d=c.matrix(f);l[p].updateProjectionIntervals(e,t,n,r,i,a,d)}}},_updateSquaredSphereRadiusAsym:function(e,t){for(var n=this.vertArrays(),r=0;r<n.length;++r)t=n[r].updateSquaredSphereRadius(e,t);return t},updateSquaredSphereRadius:function(e,t){if(!this._visible)return t;var n=this.showRelated();if("asym"===n)return this._updateSquaredSphereRadiusAsym(e,t);for(var r=this.structure().assembly(n).generators(),i=0;i<r.length;++i)for(var a=r[i],o=this._vertArraysInvolving(a.chains()),s=0;s<a.matrices().length;++s)for(var u=0;u<o.length;++u)t=o[u].updateSquaredSphereRadius(e,t);return t},draw:function(e,t,n,r){if(this._visible){var i=this.shaderForStyleAndPass(t,n,r);if(i){var a=this.showRelated();if("asym"===a)return this._drawVertArrays(e,i,this.vertArrays(),null);var o=this.structure().assembly(a);return this._drawSymmetryRelated(e,i,o)}}},colorBy:function(e,t){console.time("BaseGeom.colorBy"),this._ready=!1,t=t||this.structure();for(var n=0;n<this._vertAssocs.length;++n)this._vertAssocs[n].recolor(e,t);console.timeEnd("BaseGeom.colorBy")},setOpacity:function(e,t){console.time("BaseGeom.setOpacity"),this._ready=!1,t=t||this.structure();for(var n=0;n<this._vertAssocs.length;++n)this._vertAssocs[n].setOpacity(e,t);console.timeEnd("BaseGeom.setOpacity")},setSelection:function(e){console.time("BaseGeom.setSelection"),this._selection=e,this._ready=!1;for(var t=0;t<this._vertAssocs.length;++t)this._vertAssocs[t].setSelection(e);console.timeEnd("BaseGeom.setSelection")},selection:function(){return null===this._selection&&(this._selection=this.structure().createEmptyView()),this._selection}}),a}(),R=function(){var t,n=e.vec3;function r(e,t,n){this._gl=e,this._vertBuffer=e.createBuffer(),this._float32Allocator=n||null,this._ready=!1,this._boundingSphere=null,this._vertData=n.request(this._FLOATS_PER_VERT*t)}return r.prototype={setColor:function(e,t,n,r,i){var a=e*this._FLOATS_PER_VERT+this._COLOR_OFFSET;this._vertData[a+0]=t,this._vertData[a+1]=n,this._vertData[a+2]=r,this._vertData[a+3]=i,this._ready=!1},getColor:function(e,t){var n=e*this._FLOATS_PER_VERT+this._COLOR_OFFSET;return t[0]=this._vertData[n+0],t[1]=this._vertData[n+1],t[2]=this._vertData[n+2],t[3]=this._vertData[n+3],t},setOpacity:function(e,t){this._vertData[e*this._FLOATS_PER_VERT+this._COLOR_OFFSET+3]=t,this._ready=!1},setSelected:function(e,t){this._vertData[e*this._FLOATS_PER_VERT+this._SELECT_OFFSET]=t,this._ready=!1},boundingSphere:function(){return this._boundingSphere||(this._boundingSphere=this._calculateBoundingSphere()),this._boundingSphere},_calculateBoundingSphere:function(){var e=this.numVerts();if(0===e)return null;var t,r,i=n.create();for(r=0;r<e;++r)i[0]+=this._vertData[0+(t=r*this._FLOATS_PER_VERT)],i[1]+=this._vertData[t+1],i[2]+=this._vertData[t+2];n.scale(i,i,1/e);var a=0;for(r=0;r<e;++r){var o=i[0]-this._vertData[0+(t=r*this._FLOATS_PER_VERT)],s=i[1]-this._vertData[t+1],u=i[2]-this._vertData[t+2];a=Math.max(a,o*o+s*s+u*u)}return new f.Sphere(i,Math.sqrt(a))},destroy:function(){this._gl.deleteBuffer(this._vertBuffer),this._float32Allocator.release(this._vertData)},bindBuffers:function(){this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._vertBuffer),this._ready||(this._gl.bufferData(this._gl.ARRAY_BUFFER,this._vertData,this._gl.STATIC_DRAW),this._ready=!0)},updateSquaredSphereRadius:(t=n.create(),function(e,r,i){var a=this.boundingSphere();if(!a)return r;if(i)return n.transformMat4(t,a.center(),i),Math.max(n.sqrDist(t,e),r);var o=a.radius()*a.radius();return Math.max(n.sqrDist(a.center(),e)+o,r)}),updateProjectionIntervals:function(){var e=n.create();return function(t,r,i,a,o,s,u){var c=this.boundingSphere();if(c){u?n.transformMat4(e,c.center(),u):n.copy(e,c.center());var l=n.dot(t,e),f=n.dot(r,e),p=n.dot(i,e);a.update(l-c.radius()),a.update(l+c.radius()),o.update(f-c.radius()),o.update(f+c.radius()),s.update(p-c.radius()),s.update(p+c.radius())}}}()},r}(),d=function(){function e(e,t,n){R.call(this,e,t,n),this._numVerts=0,this._primitiveType=this._gl.LINES}return r.derive(e,R,{_FLOATS_PER_VERT:9,_POS_OFFSET:0,_COLOR_OFFSET:3,_ID_OFFSET:7,_SELECT_OFFSET:8,numVerts:function(){return this._numVerts},setDrawAsPoints:function(e){this._primitiveType=e?this._gl.POINTS:this._gl.LINES},addPoint:function(e,t,n){var r=this._FLOATS_PER_VERT*this._numVerts;this._vertData[r++]=e[0],this._vertData[r++]=e[1],this._vertData[r++]=e[2],this._vertData[r++]=t[0],this._vertData[r++]=t[1],this._vertData[r++]=t[2],this._vertData[r++]=t[3],this._vertData[r++]=n,this._vertData[r++]=0,this._numVerts+=1,this._ready=!1,this._boundingSphere=null},addLine:function(e,t,n,r,i,a){this.addPoint(e,t,i),this.addPoint(n,r,a)},bindAttribs:function(e){this._gl.vertexAttribPointer(e.posAttrib,3,this._gl.FLOAT,!1,4*this._FLOATS_PER_VERT,4*this._POS_OFFSET),-1!==e.colorAttrib&&(this._gl.vertexAttribPointer(e.colorAttrib,4,this._gl.FLOAT,!1,4*this._FLOATS_PER_VERT,4*this._COLOR_OFFSET),this._gl.enableVertexAttribArray(e.colorAttrib)),this._gl.enableVertexAttribArray(e.posAttrib),-1!==e.objIdAttrib&&(this._gl.vertexAttribPointer(e.objIdAttrib,1,this._gl.FLOAT,!1,4*this._FLOATS_PER_VERT,4*this._ID_OFFSET),this._gl.enableVertexAttribArray(e.objIdAttrib)),-1!==e.selectAttrib&&(this._gl.vertexAttribPointer(e.selectAttrib,1,this._gl.FLOAT,!1,4*this._FLOATS_PER_VERT,4*this._SELECT_OFFSET),this._gl.enableVertexAttribArray(e.selectAttrib))},releaseAttribs:function(e){this._gl.disableVertexAttribArray(e.posAttrib),-1!==e.colorAttrib&&this._gl.disableVertexAttribArray(e.colorAttrib),-1!==e.objIdAttrib&&this._gl.disableVertexAttribArray(e.objIdAttrib),-1!==e.selectAttrib&&this._gl.disableVertexAttribArray(e.selectAttrib)},bind:function(e){this.bindBuffers(),this.bindAttribs(e)},draw:function(){this._gl.drawArrays(this._primitiveType,0,this._numVerts)}}),e}(),h=I=function(){function e(e,t,n,r,i){R.call(this,e,t,r),this._indexBuffer=e.createBuffer(),this._uint16Allocator=i,this._numVerts=0,this._maxVerts=t,this._numTriangles=0,this._indexData=i.request(n)}return r.derive(e,R,{destroy:function(){R.prototype.destroy.call(this),this._gl.deleteBuffer(this._indexBuffer),this._uint16Allocator.release(this._indexData)},setIndexData:function(e){this._ready=!1,this._numTriangles=e.length/3;for(var t=0;t<e.length;++t)this._indexData[t]=e[t]},setVertData:function(e){this._ready=!1,this._numVerts=e.length/this._FLOATS_PER_VERT;for(var t=0;t<e.length;++t)this._vertData[t]=e[t]},numVerts:function(){return this._numVerts},maxVerts:function(){return this._maxVerts},numIndices:function(){return 3*this._numTriangles},addVertex:function(e,t,n,r){if(this._numVerts!==this._maxVerts){var i=this._numVerts*this._FLOATS_PER_VERT;this._vertData[i++]=e[0],this._vertData[i++]=e[1],this._vertData[i++]=e[2],this._vertData[i++]=t[0],this._vertData[i++]=t[1],this._vertData[i++]=t[2],this._vertData[i++]=n[0],this._vertData[i++]=n[1],this._vertData[i++]=n[2],this._vertData[i++]=n[3],this._vertData[i++]=r,this._vertData[i++]=0,this._numVerts+=1,this._ready=!1}else console.error("maximum number of vertices reached")},_FLOATS_PER_VERT:12,_BYTES_PER_VERT:48,_OBJID_OFFSET:10,_OBJID_BYTE_OFFSET:40,_SELECT_OFFSET:11,_SELECT_BYTE_OFFSET:44,_COLOR_OFFSET:6,_COLOR_BYTE_OFFSET:24,_NORMAL_OFFSET:3,_NORMAL_BYTE_OFFSET:12,_POS_OFFSET:0,_POS_BYTE_OFFSET:0,addTriangle:function(e,t,n){var r=3*this._numTriangles;r+2>=this._indexData.length||(this._indexData[r++]=e,this._indexData[r++]=t,this._indexData[r++]=n,this._numTriangles+=1,this._ready=!1)},bindBuffers:function(){var e=this._ready,t=this._gl;R.prototype.bindBuffers.call(this),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e||t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indexData,t.STATIC_DRAW)},bindAttribs:function(e){var t=this._gl,n=this._BYTES_PER_VERT;t.enableVertexAttribArray(e.posAttrib),t.vertexAttribPointer(e.posAttrib,3,t.FLOAT,!1,n,this._POS_BYTE_OFFSET),-1!==e.normalAttrib&&(t.enableVertexAttribArray(e.normalAttrib),t.vertexAttribPointer(e.normalAttrib,3,t.FLOAT,!1,n,this._NORMAL_BYTE_OFFSET)),-1!==e.colorAttrib&&(t.vertexAttribPointer(e.colorAttrib,4,t.FLOAT,!1,n,this._COLOR_BYTE_OFFSET),t.enableVertexAttribArray(e.colorAttrib)),-1!==e.objIdAttrib&&(t.vertexAttribPointer(e.objIdAttrib,1,t.FLOAT,!1,n,this._OBJID_BYTE_OFFSET),t.enableVertexAttribArray(e.objIdAttrib)),-1!==e.selectAttrib&&(t.vertexAttribPointer(e.selectAttrib,1,t.FLOAT,!1,n,this._SELECT_BYTE_OFFSET),t.enableVertexAttribArray(e.selectAttrib))},releaseAttribs:function(e){var t=this._gl;t.disableVertexAttribArray(e.posAttrib),-1!==e.colorAttrib&&t.disableVertexAttribArray(e.colorAttrib),-1!==e.normalAttrib&&t.disableVertexAttribArray(e.normalAttrib),-1!==e.objIdAttrib&&t.disableVertexAttribArray(e.objIdAttrib),-1!==e.selectAttrib&&t.disableVertexAttribArray(e.selectAttrib)},bind:function(e){this.bindBuffers(),this.bindAttribs(e)},draw:function(){var e=this._gl;e.drawElements(e.TRIANGLES,3*this._numTriangles,e.UNSIGNED_SHORT,0)}}),e}(),g=function(n,r,i,a){var o,s,u,c=e.vec3,l=e.vec4,p=e.mat3,d=n.TubeProfile,h=n.ProtoSphere,m=n.ProtoCylinder,g=a.TraceVertexAssoc,v=a.AtomVertexAssoc,y=t.interpolateColor,x={},b=.7071,w=[-b,-b,0,b,-b,0,b,b,0,-b,b,0],N=[-6*b,-.9*b,0,-5.8*b,-1*b,0,5.8*b,-1*b,0,6*b,-.9*b,0,6*b,.9*b,0,5.8*b,1*b,0,-5.8*b,1*b,0,-6*b,.9*b,0],S=[-7.071,-.9*b,0,-9.8*b,-1*b,0,9.8*b,-1*b,0,7.071,-.9*b,0,7.071,.9*b,0,9.8*b,1*b,0,-9.8*b,1*b,0,-7.071,.9*b,0],_=(o=c.create(),s=c.create(),u=c.create(),function(e,t,n,r){t=Math.max(t,1),n=Math.min(r-1,n);var i=3*(t-1);c.set(o,e[i],e[i+1],e[i+2]),c.set(u,e[3*t],e[3*t+1],e[3*t+2]);for(var a=t;a<n;++a)c.set(s,e[i=3*(a+1)],e[i+1],e[i+2]),e[3*a+0]=.25*s[0]+.5*u[0]+.25*o[0],e[3*a+1]=.25*s[1]+.5*u[1]+.25*o[1],e[3*a+2]=.25*s[2]+.5*u[2]+.25*o[2],c.copy(o,u),c.copy(u,s)}),D=function(){var e=l.fromValues(0,0,0,1);return function(t,n,r,i){var a=i.atomCount(),o=r.idPool.getContinuousRange(a);t.addIdRange(o);var s=r.protoSphere.numVerts(),u=r.protoSphere.numIndices(),c=1.5*r.radiusMultiplier;t.addChainVertArray(i,s*a,u*a),i.eachAtom((function(i){var a=t.vertArrayWithSpaceFor(s);r.color.colorFor(i,e,0);var u=a.numVerts(),l=o.nextId({geom:t,atom:i});r.protoSphere.addTransformed(a,i.pos(),c,e,l);var f=a.numVerts();n.addAssoc(i,a,u,f)}))}}();x.spheres=function(e,t,n){console.time("spheres");var i=new h(n.sphereDetail,n.sphereDetail);n.protoSphere=i;var a=new r(t,n.float32Allocator,n.uint16Allocator),o=new v(e,!0);return a.addVertAssoc(o),a.setShowRelated(n.showRelated),n.color.begin(e),e.eachChain((function(e){D(a,o,n,e)})),n.color.end(e),console.timeEnd("spheres"),a};var A=function(){var e=c.create(),t=c.create(),n=l.fromValues(0,0,0,1),r=c.create(),i=c.create(),a=p.create();return function(o,s,u,l){var p=l.atomCount(),d=0;l.eachAtom((function(e){d+=e.bonds().length}));var h=p*u.protoSphere.numVerts()+d*u.protoCyl.numVerts(),m=p*u.protoSphere.numIndices()+d*u.protoCyl.numIndices();o.addChainVertArray(l,h,m);var g=u.idPool.getContinuousRange(p);o.addIdRange(g),l.eachAtom((function(l){var p=u.protoSphere.numVerts()+l.bondCount()*u.protoCyl.numVerts(),d=o.vertArrayWithSpaceFor(p),h=d.numVerts(),m=g.nextId({geom:o,atom:l});u.color.colorFor(l,n,0),u.protoSphere.addTransformed(d,l.pos(),u.radius,n,m),l.eachBond((function(o){o.mid_point(e),c.sub(t,l.pos(),e);var s=c.length(t);c.scale(t,t,1/s),f.buildRotation(a,t,r,i,!1),c.add(e,e,l.pos()),c.scale(e,e,.5),u.protoCyl.addTransformed(d,e,s,u.radius,a,n,n,m,m)}));var v=d.numVerts();s.addAssoc(l,d,h,v)}))}}();x.ballsAndSticks=function(e,t,n){console.time("ballsAndSticks");var i=new v(e,!0),a=new h(n.sphereDetail,n.sphereDetail),o=new m(n.arcDetail);n.protoSphere=a,n.protoCyl=o;var s=new r(t,n.float32Allocator,n.uint16Allocator);return s.addVertAssoc(i),s.setShowRelated(n.showRelated),n.color.begin(e),e.eachChain((function(e){A(s,i,n,e)})),n.color.end(e),console.timeEnd("ballsAndSticks"),s};var M,E=(M=l.fromValues(0,0,0,1),function(e,t,n,r){var i=n.atomCount(),a=r.idPool.getContinuousRange(i);e.addIdRange(a);var o=e.addChainVertArray(n,i);o.setDrawAsPoints(!0),n.eachAtom((function(n){var i=o.numVerts();r.color.colorFor(n,M,0);var s=a.nextId({geom:e,atom:n});o.addPoint(n.pos(),M,s);var u=o.numVerts();t.addAssoc(n,o,i,u)}))});x.points=function(e,t,n){console.time("points");var r=new v(e,!0);n.color.begin(e);var a=new i(t,n.float32Allocator);return a.setPointSize(n.pointSize),a.addVertAssoc(r),a.setShowRelated(n.showRelated),e.eachChain((function(e){E(a,r,e,n)})),n.color.end(e),console.timeEnd("points"),a};var C=function(){var e=c.create(),t=l.fromValues(0,0,0,1);return function(n,r,i,a){var o=0,s=i.atomCount(),u=a.idPool.getContinuousRange(s);n.addIdRange(u),i.eachAtom((function(e){var t=e.bonds().length;o+=t||3}));var c=n.addChainVertArray(i,2*o);i.eachAtom((function(i){var o=c.numVerts(),s=u.nextId({geom:n,atom:i});if(i.bonds().length)i.eachBond((function(n){n.mid_point(e),a.color.colorFor(i,t,0),c.addLine(i.pos(),t,e,t,s,s)}));else{var l=i.pos();a.color.colorFor(i,t,0),c.addLine([l[0]-.2,l[1],l[2]],t,[l[0]+.2,l[1],l[2]],t,s,s),c.addLine([l[0],l[1]-.2,l[2]],t,[l[0],l[1]+.2,l[2]],t,s,s),c.addLine([l[0],l[1],l[2]-.2],t,[l[0],l[1],l[2]+.2],t,s,s)}var f=c.numVerts();r.addAssoc(i,c,o,f)}))}}();x.lines=function(e,t,n){console.time("lines");var r=new v(e,!0);n.color.begin(e);var a=new i(t,n.float32Allocator);return a.setLineWidth(n.lineWidth),a.addVertAssoc(r),a.setShowRelated(n.showRelated),e.eachChain((function(e){C(a,r,e,n)})),n.color.end(e),console.timeEnd("lines"),a};var T,R,I,O,P=(T=l.fromValues(0,0,0,1),R=l.fromValues(0,0,0,1),I=c.create(),O=c.create(),function(e,t,n,r,i,a){t.addAssoc(r,n,0,n.numVerts(),n.numVerts()+1);var o=a.float32Allocator.request(4*i.length()),s=a.idPool.getContinuousRange(i.length());e.addIdRange(s);for(var u,c=s.nextId({geom:e,atom:i.centralAtomAt(0)}),l=1;l<i.length();++l){a.color.colorFor(i.centralAtomAt(l-1),T,0),o[4*(l-1)+0]=T[0],o[4*(l-1)+1]=T[1],o[4*(l-1)+2]=T[2],o[4*(l-1)+3]=T[3],a.color.colorFor(i.centralAtomAt(l),R,0),i.posAt(I,l-1),i.posAt(O,l),u=s.nextId({geom:e,atom:i.centralAtomAt(l)}),n.addLine(I,T,O,R,c,u),c=u,u=null;var f=n.numVerts();t.addAssoc(r,n,l,f-1,f+(l===i.length()-1?0:1))}return o[4*i.length()-4]=R[0],o[4*i.length()-3]=R[1],o[4*i.length()-2]=R[2],o[4*i.length()-1]=R[3],t.setPerResidueColors(r,o),r+1});x.lineTrace=function(e,t,n){console.time("lineTrace");var r=new g(e,1,!0);n.color.begin(e);var a=new i(t,n.float32Allocator);a.setLineWidth(n.lineWidth);var o=0;return e.eachChain((function(e){o=function(e,t,n,r,i){for(var a=i.backboneTraces(),o=function(e){for(var t=0,n=0;n<e.length;++n)t+=2*(e[n].length()-1);return t}(a),s=e.addChainVertArray(i,o),u=0;u<a.length;++u)r=P(e,t,s,r,a[u],n);return r}(a,r,n,o,e)})),a.addVertAssoc(r),a.setShowRelated(n.showRelated),n.color.end(e),console.timeEnd("lineTrace"),a};var F=function(){var e=c.create(),t=c.create(),n=l.fromValues(0,0,0,1),r=l.fromValues(0,0,0,1);return function(i,a,o,s,u,c){var l,p=c.fullTraceIndex(0),d=s.float32Allocator.request(3*c.length()),h=s.float32Allocator.request(4*c.length()),m=[],g=s.idPool.getContinuousRange(c.length());for(i.addIdRange(g),l=0;l<c.length();++l){var v=c.centralAtomAt(l);c.smoothPosAt(e,l,s.strength),s.color.colorFor(v,h,4*l),d[3*l]=e[0],d[3*l+1]=e[1],d[3*l+2]=e[2],m.push(g.nextId({geom:i,atom:v}))}var x=m[0],b=0,w=f.catmullRomSpline(d,c.length(),s.splineDetail,s.strength,!1,s.float32Allocator),N=y(h,s.splineDetail),S=o.numVerts();a.addAssoc(u,o,p,S,S+1);var _=Math.floor(s.splineDetail/2),D=f.catmullRomSplineNumPoints(c.length(),s.splineDetail,!1);for(l=1;l<D;++l){e[0]=w[3*(l-1)],e[1]=w[3*(l-1)+1],e[2]=w[3*(l-1)+2],t[0]=w[3*(l-0)],t[1]=w[3*(l-0)+1],t[2]=w[3*(l-0)+2],n[0]=N[4*(l-1)+0],n[1]=N[4*(l-1)+1],n[2]=N[4*(l-1)+2],n[3]=N[4*(l-1)+3],r[0]=N[4*(l-0)+0],r[1]=N[4*(l-0)+1],r[2]=N[4*(l-0)+2],r[3]=N[4*(l-0)+3];var A=Math.floor((l+_)/s.splineDetail);b=m[Math.min(m.length-1,A)],o.addLine(e,n,t,r,x,b),x=b;var M=o.numVerts();a.addAssoc(u,o,p+l,M-1,M+(l===c.length-1?0:1))}return a.setPerResidueColors(u,h),s.float32Allocator.release(d),s.float32Allocator.release(w),u+1}}();x.sline=function(e,t,n){console.time("sline"),n.color.begin(e);var r=new g(e,n.splineDetail,1,!0),a=new i(t,n.float32Allocator);a.addVertAssoc(r),a.setLineWidth(n.lineWidth),a.setShowRelated(n.showRelated);var o=0;return e.eachChain((function(e){o=function(e,t,n,r,i){for(var a=r.backboneTraces(),o=function(e,t){for(var n=0,r=0;r<e.length;++r)n+=2*(t*(e[r].length()-1)+1);return n}(a,n.splineDetail),s=e.addChainVertArray(r,o),u=0;u<a.length;++u)i=F(e,t,s,n,i,a[u]);return i}(a,r,n,e,o)})),n.color.end(e),console.timeEnd("sline"),a};var L=function(e,t,n){for(var r=0,i=0;i<e.length;++i)r+=e[i].length()*t,r+=(e[i].length()-1)*n;return r};x.trace=function(e,t,n){console.time("trace"),n.protoCyl=new m(n.arcDetail),n.protoSphere=new h(n.sphereDetail,n.sphereDetail);var i=new r(t,n.float32Allocator,n.uint16Allocator),a=new g(e,1,!0);i.addVertAssoc(a),i.setShowRelated(n.showRelated),n.color.begin(e);var o=0;return e.eachChain((function(e){o=function(e,t,n,r,i){var a=i.backboneTraces(),o=L(a,n.protoSphere.numVerts(),n.protoCyl.numVerts()),s=function(e,t,n){for(var r=0,i=0;i<e.length;++i)r+=e[i].length()*t,r+=(e[i].length()-1)*n;return r}(a,n.protoSphere.numIndices(),n.protoCyl.numIndices());e.addChainVertArray(i,o,s);for(var u=0;u<a.length;++u)K(e,t,a[u],r,n),r++;return r}(i,a,n,o,e)})),n.color.end(e),console.timeEnd("trace"),i};var k=function(e,t,n){for(var r=0,i=0;i<e.length;++i){var a=((e[i].length()-1)*n+1)*t;r+=a+(Math.ceil((a+2)/65536)-1)*t,r+=2}return r},B=function(){var e=p.create(),t=c.create(),n=c.create(),r=c.create(),i=c.create(),a=l.create();return function(o,s,u,l){for(var p=1.8*l.radius,d=l.protoCyl.numVerts()+2*l.protoSphere.numVerts(),h=0;h<u.length;++h){var m=u[h],g=l.idPool.getContinuousRange(m.length());o.addIdRange(g);for(var v=0;v<m.length();++v){var y=o.vertArrayWithSpaceFor(d),x=y.numVerts(),b=m.residueAt(v),w=b.name(),N=b.atom("C3'"),S=null;if(null!==(S=b.atom("A"===w||"G"===w||"DA"===w||"DG"===w?"N1":"N3"))&&null!==N){var _=g.nextId({geom:o,atom:S});c.add(i,N.pos(),S.pos()),c.scale(i,i,.5),l.color.colorFor(S,a,0),c.sub(r,S.pos(),N.pos());var D=c.length(r);c.scale(r,r,1/D),f.buildRotation(e,r,n,t,!1),l.protoCyl.addTransformed(y,i,D,p,e,a,a,_,_),l.protoSphere.addTransformed(y,S.pos(),p,a,_),l.protoSphere.addTransformed(y,N.pos(),p,a,_);var A=y.numVerts();console.assert(A<=65536,"too many vertices"),s.addAssoc(S,y,x,A)}}}}}();x.cartoon=function(e,t,n){console.time("cartoon"),n.arrowSkip=Math.floor(3*n.splineDetail/4),n.coilProfile=new d(w,n.arcDetail,1),n.arrowProfile=new d(S,n.arcDetail/2,.1),n.helixProfile=new d(N,n.arcDetail/2,.1),n.strandProfile=new d(N,n.arcDetail/2,.1),n.protoCyl=new m(4*n.arcDetail),n.protoSphere=new h(4*n.arcDetail,4*n.arcDetail);var i=new r(t,n.float32Allocator,n.uint16Allocator),a=new g(e,n.splineDetail,!0);i.addVertAssoc(a),i.setShowRelated(n.showRelated),n.color.begin(e);var o=0,s=e.select({anames:["N1","N3"]}),u=new v(s,!0);return i.addVertAssoc(u),e.eachChain((function(e){o=function(e,t,n,r,i,a){for(var o=a.backboneTraces(),s=k(o,4*r.arcDetail,r.splineDetail),u=function(e,t,n){for(var r=0,i=0;i<e.length;++i)r+=(e[i].length()*n-1)*t*6,r+=6*t;return r}(o,4*r.arcDetail,r.splineDetail),c=[],l=r.protoCyl.numVerts()+2*r.protoSphere.numVerts(),f=r.protoCyl.numIndices()+2*r.protoSphere.numIndices(),p=0;p<o.length;++p){var d=o[p];d.residueAt(0).isNucleotide()&&(c.push(d),s+=d.length()*l,u+=d.length()*f)}e.addChainVertArray(a,s,u);for(var h=0;h<o.length;++h)i=H(e,t,o[h],i,r);return B(e,n,c,r),i}(i,a,u,n,o,e)})),n.color.end(e),console.timeEnd("cartoon"),i},x.surface=function(){var e=c.create(),t=c.create(),n=l.fromValues(.8,.8,.8,1);return function(i,a,o){var s=0;i.getUint32(0);var u=i.getUint32(s+=4),l=24*u+(s+=4),f=i.getUint32(l),p=new r(a,o.float32Allocator,o.uint16Allocator);p.setShowRelated("asym");var d,h=p.addVertArray(u,3*f);for(d=0;d<u;++d)c.set(e,i.getFloat32(s+0),i.getFloat32(s+4),i.getFloat32(s+8)),c.set(t,i.getFloat32((s+=12)+0),i.getFloat32(s+4),i.getFloat32(s+8)),s+=12,h.addVertex(e,t,n,0);for(s=l+4,d=0;d<f;++d){var m=i.getUint32(s+0),g=i.getUint32(s+4),v=i.getUint32(s+8);s+=12,h.addTriangle(m-1,v-1,g-1)}return p}}();var V,q,z,G,U,j=(V=p.create(),q=c.create(),function(e,t,n,r,i,a,o,s,u,l,p){var d=u.coilProfile;"C"===r||u.forceTube?s?f.ortho(n,i):c.cross(n,q,i):"H"===r?d=u.helixProfile:"E"===r?d=u.strandProfile:"A"===r&&(d=u.arrowProfile),f.buildRotation(V,i,n,q,!0),d.addTransformed(e,t,o,V,a,s,l,p)}),Y=(z=c.create(),G=c.create(),U=c.create(),function(e,t,n,r,i,a,o,s){var u=null,l=null,f=t.length();c.set(U,0,0,0);for(var p=0;p<f;++p){a.push(o.nextId({geom:e,atom:t.centralAtomAt(p)})),t.smoothPosAt(z,p,s.strength),r[3*p]=z[0],r[3*p+1]=z[1],r[3*p+2]=z[2],t.smoothNormalAt(G,p,s.strength);var d=t.centralAtomAt(p);s.color.colorFor(d,n,4*p),c.dot(G,U)<0&&c.scale(G,G,-1),"E"!==t.residueAt(p).ss()||s.forceTube||(null===u&&(u=p),l=p),"C"===t.residueAt(p).ss()&&null!==u&&(_(r,u,l,f),_(i,u,l,f),u=null,l=null),i[3*p]=r[3*p]+G[0]+U[0],i[3*p+1]=r[3*p+1]+G[1]+U[1],i[3*p+2]=r[3*p+2]+G[2]+U[2],c.copy(U,G)}}),H=function(){var e=c.create(),t=c.create(),n=l.fromValues(0,0,0,1),r=c.create(),i=c.create();return function(a,o,s,u,p){var d=k([s],4*p.arcDetail,p.splineDetail),h=p.float32Allocator.request(3*s.length()),m=p.float32Allocator.request(4*s.length()),g=p.float32Allocator.request(3*s.length()),v=[],x=p.idPool.getContinuousRange(s.length());a.addIdRange(x),Y(a,s,m,h,g,v,x,p);var b=a.vertArrayWithSpaceFor(d),w=f.catmullRomSpline(h,s.length(),p.splineDetail,p.strength,!1,p.float32Allocator),N=f.catmullRomSpline(g,s.length(),p.splineDetail,p.strength,!1,p.float32Allocator);o.setPerResidueColors(u,m);var S=p.radius*(s.residueAt(0).isAminoacid()?1:1.8),_=y(m,p.splineDetail);c.set(e,w[3]-w[0],w[4]-w[1],w[5]-w[2]),c.set(t,w[0],w[1],w[2]),c.set(r,N[0]-w[0],N[1]-w[0],N[2]-w[2]),c.normalize(e,e),c.normalize(r,r),l.set(n,_[0],_[1],_[2],_[3]);var D=b.numVerts();b.addVertex(t,[-e[0],-e[1],-e[2]],n,v[0]),j(b,t,r,s.residueAt(0).ss(),e,n,S,!0,p,0,v[0]),function(e,t,n){for(var r=0;r<n-1;++r)e.addTriangle(t,t+1+r,t+2+r);e.addTriangle(t,t+n,t+1)}(b,D,4*p.arcDetail);var A=b.numVerts(),M=0;o.addAssoc(u,b,M,D,A),M+=1;for(var E=Math.floor(p.splineDetail/2),C=f.catmullRomSplineNumPoints(s.length(),p.splineDetail,!1),T=4*p.arcDetail,R=1,I=C;R<I;++R){var O=3*R,P=4*R,F=3*(R+1),L=3*(R-1);c.set(t,w[O],w[O+1],w[O+2]),R===I-1?c.set(e,w[O]-w[L],w[O+1]-w[L+1],w[O+2]-w[L+2]):c.set(e,w[F]-w[L],w[F+1]-w[L+1],w[F+2]-w[L+2]),c.normalize(e,e),l.set(n,_[P],_[P+1],_[P+2],_[P+3]);var B=0,V=Math.floor(R/p.splineDetail),q=Math.floor((R-1)/p.splineDetail),z=Math.floor((R+p.arrowSkip)/p.splineDetail),G=!1,U=s.residueAt(V).ss();if(!p.forceTube){if(V!==q&&"C"===s.residueAt(q).ss()&&("H"===U||"E"===U)){c.set(i,N[L]-w[L],N[L+1]-w[L+1],N[L+2]-w[L+2]),c.normalize(i,i);var H=2*Math.PI/(4*p.arcDetail),K=f.signedAngle(r,i,e);B=((B=Math.round(K/H))+4*p.arcDetail)%(4*p.arcDetail)}z!==V&&z<s.length()&&"C"===s.residueAt(z).ss()&&"E"===U&&(G=!0)}c.set(r,N[3*R]-w[O],N[O+1]-w[O+1],N[O+2]-w[O+2]),c.normalize(r,r),D=b.numVerts();var Q=Math.floor((R+E)/p.splineDetail),W=v[Math.min(v.length-1,Q)];j(b,t,r,U,e,n,S,!1,p,B,W);var $=R===I-1?1:T;b.numVerts()+$>b.maxVerts()&&(A=b.numVerts(),o.addAssoc(u,b,M,D,A),b=a.vertArrayWithSpaceFor($),D=0,j(b,t,r,U,e,n,S,!0,p,0,W)),G&&(o.addAssoc(u,b,M,D,A),j(b,t,r,"A",e,n,S,!1,p,0,W),R+=p.arrowSkip),A=b.numVerts(),R===I-1&&(A+=1),o.addAssoc(u,b,M,D,A),M+=1,G&&(M+=p.arrowSkip)}return b.addVertex(t,e,n,v[v.length-1]),function(e,t,n){for(var r=t+n,i=0;i<n-1;++i)e.addTriangle(r,t+i+1,t+i);e.addTriangle(r,t,t+n-1)}(b,D,4*p.arcDetail),p.float32Allocator.release(g),p.float32Allocator.release(h),u+1}}(),K=function(){var e=p.create(),t=c.create(),n=c.create(),r=c.create(),i=c.create(),a=c.create(),o=c.create(),s=l.fromValues(0,0,0,1),u=l.fromValues(0,0,0,1);return function(l,p,d,h,m){if(0!==d.length()){var g=m.idPool.getContinuousRange(d.length());l.addIdRange(g),m.color.colorFor(d.centralAtomAt(0),s,0);var v=L([d],m.protoSphere.numVerts(),m.protoCyl.numVerts()),y=v,x=l.vertArrayWithSpaceFor(v),b=x.maxVerts(),w=x.numVerts();d.posAt(a,0);var N=g.nextId({geom:l,atom:d.centralAtomAt(0)}),S=0;m.protoSphere.addTransformed(x,a,m.radius,s,N);var _=null;p.addAssoc(h,x,0,w,_);var D=m.float32Allocator.request(4*d.length());D[0]=s[0],D[1]=s[1],D[2]=s[2],D[3]=s[3];for(var A=m.protoCyl.numVerts()+m.protoSphere.numVerts(),M=1;M<d.length();++M){S=g.nextId({geom:l,atom:d.centralAtomAt(M)}),d.posAt(a,M-1),d.posAt(o,M),m.color.colorFor(d.centralAtomAt(M),u,0),D[4*M+0]=u[0],D[4*M+1]=u[1],D[4*M+2]=u[2],D[4*M+3]=u[3],c.sub(t,o,a);var E=c.length(t);c.scale(t,t,1/E),f.buildRotation(e,t,n,r,!1),c.copy(i,a),c.add(i,i,o),c.scale(i,i,.5),A>b-x.numVerts()&&(x=l.vertArrayWithSpaceFor(y)),y-=A;var C=x.numVerts();m.protoCyl.addTransformed(x,i,E,m.radius,e,s,u,N,S),_=x.numVerts(),_-=(_-C)/2,m.protoSphere.addTransformed(x,o,m.radius,u,S),N=S,p.addAssoc(h,x,M,w,_),w=_,c.copy(s,u)}p.setPerResidueColors(h,D),p.addAssoc(h,x,d.length()-1,w,x.numVerts())}}}();return x}(p,function(e,t){var n=e.MeshChainData;function i(e,t,n){O.call(this,e),this._indexedVAs=[],this._float32Allocator=t,this._uint16Allocator=n,this._remainingVerts=null,this._remainingIndices=null}return r.derive(i,O,{_boundedVertArraySize:function(e){return Math.min(65536,e)},addChainVertArray:function(e,t,r){this._remainingVerts=t,this._remainingIndices=r;var i=new n(e.name(),this._gl,this._boundedVertArraySize(t),r,this._float32Allocator,this._uint16Allocator);return this._indexedVAs.push(i),i},addVertArray:function(e,n){this._remainingVerts=e,this._remainingIndices=n;var r=new t(this._gl,this._boundedVertArraySize(e),n,this._float32Allocator,this._uint16Allocator);return this._indexedVAs.push(r),r},vertArrayWithSpaceFor:function(e){var r,i=this._indexedVAs[this._indexedVAs.length-1];return i.maxVerts()-i.numVerts()>=e?i:(this._remainingVerts-=i.numVerts(),this._remainingIndices-=i.numIndices(),e=this._boundedVertArraySize(this._remainingVerts),r=i instanceof n?new n(i.chain(),this._gl,e,this._remainingIndices,this._float32Allocator,this._uint16Allocator):new t(this._gl,e,this._remainingIndices,this._float32Allocator,this._uint16Allocator),this._indexedVAs.push(r),r)},vertArray:function(e){return this._indexedVAs[e]},destroy:function(){O.prototype.destroy.call(this);for(var e=0;e<this._indexedVAs.length;++e)this._indexedVAs[e].destroy();this._indexedVAs=[]},numVerts:function(){return this._indexedVAs[0].numVerts()},shaderForStyleAndPass:function(e,t,n){if("normal"===n)return"hemilight"===t?e.hemilight:e.phong;if("select"===n)return e.select;if("outline"===n)return e.outline;var r=e[n];return void 0!==r?r:null},_drawVertArrays:function(e,t,n,r){var i;if(r)for(i=0;i<n.length;++i)n[i].drawSymmetryRelated(e,t,r);else for(e.bind(t),this._gl.uniform1i(t.symId,255),i=0;i<n.length;++i)n[i].bind(t),n[i].draw(),n[i].releaseAttribs(t)},vertArrays:function(){return this._indexedVAs},addVertex:function(e,t,n,r){this._indexedVAs[0].addVertex(e,t,n,r)},addTriangle:function(e,t,n){this._indexedVAs[0].addTriangle(e,t,n)}}),i}(m=function(e){function t(t,n,r,i){e.call(this,n,r,i),this._chain=t}function n(e,t,n,r,i,a){I.call(this,t,n,r,i,a),this._chain=e}return r.derive(t,e,{chain:function(){return this._chain},drawSymmetryRelated:function(e,t,n){this.bind(t);for(var r=0;r<n.length;++r)e.bind(t,n[r]),this._gl.uniform1i(t.symId,r),this.draw();this.releaseAttribs(t)}}),r.derive(n,I,{chain:function(){return this._chain}}),n.prototype.drawSymmetryRelated=t.prototype.drawSymmetryRelated,{LineChainData:t,MeshChainData:n}}(d),h),function(e){var t=e.LineChainData;function n(e,t){O.call(this,e),this._vertArrays=[],this._float32Allocator=t,this._lineWidth=.5,this._pointSize=1}return r.derive(n,O,{addChainVertArray:function(e,n){var r=new t(e.name(),this._gl,n,this._float32Allocator);return this._vertArrays.push(r),r},setLineWidth:function(e){this._lineWidth=e},setPointSize:function(e){this._pointSize=e},vertArrays:function(){return this._vertArrays},shaderForStyleAndPass:function(e,t,n){return"outline"===n?e.selectLines:"select"===n?e.select:e.lines},destroy:function(){O.prototype.destroy.call(this);for(var e=0;e<this._vertArrays.length;++e)this._vertArrays[e].destroy();this._vertArrays=[]},_drawVertArrays:function(e,t,n,r){var i,a=e.upsamplingFactor();if(-1!==t.selectAttrib&&(a=4*e.upsamplingFactor()),r)for(e.bind(t),this._gl.lineWidth(a*this._lineWidth),t.pointSize&&this._gl.uniform1f(t.pointSize,a*this._pointSize),i=0;i<n.length;++i)n[i].drawSymmetryRelated(e,t,r);else for(e.bind(t),this._gl.lineWidth(a*this._lineWidth),this._gl.uniform1i(t.symId,255),t.pointSize&&this._gl.uniform1f(t.pointSize,a*this._pointSize),i=0;i<n.length;++i)n[i].bind(t),n[i].draw(),n[i].releaseAttribs(t)},vertArray:function(){return this._va}}),n}(m),function(){function e(e,t){this._structure=e,this._assocs=[],this._callBeginEnd=t}function n(e,t,n){this._structure=e,this._assocs=[],this._callBeginEnd=n,this._interpolation=t||1,this._perResidueColors={}}return e.prototype={addAssoc:function(e,t,n,r){this._assocs.push({atom:e,vertexArray:t,vertStart:n,vertEnd:r})},recolor:function(e,t){var n=new Float32Array(4*t.atomCount());this._callBeginEnd&&e.begin(this._structure);var r={};t.eachAtom((function(t,i){r[t.index()]=i,e.colorFor(t,n,4*i)})),this._callBeginEnd&&e.end(this._structure);for(var i=0;i<this._assocs.length;++i){var a=this._assocs[i],o=r[a.atom.index()];if(void 0!==o)for(var s=n[4*o+0],u=n[4*o+1],c=n[4*o+2],l=n[4*o+3],f=a.vertexArray,p=a.vertStart;p<a.vertEnd;++p)f.setColor(p,s,u,c,l)}},getColorForAtom:function(e,t){for(var n=0;n<this._assocs.length;++n){var r=this._assocs[n];if(r.atom.full()===e.full())return r.vertexArray.getColor(r.vertStart,t)}return null},setSelection:function(e){var t={};e.eachAtom((function(e){t[e.index()]=!0}));for(var n=0;n<this._assocs.length;++n)for(var r=this._assocs[n],i=!0!==t[r.atom.index()]?0:1,a=r.vertexArray,o=r.vertStart;o<r.vertEnd;++o)a.setSelected(o,i)},setOpacity:function(e,t){var n={};t.eachAtom((function(e){n[e.index()]=!0}));for(var r=0;r<this._assocs.length;++r){var i=this._assocs[r];if(!0===n[i.atom.index()])for(var a=i.vertexArray,o=i.vertStart;o<i.vertEnd;++o)a.setOpacity(o,e)}}},n.prototype={setPerResidueColors:function(e,t){this._perResidueColors[e]=t},addAssoc:function(e,t,n,r,i){this._assocs.push({traceIndex:e,slice:n,vertStart:r,vertEnd:i,vertexArray:t})},recolor:function(e,n){this._callBeginEnd&&e.begin(this._structure);var r,i,a=[],o=this._structure.backboneTraces();for(console.assert(this._perResidueColors,"per-residue colors must be set for recoloring to work"),r=0;r<o.length;++r){var s=this._perResidueColors[r];console.assert(s,"no per-residue colors. Seriously, man?");var u=0,c=o[r];for(i=0;i<c.length();++i)n.containsResidue(c.residueAt(i))?(e.colorFor(c.centralAtomAt(i),s,u),u+=4):u+=4;a.push(this._interpolation>1?t.interpolateColor(s,this._interpolation):s)}for(r=0;r<this._assocs.length;++r){var l=this._assocs[r],f=l.slice,p=a[l.traceIndex],d=p[4*f],h=p[4*f+1],m=p[4*f+2],g=p[4*f+3],v=l.vertexArray;for(i=l.vertStart;i<l.vertEnd;++i)v.setColor(i,d,h,m,g)}this._callBeginEnd&&e.end(this._structure)},getColorForAtom:function(e,t){var n,r,i=this._structure.backboneTraces(),a=e.full().residue();for(n=0;n<i.length;++n){var o=this._perResidueColors[n],s=0,u=i[n];for(r=0;r<u.length();++r){if(a===u.residueAt(r).full())return t[0]=o[s+0],t[1]=o[s+1],t[2]=o[s+2],t[3]=o[s+3],t;s+=4}}return null},setSelection:function(e){var t,n,r=[],i=this._structure.backboneTraces();for(t=0;t<i.length;++t){var a=new Float32Array(this._perResidueColors[t].length),o=0,s=i[t];for(n=0;n<s.length();++n){var u=e.containsResidue(s.residueAt(n))?1:0;a[o]=u,o+=1}r.push(this._interpolation>1?f.interpolateScalars(a,this._interpolation):a)}for(t=0;t<this._assocs.length;++t){var c=this._assocs[t],l=r[c.traceIndex][c.slice],p=c.vertexArray;for(n=c.vertStart;n<c.vertEnd;++n)p.setSelected(n,l)}},setOpacity:function(e,n){var r,i,a=[],o=this._structure.backboneTraces();for(r=0;r<o.length;++r){var s=this._perResidueColors[r],u=0,c=o[r];for(i=0;i<c.length();++i)n.containsResidue(c.residueAt(i))?(s[u+3]=e,u+=4):u+=4;a.push(this._interpolation>1?t.interpolateColor(s,this._interpolation):s)}for(r=0;r<this._assocs.length;++r){var l=this._assocs[r],f=a[l.traceIndex][4*l.slice+3],p=l.vertexArray;for(i=l.vertStart;i<l.vertEnd;++i)p.setOpacity(i,f)}}},{TraceVertexAssoc:n,AtomVertexAssoc:e}}()),v=function(){function e(e,t,n,r,i,a){T.call(this,e);var o=a||{};this._options={},this._options.fillStyle=o.fillStyle||"#000",this._options.backgroundAlpha=o.backgroundAlpha||0,this._options.fontSize=o.fontSize||24,this._options.font=o.font||"Verdana",this._options.fontStyle=o.fontStyle||"normal",this._options.fontColor=o.fontColor||"#000",this._order=100,this._pos=r,this._interleavedBuffer=this._gl.createBuffer(),this._interleavedData=new Float32Array(30),this._prepareText(t,n,i),this._interleavedData[0]=r[0],this._interleavedData[1]=r[1],this._interleavedData[2]=r[2],this._interleavedData[3]=-.5,this._interleavedData[4]=-.5,this._interleavedData[5]=r[0],this._interleavedData[6]=r[1],this._interleavedData[7]=r[2],this._interleavedData[8]=.5,this._interleavedData[9]=.5,this._interleavedData[10]=r[0],this._interleavedData[11]=r[1],this._interleavedData[12]=r[2],this._interleavedData[13]=.5,this._interleavedData[14]=-.5,this._interleavedData[15]=r[0],this._interleavedData[16]=r[1],this._interleavedData[17]=r[2],this._interleavedData[18]=-.5,this._interleavedData[19]=-.5,this._interleavedData[20]=r[0],this._interleavedData[21]=r[1],this._interleavedData[22]=r[2],this._interleavedData[23]=-.5,this._interleavedData[24]=.5,this._interleavedData[25]=r[0],this._interleavedData[26]=r[1],this._interleavedData[27]=r[2],this._interleavedData[28]=.5,this._interleavedData[29]=.5}function t(e){for(var t=1;t<e;)t*=2;return t}return r.derive(e,T,{updateProjectionIntervals:function(){},updateSquaredSphereRadius:function(e,t){return t},_setupTextParameters:function(e){e.fillStyle=this._options.fontColor,e.textAlign="left",e.textBaseline="bottom",e.font=this._options.fontStyle+" "+this._options.fontSize+"px "+this._options.font},_prepareText:function(e,n,r){this._setupTextParameters(n);var i=n.measureText(r).width;e.width=t(i),e.height=t(24),n.fillStyle=this._options.fillStyle,n.globalAlpha=this._options.backgroundAlpha,n.fillRect(0,0,e.width,e.height),this._setupTextParameters(n),n.globalAlpha=1,n.lineWidth=.5,n.lineStyle="none",n.fillText(r,0,e.height),n.strokeText(r,0,e.height),this._texture=this._gl.createTexture(),this._textureFromCanvas(this._texture,e),this._xScale=i/e.width,this._yScale=24/e.height,this._width=i,this._height=24},_textureFromCanvas:function(e,t){var n=this._gl;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.bindTexture(n.TEXTURE_2D,e),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.generateMipmap(n.TEXTURE_2D),n.bindTexture(n.TEXTURE_2D,null)},bind:function(){var e=this._gl;e.bindBuffer(e.ARRAY_BUFFER,this._interleavedBuffer),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this._texture),this._ready||(e.bufferData(e.ARRAY_BUFFER,this._interleavedData,e.STATIC_DRAW),this._ready=!0)},draw:function(e,t,n,r){if(this._visible&&"normal"===r){var i=t.text;e.bind(i),this.bind();var a=this._gl,o=e.upsamplingFactor();a.uniform1f(a.getUniformLocation(i,"xScale"),this._xScale),a.uniform1f(a.getUniformLocation(i,"yScale"),this._yScale),a.uniform1f(a.getUniformLocation(i,"width"),2*o*this._width/e.viewportWidth()),a.uniform1f(a.getUniformLocation(i,"height"),2*o*this._height/e.viewportHeight()),a.uniform1i(a.getUniformLocation(i,"sampler"),0);var s=a.getAttribLocation(i,"attrCenter");a.enableVertexAttribArray(s),a.vertexAttribPointer(s,3,a.FLOAT,!1,20,0);var u=a.getAttribLocation(i,"attrCorner");a.vertexAttribPointer(u,2,a.FLOAT,!1,20,12),a.enableVertexAttribArray(u),a.enable(a.BLEND),a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),a.drawArrays(a.TRIANGLES,0,6),a.disableVertexAttribArray(s),a.disableVertexAttribArray(u),a.disable(a.BLEND)}}}),e}(),y=function(n){var i,a,o,s,u,c=e.vec3,l=e.mat3,p=t.forceRGB;function d(){this._vertData=[],this._indexData=[],this._numVerts=0}function h(e,t,r,i,a){T.call(this,t),this._float32Allocator=r,this._uint16Allocator=i,this._data=new d,this._protoSphere=new n.ProtoSphere(8,8),this._protoCyl=new n.ProtoCylinder(8),this._va=null,this._idRanges=[],this._idPool=a,this._ready=!1,this._currentRange=null}return d.prototype={numVerts:function(){return this._numVerts},addVertex:function(e,t,n,r){this._numVerts+=1,this._vertData.push(e[0],e[1],e[2],t[0],t[1],t[2],n[0],n[1],n[2],n[3],r,0)},addTriangle:function(e,t,n){this._indexData.push(e,t,n)},numIndices:function(){return this._indexData.length},indexData:function(){return this._indexData},vertData:function(){return this._vertData}},r.derive(h,T,{updateProjectionIntervals:function(){},updateSquaredSphereRadius:function(e,t){return t},addTube:(i=c.create(),a=c.create(),o=c.create(),s=c.create(),u=l.create(),function(e,t,n,r){var l=p((r=r||{}).color||"white"),d=!0;void 0!==r.cap&&(d=r.cap),c.sub(s,t,e);var h=c.length(s);if(c.normalize(s,s),c.add(i,e,t),c.scale(i,i,.5),f.buildRotation(u,s,a,o,!1),d){var m=this._data.numVerts();this._data.addVertex(e,[-s[0],-s[1],-s[2]],l,0),function(e,t,n){for(var r=0;r<7;++r)e.addTriangle(t,t+1+r,t+2+r);e.addTriangle(t,t+8,t+1)}(this._data,m)}var g=void 0!==r.userData?r.userData:null;console.log(g);var v=this._nextObjectId({center:i,userData:g,geom:this});if(this._protoCyl.addTransformed(this._data,i,h,n,u,l,l,v,v),d){var y=this._data.numVerts();this._data.addVertex(t,s,l,0),function(e,t,n){for(var r=t+8,i=0;i<7;++i)e.addTriangle(r,t+i+1,t+i);e.addTriangle(r,t,t+8-1)}(this._data,y-8)}this._ready=!1}),_nextObjectId:function(e){return this._currentRange&&this._currentRange.hasLeft()||(this._currentRange=this._idPool.getContinuousRange(100),this._idRanges.push(this._currentRange)),this._currentRange.nextId(e)},destroy:function(){T.prototype.destroy.call(this);for(var e=0;e<this._idRanges.length;++e)this._idRanges[e].recycle()},addSphere:function(e,t,n){var r=p((n=n||{}).color||"white"),i=this._nextObjectId({center:e,userData:void 0!==n.userData?n.userData:null,geom:this});this._protoSphere.addTransformed(this._data,e,t,r,i),this._ready=!1},_prepareVertexArray:function(){this._ready=!0,null!==this._va&&this._va.destroy(),this._va=new I(this._gl,this._data.numVerts(),this._data.numIndices(),this._float32Allocator,this._uint16Allocator),this._va.setIndexData(this._data.indexData()),this._va.setVertData(this._data.vertData())},draw:function(e,t,n,r){if(this._visible){this._ready||this._prepareVertexArray();var i=this.shaderForStyleAndPass(t,n,r);if(i){e.bind(i),this._gl.uniform1i(i.symId,255);var a=this._va;a.bind(i),a.draw(),a.releaseAttribs(i)}}},shaderForStyleAndPass:function(e,t,n){if("normal"===n)return"hemilight"===t?e.hemilight:e.phong;if("select"===n)return e.select;if("outline"===n)return e.outline;var r=e[n];return void 0!==r?r:null}}),h}(p),x=function(){var t,n,i,a=e.vec3,o=e.quat,s=e.mat3;function u(e,t,n){this._from=e,this._to=t,this._duration=n,this._left=n,this._start=Date.now(),this._looping=!1,this._finished=!1}function c(e,t,n){u.call(this,a.clone(e),a.clone(t),n),this._current=a.clone(e)}function l(e,t,n){var r=s.create(),i=s.create();s.fromMat4(r,e),s.fromMat4(i,t);var a=o.create(),c=o.create();o.fromMat3(a,r),o.fromMat3(c,i),this._current=s.create(),u.call(this,a,c,n)}function p(e,t){u.call(this,null,null,t),this._axis=a.clone(e),this.setLooping(!0),this._previousAngle=0}function d(e,t){var n=2*Math.PI/t*1e3;u.call(this,null,null,n),this._axis=a.clone(e),this.setLooping(!0),this._speed=t,this._previousT=0}function h(){this._animations=[]}return u.prototype={setLooping:function(e){this._looping=e},step:function(e){var t,n=Date.now()-this._start;return 0===this._duration?t=1:this._looping?t=(n-Math.floor(n/this._duration)*this._duration)/this._duration:(n=Math.min(this._duration,n),this._finished=1==(t=n/this._duration)),this.apply(e,t),this._finished},apply:function(e,t){var n=(1-Math.cos(t*Math.PI))/2;this._current=this._from*(1-n)+this._to*n,e.setZoom(this._current)},finished:function(){return this._finished}},r.derive(c,u,{apply:function(e,t){var n=(1-Math.cos(t*Math.PI))/2;a.lerp(this._current,this._from,this._to,n),e.setCenter(this._current)}}),r.derive(l,u,{apply:(t=o.create(),function(e,n){o.slerp(t,this._from,this._to,n),s.fromQuat(this._current,t),e.setRotation(this._current)})}),r.derive(p,u,{apply:(n=s.create(),i=s.create(),function(e,t){s.fromMat4(i,e.rotation());var r=.2*Math.sin(2*t*Math.PI),a=r-this._previousAngle;this._previousAngle=r,f.axisRotation(n,this._axis,a),s.mul(i,n,i),e.setRotation(i)})}),r.derive(d,u,{apply:function(){var e=s.create(),t=s.create();return function(n,r){s.fromMat4(t,n.rotation());var i=2*Math.PI*(r-this._previousT);this._previousT=r,f.axisRotation(e,this._axis,i),s.mul(t,e,t),n.setRotation(t)}}(),setSpeed:function(e){this._speed=e},setAxis:function(e){this._axis=e}}),h.prototype={run:function(e){var t=Date.now();return this._animations=this._animations.filter((function(n){return!n.step(e,t)})),this._animations.length>0},add:function(e){this._animations.push(e)},remove:function(e){this._animations=this._animations.filter((function(t){return t!==e}))}},{AnimationControl:h,move:function(e,t,n){return new c(e,t,n)},rotate:function(e,t,n){return new l(e,t,n)},zoom:function(e,t,n){return new u(e,t,n)},rockAndRoll:function(){return new p([0,1,0],2e3)},spin:function(e,t){return new d(e,t)}}}(),b=function(){function e(e,t){this.near=e,this.far=t}function t(e){this._near=(e=e||{}).near||.1,this._far=e.far||400}function n(){this._far=100}return t.prototype.update=function(){return new e(this._near,this._far)},n.prototype.update=function(t,n){for(var r=n.center(),i=null,a=0;a<t.length;++a){var o=t[a];o.visible()&&(i=o.updateSquaredSphereRadius(r,i))}return null===i?null:new e(.1,1.05*((i=Math.sqrt(i))+n.zoom()))},{FixedSlab:t,AutoSlab:n,Slab:e}}(),w=function(n,i,a,o,s,u,c,l,f,p,d,h){var m=e.vec3,g=e.mat4,v=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};function y(e,t){return"fixed"===(e=e||"auto")?new b.FixedSlab(t):"auto"===e?new b.AutoSlab(t):null}function x(e,t,n,r,i,a){this._pos=r,this._target=e,this._node=t,this._symIndex=n,this._legacyObject=i,this._legacyTransform=a}function w(e,t){this._options=this._initOptions(t,e),this._initialized=!1,this._objects=[],this._domElement=e,this._redrawRequested=!1,this._resize=!1,this._lastTimestamp=null,this._objectIdManager=new n,this._spin=null,this._rockAndRoll=null,this.listenerMap={},this._animControl=new h.AnimationControl,this._initKeyboardInput(),this._initCanvas(),this.quality(this._options.quality),null!==this._options.click&&this.on("click",this._options.click),null!==this._options.doubleClicked&&this.on("doubleClick",this._options.doubleClick),"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?this._initViewer():document.addEventListener("DOMContentLoaded",r.bind(this,this._initViewer))}function N(e,t,n){return t in e?e[t]:n}function S(e){return e.atomDoubleClick?(console.warn("use of atomDoubleClick is deprecated. ","use doubleClick instead"),e.atomDoubleClick):e.atomDoubleClicked?(console.warn("use of atomDoubleClicked is deprecated. ","use doubleClick instead"),e.atomDoubleClicked):e.doubleClick?e.doubleClick:"center"}function _(e){return e.atomClick?(console.warn("use of atomClick is deprecated. ","use click instead"),e.atomClick):e.atomClicked?(console.warn("use of atomClicked is deprecated. ","use click instead"),e.atomClicked):e.click?e.click:null}return x.prototype={symIndex:function(){return this._symIndex},target:function(){return this._target},pos:function(){return this._pos},node:function(){return this._node},transform:function(){return this._legacyTransform},object:function(){return this._legacyObject}},(w.prototype={_initOptions:function(e,n){var r={width:(e=e||{}).width||500,height:e.height||500,animateTime:e.animateTime||0,antialias:e.antialias,quality:N(e,"quality","low"),style:N(e,"style","hemilight"),background:t.forceRGB(e.background||"white"),slabMode:y(e.slabMode),outline:N(e,"outline",!0),outlineColor:t.forceRGB(N(e,"outlineColor","black")),outlineWidth:N(e,"outlineWidth",1.5),selectionColor:t.forceRGB(N(e,"selectionColor","#3f3")),fov:N(e,"fov",45),doubleClick:S(e),click:_(e),fog:N(e,"fog",!0),transparency:N(e,"transparency","alpha")},i=n.getBoundingClientRect();return"auto"===r.width&&(r.width=i.width),"auto"===r.height&&(r.height=i.height),r},_ensureSize:function(){this._resize&&(this._resize=!1,this._cam.setViewportSize(this._canvas.viewportWidth(),this._canvas.viewportHeight()),this._pickBuffer.resize(this._options.width,this._options.height))},resize:function(e,t){e===this._options.width&&t===this._options.height||(this._canvas.resize(e,t),this._resize=!0,this._options.width=e,this._options.height=t,this.requestRedraw())},fitParent:function(){var e=this._domElement.getBoundingClientRect();this.resize(e.width,e.height)},gl:function(){return this._canvas.gl()},ok:function(){return this._initialized},options:function(e,n){return void 0!==n&&(this._options[e]=n,"fog"===e?(this._cam.fog(n),this.requestRedraw()):"fov"===e?this._cam.setFieldOfViewY(n*Math.PI/180):"selectionColor"===e?this._cam.setSelectionColor(t.forceRGB(n)):"outlineColor"===e?this._cam.setOutlineColorColor(t.forceRGB(n)):"outlineWidth"===e?this._cam.setOutlineWidth(n+0):"transparency"===e&&this._cam.setScreenDoorTransparency("screendoor"===n)),this._options[e]},quality:function(e){return this._options.quality=e,"high"===e?(this._options.arcDetail=4,this._options.sphereDetail=16,void(this._options.splineDetail=8)):"medium"===e?(this._options.arcDetail=2,this._options.sphereDetail=10,void(this._options.splineDetail=5)):"low"===e?(this._options.arcDetail=2,this._options.sphereDetail=8,void(this._options.splineDetail=3)):void console.error("invalid quality argument",e)},imageData:function(){return this._canvas.imageData()},_initPickBuffer:function(){var e={width:this._options.width,height:this._options.height};this._pickBuffer=new a(this._canvas.gl(),e)},_initViewer:function(){if(!this._canvas.initGL())return this._domElement.removeChild(this._canvas.domElement()),this._domElement.innerHTML='<div style="vertical-align:middle; text-align:center;"><h1>WebGL not supported</h1><p>Your browser does not support WebGL. You might want to try Chrome, Firefox, IE 11, or newer versions of Safari</p><p>If you are using a recent version of one of the above browsers, your graphic card might be blocked. Check the browser documentation for details on how to unblock it.</p></div>',this._domElement.style.width=this._options.width+"px",this._domElement.style.height=this._options.height+"px",!1;this._initPickBuffer(),this._2dcontext=this._textureCanvas.getContext("2d"),this._float32Allocator=new o(Float32Array),this._uint16Allocator=new o(Uint16Array),this._cam=new s(this._canvas.gl()),this._cam.setUpsamplingFactor(this._canvas.superSamplingFactor()),this._cam.setOutlineWidth(this._options.outlineWidth),this._cam.setScreenDoorTransparency("screendoor"===this._options.transparency),this._cam.fog(this._options.fog),this._cam.setFogColor(this._options.background),this._cam.setOutlineColor(this._options.outlineColor),this._cam.setSelectionColor(this._options.selectionColor),this._cam.setFieldOfViewY(this._options.fov*Math.PI/180),this._mouseHandler.setCam(this._cam);var e=this._canvas,t=/(iPad|iPhone|iPod)/g.test(navigator.userAgent)?"highp":"mediump";return this._shaderCatalog={hemilight:e.initShader(u.HEMILIGHT_VS,u.PRELUDE_FS+u.HEMILIGHT_FS,t),phong:e.initShader(u.HEMILIGHT_VS,u.PRELUDE_FS+u.PHONG_FS,t),outline:e.initShader(u.OUTLINE_VS,u.PRELUDE_FS+u.OUTLINE_FS,t),lines:e.initShader(u.LINES_VS,u.PRELUDE_FS+u.LINES_FS,t),text:e.initShader(u.TEXT_VS,u.TEXT_FS,t),selectLines:e.initShader(u.SELECT_LINES_VS,u.SELECT_LINES_FS,t),select:e.initShader(u.SELECT_VS,u.SELECT_FS,t)},this._boundDraw=r.bind(this,this._draw),this._touchHandler=new c(this._canvas.domElement(),this,this._cam),this._initialized||(this._initialized=!0,this._dispatchEvent({name:"viewerReadyEvent"},"viewerReady",this)),!0},requestRedraw:function(){this._redrawRequested||(this._redrawRequested=!0,v(this._boundDraw))},boundingClientRect:function(){return this._canvas.domElement().getBoundingClientRect()},_drawWithPass:function(e){for(var t=0,n=this._objects.length;t!==n;++t)this._objects[t].draw(this._cam,this._shaderCatalog,this._options.style,e)},_initKeyboardInput:function(){var e=document.createElement("div");e.setAttribute("style","overflow:hidden;width:0;height:0"),this._keyInput=document.createElement("textarea"),this._domElement.appendChild(e),e.appendChild(this._keyInput),this._keyInput.focus()},focus:function(){this._keyInput.focus()},_initCanvas:function(){this._canvas=new i.Canvas(this._domElement,{antialias:this._options.antialias,height:this._options.height,width:this._options.width,backgroundColor:this._options.background}),this._textureCanvas=document.createElement("canvas"),this._textureCanvas.style.display="none",this._domElement.appendChild(this._textureCanvas),this._mouseHandler=new l(this._canvas,this,this._cam,this._options.animateTime),this._canvas.domElement().addEventListener("mousedown",r.bind(this,this._gainFocus))},_gainFocus:function(){this._keyInput.focus()},setRotation:function(e,t){if(0==(t|=0))return this._cam.setRotation(e),void this.requestRedraw();var n;9===e.length?(n=g.create(),g.fromMat3(n,e)):n=g.clone(e),this._animControl.add(h.rotate(this._cam.rotation(),n,t)),this.requestRedraw()},setCamera:function(e,t,n,r){this.setCenter(t,r|=0),this.setRotation(e,r),this.setZoom(n,r)},_animateCam:function(){this._animControl.run(this._cam)&&this.requestRedraw()},_draw:function(){if(null!==this._canvas){this._redrawRequested=!1,this._animateCam(),this._canvas.bind(),this._ensureSize();var e=this._canvas.gl();e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);var t=this._options.slabMode.update(this._objects,this._cam);null!==t&&this._cam.setNearFar(t.near,t.far),e.enable(e.CULL_FACE),this._options.outline&&(e.cullFace(e.BACK),e.enable(e.CULL_FACE),this._drawWithPass("outline")),e.cullFace(e.FRONT),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),this._drawWithPass("normal")}},setCenter:function(e,t){0!=(t|=0)?(this._animControl.add(h.move(this._cam.center(),m.clone(e),t)),this.requestRedraw()):this._cam.setCenter(e)},setZoom:function(e,t){0!=(t|=0)?(this._animControl.add(h.zoom(this._cam.zoom(),e,t)),this.requestRedraw()):this._cam.setZoom(e)},centerOn:function(e,t){this.setCenter(e.center(),t)},clear:function(){for(var e=0;e<this._objects.length;++e)this._objects[e].destroy();this._objects=[]},addListener:function(e,t){if("keypress"===e||"keydown"===e||"keyup"===e)console.log("keypress"),this._keyInput.addEventListener(e,t,!1);else{var n=this.listenerMap[e];if(void 0===n&&(this.listenerMap[e]=n=[]),"center"===t){var i=r.bind(this._mouseHandler,this._mouseHandler._centerOnClicked);n.push(i)}else n.push(t);this._initialized&&"viewerReady"===e&&t(this,null)}},_dispatchEvent:function(e,t,n){var r=this.listenerMap[t];r&&r.forEach((function(t){t(n,e)}))},RENDER_MODES:["sline","lines","trace","lineTrace","cartoon","tube","spheres","ballsAndSticks","points"],renderAs:function(e,t,n,r){for(var i=!1,a=0;a<this.RENDER_MODES.length;++a)if(this.RENDER_MODES[a]===n){i=!0;break}if(i)return this[n](e,t,r);console.error("render mode",n,"not supported")},_handleStandardMolOptions:function(e,t){return(e=this._handleStandardOptions(e)).showRelated=e.showRelated||"asym",e.showRelated&&"asym"!==e.showRelated&&null===t.assembly(e.showRelated)&&(console.error("no assembly with name",e.showRelated,". Falling back to asymmetric unit"),e.showRelated="asym"),e},_handleStandardOptions:function(e){return(e=r.copy(e)).float32Allocator=this._float32Allocator,e.uint16Allocator=this._uint16Allocator,e.idPool=this._objectIdManager,e},lineTrace:function(e,n,r){var i=this._handleStandardMolOptions(r,n);i.color=i.color||t.uniform([1,0,1]),i.lineWidth=i.lineWidth||4;var a=f.lineTrace(n,this._canvas.gl(),i);return this.add(e,a)},spheres:function(e,n,r){var i=this._handleStandardMolOptions(r,n);i.color=i.color||t.byElement(),i.sphereDetail=this.options("sphereDetail"),i.radiusMultiplier=i.radiusMultiplier||1;var a=f.spheres(n,this._canvas.gl(),i);return this.add(e,a)},sline:function(e,n,r){var i=this._handleStandardMolOptions(r,n);i.color=i.color||t.uniform([1,0,1]),i.splineDetail=i.splineDetail||this.options("splineDetail"),i.strength=i.strength||1,i.lineWidth=i.lineWidth||4;var a=f.sline(n,this._canvas.gl(),i);return this.add(e,a)},cartoon:function(e,n,r){var i=this._handleStandardMolOptions(r,n);i.color=i.color||t.bySS(),i.strength=i.strength||1,i.splineDetail=i.splineDetail||this.options("splineDetail"),i.arcDetail=i.arcDetail||this.options("arcDetail"),i.radius=i.radius||.3,i.forceTube=i.forceTube||!1;var a=f.cartoon(n,this._canvas.gl(),i);return this.add(e,a)},surface:function(e,t,n){var r=this._handleStandardOptions(n),i=f.surface(t,this._canvas.gl(),r);return this.add(e,i)},tube:function(e,t,n){return(n=n||{}).forceTube=!0,this.cartoon(e,t,n)},ballsAndSticks:function(e,n,r){var i=this._handleStandardMolOptions(r,n);i.color=i.color||t.byElement(),i.radius=i.radius||.3,i.arcDetail=2*(i.arcDetail||this.options("arcDetail")),i.sphereDetail=i.sphereDetail||this.options("sphereDetail");var a=f.ballsAndSticks(n,this._canvas.gl(),i);return this.add(e,a)},lines:function(e,n,r){var i=this._handleStandardMolOptions(r,n);i.color=i.color||t.byElement(),i.lineWidth=i.lineWidth||4;var a=f.lines(n,this._canvas.gl(),i);return this.add(e,a)},points:function(e,n,r){var i=this._handleStandardMolOptions(r,n);i.color=i.color||t.byElement(),i.pointSize=i.pointSize||1;var a=f.points(n,this._canvas.gl(),i);return this.add(e,a)},trace:function(e,n,r){var i=this._handleStandardMolOptions(r,n);i.color=i.color||t.uniform([1,0,0]),i.radius=i.radius||.3,i.arcDetail=2*(i.arcDetail||this.options("arcDetail")),i.sphereDetail=i.sphereDetail||this.options("sphereDetail");var a=f.trace(n,this._canvas.gl(),i);return this.add(e,a)},_updateProjectionIntervals:function(e,t,n){n.eachAtom((function(n){for(var r=n.pos(),i=0;i<3;++i)t[i].update(m.dot(r,e[i]))}));for(var r=0;r<3;++r)t[r].extend(1.5)},fitTo:function(e){var t=this._cam.mainAxes(),n=[new r.Range,new r.Range,new r.Range];if(e instanceof T)e.updateProjectionIntervals(t[0],t[1],t[2],n[0],n[1],n[2]);else if(void 0!==e.eachAtom)this._updateProjectionIntervals(t,n,e);else if(void 0!==e.length)for(var i=0;i<e.length;++i)this._updateProjectionIntervals(t,n,e[i]);this._fitToIntervals(t,n)},_fitToIntervals:function(e,t){if(t[0].empty()||t[1].empty()||t[2].empty())console.error("could not determine interval. No objects shown?");else{var n=t[0].center(),r=t[1].center(),i=t[2].center(),a=[n*e[0][0]+r*e[1][0]+i*e[2][0],n*e[0][1]+r*e[1][1]+i*e[2][1],n*e[0][2]+r*e[1][2]+i*e[2][2]],o=this._cam.fieldOfViewY(),s=this._cam.aspectRatio(),u=t[0].length()/s,c=t[1].length(),l=.5*Math.max(u,c)/Math.tan(.5*o),f=l+.5*t[2].length(),p=Math.max(l-.5,.1),d=1+l+t[2].length();this._cam.setNearFar(p,d),this.setCamera(this._cam.rotation(),a,f,this._options.animateTime),this.requestRedraw()}},autoZoom:function(){var e=this._cam.mainAxes(),t=[new r.Range,new r.Range,new r.Range];this.forEach((function(n){n.visible()&&n.updateProjectionIntervals(e[0],e[1],e[2],t[0],t[1],t[2])})),this._fitToIntervals(e,t)},slabInterval:function(){},autoSlab:function(){var e=this._options._slabMode.update(this._objects,this._cam);null!==e&&this._cam.setNearFar(e.near,e.far),this.requestRedraw()},rockAndRoll:function(e){return void 0===e?null!==this._rockAndRoll:e?(null===this._rockAndRoll&&(this._rockAndRoll=h.rockAndRoll(),this._animControl.add(this._rockAndRoll),this.requestRedraw()),!0):(this._animControl.remove(this._rockAndRoll),this._rockAndRoll=null,this.requestRedraw(),!1)},spin:function(e,t){return void 0===e?null!==this._spin:!1===e?(this._animControl.remove(this._spin),this._spin=null,this.requestRedraw(),!1):(!0===e&&(e=Math.PI/8),t=t||[0,1,0],null===this._spin?(this._spin=h.spin(t,e),this._animControl.add(this._spin)):(this._spin.setSpeed(e),this._spin.setAxis(t)),this.requestRedraw(),!0)},slabMode:function(e,t){var n=y(e,t=t||{}),r=n.update(this._objects,this._cam);null!==r&&this._cam.setNearFar(r.near,r.far),this._options.slabMode=n,this.requestRedraw()},label:function(e,t,n,r){var i=new p(this._canvas.gl(),this._textureCanvas,this._2dcontext,n,t,r);return this.add(e,i),i},customMesh:function(e,t){var n=this._handleStandardOptions(t),r=new d(e,this._canvas.gl(),n.float32Allocator,n.uint16Allocator,n.idPool);return this.add(e,r),r},_drawPickingScene:function(){var e=this._canvas.gl();e.clearColor(0,0,0,0),e.disable(e.BLEND),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.clearColor(this._options.background[0],this._options.background[1],this._options.background[2],1),e.cullFace(e.FRONT),e.enable(e.CULL_FACE),this._drawWithPass("select")},pick:function(e){this._pickBuffer.bind(),this._drawPickingScene();var t=new Uint8Array(4),n=this._canvas.gl();n.readPixels(e.x,this._options.height-e.y,1,1,n.RGBA,n.UNSIGNED_BYTE,t),this._pickBuffer.release(),t.data&&(t=t.data);var r=t[3],i=this._objectIdManager.objectForId(t[0]|t[1]<<8|t[2]<<16);if(void 0===i)return null;var a=m.create(),o=null,s=null;return 255!==r?(o=i.atom,s=i.geom.symWithIndex(r),m.transformMat4(a,i.atom.pos(),s)):void 0!==i.atom?(o=i.atom,a=i.atom.pos()):(o=i.userData,a=i.center),new x(o,i.geom,r<255?r:null,a,i,s)},add:function(e,t){return t.name(e),this._objects.push(t),this._objects.sort((function(e,t){return e.order()-t.order()})),this.requestRedraw(),t},_globToRegex:function(e){var t=e.replace(".","\\.").replace("*",".*");return new RegExp("^"+t+"$")},forEach:function(){var e,t="*";2===arguments.length?(e=arguments[1],t=arguments[0]):e=arguments[0];for(var n=this._globToRegex(t),r=0;r<this._objects.length;++r){var i=this._objects[r];n.test(i.name())&&e(i,r)}},get:function(e){for(var t=0;t<this._objects.length;++t)if(this._objects[t].name()===e)return this._objects[t];return console.error("could not find object with name",e),null},hide:function(e){this.forEach(e,(function(e){e.hide()}))},show:function(e){this.forEach(e,(function(e){e.show()}))},rm:function(e){for(var t=[],n=this._globToRegex(e),r=0;r<this._objects.length;++r){var i=this._objects[r];n.test(i.name())?i.destroy():t.push(i)}this._objects=t},all:function(){return this._objects},isWebGLSupported:function(){return this._canvas.isWebGLSupported()},destroy:function(){this.clear(),this._canvas.destroy(),this._canvas=null}}).on=w.prototype.addListener,{Viewer:function(e,t){return new w(e,t)},isWebGLSupported:i.isWebGLSupported}}(n,i,a,o,s,u,c,l,g,v,y,x),N=function(){function e(e,t){this._chains=e||[],this._matrices=t||[]}function t(e){this._name=e,this._generators=[]}return e.prototype={addChain:function(e){this._chains.push(e)},chains:function(){return this._chains},addMatrix:function(e){this._matrices.push(e)},matrices:function(){return this._matrices},matrix:function(e){return this._matrices[e]}},t.prototype={name:function(){return this._name},generators:function(){return this._generators},generator:function(e){return this._generators[e]},addGenerator:function(e){this._generators.push(e)}},{SymGenerator:e,Assembly:t}}(),S=function(t,n){var i=e.vec3,a=t.Residue,o=t.ResidueView;function s(e,t){return e<<8|t.charCodeAt(0)}function u(e,t){return e.num()<t.num()}function c(e){return{num:function(){return e}}}function l(){}function f(e,t){l.call(this),this._structure=e,this._name=t,this._cachedTraces=[],this._residues=[],this._rnumsOrdered=!0}function p(e,t,n){var r,a;if(e?(r=t.atom("C"),a=n.atom("N")):(r=t.atom("O3'"),a=n.atom("P")),r.isConnectedTo(a))return!1;var o=i.sqrDist(r.pos(),a.pos());return Math.abs(o-2.25)>1}function d(e,t){t.length()<2||e.push(t)}function h(e,t,n){if(0===e.length)return!0;if(!t)return!1;var r=s(n.num(),n.insCode()),i=e[e.length-1];return s(i.num(),i.insCode())<r}function m(e,t){l.call(this),this._chain=t,this._residues=[],this._molView=e,this._residueMap={},this._rnumsOrdered=!0}return l.prototype={eachAtom:function(e,t){t|=0;for(var n=0;n<this._residues.length;n+=1)if(!1===(t=this._residues[n].eachAtom(e,t)))return!1;return t},atomCount:function(){for(var e=0,t=this.residues(),n=0;n<t.length;++n)e+=t[n].atoms().length;return e},eachResidue:function(e){for(var t=0;t<this._residues.length;t+=1)if(!1===e(this._residues[t]))return!1},residues:function(){return this._residues},structure:function(){return this._structure},asView:function(){var e=this.structure().createEmptyView();return e.addChain(this,!0),e},residueByRnum:function(e){var t=this.residues();if(this._rnumsOrdered){var n=r.binarySearch(t,c(e),u);return-1===n?null:t[n]}for(var i=0;i<t.length;++i)if(t[i].num()===e)return t[i];return null},residuesInRnumRange:function(e,t){var n,i,a=[],o=this.residues();if(!0===this._rnumsOrdered){var s=r.indexFirstLargerEqualThan(o,c(e),u);if(-1===s)return a;var l=r.indexLastSmallerEqualThan(o,c(t),u);if(-1===l)return a;for(n=s;n<=l;++n)a.push(this._residues[n])}else for(n=0,i=o.length;n!==i;++n){var f=o[n];f.num()>=e&&f.num()<=t&&a.push(f)}return a},prop:function(e){return this[e]()}},r.derive(f,l,{name:function(){return this._name},full:function(){return this},addResidue:function(e,t,n){var r=new a(this,e,t,n=n||"\0");return this._rnumsOrdered=h(this._residues,this._rnumsOrdered,r),this._residues.push(r),r},assignSS:function(e,t,n){for(var r=s(e[0],e[1]),i=s(t[0],t[1]),a=1;a<this._residues.length-1;++a){var o=this._residues[a],u=s(o.num(),o.insCode());u<=r||u>=i||o.setSS(n)}},eachBackboneTrace:function(e){this._cacheBackboneTraces();for(var t=0;t<this._cachedTraces.length;++t)e(this._cachedTraces[t])},_cacheBackboneTraces:function(){if(!(this._cachedTraces.length>0)){for(var e=new n.BackboneTrace,t=null,r=0;r<this._residues.length;r+=1){var i=this._residues[r],a=i.isAminoacid(),o=i.isNucleotide();!0===t&&!a||!1===t&&!o||null===t&&!o&&!a?(d(this._cachedTraces,e),t=null,e=new n.BackboneTrace):0!==e.length()?(p(t,this._residues[r-1],i)&&(d(this._cachedTraces,e),e=new n.BackboneTrace),e.push(i)):(e.push(i),t=i.isAminoacid())}d(this._cachedTraces,e)}},backboneTraces:function(){var e=[];return this.eachBackboneTrace((function(t){e.push(t)})),e}}),r.derive(m,l,{addResidue:function(e,t){var n=new o(this,e.full());if(this._rnumsOrdered=h(this._residues,this._rnumsOrdered,e),this._residues.push(n),this._residueMap[e.full().index()]=n,t)for(var r=e.atoms(),i=0;i<r.length;++i)n.addAtom(r[i].full(),!1);return n},addAtom:function(e){var t=this._residueMap[e.residue().full().index()];return void 0===t&&(t=this.addResidue(e.residue())),t.addAtom(e,!0)},removeAtom:function(e,t){var n=this._residueMap[e.residue().full().index()];if(void 0===n)return!1;var r=n.removeAtom(e);return r&&0===n.atoms().length&&t&&(delete this._residueMap[e.residue().full().index()],this._residues=this._residues.filter((function(e){return e!==n}))),r},containsResidue:function(e){var t=this._residueMap[e.full().index()];return void 0!==t&&t.full()===e.full()},eachBackboneTrace:function(e){for(var t=this._chain.backboneTraces(),n=0;n<t.length;++n)for(var r=t[n].subsets(this._residues),i=0;i<r.length;++i)e(r[i])},backboneTraces:function(){var e=[];return this.eachBackboneTrace((function(t){e.push(t)})),e},full:function(){return this._chain},name:function(){return this._chain.name()},structure:function(){return this._molView}}),{Chain:f,ChainView:m}}(function(t){var n=e.vec3,i=t.Atom,a=t.AtomView;function o(){}function s(e,t,n,r){o.call(this),this._name=t,this._num=n,this._insCode=r,this._atoms=[],this._ss="C",this._chain=e,this._isAminoacid=!1,this._isNucleotide=!1,this._index=e.residues().length}function u(e,t){o.call(this),this._chainView=e,this._atoms=[],this._residue=t}return o.prototype={prop:function(e){return this[e]()},isWater:function(){return"HOH"===this.name()||"DOD"===this.name()},eachAtom:function(e,t){t|=0;for(var n=0;n<this._atoms.length;n+=1){if(!1===e(this._atoms[n],t))return!1;t+=1}return t},qualifiedName:function(){var e=this.chain().name()+"."+this.name()+this.num();return"\0"===this.insCode()?e:e+this.insCode()},atom:function(e){if("string"==typeof e){for(var t=0;t<this._atoms.length;++t)if(this._atoms[t].name()===e)return this._atoms[t];return null}return e>=this._atoms.length&&e<0?null:this._atoms[e]},centralAtom:function(){return this.isAminoacid()?this.atom("CA"):this.isNucleotide()?this.atom("C3'"):null},center:function(){var e=0,t=n.create();return this.eachAtom((function(r){n.add(t,t,r.pos()),e+=1})),e>0&&n.scale(t,t,1/e),t},isAminoacid:function(){return this._isAminoacid},isNucleotide:function(){return this._isNucleotide}},r.derive(s,o,{_deduceType:function(){this._isNucleotide=null!==this.atom("P")&&null!==this.atom("C3'"),this._isAminoacid=null!==this.atom("N")&&null!==this.atom("CA")&&null!==this.atom("C")&&null!==this.atom("O")},name:function(){return this._name},insCode:function(){return this._insCode},num:function(){return this._num},full:function(){return this},addAtom:function(e,t,n,r,a,o){var s=new i(this,e,t,n,this.structure().nextAtomIndex(),r,a,o);return this._atoms.push(s),s},ss:function(){return this._ss},setSS:function(e){this._ss=e},index:function(){return this._index},atoms:function(){return this._atoms},chain:function(){return this._chain},structure:function(){return this._chain.structure()}}),r.derive(u,o,{addAtom:function(e,t){if(t)for(var n=0;n<this._atoms.length;++n){var r=this._atoms[n];if(r.index()===e.index())return r}var i=new a(this,e.full());return this._atoms.push(i),i},removeAtom:function(e){var t=this._atoms.length;return this._atoms=this._atoms.filter((function(t){return t.index()!==e.index()})),t!==this._atoms.length},full:function(){return this._residue},num:function(){return this._residue.num()},insCode:function(){return this._residue.insCode()},ss:function(){return this._residue.ss()},index:function(){return this._residue.index()},chain:function(){return this._chainView},name:function(){return this._residue.name()},atoms:function(){return this._atoms},qualifiedName:function(){return this._residue.qualifiedName()},containsResidue:function(e){return this._residue.full()===e.full()},isAminoacid:function(){return this._residue.isAminoacid()},isNucleotide:function(){return this._residue.isNucleotide()},isWater:function(){return this._residue.isWater()}}),{ResidueView:u,Residue:s}}(function(){var t=e.vec3;function n(){}function i(e,t,r,i,a,o,s,u){n.call(this),this._residue=e,this._bonds=[],this._isHetatm=!!o,this._name=t,this._pos=r,this._index=a,this._element=i,this._occupancy=void 0!==s?s:null,this._tempFactor=void 0!==u?u:null}function a(e,t){n.call(this),this._resView=e,this._atom=t,this._bonds=[]}return n.prototype={bondCount:function(){return this.bonds().length},eachBond:function(e){for(var t=this.bonds(),n=0,r=t.length;n<r;++n)e(t[n])},isConnectedTo:function(e){if(null===e)return!1;for(var t=e.full(),n=this.full(),r=this.bonds(),i=0,a=r.length;i<a;++i){var o=r[i];if(o.atom_one()===n&&o.atom_two()===t||o.atom_one()===t&&o.atom_two()===n)return!0}return!1}},r.derive(i,n,{addBond:function(e){this._bonds.push(e)},name:function(){return this._name},bonds:function(){return this._bonds},residue:function(){return this._residue},structure:function(){return this._residue.structure()},full:function(){return this},qualifiedName:function(){return this.residue().qualifiedName()+"."+this.name()},pos:function(){return this._pos},setPos:function(e){t.copy(this._pos,e)},element:function(){return this._element},index:function(){return this._index},prop:function(e){return this[e]()},occupancy:function(){return this._occupancy},tempFactor:function(){return this._tempFactor},isHetatm:function(){return this._isHetatm}}),r.derive(a,n,{full:function(){return this._atom},name:function(){return this._atom.name()},pos:function(){return this._atom.pos()},element:function(){return this._atom.element()},residue:function(){return this._resView},bonds:function(){return this._atom.bonds()},index:function(){return this._atom.index()},occupancy:function(){return this._atom.occupancy()},tempFactor:function(){return this._atom.tempFactor()},qualifiedName:function(){return this._atom.qualifiedName()},isHetatm:function(){return this._atom.isHetatm()}}),{Atom:i,AtomView:a}}()),function(){var t,n,r,i,a=e.vec3;function o(){this._trace=[]}function s(e,t,n){this._fullTrace=e,this._fullTraceBegin=t,this._fullTraceEnd=n,this._isNTerminal=0===this._fullTraceBegin,this._isCTerminal=this._fullTrace.length()===this._fullTraceEnd;var r=this._fullTraceEnd-this._fullTraceBegin;this._isCTerminal||++r,this._isNTerminal||(++r,this._fullTraceBegin-=1),this._length=r}return(o.prototype={push:function(e){this._trace.push(e)},length:function(){return this._trace.length},residueAt:function(e){return this._trace[e]},posAt:function(e,t){return a.copy(e,this._trace[t].centralAtom().pos()),e},normalAt:function(e,t){var n=this._trace[t];return n.isAminoacid()&&a.sub(e,n.atom("O").pos(),n.atom("C").pos()),a.normalize(e,e),e},centralAtomAt:function(e){return this._trace[e].centralAtom()},tangentAt:(t=a.create(),n=a.create(),function(e,r){this.posAt(t,r>0?r-1:r),this.posAt(n,r<this._trace.length-1?r+1:r),a.sub(e,n,t)}),fullTraceIndex:function(e){return e},subsets:function(e){for(var t=0,n=0,r=[];n<e.length&&t<this._trace.length;){for(var i=e[n].full().index();this._trace.length>t&&this._trace[t].index()<i;)++t;if(t>=this._trace.length)break;for(var a=this._trace[t].index();e.length>n&&e[n].full().index()<a;)++n;if(n>=e.length)break;for(var o=t;e.length>n&&this._trace.length>t&&e[n].full().index()===this._trace[t].index();)++n,++t;r.push(new s(this,o,t))}return r}}).smoothPosAt=o.prototype.posAt,o.prototype.smoothNormalAt=o.prototype.normalAt,s.prototype={length:function(){return this._length},residueAt:function(e){return this._fullTrace.residueAt(this._fullTraceBegin+e)},_interpolate:(r=a.create(),i=a.create(),function(e,t,n,o){return this.tangentAt(r,t),this.tangentAt(i,n),a.scale(r,r,o),a.scale(i,i,o),f.cubicHermiteInterpolate(e,this.centralAtomAt(t).pos(),r,this.centralAtomAt(n).pos(),i,.5,0),e}),smoothPosAt:function(e,t,n){if(0===t&&!this._isNTerminal)return this._interpolate(e,t,t+1,n);if(t===this._length-1&&!this._isCTerminal)return this._interpolate(e,t-1,t,n);var r=this.centralAtomAt(t);return a.copy(e,r.pos()),e},smoothNormalAt:function(e,t){return this._fullTrace.normalAt(e,t+this._fullTraceBegin),e},posAt:function(e,t){var n=this.centralAtomAt(t),r=null;return a.copy(e,n.pos()),0!==t||this._isNTerminal||(r=this.centralAtomAt(t+1),a.add(e,e,r.pos()),a.scale(e,e,.5)),t!==this._length-1||this._isCTerminal||(r=this.centralAtomAt(t-1),a.add(e,e,r.pos()),a.scale(e,e,.5)),e},centralAtomAt:function(e){return this.residueAt(e).centralAtom()},fullTraceIndex:function(e){return this._fullTraceBegin+e},tangentAt:function(e,t){return this._fullTrace.tangentAt(e,t+this._fullTraceBegin)}},{TraceSubset:s,BackboneTrace:o}}()),F=e.vec3,_={Bond:function(e,t){var n={atom_one:e,atom_two:t};return{atom_one:function(){return n.atom_one},atom_two:function(){return n.atom_two},mid_point:function(e){return e||(e=F.create()),F.add(e,n.atom_one.pos(),n.atom_two.pos()),F.scale(e,e,.5),e}}}},D=function(){function e(e,t){for(var n=0;n<t.length;++n)if(!t[n](e))return!1;return!0}function t(e,t){var n=e.residues();t.rnumRange&&(n=e.residuesInRnumRange(t.rnumRange[0],t.rnumRange[1]));var r,i,a=[];if(void 0!==t.rindexRange){for(r=t.rindexRange[0],i=Math.min(n.length-1,t.rindexRange[1]);r<=i;++r)a.push(n[r]);return a}if(t.rindices&&void 0!==t.rindices.length){for(a=[],r=0;r<t.rindices.length;++r)a.push(n[t.rindices[r]]);return a}return n}return{dict:function(n,r,i){var a=function(e){var t=[];if(void 0!==e.rname&&t.push((function(t){return t.name()===e.rname})),void 0!==e.rnames&&t.push((function(t){for(var n=t.name(),r=0;r<e.rnames.length;++r)if(n===e.rnames[r])return!0;return!1})),void 0!==e.rnums){for(var n={},r=0;r<e.rnums.length;++r)n[e.rnums[r]]=!0;t.push((function(e){var t=e.num();return!0===n[t]}))}return void 0!==e.rnum&&t.push((function(t){return t.num()===e.rnum})),t}(i),o=function(e){var t=[];return void 0!==e.aname&&t.push((function(t){return t.name()===e.aname})),void 0!==e.hetatm&&t.push((function(t){return t.isHetatm()===e.hetatm})),void 0!==e.anames&&t.push((function(t){for(var n=t.name(),r=0;r<e.anames.length;++r)if(n===e.anames[r])return!0;return!1})),t}(i),s=function(e){var t=[];return void 0!==e.cname&&(e.chain=e.cname),void 0!==e.cnames&&(e.chains=e.cnames),void 0!==e.chain&&t.push((function(t){return t.name()===e.chain})),void 0!==e.chains&&t.push((function(t){for(var n=t.name(),r=0;r<e.chains.length;++r)if(n===e.chains[r])return!0;return!1})),t}(i);i.rindex&&(i.rindices=[i.rindex]);for(var u=0;u<n._chains.length;++u){var c=n._chains[u];if(e(c,s))for(var l=t(c,i),f=null,p=0;p<l.length;++p)if(e(l[p],a)){f||(f=r.addChain(c,!1));for(var d=null,h=l[p].atoms(),m=0;m<h.length;++m)e(h[m],o)&&(d||(d=f.addResidue(l[p],!1)),d.addAtom(h[m]))}}return r}}}(),P=function(t,n,i){var a=e.vec3,o=t.Chain,s=t.ChainView,u=n.Bond,c={H:.31,HE:.28,LI:1.28,BE:.96,B:.84,C:.76,N:.71,O:.66,F:.57,NE:.58,NA:1.66,MG:1.41,AL:1.21,SI:1.11,P:1.07,S:1.05,CL:1.02,AR:1.06,K:2.03,CA:1.76,SC:1.7,TI:1.6,V:1.53,CR:1.39,MN:1.39,FE:1.32,CO:1.26,NI:1.24,CU:1.32,ZN:1.22,GA:1.22,GE:1.2,AS:1.19,SE:1.2,BR:1.2,KR:1.16,RB:2.2,SR:1.95,Y:1.9,ZR:1.75,NB:1.64,MO:1.54,TC:1.47,RU:1.46,RH:1.42,PD:1.39,AG:1.45,CD:1.44,IN:1.42,SN:1.39,SB:1.39,TE:1.38,I:1.39,XE:1.4,CS:2.44,BA:2.15,LA:2.07,CE:2.04,PR:2.03,ND:2.01,PM:1.99,SM:1.98,EU:1.98,GD:1.96,TB:1.94,DY:1.92,HO:1.92,ER:1.89,TM:1.9,YB:1.87,LU:1.87,HF:1.75,TA:1.7,W:1.62,RE:1.51,OS:1.44,IR:1.41,PT:1.36,AU:1.36,HG:1.32,TL:1.45,PB:1.46,BI:1.48,PO:1.4,AT:1.5,RN:1.5,FR:2.6,RA:2.21,AC:2.15,TH:2.06,PA:2,U:1.96,NP:1.9,PU:1.87,AM:1.8,CM:1.69};function l(e){var t=c[e.toUpperCase()];return void 0!==t?t:1.5}function p(){}function d(){p.call(this),this._chains=[],this._assemblies=[],this._nextAtomIndex=0}function h(e){p.call(this),this._mol=e,this._chains=[]}return p.prototype={eachResidue:function(e){for(var t=0;t<this._chains.length;t+=1)if(!1===this._chains[t].eachResidue(e))return!1},eachAtom:function(e,t){t|=0;for(var n=0;n<this._chains.length;n+=1)if(!1===(t=this._chains[n].eachAtom(e,t)))return!1},residueCount:function(){for(var e=this.chains(),t=0,n=0;n<e.length;++n)t+=e[n].residues().length;return t},eachChain:function(e){for(var t=this.chains(),n=0;n<t.length;++n)if(!1===e(t[n]))return},atomCount:function(){for(var e=this.chains(),t=0,n=0;n<e.length;++n)t+=e[n].atomCount();return t},atoms:function(){var e=[];return this.eachAtom((function(t){e.push(t)})),e},atom:function(e){var t=e.split("."),n=this.chain(t[0]);if(null===n)return null;var r=n.residueByRnum(parseInt(t[1],10));return null===r?null:r.atom(t[2])},center:function(){var e=a.create(),t=0;return this.eachAtom((function(n){a.add(e,e,n.pos()),t+=1})),t&&a.scale(e,e,1/t),e},boundingSphere:function(){var e=this.center(),t=0;return this.eachAtom((function(n){t=Math.max(t,a.sqrDist(e,n.pos()))})),new f.Sphere(e,Math.sqrt(t))},backboneTraces:function(){for(var e=this.chains(),t=[],n=0;n<e.length;++n)Array.prototype.push.apply(t,e[n].backboneTraces());return t},select:function(e){return"protein"===e?this.residueSelect((function(e){return e.isAminoacid()})):"water"===e?this.residueSelect((function(e){return e.isWater()})):"ligand"===e?this.residueSelect((function(e){return!e.isAminoacid()&&!e.isWater()})):i.dict(this,new h(this),e||{})},residueSelect:function(e){console.time("Mol.residueSelect");for(var t=new h(this.full()),n=0;n<this._chains.length;++n)for(var r=this._chains[n],i=null,a=r.residues(),o=0;o<a.length;++o)e(a[o])&&(i||(i=t.addChain(r,!1)),i.addResidue(a[o],!0));return console.timeEnd("Mol.residueSelect"),t},atomSelect:function(e){console.time("Mol.atomSelect");for(var t=new h(this.full()),n=0;n<this._chains.length;++n)for(var r=this._chains[n],i=null,a=r.residues(),o=0;o<a.length;++o)for(var s=null,u=a[o],c=u.atoms(),l=0;l<c.length;++l)e(c[l])&&(i||(i=t.addChain(r,!1)),s||(s=i.addResidue(u,!1)),s.addAtom(c[l]));return console.timeEnd("Mol.atomSelect"),t},assembly:function(e){for(var t=this.assemblies(),n=0;n<t.length;++n)if(t[n].name()===e)return t[n];return null},chainsByName:function(e){for(var t={},n=this.chains(),r=0;r<n.length;++r)t[n[r].name()]=n[r];for(var i=[],a=0;a<e.length;++a){var o=t[e[a]];void 0!==o&&i.push(o)}return i},selectWithin:function(){var e=a.create();return function(t,n){console.time("Mol.selectWithin");var r=(n=n||{}).radius||4,i=r*r,o=!!n.matchResidues,s=[];t.eachAtom((function(e){s.push(e)}));for(var u=new h(this.full()),c=null,l=null,f=this.chains(),p=!1,d=0;d<f.length;++d){var m=f[d].residues();l=null;for(var g=0;g<m.length;++g){c=null,p=!1;for(var v=m[g].atoms(),y=0;y<v.length&&!p;++y)for(var x=0;x<s.length;++x)if(a.sub(e,v[y].pos(),s[x].pos()),!(a.sqrLen(e)>i)){if(l||(l=u.addChain(f[d].full(),!1)),c||(c=l.addResidue(m[g].full(),o)),o){p=!0;break}c.addAtom(v[y].full());break}}}return console.timeEnd("Mol.selectWithin"),u}}(),createEmptyView:function(){return new h(this.full())}},r.derive(d,p,{addAssembly:function(e){this._assemblies.push(e)},setAssemblies:function(e){this._assemblies=e},assemblies:function(){return this._assemblies},chains:function(){return this._chains},full:function(){return this},containsResidue:function(e){return e.full().structure()===this},chainByName:function(e){for(var t=0;t<this._chains.length;++t)if(this._chains[t].name()===e)return this._chains[t];return null},chain:function(e){return this.chainByName(e)},nextAtomIndex:function(){var e=this._nextAtomIndex;return this._nextAtomIndex+=1,e},addChain:function(e){var t=new o(this,e);return this._chains.push(t),t},connect:function(e,t){var n=new u(e,t);return e.addBond(n),t.addBond(n),n},deriveConnectivity:function(){console.time("Mol.deriveConnectivity");var e=this,t=null;this.eachResidue((function(n){for(var r,i,o,s,u,c=n.atoms(),f=c.length,p=0;p<f;p+=1)for(var d=c[p],h=d.pos(),m=l(d.element()),g=0;g<p;g+=1){var v=c[g],y=l(v.element()),x=m+y-.3,b=m+y+.3;(r=a.sqrDist(h,v.pos()))<b*b&&r>x*x&&e.connect(d,v)}n._deduceType(),null!==t&&(n.isAminoacid()&&t.isAminoacid()&&(i=e,o=n,s=t.atom("C"),u=o.atom("N"),s&&u&&a.sqrDist(s.pos(),u.pos())<1.6*1.6&&i.connect(u,s)),n.isNucleotide()&&t.isNucleotide()&&function(e,t,n){var r=t.atom("O3'"),i=n.atom("P");r&&i&&a.sqrDist(r.pos(),i.pos())<1.7*1.7&&e.connect(r,i)}(e,t,n)),t=n})),console.timeEnd("Mol.deriveConnectivity")}}),r.derive(h,p,{full:function(){return this._mol},assemblies:function(){return this._mol.assemblies()},addChain:function(e,t){var n=new s(this,e.full());if(this._chains.push(n),t)for(var r=e.residues(),i=0;i<r.length;++i)n.addResidue(r[i],!0);return n},addAtom:function(e){var t=this.chain(e.residue().chain().name());return null===t&&(t=this.addChain(e.residue().chain())),t.addAtom(e)},removeAtom:function(e,t){if(null===e)return!1;var n=this.chain(e.residue().chain().name());if(null===n)return!1;var r=n.removeAtom(e,t);return r&&0===n.residues().length&&(this._chains=this._chains.filter((function(e){return e!==n}))),r},containsResidue:function(e){if(!e)return!1;var t=this.chain(e.chain().name());return!!t&&t.containsResidue(e)},addResidues:function(e,t){var n=this,r={};return e.forEach((function(e){var i=e.chain().name();void 0===r[i]&&(r[i]=n.addChain(e.chain(),!1)),r[i].addResidue(e,t)})),r},chains:function(){return this._chains},chain:function(e){for(var t=0;t<this._chains.length;++t)if(this._chains[t].name()===e)return this._chains[t];return null}}),{MolView:h,Mol:d}}(S,_,D),A=function(e){var t,n=Math.pow(2,-52),r=1e-64/n,i=0,a=0,o=0,s=0,u=0,c=e,l=c.length,f=c[0].length;if(l<f)throw"Need more rows than columns";var p=new Array(f),d=new Array(f);for(a=0;a<f;a++)p[a]=d[a]=0;var h=[];for(a=0;a<f;++a){var m=[];for(h.push([]),o=0;o<f;++o)m.push(0);h.push(m)}function g(e,t){return(e=Math.abs(e))>(t=Math.abs(t))?e*Math.sqrt(1+t*t/e/e):0==t?e:t*Math.sqrt(1+e*e/t/t)}var v=0,y=0,x=0,b=0,w=0,N=0,S=0;for(a=0;a<f;a++){for(p[a]=y,S=0,u=a+1,o=a;o<l;o++)S+=c[o][a]*c[o][a];if(S<=r)y=0;else for(v=c[a][a],y=Math.sqrt(S),v>=0&&(y=-y),x=v*y-S,c[a][a]=v-y,o=u;o<f;o++){for(S=0,s=a;s<l;s++)S+=c[s][a]*c[s][o];for(v=S/x,s=a;s<l;s++)c[s][o]+=v*c[s][a]}for(d[a]=y,S=0,o=u;o<f;o++)S+=c[a][o]*c[a][o];if(S<=r)y=0;else{for(v=c[a][a+1],y=Math.sqrt(S),v>=0&&(y=-y),x=v*y-S,c[a][a+1]=v-y,o=u;o<f;o++)p[o]=c[a][o]/x;for(o=u;o<l;o++){for(S=0,s=u;s<f;s++)S+=c[o][s]*c[a][s];for(s=u;s<f;s++)c[o][s]+=S*p[s]}}(w=Math.abs(d[a])+Math.abs(p[a]))>b&&(b=w)}for(a=f-1;-1!=a;a+=-1){if(0!=y){for(x=y*c[a][a+1],o=u;o<f;o++)h[o][a]=c[a][o]/x;for(o=u;o<f;o++){for(S=0,s=u;s<f;s++)S+=c[a][s]*h[s][o];for(s=u;s<f;s++)h[s][o]+=S*h[s][a]}}for(o=u;o<f;o++)h[a][o]=0,h[o][a]=0;h[a][a]=1,y=p[a],u=a}for(a=f-1;-1!=a;a+=-1){for(y=d[a],o=u=a+1;o<f;o++)c[a][o]=0;if(0!=y){for(x=c[a][a]*y,o=u;o<f;o++){for(S=0,s=u;s<l;s++)S+=c[s][a]*c[s][o];for(v=S/x,s=a;s<l;s++)c[s][o]+=v*c[s][a]}for(o=a;o<l;o++)c[o][a]=c[o][a]/y}else for(o=a;o<l;o++)c[o][a]=0;c[a][a]+=1}for(n*=b,s=f-1;-1!=s;s+=-1)for(var _=0;_<50;_++){var D=!1;for(u=s;-1!=u;u+=-1){if(Math.abs(p[u])<=n){D=!0;break}if(Math.abs(d[u-1])<=n)break}if(!D){i=0,S=1;var A=u-1;for(a=u;a<s+1&&(v=S*p[a],p[a]=i*p[a],!(Math.abs(v)<=n));a++)for(x=g(v,y=d[a]),d[a]=x,i=y/x,S=-v/x,o=0;o<l;o++)c[o][A]=(w=c[o][A])*i+(N=c[o][a])*S,c[o][a]=-w*S+N*i}if(N=d[s],u==s){if(N<0)for(d[s]=-N,o=0;o<f;o++)h[o][s]=-h[o][s];break}if(_>=49)throw"Error: no convergence.";for(b=d[u],y=g(v=(((w=d[s-1])-N)*(w+N)+((y=p[s-1])-(x=p[s]))*(y+x))/(2*x*w),1),v=v<0?((b-N)*(b+N)+x*(w/(v-y)-x))/b:((b-N)*(b+N)+x*(w/(v+y)-x))/b,i=1,S=1,a=u+1;a<s+1;a++){for(w=d[a],x=S*(y=p[a]),y*=i,N=g(v,x),p[a-1]=N,v=b*(i=v/N)+y*(S=x/N),y=-b*S+y*i,x=w*S,w*=i,o=0;o<f;o++)h[o][a-1]=(b=h[o][a-1])*i+(N=h[o][a])*S,h[o][a]=-b*S+N*i;for(N=g(v,x),d[a-1]=N,v=(i=v/N)*y+(S=x/N)*w,b=-S*y+i*w,o=0;o<l;o++)c[o][a-1]=(w=c[o][a-1])*i+(N=c[o][a])*S,c[o][a]=-w*S+N*i}p[u]=0,p[s]=v,d[s]=b}for(a=0;a<d.length;a++)d[a]<n&&(d[a]=0);for(a=0;a<f;a++)for(o=a-1;o>=0;o--)if(d[o]<d[a]){for(i=d[o],d[o]=d[a],d[a]=i,s=0;s<c.length;s++)t=c[s][a],c[s][a]=c[s][o],c[s][o]=t;for(s=0;s<h.length;s++)t=h[s][a],h[s][a]=h[s][o],h[s][o]=t;a=o}return{U:c,S:d,V:h}},M=function(){var t,n,r,i,a,o,s,u,c,l,f=e.vec3,p=e.mat3,d=function(e,t){if(f.set(t,0,0,0),0!==e.length){for(var n=0;n<e.length;++n)f.add(t,t,e[n].pos());f.scale(t,t,1/e.length)}},h=(t=f.create(),n=f.create(),function(e,r,i,a,o){o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=0,o[6]=0,o[7]=0,o[8]=0;for(var s=0;s<r.length;++s){f.sub(t,e[s].pos(),i),f.sub(n,r[s].pos(),a);var u=t,c=n;o[0]+=u[0]*c[0],o[1]+=u[0]*c[1],o[2]+=u[0]*c[2],o[3]+=u[1]*c[0],o[4]+=u[1]*c[1],o[5]+=u[1]*c[2],o[6]+=u[2]*c[0],o[7]+=u[2]*c[1],o[8]+=u[2]*c[2]}});function m(e){if(null==e||"all"===e)return null;if("backbone"===e)return{CA:!0,C:!0,O:!0,N:!0};if(void 0!==e.substr){for(var t={},n=e.split(","),r=0;r<n.length;++r)t[n[r].trim()]=!0;return t}for(t={},r=0;r<e.length;++r)t[e[r]]=!0;return t}function g(e,t,n,r,i){for(var a=e.atoms(),o=t.atoms(),s=0;s<a.length;++s){var u=a[s];if(null===i||!0===i[u.name()])for(var c=0;c<o.length;++c){var l=o[c];if(l.name()===u.name()){n.push(u),r.push(l);break}}}}function v(e,t,n,r){for(var i=e.full().createEmptyView(),a=t.full().createEmptyView(),o=Math.min(e.chains().length,t.chains().length),s=m(n),u=0;u<o;++u){var c=e.chains()[u],l=t.chains()[u],f=r(c,l),p=f[0],d=f[1];if(p.length!==d.length)return console.error("chains",c.name()," and",l.name()," do not contain the same number of residues."),null;for(var h=i.addChain(c),v=a.addChain(l),y=0;y<p.length;++y){var x=p[y],b=d[y],w=[],N=[];if(g(x,b,w,N,s),0!==w.length)for(var S=h.addResidue(x),_=v.addResidue(b),D=0;D<w.length;++D)S.addAtom(w[D]),_.addAtom(N[D])}}return[i,a]}return{superpose:(r=f.create(),i=f.create(),a=f.create(),o=p.create(),s=p.create(),u=p.create(),c=p.create(),l=p.create(),function(e,t){var n=e.atoms(),m=t.atoms();if(d(m,r),d(n,i),n.length!==m.length)return console.error("atom counts do not match ("+n.length+"in structure vs "+m.length+" in reference)"),!1;if(n.length<3)return console.error("at least 3 atoms are required for superposition"),!1;h(n,m,i,r,s);var g=A([[s[0],s[1],s[2]],[s[3],s[4],s[5]],[s[6],s[7],s[8]]]);c[0]=g.U[0][0],c[1]=g.U[0][1],c[2]=g.U[0][2],c[3]=g.U[1][0],c[4]=g.U[1][1],c[5]=g.U[1][2],c[6]=g.U[2][0],c[7]=g.U[2][1],c[8]=g.U[2][2];var v=p.determinant(c);l[0]=g.V[0][0],l[1]=g.V[0][1],l[2]=g.V[0][2],l[3]=g.V[1][0],l[4]=g.V[1][1],l[5]=g.V[1][2],l[6]=g.V[2][0],l[7]=g.V[2][1],l[8]=g.V[2][2];var y=p.determinant(l);p.identity(u),v*y<0&&(console.log("determinants smaller than zero!"),u[8]=-1,p.mul(c,c,u)),console.log(p.str(c)),p.mul(o,p.transpose(l,l),c);for(var x=e.full().atoms(),b=0;b<x.length;++b){var w=x[b];f.sub(a,w.pos(),i),f.transformMat3(a,a,o),f.add(a,r,a),w.setPos(a)}return!0}),matchResiduesByNum:function(e,t,n){return v(e,t,n,(function(e,t){for(var n=[],r=[],i=e.residues(),a=0;a<i.length;++a){var o=t.residueByRnum(i[a].num());null!==o&&(n.push(i[a]),r.push(o))}return[n,r]}))},matchResiduesByIndex:function(e,t,n){return v(e,t,n,(function(e,t){return[e.residues(),t.residues()]}))},parseAtomNames:m,addAtomsPresentInBoth:g}}(),P=function(t){var n,r,i=e.vec3,a=(n=i.create(),r=i.create(),function(e,t,a,o){for(var s=Math.max(0,t-2);s<=t;++s)for(var u=2;u<5;++u)if(!(s+u>=e.length())){var c=i.dist(e.posAt(n,s),e.posAt(r,s+u));if(Math.abs(c-a[u-2])>o)return!1}return!0}),o=function(e,t){return a(e,t,[5.45,5.18,6.37],2.1)},s=function(e,t){return a(e,t,[6.1,10.4,13],1.42)};function u(e){for(var t=0;t<e.length();++t)o(e,t)?e.residueAt(t).setSS("H"):s(e,t)?e.residueAt(t).setSS("E"):e.residueAt(t).setSS("C")}return{Mol:P.Mol,MolView:P.MolView,assignHelixSheet:function(e){console.time("mol.assignHelixSheet");for(var t=e.chains(),n=0;n<t.length;++n)t[n].eachBackboneTrace(u);console.timeEnd("mol.assignHelixSheet")},superpose:t.superpose,matchResiduesByIndex:t.matchResiduesByIndex,matchResiduesByNum:t.matchResiduesByNum}}(M),E=function(t){var n=e.vec3,r=e.mat4;function i(){this._assemblies={},this._current=null}function a(e){if(" "!==e[0]){var t=e.trim();if(4===t.length){for(var n=0,r=t.charCodeAt(n);n<4&&(r<65||r>122||r>90&&r<97);)++n,r=t.charCodeAt(n);return t[n]}var i=t.charCodeAt(0);return i>=48&&i<=57?t[1]:t.substr(0,2)}return e[1]}function o(e){this._helices=[],this._sheets=[],this._conect=[],this._serialToAtomMap={},this._structure=new P.Mol,this._remark350Reader=new i,this._currChain=null,this._currRes=null,this._currAtom=null,this._options={},this._options.conectRecords=!!e.conectRecords}function s(e){return e.split(/\r\n|\r|\n/g)}function u(e,t){console.time("pdb");for(var n=t||{},r=s(e),i=new o(n),a=[],u=0;u<r.length;u++){var c=i.processLine(r[u]);if(c===i.ERROR)return console.timeEnd("pdb"),null;if(c!==i.CONTINUE){var l=i.finish();if(null!==l&&a.push(l),c!==i.MODEL_COMPLETE||!n.loadAllModels)break}}var f=i.finish();return null!==f&&a.push(f),console.timeEnd("pdb"),n.loadAllModels?a:a[0]}function c(){this._structure=new P.Mol,this._reset(),this._sawEnd=!1}function l(e){console.time("sdf");for(var t=new c,n=s(e),r=0;r<n.length&&t.processLine(n[r]);r++);var i=t.finish();return console.timeEnd("sdf"),i}function f(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onload=function(){n.response&&t(n.response)},n.send(null)}return i.prototype={assemblies:function(){var e=[];for(var t in this._assemblies)this._assemblies.hasOwnProperty(t)&&e.push(this._assemblies[t]);return e},assembly:function(e){return this._assemblies[e]},nextLine:function(e){if("B"===(e=e.substr(11))[0]&&"BIOMOLECULE:"===e.substr(0,12)){var n=e.substr(13).trim();return this._currentAssembly=new t.Assembly(n),void(this._assemblies[n]=this._currentAssembly)}if("APPLY THE FOLLOWING TO CHAINS:"!==e.substr(0,30)&&"                   AND CHAINS:"!==e.substr(0,30)){if("  BIOMT"===e.substr(0,7)){for(var i=parseInt(e[7],10)-1,a=0;" "!==e[12+a];)a+=1;var o=parseFloat(e.substr(13+a,9)),s=parseFloat(e.substr(23+a,9)),u=parseFloat(e.substr(33+a,9)),c=parseFloat(e.substr(43+a,14));return this._currentMatrix[0+i]=o,this._currentMatrix[4+i]=s,this._currentMatrix[8+i]=u,this._currentMatrix[12+i]=c,void(2===i&&(this._currentSymGen.addMatrix(this._currentMatrix),this._currentMatrix=r.create()))}}else{var l=e.substr(30).split(",");"A"===e[0]&&(this._currentSymGen=new t.SymGenerator,this._currentAssembly.addGenerator(this._currentSymGen)),this._currentMatrix=r.create();for(var f=0;f<l.length;++f){var p=l[f].trim();p.length&&this._currentSymGen.addChain(p)}}}},o.prototype={CONTINUE:1,MODEL_COMPLETE:2,FILE_END:3,ERROR:4,parseHelixRecord:function(e){var t=parseInt(e.substr(21,4),10),n=" "===e[25]?"\0":e[25],r=parseInt(e.substr(33,4),10);return this._helices.push({first:[t,n],last:[r," "===e[37]?"\0":e[37]],chainName:e[19]}),!0},parseSheetRecord:function(e){var t=parseInt(e.substr(22,4),10),n=" "===e[26]?"\0":e[26],r=parseInt(e.substr(33,4),10);return this._sheets.push({first:[t,n],last:[r," "===e[37]?"\0":e[37]],chainName:e[21]}),!0},parseAndAddAtom:function(e){var t=e[16];if(" "!==t&&"A"!==t)return!0;var r="H"===e[0],i=e[21],o=e.substr(17,3).trim(),s=e.substr(12,4),u=s.trim(),c=parseInt(e.substr(22,4),10);c!=c&&(c=1);var l=" "===e[26]?"\0":e[26],f=!1,p=!1;this._currChain&&this._currChain.name()===i||(p=!0,f=!0),this._currRes&&this._currRes.num()===c&&this._currRes.insCode()===l||(f=!0),p&&(this._currChain=this._structure.chain(i)||this._structure.addChain(i)),f&&(this._currRes=this._currChain.addResidue(o,c,l));for(var d=n.create(),h=0;h<3;++h)d[h]=parseFloat(e.substr(30+8*h,8));var m=e.substr(76,2).trim();""===m&&(m=a(s));var g=parseFloat(e.substr(54,6).trim()),v=parseFloat(e.substr(60,6).trim()),y=this._currRes.addAtom(u,d,m,r,isNaN(g)?null:g,isNaN(v)?null:v);if(this._options.conectRecords){var x=parseInt(e.substr(6,5).trim(),10);this._serialToAtomMap[x]=y}return!0},parseConectRecord:function(e){for(var t=parseInt(e.substr(6,5).trim(),10),n=[],r=0;r<4;++r){var i=parseInt(e.substr(11+5*r,6).trim(),10);isNaN(i)||i>t||n.push(i)}return this._conect.push({from:t,to:n}),!0},processLine:function(e){var t=e.substr(0,6);return"ATOM  "===t||"HETATM"===t?this.parseAndAddAtom(e)?this.CONTINUE:this.ERROR:"REMARK"===t?("350"===e.substr(7,3)&&this._remark350Reader.nextLine(e),this.CONTINUE):"HELIX "===t?this.parseHelixRecord(e)?this.CONTINUE:this.ERROR:"SHEET "===t?this.parseSheetRecord(e)?this.CONTINUE:this.ERROR:this._options.conectRecords&&"CONECT"===t?this.parseConectRecord(e)?this.CONTINUE:this.ERROR:"END   "===t?this.FILE_END:"ENDMDL"===t?this.MODEL_COMPLETE:this.CONTINUE},finish:function(){if(null===this._currChain)return null;var e,t=null;for(e=0;e<this._sheets.length;++e){var n=this._sheets[e];(t=this._structure.chain(n.chainName))&&t.assignSS(n.first,n.last,"E")}for(e=0;e<this._helices.length;++e){var r=this._helices[e];(t=this._structure.chain(r.chainName))&&t.assignSS(r.first,r.last,"H")}this._structure.setAssemblies(this._remark350Reader.assemblies()),this._options.conectRecords&&this._assignBondsFromConectRecords(this._structure),this._structure.deriveConnectivity(),console.log("imported",this._structure.chains().length,"chain(s),",this._structure.residueCount(),"residue(s)");var i=this._structure;return this._structure=new P.Mol,this._currChain=null,this._currRes=null,this._currAtom=null,i},_assignBondsFromConectRecords:function(e){for(var t=0;t<this._conect.length;++t)for(var n=this._conect[t],r=this._serialToAtomMap[n.from],i=0;i<n.to.length;++i)e.connect(r,this._serialToAtomMap[n.to[i]])}},c.prototype={processLine:function(e){var t=this._state;if(t<3){if(0===t){var n=e.trim();if(0===n.length)return!1;this._title=n}return this._sawEnd=!1,this._state++,!0}if(3===t){if(this._expectedAtomCount=parseInt(e.substr(0,3).trim(),10),this._expectedBondCount=parseInt(e.substr(3,3).trim(),10),isNaN(this._expectedAtomCount)||isNaN(this._expectedBondCount))return console.error("invalid bond definition"),!1;this._state++;var r=""+(this._structure.chains().length+1);this._currentChain=this._structure.addChain(r),this._currentResidue=this._currentChain.addResidue(this._title,1)}if(4===t){for(var i=[0,0,0],a=0;a<3;++a)if(i[a]=parseFloat(e.substr(10*a,10).trim()),isNaN(i[a]))return console.error("invalid atom position"),!1;var o=e.substr(31,3).trim();this._currentResidue.addAtom(o,i,o,!1),this._atomCount++,this._atomCount===this._expectedAtomCount&&this._state++}if(5===t){var s=parseInt(e.substr(0,3).trim(),10)-1,u=parseInt(e.substr(3,3).trim(),10)-1;if(isNaN(s)||isNaN(u))return console.error("invalid bond definition"),!1;var c=this._currentResidue.atoms();this._structure.connect(c[s],c[u]),this._bondCount++,this._bondCount===this._expectedBondCount&&this._state++}return"M  END"===e.substr(0,6)&&(this._sawEnd=!0,this._state++),"$$$$"===e.substr(0,4)&&this._reset(),!0},_reset:function(){this._state=0,this._currentResidue=null,this._currentChain=null,this._expectedAtomCount=null,this._expectedBondount=null,this._atomCount=0,this._bondCount=0,this._title=""},finish:function(){return this._sawEnd?this._structure:(console.error("truncated SDF file"),null)}},{pdb:u,sdf:l,Remark350Reader:i,fetchPdb:function(e,t,n){f(e,(function(e){var r=u(e,n);t(r)}))},fetchSdf:function(e,t){f(e,(function(e){var n=l(e);t(n)}))},guessAtomElementFromName:a}}(N),C=function(){var t,n,r=e.vec3,i=e.mat3,a=(t=r.create(),n=r.create(),function(e,i){r.set(t,0,0,0);var a=0;e.eachCentralAtom((function(e,n){r.add(t,t,n),a+=1})),0!==a&&(r.scale(t,t,1/a),i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=0,i[6]=0,i[7]=0,i[8]=0,e.eachCentralAtom((function(e,a){r.sub(n,a,t);var o=n[0],s=n[1],u=n[2];i[0]+=s*s+u*u,i[1]-=o*s,i[2]-=o*u,i[5]-=s*u,i[4]+=o*o+u*u,i[8]+=o*o+s*s})),i[3]=i[1],i[6]=i[2],i[7]=i[5])});return{principalAxes:function(){var e=i.create(),t=i.create(),n=r.create(),o=r.create(),s=r.create(),u=r.create(),c=r.create(),l=r.create(),p=r.create();return function(d){a(d,e);var h=f.diagonalizer(e);i.fromQuat(t,h);var m=!0;d.eachCentralAtom((function(e,i){r.transformMat3(s,i,t),m?(r.copy(n,s),r.copy(o,s),m=!1):(r.min(n,n,s),r.max(o,o,s))})),r.sub(u,o,n);var g=[[u[0],0],[u[1],1],[u[2],2]];g.sort((function(e,t){return t[0]-e[0]}));var v=g[0][1],y=g[1][1];r.set(c,t[v+0],t[v+3],t[v+6]),r.set(l,t[y+0],t[y+3],t[y+6]),r.cross(p,c,l);var x=i.create();return x[0]=c[0],x[1]=l[0],x[2]=p[0],x[3]=c[1],x[4]=l[1],x[5]=p[1],x[6]=c[2],x[7]=l[2],x[8]=p[2],x}}()}}(),{Viewer:w.Viewer,isWebGLSupported:w.isWebGLSupported,io:E,color:t,mol:P,rgb:{setColorPalette:t.setColorPalette,hex2rgb:t.hex2rgb},vec3:e.vec3,vec4:e.vec4,mat3:e.mat3,mat4:e.mat4,quat:e.quat,viewpoint:C}}(),e.exports=t})),UD={structure:{position:"relative",borderStyle:"solid",borderColor:"black",borderWidth:"1px",paddingTop:"2px",margin:"1px",display:"flex",flexDirection:"column"},structureName:{position:"absolute",bottom:"2px",right:"2px",fontSize:"small",zIndex:"1",background:"rgba(255, 255, 255, 0.8)"},structureLabel:{position:"absolute",bottom:"2px",left:"2px",fontSize:"small",zIndex:"1",background:"rgba(255, 255, 255, 0.8)"},structureTop:{paddingLeft:"2px",paddingRight:"2px",height:"1.5em",zIndex:"1"},closeButton:{float:"right"," cursor":"pointer"},structurePv:{position:"absolute"," top":"0"," left":"0"}};function jD(e){var t=e.jbrequire,n=t("react"),r=t("@material-ui/core/styles").withStyles,i=t("@material-ui/core"),a=i.Select,o=i.MenuItem,u=function(e){d(r,e);var t=g(r);function r(e){var i;return s(this,r),(i=t.call(this,e)).pvDivRef=n.createRef(),i}return c(r,[{key:"render",value:function(){var e=this.props,t=e.structure,r=e.config,i=r.width,s=r.height,u=e.classes,c=Array.isArray(t.structureInfo),l=!c&&t.structureInfo.pdb;return n.createElement("div",{className:u.structure,style:{width:i,height:s}},n.createElement("div",{className:u.structureName},t.node),l&&n.createElement("div",{className:u.structureLabel},l),n.createElement("div",{className:u.structureTop},c&&n.createElement(a,{value:"",displayEmpty:!0,onChange:this.handleSelectStructure.bind(this)},n.createElement(o,{value:"",disabled:!0},"Select a structure"),t.structureInfo.map((function(e,t){return n.createElement(o,{key:t,value:e},e.pdb)}))),n.createElement("div",{className:u.closeButton})),n.createElement("div",{className:u.structurePv,ref:this.pvDivRef}))}},{key:"getPvConfig",value:function(e){return e.pvConfig||{width:e.width,height:e.height,antialias:!0,quality:"medium"}}},{key:"pdbUrlPrefix",value:function(){return"https://files.rcsb.org/download/"}},{key:"pdbUrlSuffix",value:function(){return".pdb"}},{key:"componentDidMount",value:function(){this.updatePv()}},{key:"componentDidUpdate",value:function(){this.updatePv()}},{key:"updatePv",value:function(){Array.isArray(this.props.structure.structureInfo)||this.loadStructure()}},{key:"handleSelectStructure",value:function(e){this.props.updateStructure({structureInfo:e.target.value})}},{key:"loadStructure",value:function(){var e=this;if(!this.props.structure.pdbFetchInitiated){this.props.updateStructure({pdbFetchInitiated:!0});var t=this.props.config,n=this.getPvConfig(t),r=GD.Viewer(this.pvDivRef.current,n),i=!t.noRemoteStructures,a=(i?this.pdbUrlPrefix():t.pdbPrefix||"")+this.props.structure.structureInfo.pdb+(i?this.pdbUrlSuffix():t.pdbSuffix||"");GD.io.fetchPdb(a,(function(t){e.props.updateStructure({pdb:t,viewer:r}),e.props.setViewType(),r.centerOn(t),r.autoZoom(),e.pvDivRef.current.addEventListener("mousemove",(function(t){var n=r.boundingClientRect(),i=r.pick({x:t.clientX-n.left,y:t.clientY-n.top});if(i){var a=i.target().residue(),o=a.num(),s=a.chain().name();e.props.handleMouseoverResidue(s,o)}else e.props.handleMouseoverResidue(null,null)})),e.pvDivRef.current.addEventListener("mouseleave",(function(t){e.props.handleMouseoverResidue(null,null)}))}))}}},{key:"handleClose",value:function(e){e.preventDefault(),this.props.handleCloseStructure(this.props.structure)}}]),r}(n.Component);return r(UD)(u)}var YD={panel:{flexShrink:"0",display:"flex",flexDirection:"column"},structures:{display:"flex",flexDirection:"row",overflowX:"scroll",overflowY:"auto"}};function HD(e){var t=e.jbrequire,n=t("react"),r=t("@material-ui/core/styles").withStyles,i=t("@material-ui/core"),a=i.Select,o=i.MenuItem,u=i.FormControlLabel,l=i.Checkbox,f=t(jD),h=function(e){d(r,e);var t=g(r);function r(e){var n;return s(this,r),(n=t.call(this,e)).state={config:n.props.initConfig,viewMode:"cartoon",colorScheme:"ssSuccession"},n}return c(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.classes,i=t.structures,s=t.handleCloseStructure,c=t.updateStructure,p=t.handleMouseoverResidue,d=this.state,h=d.colorScheme,m=d.config,g=m.showMouseoverLabel;return i.length?n.createElement("div",{className:r.panel},n.createElement("div",null,n.createElement(a,{value:d.viewMode,onChange:this.handleSelectViewType.bind(this)},n.createElement(o,{value:"cartoon"},"Cartoons"),n.createElement(o,{value:"tube"},"Tube"),n.createElement(o,{value:"spheres"},"Spheres"),n.createElement(o,{value:"ballsAndSticks"},"Balls and sticks")),n.createElement(a,{value:h,onChange:this.handleSelectColorScheme.bind(this)},n.createElement(o,{value:"uniform"},"Uniform"),n.createElement(o,{value:"byChain"},"Chain"),n.createElement(o,{value:"bySS"},"Secondary structure"),n.createElement(o,{value:"ssSuccession"},"Secondary structure gradient"),n.createElement(o,{value:"rainbow"},"Rainbow")),n.createElement(u,{control:n.createElement(l,{checked:g,onChange:this.handleMouseoverLabelConfig.bind(this)}),label:"Show label on hover"})),n.createElement("div",{className:r.structures},i.map((function(t){return n.createElement(f,{key:t.key,structure:t,config:m,setViewType:function(){return e.setViewType(t)},updateStructure:function(e){return c(t,e)},handleCloseStructure:s,handleMouseoverResidue:function(e,n){return p(t,e,n)}})})))):""}},{key:"handleMouseoverLabelConfig",value:function(e){this.setState(p(p({},this.state.config),{},{showMouseoverLabel:e.target.checked}))}},{key:"redrawStructureDelay",value:function(){return 500}},{key:"setViewType",value:function(e,t,n){var r=this;t=t||this.state.viewMode,n=n||this.state.colorScheme;var i=e.pdb,a=e.viewer;if(a){a.clear();var o=a.renderAs("protein",i,t,{color:GD.color[n]()});this.props.updateStructure(e,{geometry:o})}this.props.structures.forEach((function(e){r.props.updateStructure(e,{trueAtomColor:{}})})),this.requestRedrawStructures()}},{key:"handleSelectViewType",value:function(e){var t=this,n=e.target.value;this.setState({viewMode:n}),this.props.structures.forEach((function(e){return t.setViewType(e,n)}))}},{key:"handleSelectColorScheme",value:function(e){var t=this,n=e.target.value;this.setState({colorScheme:n}),this.props.structures.forEach((function(e){return t.setViewType(e,void 0,n)}))}},{key:"addLabelToStructuresOnMouseover",value:function(e){var t=this,n=this.state.config.label||{font:"sans-serif",fontSize:12,fontColor:"#f62",fillStyle:"white",backgroundAlpha:.4},r=this.state.config.atomHighlightColor||"red";this.props.structures.forEach((function(i){var a=t.props.alignIndex.alignColToSeqPos[i.node],o=t.props.seqCoords[i.node]||{startPos:1};if(a){var s=a[e];t.removeMouseoverLabels(i),Array.isArray(i.structureInfo)||i.structureInfo.chains.forEach((function(e){var a=s+o.startPos;if((!e.startPos||a>=e.startPos)&&(!e.endPos||a<=e.endPos)){var u=e.chain;if(i.pdb){var c=i.pdb.residueSelect((function(e){return e.num()===a&&(void 0===u||e.chain().name()===u)}));c&&c.eachResidue((function(e){console.log({res:e});var a="mouseover".concat(i.mouseoverLabel.length+1);console.log(t.state.config),i.viewer.label(a,e.qualifiedName(),e.centralAtom().pos(),n),e.atoms().forEach((function(e){if(!i.trueAtomColor[e.index()]){var t=[0,0,0,0];i.geometry.getColorForAtom(e,t),i.trueAtomColor[e.index()]=t}})),t.setColorForAtoms(i.geometry,e.atoms(),r),i.mouseoverLabel.push({label:a,res:e})}))}}}))}})),this.requestRedrawStructures()}},{key:"removeLabelFromStructuresOnMouseout",value:function(){var e=this;this.props.structures.forEach((function(t){e.removeMouseoverLabels(t)})),this.requestRedrawStructures()}},{key:"removeMouseoverLabels",value:function(e){var t=this;e.mouseoverLabel.forEach((function(n){e.viewer.rm(n.label);var r={};n.res.atoms().forEach((function(t){var n=e.trueAtomColor[t.index()],i=n.toString();r[i]=r[i]||{trueColor:n,atoms:[]},r[i].atoms.push(t)})),Object.keys(r).forEach((function(n){return t.setColorForAtoms(e.geometry,r[n].atoms,r[n].trueColor)}))})),e.mouseoverLabel=[]}},{key:"setColorForAtoms",value:function(e,t,n){var r=e.structure().createEmptyView();t.forEach((function(e){return r.addAtom(e)})),e.colorBy(GD.color.uniform(n),r)}},{key:"requestRedrawStructures",value:function(){var e=this;this.props.setTimer("redraw",this.redrawStructureDelay(),(function(){e.props.structures.filter((function(e){return e.viewer})).forEach((function(e){return e.viewer.requestRedraw()}))}))}}]),r}(n.Component);return r(YD)(h)}var KD={MSA:{display:"flex",flexDirection:"column"},treeAlignment:{display:"flex",flexDirection:"row",overflow:"hidden",borderStyle:"solid",borderColor:"black",borderWidth:"1px"}};function QD(e){var t=e.jbrequire,n=t("react"),r=t("@material-ui/core/styles").withStyles,i=t("mobx-react").observer,a=t(FD),o=t(kD),u=t(zD),l=t(HD),f=function(e){d(r,e);var t=g(r);function r(e){var i;s(this,r),i=t.call(this,e);var a=Object.assign(i.initialView(),e.view||{});return i.state={view:a},i.rowsRef=n.createRef(),i.msaRef=n.createRef(),i.structRef=n.createRef(),i}return c(r,[{key:"initialView",value:function(){return{collapsed:{},forceDisplayNode:{},nodeScale:{},columnScale:{},disableTreeEvents:!1,animating:!1,structure:{openStructures:[]}}}},{key:"collapseAnimationFrames",value:function(){return 10}},{key:"collapseAnimationDuration",value:function(){return 200}},{key:"collapseAnimationMaxFrameSkip",value:function(){return 8}},{key:"mouseoverLabelDelay",value:function(){return 100}},{key:"resetView",value:function(){this.setState({view:this.initialView()})}},{key:"getComputedView",value:function(e){var t=this,n=this.props,r=n.treeIndex,i=n.alignIndex,a=(e=e||this.state.view).collapsed,o=e.forceDisplayNode,s=i.rowDataAsArray,u={},c={};!function e(t,n){u[t]=u[n]||a[n];var i=r.children[t];i&&i.forEach((function(n){return e(n,t)}))}(r.root),r.nodes.forEach((function(e){return c[e]=!u[e]&&(0===r.children[e].length||o[e])}));var l=new Array(i.columns).fill(!1);return r.nodes.filter((function(e){return c[e]})).forEach((function(e){s[e]&&s[e].forEach((function(e,n){t.props.isGapChar(e)||(l[n]=!0)}))})),p({ancestorCollapsed:u,nodeVisible:c,columnVisible:l},e)}},{key:"layoutTree",value:function(e){var t=this.props,n=t.computedTreeConfig,r=t.treeIndex,i=e.nodeVisible,a=e.nodeScale,o=n.genericRowHeight,s=n.nodeHandleRadius,u=n.treeStrokeWidth,c=n.availableTreeWidth,l={},f={},p=[],d={},h=[],m=0,g=r.nodes.map((function(e){var t=void 0!==a[e]?a[e]:1,n=t*(i[e]?o:0),g=m;return l[e]=s+u+c*r.distFromRoot[e]/r.maxDistFromRoot,f[e]=g+n/2,d[e]=n,p.push(t),h.push(n),m+=n,g}));return{nx:l,ny:f,computedRowScale:p,nodeHeight:d,rowHeight:h,rowY:g,treeHeight:m,computedView:e}}},{key:"layoutAlignment",value:function(e){var t=this,n=this.props,r=n.alignIndex,i=n.computedFontConfig,a=i.genericRowHeight,o=i.charFont,s=0,u={};r.chars.forEach((function(e){var n=t.create("canvas",null,null,{width:a,height:a}).getContext("2d");n.font=o,u[e]=n.measureText(e),s=Math.max(s,Math.ceil(u[e].width))}));for(var c=a,l=0,f=[],p=[],d=[],h=0;h<r.columns;++h)if(f.push(l),e.columnVisible[h]){var m=e.columnScale[h];void 0===m&&(m=1),d.push(m);var g=m*s;p.push(g),l+=g}else d.push(0),p.push(0);return{charMetrics:u,charWidth:s,charHeight:c,colX:f,colWidth:p,computedColScale:d,alignWidth:l}}},{key:"create",value:function(e,t,n,r){var i=document.createElement(e);return t&&t.appendChild(i),r&&Object.keys(r).filter((function(e){return void 0!==r[e]})).forEach((function(e){return i.setAttribute(e,r[e])})),n&&(i.style=n),i}},{key:"render",value:function(){var e=this,t=this.getComputedView(),r=this.layoutTree(t),i=this.layoutAlignment(t),s=this.props,c=s.classes,f=s.model;return this.treeHeight=r.treeHeight,this.alignWidth=i.alignWidth,n.createElement("div",{className:c.MSA,style:{width:this.props.config.containerWidth,height:this.props.config.containerHeight}},n.createElement("div",{className:c.treeAlignment,ref:this.msaRef,onMouseDown:this.handleMouseDown.bind(this),style:{width:this.props.config.containerWidth,height:r.treeAlignHeight}},n.createElement(a,{config:this.props.config,computedTreeConfig:this.props.computedTreeConfig,treeIndex:this.props.treeIndex,treeLayout:r,computedView:t,scrollTop:this.state.scrollTop,handleNodeClick:this.handleNodeClick.bind(this)}),n.createElement(o,{data:this.props.data,view:this.state.view,config:this.props.config,computedFontConfig:this.props.computedFontConfig,treeIndex:this.props.treeIndex,alignIndex:this.props.alignIndex,treeLayout:r,alignLayout:i,computedView:t,scrollTop:this.state.scrollTop,handleNameClick:this.handleNameClick.bind(this)}),n.createElement(u,{ref:this.rowsRef,data:this.props.data,view:this.state.view,config:this.props.config,computedFontConfig:this.props.computedFontConfig,treeIndex:this.props.treeIndex,alignIndex:this.props.alignIndex,isGapChar:this.props.isGapChar,treeLayout:r,alignLayout:i,setClientSize:this.setAlignmentClientSize.bind(this),handleScroll:this.handleAlignmentScroll.bind(this),handleMouseDown:this.handleAlignmentMouseDown.bind(this),handleAlignCharClick:this.handleAlignCharClick.bind(this),handleAlignCharMouseOver:this.handleAlignCharMouseOver.bind(this),handleAlignCharMouseOut:this.handleAlignCharMouseOut.bind(this),handleMouseLeave:function(){return e.delayedSetHoverColumn(null)},scrollLeft:f.alignScrollLeft,scrollTop:f.scrollTop,hoverColumn:f.hoverColumn})),n.createElement(l,{ref:this.structRef,initConfig:this.props.config.structure,seqCoords:this.props.data.seqCoords,alignIndex:this.props.alignIndex,structures:this.state.view.structure.openStructures,updateStructure:this.updateStructure.bind(this),handleCloseStructure:this.handleCloseStructure.bind(this),handleMouseoverResidue:this.handleMouseoverStructureResidue.bind(this),setTimer:this.setTimer.bind(this)}))}},{key:"componentDidMount",value:function(){window.addEventListener("mouseleave",this.handleMouseLeave.bind(this)),window.addEventListener("mouseup",this.handleMouseUp.bind(this)),window.addEventListener("mousemove",this.handleMouseMove.bind(this)),this.msaRef.current.addEventListener("wheel",this.handleMouseWheel.bind(this),{passive:!1})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mouseleave",this.handleMouseLeave.bind(this)),window.removeEventListener("mouseup",this.handleMouseUp.bind(this)),window.removeEventListener("mousemove",this.handleMouseMove.bind(this)),this.msaRef.current.removeEventListener("wheel",this.handleMouseWheel.bind(this))}},{key:"setAlignmentClientSize",value:function(e,t){this.alignmentClientWidth=e,this.alignmentClientHeight=t}},{key:"handleNameClick",value:function(e){var t=this.props.data.structure;this.nStructs=(this.nStructs||0)+1;var n=t[e];Array.isArray(n)&&1===n.length&&(n=n[0]);var r=this.state.view;r.structure.openStructures.push({node:e,structureInfo:n,startPos:this.props.data.seqCoords[e].startPos,mouseoverLabel:[],trueAtomColor:{},key:this.nStructs}),this.setState({view:r})}},{key:"updateStructure",value:function(e,t){var n=this.state.view;n.structure.openStructures=n.structure.openStructures.map((function(n){return n===e?Object.assign(n,t):n})),this.setState({view:n})}},{key:"handleCloseStructure",value:function(e){var t=this.state.view;t.structure.openStructures=t.structure.openStructures.filter((function(t){return t!==e})),this.setState({view:t})}},{key:"handleNodeClick",value:function(e){var t=this;if(this.scrolling)this.scrolling=!1;else if(!this.state.disableTreeEvents){var n=this.props,r=n.treeIndex,i=n.alignIndex,a=this.getComputedView(),o=a.collapsed,s=a.nodeScale,u=a.columnScale,c=a.forceDisplayNode,l=a.columnVisible,f=this.layoutAlignment(a),d=this.props.model.alignScrollLeft,h=d+this.alignmentClientWidth,m=this.collapseAnimationFrames(),g=m,v=o[e],y=p({},o);v?(o[e]=!1,delete y[e]):y[e]=!0;var x=p({},c);x[e]=!v;for(var b=this.getComputedView({collapsed:y,forceDisplayNode:x}),w=[],N=[],S=[],_=0;_<i.columns;++_){b.columnVisible[_]!==l[_]&&(b.columnVisible[e]?w:N).push(_);var D=f.colX[_];l[_]&&b.columnVisible[_]&&D>=d&&D+f.colWidth[_]<h&&S.push(_)}var A=this.centroidOfColumns(S,f)-this.props.model.alignScrollLeft,M=Date.now(),E=this.collapseAnimationDuration()/m;!function n(){var i,a,l=o;if(g){var f=(v?m+1-g:g)/(m+1);r.descendants[e].forEach((function(e){s[e]=f})),s[e]=1-f,N.forEach((function(e){return u[e]=f})),w.forEach((function(e){return u[e]=1-f})),c[e]=!0,i=!0,a=!0}else r.descendants[e].forEach((function(e){delete s[e]})),delete s[e],N.forEach((function(e){return delete u[e]})),w.forEach((function(e){return delete u[e]})),c[e]=!v,l=y,i=!1,a=!1;var d=p(p({},t.state.view),{},{collapsed:l,forceDisplayNode:c,nodeScale:s,columnScale:u,disableTreeEvents:i,animating:a}),h=t.getComputedView(d),x=t.layoutAlignment(h),b=t.boundAlignScrollLeft(t.centroidOfColumns(S,x)-A);window.requestAnimationFrame((function(){if(t.props.model.setScroll(b,t.props.model.scrollTop),t.setState({view:d}),g){var e=Date.now(),r=e-M,i=Math.max(0,E-r),a=Math.min(t.collapseAnimationMaxFrameSkip(),Math.ceil(r/E));g=Math.max(0,g-a),M=e,setTimeout(n,i)}}))}()}}},{key:"handleAlignmentScroll",value:function(e,t){e===this.props.model.alignScrollLeft&&t===this.props.model.scrollTop||this.props.model.setScroll(e,t)}},{key:"handleMouseWheel",value:function(e){var t=this;if(0!==e.deltaY){var n=e.deltaY*(e.deltaMode?this.props.config.genericRowHeight:1);e.preventDefault(),this.requestAnimationFrame((function(){t.props.model.setScroll(t.incAlignScrollLeft(e.deltaX),t.incScrollTop(n))}))}}},{key:"handleMouseDown",value:function(e){this.mouseDown=!0,this.lastY=e.pageY}},{key:"handleAlignmentMouseDown",value:function(e){this.alignMouseDown=!0,this.lastX=e.pageX}},{key:"handleAlignCharClick",value:function(e){this.panning=this.scrolling=!1}},{key:"handleAlignCharMouseOver",value:function(e){this.panning||this.scrolling||this.delayedSetHoverColumn(e.column)}},{key:"handleAlignCharMouseOut",value:function(e){}},{key:"delayedSetHoverColumn",value:function(e){var t=this;this.setMouseoverTimer((function(){t.setHoverColumn(e)}))}},{key:"setMouseoverTimer",value:function(e){this.setTimer("mouseover",this.mouseoverLabelDelay(),(function(){return window.requestAnimationFrame(e)}))}},{key:"setHoverColumn",value:function(e){this.props.model.setHoverColumn(e),null===e?this.structRef.current.removeLabelFromStructuresOnMouseout():this.structRef.current.addLabelToStructuresOnMouseover(e)}},{key:"handleMouseoverStructureResidue",value:function(e,t,n){var r=this;this.setMouseoverTimer((function(){var i=r.props.alignIndex.seqPosToAlignCol[e.node],a=e.structureInfo.chains.find((function(e){return e.chain===t}));r.setHoverColumn(i&&a&&n>=a.startPos&&n<=a.endPos?i[n-a.startPos]:null)}))}},{key:"handleMouseLeave",value:function(){this.alignMouseDown=!1,this.mouseDown=!1,this.panning=!1,this.scrolling=!1}},{key:"handleMouseUp",value:function(){this.alignMouseDown=!1,this.mouseDown=!1}},{key:"centroidOfColumns",value:function(e,t){return e.length&&e.reduce((function(e,n){return e+t.colX[n]+t.colWidth[n]/2}),0)/e.length}},{key:"incAlignScrollLeft",value:function(e){return this.boundAlignScrollLeft(this.props.model.alignScrollLeft+e)}},{key:"incScrollTop",value:function(e){return this.boundScrollTop(this.props.model.scrollTop+e)}},{key:"boundAlignScrollLeft",value:function(e){return Math.max(0,Math.min(this.alignWidth-this.alignmentClientWidth,e))}},{key:"boundScrollTop",value:function(e){return Math.max(0,Math.min(this.treeHeight-this.alignmentClientHeight,e))}},{key:"handleMouseMove",value:function(e){var t=this;(this.alignMouseDown||this.mousedown)&&e.preventDefault();var n=this.props.model,r=n.alignScrollLeft,i=n.scrollTop,a=!1;if(this.alignMouseDown){var o=e.pageX-this.lastX;o&&(r=this.incAlignScrollLeft(-o),this.panning=!0,a=!0)}else this.panning=!1;if(this.mouseDown){var s=e.pageY-this.lastY;s&&(i=this.incScrollTop(-s),this.scrolling=!0,a=!0)}else this.scrolling=!1;a&&this.requestAnimationFrame((function(){t.props.model.setScroll(r,i),t.lastX=e.pageX,t.lastY=e.pageY}))}},{key:"requestAnimationFrame",value:function(e){this.animationTimeout&&window.cancelAnimationFrame(this.animationTimeout),this.animationTimeout=window.requestAnimationFrame(e)}},{key:"setTimer",value:function(e,t,n){var r=this;this.timer=this.timer||{},this.clearTimer(this,e),this.timer[e]=window.setTimeout((function(){delete r.timer[e],n()}),t)}},{key:"clearTimer",value:function(e){this.timer&&this.timer[e]&&(window.clearTimeout(this.timer[e]),delete this.timer[e])}}]),r}(n.Component);return r(KD)(i(f))}var WD=C.Newick,$D={appBar:{display:"flex",flexDirection:"row",fontSize:"large",fontStyle:"italic"},appBarTitle:{textAlign:"left",paddingTop:"2px",paddingLeft:"2px"},appBarLink:{textAlign:"right",flexGrow:"1",padding:"2px"}};function XD(e){var t=e.jbrequire,n=t("react"),r=t("@material-ui/core/styles").withStyles,i=t(QD),a=function(e){d(l,e);var t,r,a,u=g(l);function l(e){var t;s(this,l),t=u.call(this,e);var r=e.config,i=void 0===r?{}:r,a=p(p({},t.defaultConfig()),i),o=a.genericRowHeight,c=a.nameFontSize,f=a.treeWidth,d=a.branchStrokeStyle,h=a.nodeHandleRadius,m={treeWidth:f,availableTreeWidth:f-h-2,genericRowHeight:o,branchStrokeStyle:d,nodeHandleStrokeStyle:d,nodeHandleRadius:h,nodeHandleClickRadius:a.nodeHandleClickRadius,nodeHandleFillStyle:a.nodeHandleFillStyle,collapsedNodeHandleFillStyle:a.collapsedNodeHandleFillStyle,rowConnectorDash:a.rowConnectorDash,treeStrokeWidth:1},g="".concat(o,"px ").concat("Menlo,monospace");return t.state={config:a,datasets:t.props.datasets||[],computedTreeConfig:m,computedFontConfig:{charFont:g,charFontName:"Menlo,monospace",color:a.color||OD[a.colorScheme],nameFontName:"inherit",nameFontSize:c,nameFontColor:"black",genericRowHeight:o}},t.divRef=n.createRef(),t.inputRef=n.createRef(),t.msaRef=n.createRef(),window.onpopstate=function(e){e&&e.state&&e.state.data?t.setDataset(e.state.data):window.location.reload()},t}return c(l,[{key:"handleDragEnter",value:function(e){e.stopPropagation(),e.preventDefault()}},{key:"handleDragOver",value:function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}},{key:"handleDrop",value:function(e){e.stopPropagation(),e.preventDefault(),this.openFiles(e.dataTransfer.files)}},{key:"handleSelectFile",value:function(e){this.openFiles(e.target.files)}},{key:"openFiles",value:function(e){var t=this;return Promise.all(Array.from(e).map((function(e){return t.openFile(e)})))}},{key:"openFile",value:function(e){var t=this;return new Promise((function(n,r){var i=new FileReader;i.onload=function(e){t.addDatasets(e.target.result,!0),n()},i.readAsText(e)}))}},{key:"addDatasets",value:function(e,t){var n=this,r=function(e){return"Alignment ".concat(n.state.datasets.length+(e||0)+1)},i=this.state.datasets;if(this.sniffStockholmRegex.test(e)){var a=M.parseAll(e);i=i.concat(a.map((function(e,t){var n;["DE","ID","AC"].forEach((function(t){!n&&e.gf[t]&&e.gf[t].length&&(n=e.gf[t][0])})),n=n||r(t);var i=["AC","ID"].reduce((function(t,n){return t||e.gf[n]&&e.gf[n][0]}),void 0);return{stockholmjs:e,name:n,id:i}})))}else try{var o=JSON.parse(e);Array.isArray(o)?i=i.concat(o):i.push(o)}catch(t){i.push({auto:e,name:r()})}i.length>this.state.datasets.length&&(t?this.setDataset(i[this.state.datasets.length],{datasets:i}):this.setState({datasets:i}),this.msaRef.current&&this.msaRef.current.resetView())}},{key:"setDataset",value:function(e,t){var n=this,r=this.datasetsLoaded=(this.datasetsLoaded||0)+1;this.indexData(e).then((function(e){return n.setState(p(p({datasetID:r,reconstructingAncestors:!1},e),t||{}))}))}},{key:"indexData",value:(a=o(A.mark((function e(t,n){var r,i,a,o;return A.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n||this.state.config,e.next=3,this.getData(r.cacheData?t:p({},t),r);case 3:return a=this.buildTreeIndex(i=e.sent),o=this.buildAlignmentIndex(i),e.abrupt("return",{data:i,treeIndex:a,alignIndex:o});case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"getData",value:(r=o(A.mark((function e(t,n){var r,i,a,s,u,c,l,f,p,d,h,m=this;return A.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.url){e.next=3;break}return e.next=3,Promise.all(Object.keys(t.url).filter((function(e){return!t[e]})).map(function(){var e=o(A.mark((function e(n){var r,i;return A.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=m.makeURL(t.url[n]),e.next=3,fetch(r);case 3:if(!(i=e.sent).ok){e.next=10;break}return e.next=7,i.text();case 7:t[n]=e.sent,e.next=11;break;case 10:throw new Error("HTTP ".concat(i.status," ").concat(i.statusText," ").concat(r));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:if(t.json&&Object.assign(t,"string"==typeof t.json?JSON.parse(t.json):t.json),t.auto)if(this.sniffStockholmRegex.test(t.auto))t.stockholm=t.auto;else if(this.sniffFastaRegex.test(t.auto))t.fasta=t.auto;else try{Object.assign(t,JSON.parse(t.auto))}catch(e){}if(t.branches&&t.rowData){e.next=20;break}if(!t.stockholm){e.next=10;break}this.unpackStockholm(t,n,t.stockholm),e.next=19;break;case 10:if(!t.stockholmjs){e.next=14;break}this.unpackStockholmJS(t,n,t.stockholmjs),e.next=19;break;case 14:if(!t.fasta){e.next=18;break}t.rowData=this.parseFasta(t.fasta),e.next=19;break;case 18:throw new Error("no sequence data");case 19:t.newick||t.newickjs?(r=new WD,i=t.newickjs=t.newickjs||r.parse(t.newick),a=0,s=function(e){return e.name=e.name||"node".concat(++a)},t.branches=[],function e(n){n.branchset&&n.branchset.forEach((function(r){t.branches.push([s(n),s(r),Math.max(r.length,0)]),e(r)}))}(i),t.root=s(i)):(u=Object.keys(t.rowData).sort(),c=u.map((function(e){return t.rowData[e]})),console.warn("Estimating phylogenetic tree (".concat(u.length," taxa)...")),l=T.calcFiniteDistanceMatrix(c),(f=new F.RapidNeighborJoining(l,u.map((function(e){return{name:e}})))).run(),p=f.getAsObject(),d=0,h=function(e){return e.taxon=e.taxon||{name:"node".concat(++d)},e.taxon.name},t.branches=[],function e(n){n.children.forEach((function(r){t.branches.push([h(n),h(r),Math.max(r.length,0)]),e(r)}))}(p),t.root=h(p));case 20:return this.guessSeqCoords(t),e.abrupt("return",t);case 22:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"guessSeqCoords",value:function(e){var t=this;e.seqCoords||(e.seqCoords={}),Object.keys(e.rowData).forEach((function(n){var r=t.countNonGapChars(e.rowData[n]);if(!e.seqCoords[n]){var i=t.nameEncodedCoordRegex.exec(n);if(i){var a=parseInt(i[1]),o=parseInt(i[2]);o+1-a===r&&(e.seqCoords[n]={startPos:a,endPos:o})}}e.seqCoords[n]||(e.seqCoords[n]={startPos:1,endPos:r})}))}},{key:"makeURL",value:function(e){return e.replace("%PUBLIC_URL%",process.env.PUBLIC_URL)}},{key:"unpackStockholm",value:function(e,t,n){var r=M.parse(n);this.unpackStockholmJS(e,t,r)}},{key:"unpackStockholmJS",value:function(e,t,n){var r=this,i=e.structure=e.structure||{};e.rowData=n.seqdata,this.guessSeqCoords(e),n.gf.NH&&!e.newick&&(e.newick=n.gf.NH.join("")),n.gs.DR&&!t.structure.noRemoteStructures&&Object.keys(n.gs.DR).forEach((function(a){var o=e.seqCoords[a],s=o.endPos-o.startPos;n.gs.DR[a].forEach((function(e){var n=r.pdbRegex.exec(e);if(n){var u=n[1].toLowerCase(),c=n[2],l=parseInt(n[3]),f=parseInt(n[4]),p=f-l,d=s===p;if(o.startPos<=f&&o.endPos>=l&&(d||!t.noPartialStructures)){i[a]=i[a]||[];var h,m=i[a].findIndex((function(e){return e.pdb===u}));m<0?i[a].push(h={pdb:u,chains:[]}):h=i[a][m],h.chains.push({chain:c,startPos:l,endPos:f})}else console.warn("ignoring structure ".concat(u," (").concat(l,"...").concat(f,") since it ").concat(d?"does not overlap with ".concat(a):"is not a full-length match to ".concat(a," (").concat(p,"!=").concat(s,")")))}}))}))}},{key:"componentDidMount",value:function(){this.divRef.current.addEventListener("dragover",this.handleDragOver.bind(this),!1),this.divRef.current.addEventListener("dragenter",this.handleDragEnter.bind(this),!1),this.divRef.current.addEventListener("drop",this.handleDrop.bind(this),!1),this.initDataset()}},{key:"componentWillUnmount",value:function(){this.divRef.current.removeEventListener("dragover",this.handleDragOver.bind(this),!1),this.divRef.current.removeEventListener("dragenter",this.handleDragEnter.bind(this),!1),this.divRef.current.removeEventListener("drop",this.handleDrop.bind(this))}},{key:"componentDidUpdate",value:function(){this.reconstructMissingNodes()}},{key:"initDataset",value:(t=o(A.mark((function e(){var t=this;return A.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.stockholm&&this.addDatasets(this.props.stockholm,!1),!this.props.dataurl){e.next=4;break}return e.next=4,fetch(this.makeURL(this.props.dataurl)).then(function(){var e=o(A.mark((function e(n){return A.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.ok){e.next=6;break}return e.t0=t,e.next=4,n.text();case 4:e.t1=e.sent,e.t0.addDatasets.call(e.t0,e.t1,!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:this.nDatasetsInitial=this.state.datasets&&this.state.datasets.length,(this.props.data||this.state.datasets.length)&&this.setDataset(this.props.data||this.getInitialDataset());case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getInitialDataset",value:function(){return this.state.datasets[0]}},{key:"reconstructMissingNodes",value:function(){var e,t=this,n=this.state.data;if(n){var r=n.branches,i=p({},n.rowData);n.branches.filter((function(e){return void 0===i[e[0]]})).length&&!this.state.reconstructingAncestors&&(this.setState({reconstructingAncestors:!0}),e=ID({branches:r,rowData:i}).then((function(e){t.incorporateAncestralReconstruction(e.ancestralRowData)})))}else e=Promise.resolve();return e}},{key:"fn2workerURL",value:function(e){var t=new Blob(["(".concat(e.toString(),")()")],{type:"application/javascript"});return URL.createObjectURL(t)}},{key:"incorporateAncestralReconstruction",value:function(e){var t=this.state.data,n=p(p({},t.rowData),e);Object.assign(t,{rowData:n}),this.setDataset(t)}},{key:"defaultColorScheme",value:function(){return"maeditor"}},{key:"defaultConfig",value:function(){return{treeAlignHeight:400,genericRowHeight:24,nameFontSize:12,containerHeight:"100%",containerWidth:"100%",treeWidth:200,nameDivWidth:200,branchStrokeStyle:"black",nodeHandleRadius:4,nodeHandleClickRadius:40,nodeHandleFillStyle:"white",collapsedNodeHandleFillStyle:"black",rowConnectorDash:[2,2],structure:{width:400,height:400},handler:{},colorScheme:this.defaultColorScheme()}}},{key:"parseFasta",value:function(e){var t,n={},r=/^>(\S+)/;return e.split("\n").forEach((function(e){var i=r.exec(e);i?n[t=i[1]]="":t&&(n[t]=n[t]+e.replace(/[ \t]/g,""))})),n}},{key:"buildTreeIndex",value:function(e){var t=e.branches,n=e.root,r=void 0!==n,i=this.getRoots(t);if(0===i.length&&(t.length>0||!r))throw new Error("No root nodes");if(r){if(i.indexOf(n)<0)throw new Error("Specified root node is not a root")}else{if(1!==i.length)throw new Error("Multiple possible root nodes, and no root specified");n=i[0]}var a={},o={};a[n]=[],o[n]=0,t.forEach((function(e){var t=e[0],n=e[1],r=e[2];a[t]=a[t]||[],a[n]=a[n]||[],a[t].push(n),o[n]=r}));var s=[],u={},c={},l={},f=0,p=function(e){if(!e)throw new Error("All nodes must be named");if(u[e])throw new Error("All node names must be unique (duplicate '".concat(e,"')"));u[e]=!0,s.push(e)};return function e(t,n){l[t]=(void 0!==n?l[n]:0)+o[t],f=Math.max(f,l[t]);var r=a[t],i=[];return 2===r.length?(i=i.concat(e(r[0],t)),p(t),i=i.concat(e(r[1],t))):(p(t),r.forEach((function(n){return i=i.concat(e(n,t))}))),c[t]=i,[t].concat(i)}(n),{root:n,branches:t,children:a,descendants:c,branchLength:o,nodes:s,distFromRoot:l,maxDistFromRoot:f}}},{key:"getRoots",value:function(e){var t={},n={};return e.forEach((function(e){var r,i=function(e){if(Array.isArray(e))return e}(r=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),2!==n.length);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}(r)||function(e,t){if(e){if("string"==typeof e)return v(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,2):void 0}}(r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=i[1];t[i[0]]=t[a]=n[a]=!0})),Object.keys(t).filter((function(e){return!n[e]})).sort()}},{key:"buildAlignmentIndex",value:function(e){var t,n=this,r=e.rowData,i={},a={},o={},s={};Object.keys(r).forEach((function(e){var u=r[e];void 0!==t&&t!==u.length&&console.error("Inconsistent row lengths"),t=u.length;var c=[],l=0,f=n.rowAsArray(u);a[e]=f.map((function(e,t){"string"==typeof e&&(s[e]=!0);var r=n.isGapChar(e);return r||c.push(t),r?l:l++})),i[e]=f,o[e]=c}));var u=Object.keys(s).sort();return{alignColToSeqPos:a,seqPosToAlignCol:o,rowDataAsArray:i,columns:t,chars:u}}},{key:"isGapChar",value:function(e){return"string"==typeof e?"-"===e||"."===e:!e||0===Object.keys(e).length}},{key:"countNonGapChars",value:function(e){var t=this;return this.rowAsArray(e).filter((function(e){return!t.isGapChar(e)})).length}},{key:"rowAsArray",value:function(e){return"string"==typeof e?e.split(""):e}},{key:"render",value:function(){var e=this.props,t=e.classes,r=e.model;return n.createElement("div",{className:"App",ref:this.divRef},n.createElement("div",{className:t.appBar},n.createElement("input",{type:"file",ref:this.inputRef,onChange:this.handleSelectFile.bind(this),style:{display:"none"}}),n.createElement("div",{className:t.appBarLink},n.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/ihh/abrowse"},"GitHub"))),this.state.data&&n.createElement(i,{ref:this.msaRef,data:this.state.data,isGapChar:this.isGapChar.bind(this),config:this.state.config,view:this.state.view,treeIndex:this.state.treeIndex,alignIndex:this.state.alignIndex,computedTreeConfig:this.state.computedTreeConfig,computedFontConfig:this.state.computedFontConfig,model:r}))}},{key:"pdbRegex",get:function(){return/PDB; +(\S+) +(\S); ([0-9]+)-([0-9]+)/}},{key:"nameEncodedCoordRegex",get:function(){return/\/([0-9]+)-([0-9]+)$/}},{key:"sniffStockholmRegex",get:function(){return/^# STOCKHOLM/}},{key:"sniffFastaRegex",get:function(){return/^>/}},{key:"nAlignQueryParam",get:function(){return"alignnum"}},{key:"alignIdQueryParam",get:function(){return"alignid"}}]),l}(n.Component);return r($D)(a)}var ZD={datasets:[{name:"Spike_rec_bind",description:"Spike receptor binding domain",branches:[["node3","SPIKE_CVP67/326-526",.0044021],["node3","Q2QKN3_9BETC/326-526",545546e-9],["node13","node3",.184142],["node12","SPIKE_CVHN5/322-526",.284527],["node11","C6GHS2_9BETC/324-530",.169522],["node10","C0KYS1_9BETC/324-540",.100405],["node9","SPIKE_CVMA5/324-534",1e-9],["node9","Q9J3E7_9BETC/324-534",.00934477],["node10","node9",.176232],["node11","node10",.0888497],["node12","node11",.114123],["node13","node12",.0925582],["node61","node13",.00672813],["node50","A0A0A7UZR7_9BETC/327-532",.286551],["node19","R9QTH3_CVHSA/321-555",.0615283],["node18","A0A0K1Z074_CVHSA/321-555",774412e-9],["node18","A0A166ZL64_9NIDO/316-550",.0340301],["node19","node18",.0321586],["node31","node19",.0980282],["node30","ATO98157.1/317-568",.0214425],["node25","Q1T6X6_CVHSA/317-569",.00652008],["node24","SPIKE_CVHSA/317-569",.0019582],["node24","AAP13441.1/317-568",.00217293],["node25","node24",.00174427],["node29","node25",.14259],["node28","QHD43416.1/330-583",.0415892],["node28","QHR63300.2/330-583",.0492027],["node29","node28",.115808],["node30","node29",.0573048],["node31","node30",.0944591],["node39","node31",.698168],["node38","A0A088DJY6_9BETC/351-629",.790301],["node37","A0A1B3Q5W5_9NIDO/364-584",.270725],["node36","A3EXH4_BCHK9/360-565",.301569],["node36","SPIKE_BCHK9/363-567",.367537],["node37","node36",.079718],["node38","node37",.555752],["node39","node38",.177297],["node49","node39",.761404],["node48","U5LNM4_9BETC/366-630",.476639],["node43","A0A023Y9K3_9BETC/354-613",.201065],["node43","A3EXD9_BCHK5/387-650",.180317],["node47","node43",.151873],["node46","SPIKE_CVEMC/380-534",.256477],["node46","SPIKE_BC133/383-645",.29522],["node47","node46",.0192677],["node48","node47",.164582],["node49","node48",.462409],["node50","node49",.306269],["node60","node50",.131154],["node59","A0A0K2RVL1_9BETC/326-539",.192394],["node58","Q4VID5_CVHOC/339-550",.0579613],["node57","H9AA65_9BETC/326-540",.0419032],["node56","B7U2P4_9BETC/326-540",.0123283],["node56","Q06BD7_9BETC/326-540",.0113589],["node57","node56",.0297464],["node58","node57",.0150836],["node59","node58",.135815],["node60","node59",.0263022],["node61","node60",.00672813]],rowData:{"SPIKE_CVP67/326-526":"PDLP-NCDIEAWLNSKTV--SSPLNWERKIFSNCNFNMGRLMSFIQADSFGCNNIDASRLYGMCFGSITIDKFAIPNSRKVDLQVGKSGYLQSFNYKI--DTAVSSCQL-----------------YYSLPA-AN---VS------VTHYNPSSWNRRY--GFNNQS-F-------------GS-RGLHDAVY-SQQC-----------F---N----------TP---N----T------Y----------C------------------------PCRT--SQCIGG-------------------A-----G--TG------T-------------------CPVGTTVRKCF---AAVT--------KAT---K-----------CT------------------CWCQPDPS-------------T----------------------","Q2QKN3_9BETC/326-526":"PDLP-NCDIEAWLNSKTV--SSPLNWERKIFSNCNFNMGRLMSFIQADSFGCNNIDASRLYGMCFGSITIDKFAIPNSRKVDLQVGKSGYLQSFNYKI--DTAVSSCQL-----------------YYSLPA-AN---VS------VTHYNPSSWNRRY--GFNNQS-F-------------GS-RGLHDAVY-SQQC-----------F---N----------TP---N----T------Y----------C------------------------PCRT--SQCIGG-------------------A-----G--TG------T-------------------CPVGTTVRKCF---AAVT--------NAT---K-----------CT------------------CWCQPDPS-------------T----------------------","SPIKE_CVHN5/322-526":"PNLP-DCDIDNWLNNVSV--PSPLNWERRIFSNCNFNLSTLLRLVHVDSFSCNNLDKSKIFGSCFNSITVDKFAIPNRRRDDLQLGSSGFLQSSNYKI--DISSSSCQL-----------------YYSLPL-VN---VT------INNFNPSSWNRRY--GF---GSF-------------NL--SSYDVVY-SDHC-----------F---S----------VN---S----D------F----------C------------------------PCAD--PSVVNS-------------------C-----A--KS-KPPSAI-------------------CPAGTKYRHCD---------------LDT---TLYVKNW-----CR------------------CSCLPDPI-------------S----------------------","C6GHS2_9BETC/324-530":"RNLP-DCKIEEWLAANTV--PSPLNWERKTFQNCNFNLSSLLRFVQAESLSCSNIDASKVYGMCFGSISIDKFAIPNSRRVDLQLGKSGLLQSFNYKI--STRATSCQL-----------------YYSLAQ-NN---VT------VINHNPSSWNRRY--GFNDVATF-------------GS--GIHDVAY-AEAC-----------F---T----------VG---A----S------Y----------C------------------------PCAK--PSIVYS-------------------C-----V--TG-KPKSAN-------------------CPTGTSHRECN---------------VQA---S------GFKHKCD------------------CTCNPSPL-------------T----------------------","C0KYS1_9BETC/324-540":"PNLP-DCKIEEWLTAKSV--PSPLNWERRTFQNCNFNLSSLLRYVQAESLSCNNIDASKVYGMCFGSVSVDKFAIPRSRQIDLQIGNSGFLQTANYKI--DTAATSCQL-----------------YYSLPK-NN---VT------INNYNPSSWNRRY--GFNDAGVF-------------GK--SKHDVAY-AQQC-----------F---T----------VR---P----S------Y----------C------------------------PCAQ--PDIVSA-------------------C-----T--SQTKPMSAY-------------------CPTGTIHRECSLWN----GPHLRSARVGSGTYT-----------CE------------------CTCKPNPF-------------D----------------------","SPIKE_CVMA5/324-534":"ANLP-ACNIEEWLTARSV--PSPLNWERKTFQNCNFNLSSLLRYVQAESLFCNNIDASKVYGRCFGSISVDKFAVPRSRQVDLQLGNSGFLQTANYKI--DTAATSCQL-----------------HYTLPK-NN---VT------INNHNPSSWNRRY--GFNDAGVF-------------GK--NQHDVVY-AQQC-----------F---T----------VR---S----S------Y----------C------------------------PCAQ--PDIVSP-------------------C-----T--TQTKPKSAF----------------------------VN---------------VGD---H-----------CEGLGVLEDNCGNADPHKG-CICANNSF-------------I----------------------","Q9J3E7_9BETC/324-534":"ANLP-ACNIEEWLTARSV--PSPLNWERKTFQNCNFNLSSLLRYVQAESLFCNNMDASKVYGRCFGSISVDKFAVPRSRQVDLQLGNSGFLQTANYKI--DTAATSCQL-----------------HYTLPK-NN---VT------INNHNPSSWNRRY--GFNDAGVF-------------GK--NQHDVVY-AQQC-----------F---T----------VR---S----S------Y----------C------------------------PCAQ--PDIVSP-------------------C-----T--TQTKPKSAF----------------------------VN---------------VGD---H-----------CEGLGVLEDNCGNADPHKG-CICANNSF-------------I----------------------","A0A0A7UZR7_9BETC/327-532":"PNLP-DCEIEQWLNDPQV--PSPISWERKTFSNCNFNMSSLLSKVRATSFSCNNIDASKIYDMCFGSITIDKFAIPNSRKVDLQFGSSGYIQNYNYRL--DQSATSCQL-----------------YYGIPA-NN---VT------VTKKNPSGWNNRY--GFVE---FKPL--------NIGQNYNKYSAIY-STMC-----------F---N----------VP---N----D------Y----------C------------------------PCK------LGCP-----TG-----TVERPQI-----G--TS------TSGQPI---------YDCPGYPWLTS--------------------------------------SA------------------CKQTPATV------------------------------------","R9QTH3_CVHSA/321-555":"PNITNRCPFDRVFNASRF--PSVYAWERTKISDCVADYTVLYNSTSFSTFKCYGVSPSKLIDLCFTSVYADTFLIRFSEVRQIAPGETGVIADYNYKLPDEFTGCVIAW-----------------NTANQD-RG---Q-----------YYYRSSRKT--KLKP---FERD-LSSD------------------ENG-----------V---R----------TL---S----T------YDFYP------SVPL----E-YQATRV------VVLSFE------LLNA-----PA-----TV----C-----G--PK------LSTSLIKNQCVNFNFNGLKGTGVLTD--------------------------------------SS------------------KKFQSFQQFGRDASDFTDSVRDPQTLQ-----------------","A0A0K1Z074_CVHSA/321-555":"PNITNLCPFDKVFNATRF--PSVYAWERTKISDCVADYTVFYNSTSFSTFNCYGVSPSKLIDLCFTSVYADTFLIRFSEVRQVAPGQTGVIADYNYKLPDDFTGCVIAW-----------------NTAKYD-VG---S-----------YFYRSHRSS--KLKP---FERD-LSSE------------------ENG-----------A---R----------TL---S----T------YDFNQ------NVPL----E-YQATRV------VVLSFE------LLNA-----PA-----TV----C-----G--PK------LSTSLVKNQCVNFNFNGFKGTGVLTD--------------------------------------SS------------------KTFQSFQQFGRDASDFTDSVRDPKTLQ-----------------","A0A166ZL64_9NIDO/316-550":"PNITNVCPFDKVFNATRF--PSVYAWERTKISDCVADYTVFYNSTSFSTFNCYGVSPSKLIDLCFTSVYADTFLIRFSEVRQVAPGQTGVIADYNYKLPDDFIGCVIAW-----------------NTAKQD-VG---S-----------YFYRSHRSS--KLKP---FERD-LSSE------------------ENG-----------V---L----------TL---S----T------YDFNQ------NVPL----E-YQATRV------VVLSFE------LLNA-----PA-----TV----C-----G--PK------LSTPLVKNQCVNFNFNGLKGTGVLTD--------------------------------------SS------------------KTFQSFQQFGRDASDFTDSVRDPQTLQ-----------------","ATO98157.1/317-568":"PNITNLCPFGEVFNATTF--PSVYAWERKRISNCVADYSVLYNSTSFSTFKCYGVSATKLNDLCFSNVYADSFVVKGDDVRQIAPGQTGVIADYNYKLPDDFLGCVLAW-----------------NTNSKD-SS---TS------GNYNYLYRWVRRS--KLNP---YERD-LSNDIYSPGGQ---SCSAI--GPNC-----------Y---N----------PL---R----P------YGFFT------TAGV----G-HQPYRV------VVLSFE------LLNA-----PA-----TV----C-----G--PK------LSTDLIKNQCVNFNFNGLTGTGVLTS--------------------------------------SS------------------KRFQPFQQFGRDVSDFTDSVRDPKTS------------------","Q1T6X6_CVHSA/317-569":"PNITNLCPFGEVFNATKF--PSVYAWERKKISNCVADYSVLYNSTFFSTFKCYGVSATKLNDLCFSNVYADSFVVKGDDVRQIAPGQTGVIADYNYKLPDDFMGCVLAW-----------------NTRNID-AT---ST------GNYNYKYRCLRHG--KLRP---FERD-ISNVPFSPDGK---PCTPP--AFNC-----------Y---W----------PL---N----D------YGFYT------TTGI----G-YQPYRV------VVLSFE------LLNA-----PA-----TV----C-----G--PK------LSTDLIKNQCVNFNFNGLTGTGVLTP--------------------------------------SS------------------KRFQPFQQFGRDVSDFTDSVRDPKTSE-----------------","SPIKE_CVHSA/317-569":"PNITNLCPFGEVFNATKF--PSVYAWERKKISNCVADYSVLYNSTFFSTFKCYGVSATKLNDLCFSNVYADSFVVKGDDVRQIAPGQTGVIADYNYKLPDDFMGCVLAW-----------------NTRNID-AT---ST------GNYNYKYRYLRHG--KLRP---FERD-ISNVPFSPDGK---PCTPP--ALNC-----------Y---W----------PL---N----D------YGFYT------TTGI----G-YQPYRV------VVLSFE------LLNA-----PA-----TV----C-----G--PK------LSTDLIKNQCVNFNFNGLTGTGVLTP--------------------------------------SS------------------KRFQPFQQFGRDVSDFTDSVRDPKTSE-----------------","AAP13441.1/317-568":"PNITNLCPFGEVFNATKF--PSVYAWERKKISNCVADYSVLYNSTFFSTFKCYGVSATKLNDLCFSNVYADSFVVKGDDVRQIAPGQTGVIADYNYKLPDDFMGCVLAW-----------------NTRNID-AT---ST------GNYNYKYRYLRHG--KLRP---FERD-ISNVPFSPDGK---PCTPP--ALNC-----------Y---W----------PL---N----D------YGFYT------TTGI----G-YQPYRV------VVLSFE------LLNA-----PA-----TV----C-----G--PK------LSTDLIKNQCVNFNFNGLTGTGVLTP--------------------------------------SS------------------KRFQPFQQFGRDVSDFTDSVRDPKTS------------------","QHD43416.1/330-583":"PNITNLCPFGEVFNATRF--ASVYAWNRKRISNCVADYSVLYNSASFSTFKCYGVSPTKLNDLCFTNVYADSFVIRGDEVRQIAPGQTGKIADYNYKLPDDFTGCVIAW-----------------NSNNLD-SK---VG------GNYNYLYRLFRKS--NLKP---FERD-ISTEIYQAGST---PCNGV-EGFNC-----------Y---F----------PL---Q----S------YGFQP------TNGV----G-YQPYRV------VVLSFE------LLHA-----PA-----TV----C-----G--PK------KSTNLVKNKCVNFNFNGLTGTGVLTE--------------------------------------SN------------------KKFLPFQQFGRDIADTTDAVRDPQTLE-----------------","QHR63300.2/330-583":"PNITNLCPFGEVFNATTF--ASVYAWNRKRISNCVADYSVLYNSTSFSTFKCYGVSPTKLNDLCFTNVYADSFVITGDEVRQIAPGQTGKIADYNYKLPDDFTGCVIAW-----------------NSKHID-AK---EG------GNFNYLYRLFRKA--NLKP---FERD-ISTEIYQAGSK---PCNGQ-TGLNC-----------Y---Y----------PL---Y----R------YGFYP------TDGV----G-HQPYRV------VVLSFE------LLNA-----PA-----TV----C-----G--PK------KSTNLVKNKCVNFNFNGLTGTGVLTE--------------------------------------SN------------------KKFLPFQQFGRDIADTTDAVRDPQTLE-----------------","A0A088DJY6_9BETC/351-629":"ADVSAECPFQSLINVTEATIPSPAFWRRHYVRNCNYDISVFTDNADVYSLQCYGVAPSSLADMCWEEAHIDYMKISEKDIFSFKPSGAGDFAKYNYKLPSDFMGCTVVFTNQELTCNATSGQLCHVYTNNLT-NYPAEAT------AWDKSHYESIERY--QMWS---SENV-YNCELQEVGPQ---QFNRM--PRNC-----------YVRSN----------NS---N----D------Y----------WQPM----S-FRG--VNSLMVAMAITLK------PTRT-----SA-----TV----C-----GY-KQ------KTTPLVLNECITYHIYGYKGTGVIVS--------------------------------------AN------------------YTFQSFQTVQLTSTGSLHSFKYNNTIY-----------------","A0A1B3Q5W5_9NIDO/364-584":"---SCAIPYTTIL---EP--PSPAAWVRATISNCTFDFESLLRTLPTYNLKCYGISPARLSTMCYAGVTLDIFKLNTTHLSNMLGSVPDAVSIYNYALPSNFYGCVHAY-----------------HLNSTT-PY---AV------AVPPGAY-----------------------PIKPGGRQ---LFNSF--VSQV-----------L---D----------SP---T----S------Q----------CTPA----N-CMG--V------VVIGLT------PASG-----SN-----LV----C-----P--KA------NDTQVIEGQCVKYNFYGYAGTGVINQ--------------------------------------SD------------------LAIPNNKLFVTSKSGAVLAVRAGD--------------------","A3EXH4_BCHK9/360-565":"----------DIV---RP--PQPVVWRRYTVTSCSFDFEAIVNRLPTFELKCFGISPARLAQMCYSSVTLDLFRANTTHLANMLGGVPDLFSKYNYALPSNFYGCVHAY-----------------YINDTNKDY---AI------AQRWPAT-----------------------PITPGGRQ---PYSDY--VRTV-----------L---N----------TP---N----P------S----------CTTL----T-CFG--V------VVISLK------PASG-----RK-----LV----C-----P--SV------NDTDMRTNECVKYNLYGYTGTGVFNV--------------------------------------ST------------------LTIPDSKLFVANGAG-----------------------------","SPIKE_BCHK9/363-567":"----------VLQ---DP--PQPVVWRRYMLYDCVFDFTVVVDSLPTHQLQCYGVSPRRLASMCYGSVTLDVMRINETHLNNLFNRVPDTFSLYNYALPDNFYGCLHAF-----------------YLNSTA-PY---AV------ANR---F-----------------------PIKPGGRQ---SNSAF--IDTV-----------I---N----------A---------A------H----------YSPF----SYVYG--L------AVITLK------PAAG-----SK-----LV----C-----P--VA------NDTVVITDRCVQYNLYGYTGTGVLSK--------------------------------------NT-----------------SLVIPDGKVFTASSTGTII--------------------------","U5LNM4_9BETC/366-630":"AELT-ECDLDVLFKN-DA--PIIANYSRRVFTNCNYNLTKLLSLVQVDEFVCHKTTPEALATGCYSSLTVDWFALPFSMKSTLAIGSAEAISMFNYNQ--DYSNPTCRI-----------------HAAVTA-NV---ST---ALNFTANANYAYISRC--QGVD---GK------PILLQPGQ-MT---NI--ACRSGVLARPSDADYF---G----------YSFQGR----N------Y----YLGRKSYKPKTDEGD-VQM--V------YVITPK------YDKG-----PD-----TV----CPLKDMG-AAS------SSLDGLLGQCIDYDIHGVVGRGVFQV--------------------------------------CN------------------TTGIASQIFVYDGFGNIIGFHS----------------------","A0A023Y9K3_9BETC/354-613":"QG-T-ECDFSPLLKD-EP--PQVYNFSRLVFTNCNYNLTKLLALFQVSQFSCHQVSPSALASGCYSSLTVDYFAYPTYMSSYLQQGSTGEISQFNYKQ--DFSNPTCRI-----------------LATVPA-NL---SASGL---LPKPSNYVWLSECYQNSFT---GKNF-----QYVKAGQ-YTPCLGL--AANG-----------F---E----------KSYQTHRDPVS------K----LAVTGVVTPMT--SA-LQM--A------FIISVQ------YGTD-----SN-----SV----CPMQAVR--ND------TSVDDKLGLCIDYSLYGITGRGVFQN--------------------------------------CT------------------AVGIRQQRFVYDSFDNLVGYHA----------------------","A3EXD9_BCHK5/387-650":"ATTQ-ECDFTPMLTG-TP--PPIYDFKRLVFTNCNYNLTKLLSLFQVSEFSCHQVSPSSLATGCYSSLTVDYFAYSTDMSSYLQPGSAGEIVQFNYKQ--DFSNPTCRV-----------------LATVPT-NL---TT------ITKSSNYVHLTECYKSTAY---GKNY-----LYNAPGG-YTPCLSL--ASRG-----------F---T----------TNRQSH----SLELPDGY----LVTTGSVYPVN--GN-LQM--A------FIISVQ------YGTD-----TN-----SV----CPMQALR--ND------TSIEDKLDVCVEYSLHGITGRGVFHN--------------------------------------CT------------------SVGLRNQRFVYDTFDNLVGYHS-----DNGN-------------","SPIKE_CVEMC/380-534":"G--V-ECDFSPLLSG-TP--PQVYNFKRLVFTNCNYNLTKLLSLFSVNDFTCSQISPAAIASNCYSSLILDYFSYPLSMKSDLSVSSAGPISQFNYKQ--SFSNPTCLI-----------------LATVPH-NL---TT------ITKPLKYSYINKC--SRFL---SDDR-TEVPQLVNANQ-YSPCVSI--VP--------------------------------------------------------------------------------------------------------------------------S------TV------------------------------------------------------------------------------------------------------------------------------","SPIKE_BC133/383-645":"PNVT-ECDFSPMLTG-VA--PQVYNFKRLVFSNCNYNLTKLLSLFAVDEFSCNGISPDAIARGCYSTLTVDYFAYPLSMKSYIRPGSAGNIPLYNYKQ--SFANPTCRV-----------------MASVPD-NV----T------ITKPGAYGYISKC--SRLT---GVNQDIETPLYINPGE-YSICRDF--APLG-----------F---SEDGQVFKRTLTQFEGG----G------L----LIGVGTRVPMT--AN-LEM--G------FVISVQ------YGTG-----TD-----SV----CPMLDLG--DS------LTITNRLGKCVDYSLYGVTGRGVFQN--------------------------------------CT------------------AVGVKQQRFVYDSFDNLVG-------------------------","A0A0K2RVL1_9BETC/326-539":"PNLP-DCNMEDWLSAPTV--ASPLNWERRTFSNCNFNMSSLLSLIQADSFSCSNIDAAKLYGMCFGSVTIDKFAIPNNRKVDLQLGNLGYLQSFNYRI--DTTATSCQL-----------------FYSLGA-DN---VT------VTRSNPSAWNRRY--GFND-TMFKPQ--------PAGF-FTNHDVVY-SKQC-----------F---K----------VP---N----T------Y----------C------------------------PCKNNGATCVGNGVSAGVSG-----TT----T-----G--SG------T-------------------CPVGTSYRTCF---------------NPI---Q-----------CA------------------CTCDPEPI-------------N----------------------","Q4VID5_CVHOC/339-550":"PDLP-NCNIEAWLNDKSV--PSPLNWERKTFSNCNFNMSSLMSFIQADSFTCNNIDAAKIYGMCFSSITIDKFAIPNRRKVDLQLGNLGYLQSSNYRI--DTTATSCQL-----------------YYNLPA-AN---VS------VSRFNPSTWNKRF--GFIEDSVFVPQ--------PTGV-FTNHSVVY-AQHC-----------F---K----------AP---K----N------F----------C------------------------PCKLNGSC----------PG-----KN----N-----G--IG------T-------------------CPAGTNYLTCD---------------N--------------------------------------LCTLDPI-------------T---------FKAPGTYKCPQTK","H9AA65_9BETC/326-540":"PNLP-DCNIEAWLNDKSV--PSPLNWERKTFSNCNFNMSSLMSFIQADSFTCNNIDAAKIYGMCFSSITIDKFAIPNGRKVDLQLGNLGYLQSFNYKI--DTSATSCQL-----------------YYNLPA-AN---VS------VSRLNPSTWNRRF--GFTEQSVFKPQ--------PAGF-FTAHDVVY-AQHC-----------F---K----------AP---T----T------F----------C------------------------PCKLNGSLCVGSG-----SGVDAGFKH----T-----G--IG------T-------------------CPAGTNYLTCY---------------NSV---Q-----------CN------------------CQCTPDPI-------------L----------------------","B7U2P4_9BETC/326-540":"PNLP-DCNIEAWLNDKSV--PSPLNWERKTFSNCNFNMSSLMSFIQADSFTCNNIDAAKIYGMCFSSITIDKFAIPNGRKVDLQLGNLGYLQSFNYRI--DTTATSCQL-----------------YYNLPA-AN---VS------VSRFNPSTWNRRF--GFTEQSVFKPQ--------PAGV-FTDHDVVY-AQHC-----------F---K----------AP---T----N------F----------C------------------------PCKLDGSLCVGSG-----SGIDAGYKN----T-----G--IG------T-------------------CPAGTNYLTCH---------------NAA---Q-----------CD------------------CLCTPDPI-------------T----------------------","Q06BD7_9BETC/326-540":"PNLP-DCNIEAWLNDKSV--PSPLNWERKTFSNCNFNMSSLMSFIQADSFTCNNIDAAKIYGMCFSSITIDKFAIPNGRKVDLQLGNLGYLQSFNYRI--DTTATSCQL-----------------YYNLPA-AN---VS------VSRFNPSTWNRRF--GFTEQSVFKPQ--------PAGV-FTDHDVVY-AQHC-----------F---K----------AP---T----N------F----------C------------------------PCKLDGSLCVGNG-----PGIDAGYKT----S-----G--IG------T-------------------CPAGTNYLTCH---------------NAA---Q-----------CN------------------CLCTPDPI-------------T----------------------"},structure:{"SPIKE_CVHSA/317-569":[{pdb:"5wrg",chains:[{startPos:317,chain:"A"},{startPos:317,chain:"B"},{startPos:317,chain:"C"}]},{pdb:"5xlr",chains:[{startPos:317,chain:"A"}]}]}},{name:"Corona_S2",url:{stockholm:"%PUBLIC_URL%/PF01601_full.txt"}}],config:{containerHeight:"1000px",handler:{click:function(e){console.warn("Click ".concat(e.node," column ").concat(e.column).concat(e.isGap?"":", position ".concat(e.seqPos)," (").concat(e.c,")"))}}}},JD=function(e){var t=e.jbrequire,n=t("mobx-react").observer,r=t("react"),i=t(XD);return n((function(e){var t=e.model;return t.initialized?r.createElement(i,Object.assign({},ZD,{model:t})):null}))},eA=function(e){var t=e.load;return new((0,e.jbrequire)("@jbrowse/core/pluggableElementTypes/ViewType"))({name:"MsaView",stateModel:t(D),ReactComponent:t(JD)})};e.default=function(e){d(r,e);var t=g(r);function r(){var e;return s(this,r),(e=t.apply(this,arguments)).name="MsaViewPlugin",e}return c(r,[{key:"install",value:function(e){var t=e.jbrequire;e.addViewType((function(){return t(eA)}))}},{key:"configure",value:function(e){var t=e.rootModel;n.isAbstractMenuManager(t)&&t.appendToSubMenu(["File","Add"],{label:"Multiple sequence alignment view",icon:_,onClick:function(e){e.addView("MsaView",{})}})}}]),r}(t),Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=jbrowse-plugin-msaview.umd.production.min.js.map
